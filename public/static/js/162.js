webpackJsonp([162],{"5V1k":function(e,a){},eB79:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var p=t("3cXf"),o=t.n(p),r=t("IHPB"),i=t.n(r),l=t("lC5x"),s=t.n(l),n=t("aA9S"),c=t.n(n),_=t("rVsN"),u=t.n(_),d=t("KH7x"),m=t.n(d),b=t("J0Oq"),v=t.n(b),k=t("4YfN"),f=t.n(k),h=t("bSIt"),g={data:function(){return{activeName:"user",link:"",arr:["app_app_id","app_app_secret","amap_key","coach_app_app_id","coach_app_app_secret","coach_android_link","coach_ios_link"],arr1:["app_download_img","android_link","ios_link"],subForm:{app_app_id:"",app_app_secret:"",amap_key:"",app_download_img:[],android_link:"",ios_link:"",coach_app_app_id:"",coach_app_app_secret:"",coach_android_link:"",coach_ios_link:""},subFormRules:{app_app_id:{required:!0,validator:this.$reg.isNotNull,text:"微信开放平台移动应用AppID",reg_type:2,trigger:"blur"},app_app_secret:{required:!0,validator:this.$reg.isNotNull,text:"微信开放平台移动应用AppSecret",reg_type:2,trigger:"blur"},amap_key:{required:!0,validator:this.$reg.isNotNull,text:"高德地图key",reg_type:2,trigger:"blur"},coach_app_app_id:{required:!0,validator:this.$reg.isNotNull,text:"微信开放平台移动应用AppID",reg_type:2,trigger:"blur"},coach_app_app_secret:{required:!0,validator:this.$reg.isNotNull,text:"微信开放平台移动应用AppSecret",reg_type:2,trigger:"blur"}}}},created:function(){var e=window.location.href.split("/#")[0];this.link=e+"/h5/?#/user/pages/app-download",this.getFormInfo()},computed:f()({},Object(h.e)({routesItem:function(e){return e.routes}})),methods:{getFormInfo:function(){var e=this;return v()(s.a.mark(function a(){var t,p,o,r,i,l,n;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.all([e.$api.system.configInfo(),e.$api.system.configInfoSchedule()]);case 2:t=a.sent,p=m()(t,2),o=p[0],r=p[1],i=e.$util.pick(o.data,e.arr),l=e.$util.pick(r.data,e.arr1),(n=c()({},i,l)).app_download_img=n.app_download_img&&n.app_download_img.length>0?[{url:n.app_download_img}]:[],e.subForm=n;case 11:case"end":return a.stop()}},a,e)}))()},getCover:function(e,a){this.subForm[a]=e},selectedFiles:function(e,a){var t;(t=this.subForm[a]).push.apply(t,i()(e))},moveFiles:function(e,a){this.subForm[a]=e},handleClick:function(e){var a=e.name;this.activeName=a},submitFormInfo:function(){var e=this;return v()(s.a.mark(function a(){var t,p,r,i;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t=!0,e.$refs.subForm.validate(function(e){e||(t=!1)}),t){a.next=4;break}return a.abrupt("return");case 4:if((p=JSON.parse(o()(e.subForm))).app_download_img=p.app_download_img&&p.app_download_img.length>0?p.app_download_img[0].url:"",r=e.$util.pick(p,e.arr),!((i=e.$util.pick(p,e.arr1)).android_link||i.ios_link||i.coach_android_link||i.coach_ios_link)||i.app_download_img){a.next=11;break}return e.$message.error("请上传APP下载引导图"),a.abrupt("return");case 11:return a.next=13,u.a.all([e.$api.system.configUpdate(r),e.$api.system.configUpdateSchedule(i)]);case 13:e.$message.success(e.$t("tips.successSub"));case 14:case"end":return a.stop()}},a,e)}))()}}},F={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"lb-system-app"},[t("top-nav"),e._v(" "),t("div",{staticClass:"page-main"},[e.routesItem.auth.coachport?t("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(a){e.activeName=a},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"用户端",name:"user"}}),e._v(" "),t("el-tab-pane",{attrs:{label:e.$t("action.attendantName")+"端",name:"technician"}})],1):e._e(),e._v(" "),t("lb-tips",[e._v("\n      APP下载页面链接："+e._s(e.link+("user"===e.activeName?"":"?coach=1"))+"\n    ")]),e._v(" "),t("el-form",{ref:"subForm",staticClass:"config-form",attrs:{model:e.subForm,rules:e.subFormRules,"label-width":"160px"},nativeOn:{submit:function(e){e.preventDefault()}}},["user"===e.activeName?t("block",[t("el-form-item",{attrs:{label:"AppID",prop:"app_app_id"}},[t("el-input",{attrs:{placeholder:"请输入微信开放平台移动应用AppID"},model:{value:e.subForm.app_app_id,callback:function(a){e.$set(e.subForm,"app_app_id",a)},expression:"subForm.app_app_id"}}),e._v(" "),t("lb-tool-tips",[e._v("请输入微信开放平台申请移动应用的AppID，输入错误会影响APP的正常使用，谨慎修改")])],1),e._v(" "),t("el-form-item",{attrs:{label:"AppSecret",prop:"app_app_secret"}},[t("el-input",{attrs:{placeholder:"请输入微信开放平台移动应用AppSecret"},model:{value:e.subForm.app_app_secret,callback:function(a){e.$set(e.subForm,"app_app_secret",a)},expression:"subForm.app_app_secret"}}),e._v(" "),t("lb-tool-tips",[e._v("请输入微信开放平台申请移动应用的AppSecret，输入错误会影响APP的正常使用，谨慎修改")])],1),e._v(" "),e.routesItem.auth.map?t("el-form-item",{attrs:{label:"高德地图key",prop:"amap_key"}},[t("el-input",{attrs:{placeholder:"请输入高德地图key"},model:{value:e.subForm.amap_key,callback:function(a){e.$set(e.subForm,"amap_key",a)},expression:"subForm.amap_key"}}),e._v(" "),t("lb-tool-tips",[e._v("请输入高德地图key，输入错误会影响APP端“地图找人”页面的正常使用，谨慎修改")])],1):e._e(),e._v(" "),t("el-form-item",{attrs:{label:"APP下载引导图",prop:"app_download_img"}},[t("lb-cover",{attrs:{fileList:e.subForm.app_download_img},on:{selectedFiles:function(a){return e.getCover(a,"app_download_img")}}}),e._v(" "),t("lb-tool-tips",[e._v("图片建议尺寸：1198 * 2320，图片内容建议居中展示\n          ")])],1),e._v(" "),t("el-form-item",{attrs:{label:"Android下载链接",prop:"android_link"}},[t("el-input",{attrs:{placeholder:"请输入Android下载链接"},model:{value:e.subForm.android_link,callback:function(a){e.$set(e.subForm,"android_link",a)},expression:"subForm.android_link"}}),e._v(" "),t("lb-tool-tips",[e._v("建议将安卓包上传至云存储，链接必须是apk文件")])],1),e._v(" "),t("el-form-item",{attrs:{label:"IOS下载链接",prop:"ios_link"}},[t("el-input",{attrs:{placeholder:"请输入IOS下载链接"},model:{value:e.subForm.ios_link,callback:function(a){e.$set(e.subForm,"ios_link",a)},expression:"subForm.ios_link"}}),e._v(" "),t("lb-tool-tips",[e._v("例如：https://apps.apple.com/cn/app/具体ID值，可通过AppStore分享应用链接查看")])],1)],1):e._e(),e._v(" "),"technician"===e.activeName?t("block",[t("el-form-item",{attrs:{label:"AppID",prop:"coach_app_app_id"}},[t("el-input",{attrs:{placeholder:"请输入微信开放平台移动应用AppID"},model:{value:e.subForm.coach_app_app_id,callback:function(a){e.$set(e.subForm,"coach_app_app_id",a)},expression:"subForm.coach_app_app_id"}}),e._v(" "),t("lb-tool-tips",[e._v("请输入微信开放平台申请移动应用的AppID，输入错误会影响APP的正常使用，谨慎修改")])],1),e._v(" "),t("el-form-item",{attrs:{label:"AppSecret",prop:"coach_app_app_secret"}},[t("el-input",{attrs:{placeholder:"请输入微信开放平台移动应用AppSecret"},model:{value:e.subForm.coach_app_app_secret,callback:function(a){e.$set(e.subForm,"coach_app_app_secret",a)},expression:"subForm.coach_app_app_secret"}}),e._v(" "),t("lb-tool-tips",[e._v("请输入微信开放平台申请移动应用的AppSecret，输入错误会影响APP的正常使用，谨慎修改")])],1),e._v(" "),t("el-form-item",{attrs:{label:"APP下载引导图",prop:"app_download_img"}},[t("lb-cover",{attrs:{fileList:e.subForm.app_download_img},on:{selectedFiles:function(a){return e.getCover(a,"app_download_img")}}}),e._v(" "),t("lb-tool-tips",[e._v("图片建议尺寸：1198 * 2320，图片内容建议居中展示\n          ")])],1),e._v(" "),t("el-form-item",{attrs:{label:"Android下载链接",prop:"coach_android_link"}},[t("el-input",{attrs:{placeholder:"请输入Android下载链接"},model:{value:e.subForm.coach_android_link,callback:function(a){e.$set(e.subForm,"coach_android_link",a)},expression:"subForm.coach_android_link"}}),e._v(" "),t("lb-tool-tips",[e._v("建议将安卓包上传至云存储，链接必须是apk文件\n          ")])],1),e._v(" "),t("el-form-item",{attrs:{label:"IOS下载链接",prop:"coach_ios_link"}},[t("el-input",{attrs:{placeholder:"请输入IOS下载链接"},model:{value:e.subForm.coach_ios_link,callback:function(a){e.$set(e.subForm,"coach_ios_link",a)},expression:"subForm.coach_ios_link"}}),e._v(" "),t("lb-tool-tips",[e._v("例如：https://apps.apple.com/cn/app/具体ID值，可通过AppStore分享应用链接查看")])],1)],1):e._e(),e._v(" "),t("el-form-item",[t("lb-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:e.submitFormInfo}},[e._v(e._s(e.$t("action.submit")))])],1)],1)],1)],1)},staticRenderFns:[]};var A=t("C7Lr")(g,F,!1,function(e){t("5V1k")},"data-v-29f3c426",null);a.default=A.exports}});