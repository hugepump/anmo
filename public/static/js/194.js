webpackJsonp([194],{dHl5:function(t,e){},"h3/b":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("p00s"),s=a.n(n),r=a("3cXf"),i=a.n(r),o=a("4YfN"),l=a.n(o),c=a("lC5x"),u=a.n(c),m=a("J0Oq"),p=a.n(m),d=a("PxTW"),_=a.n(d),h=a("bSIt"),v={data:function(){var t=this;return{pickerOptions:{disabledDate:function(t){return t.getTime()>1e3*(_()(_()(Date.now()).format("YYYY-MM-DD")).unix()+86400-1)}},pagePermission:[],total_cash:0,unrecorded_cash:0,wallet_cash:0,total_wallet_cash:0,today_cash:0,showDialog:!1,payList:[],statusTypeList:[{label:"全部",value:0},{label:"未入账",value:1},{label:"已入账",value:2}],agentCashTypeList:[{label:"全部",value:0},{label:"一级"+this.$t("action.resellerName"),value:1},{label:"二级"+this.$t("action.resellerName"),value:14},{label:this.$t("action.brokerName"),value:9},{label:this.$t("action.attendantName"),value:3},{label:this.$t("action.attendantName")+"车费",value:8},{label:this.$t("action.attendantName")+"空单费",value:17},{label:this.$t("action.attendantName")+"退款手续费",value:18},{label:"业务员",value:12},{label:this.$t("action.channelName"),value:10},{label:this.$t("action.agentName"),value:2},{label:this.$t("action.agentName")+"空单费",value:19},{label:this.$t("action.agentName")+"退款手续费",value:20}],statusType:{1:"未入账",2:"已入账"},cityType:{1:"市",2:"区县",3:"省"},adapayStatusType:{0:"审核中",1:"审核通过",2:"审核失败"},heepayStatusType:{0:"审核中",1:"审核通过","-1":"审核失败"},colorType:{0:"c-link",1:"c-success",2:"c-warning"},loading:!0,searchForm:{page:1,limit:10,order_code:"",top_name:"",status:0,type:0,start_time:"",end_time:""},tableData:[],total:0,cash_mini:"",tax_point:"",personal_income_tax_text:"",tax_price:"",alipayForm:{},adapayForm:{},heepayForm:{},subForm:{apply_transfer:"",apply_price:"",text:""},subFormRules:{apply_transfer:{required:!0,type:"number",message:"请选择提现方式",trigger:"blur"},apply_price:{required:!0,validator:function(e,a,n){var s=t.cash_mini,r=/^(([0-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/;!a||!r.test(a)||1*a<1*s?n(new Error(a?r.test(a)?"请输入正确的提现金额，不能小于"+s:"请输入正确的提现金额，最多保留2位小数":"请输入提现金额")):n()},text:"提现金额",trigger:"blur"}},downloadLoading:!1}},watch:{"subForm.apply_price":function(t,e){var a=this.tax_point;this.tax_price=t&&/^(([0-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/.test(t)?(a/100*t).toFixed(2):0}},created:function(){var t=this;return p()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.routesItem.routes.map(function(e){"/finance"===e.path&&e.children.map(function(e){"FinanceRecord"===e.name&&(t.pagePermission=e.meta.pagePermission[0].auth)})}),e.next=3,t.getBaseInfo();case 3:t.getTableDataList();case 4:case"end":return e.stop()}},e,t)}))()},computed:l()({},Object(h.e)({routesItem:function(t){return t.routes}})),methods:{getBaseInfo:function(){var t=this;return p()(u.a.mark(function e(){var a,n,s,r,i,o,l,c,m,p,d;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.agent.getAdminAliAccount();case 2:if(a=e.sent,n=a.data,t.alipayForm=n,s=t.routesItem.auth,r=s.adapay,i=void 0!==r&&r,o=s.heepay,l=void 0!==o&&o,!i){e.next=12;break}return e.next=9,t.$api.adapay.adminAdapay();case 9:c=e.sent,m=c.data,t.adapayForm=m;case 12:if(!l){e.next=18;break}return e.next=15,t.$api.heepay.adminHeepay();case 15:p=e.sent,d=p.data,t.heepayForm=null===d?{}:d;case 18:case"end":return e.stop()}},e,t)}))()},resetForm:function(t){this.$refs[t].resetFields(),this.searchForm.type=0,this.getTableDataList(1)},handleSizeChange:function(t){this.searchForm.limit=t,this.handleCurrentChange(1)},handleCurrentChange:function(t){this.searchForm.page=t,this.getTableDataList()},getTableDataList:function(t){var e=this;return p()(u.a.mark(function a(){var n,s,r,o,l;return u.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t&&(e.searchForm.page=t),!(n=JSON.parse(i()(e.searchForm))).top_name||n.type){a.next=5;break}return e.$message.error("搜索佣金获得者时需选择佣金类型哦！"),a.abrupt("return");case 5:return e.tableData=[],e.loading=!0,(s=n.start_time)&&s.length>1?(n.start_time=s[0]/1e3,n.end_time=s[1]/1e3):(n.start_time="",n.end_time=""),a.next=11,e.$api.agent.cashList(n);case 11:if(r=a.sent,o=r.code,l=r.data,e.loading=!1,200===o){a.next=17;break}return a.abrupt("return");case 17:e.tableData=l.data,e.total=l.total,["total_cash","unrecorded_cash","wallet_cash","today_cash"].map(function(t){e[t]=l[t]}),e.total_wallet_cash=(1*l.total_cash+1*l.wallet_cash).toFixed(2),e.subForm.apply_price=e.total_cash;case 23:case"end":return a.stop()}},a,e)}))()},confirmCashOut:function(t){var e=this;this.$confirm("点击按钮之后，表示该笔提成已经结算给线下"+this.$t("action.attendantName")+"，确认已结算了吗？",this.$t("tips.reminder"),{confirmButtonText:this.$t("action.comfirm"),cancelButtonText:this.$t("action.cancel"),type:"warning"}).then(function(){e.updateItem(t)}).catch(function(){})},updateItem:function(t){var e=this;return p()(u.a.mark(function a(){return u.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.$api.shop.adminUpdateCoachCommisson({id:t}).then(function(t){200===t.code&&e.$message.success(e.$t("tips.successOper")),e.getTableDataList()});case 1:case"end":return a.stop()}},a,e)}))()},confirmDel:function(t,e){var a=this;this.$confirm(this.$t("tips.confirmDelete"),this.$t("tips.reminder"),{confirmButtonText:this.$t("action.comfirm"),cancelButtonText:this.$t("action.cancel"),type:"warning"}).then(function(){var n=1===e?"adapay":"heepay";a.$api[n].memberStatusUpdate({id:t,status:-1}).then(function(t){200===t.code&&(a.$message.success(a.$t("tips.successOper")),a.getBaseInfo())})}).catch(function(){})},toShowDialog:function(){var t=this;return p()(u.a.mark(function e(){var a,n,s,r,i,o,l,c,m,p,d,_,h,v,f,y,b,g,w;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.routesItem.auth,n=a.adapay,s=void 0!==n&&n,r=a.heepay,i=void 0!==r&&r,e.next=3,t.$api.system.configInfo();case 3:o=e.sent,l=o.data,c=l.cash_mini,m=l.tax_point,p=l.personal_income_tax_text,d=l.wechat_transfer,_=void 0!==d&&d,h=l.alipay_transfer,v=void 0!==h&&h,f=l.bank_transfer,y=void 0!==f&&f,b=l.under_transfer,g=void 0!==b&&b,t.cash_mini=1*c,t.tax_point=1*m,t.personal_income_tax_text=p,w=[],_&&w.push({id:1,title:"微信零钱包"}),v&&w.push({id:2,title:"支付宝账户"}),y&&(s||i)&&w.push({id:4,title:"银行卡账户"}),g&&w.push({id:0,title:"线下转账"}),t.payList=w,t.subForm={apply_transfer:"",apply_price:"",text:""},t.showDialog=!t.showDialog,t.$refs.subForm.validate&&t.$refs.subForm.clearValidate();case 18:case"end":return e.stop()}},e,t)}))()},toBindBank:function(t){this.showDialog=!1,this.$router.push("/finance/"+t)},withAll:function(){this.subForm.apply_price=this.total_cash},submitFormInfo:function(){var t=this;return p()(u.a.mark(function e(){var a,n,s,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!0,t.$refs.subForm.validate(function(t){t||(a=!1)}),a){e.next=4;break}return e.abrupt("return");case 4:if(n=JSON.parse(i()(t.subForm)),s=(s=n.text)?s.replace(/(^\s*)|(\s*$)/g,""):"",0!==n.apply_transfer||s){e.next=10;break}return t.$message.error("请输入到账信息"),e.abrupt("return");case 10:return e.next=12,t.$api.agent.applyWallet(n);case 12:if(r=e.sent,200===r.code){e.next=16;break}return e.abrupt("return");case 16:t.$message.success(t.$t("tips.successSub")),t.showDialog=!1,t.getTableDataList();case 19:case"end":return e.stop()}},e,t)}))()},toExportExcel:function(){var t=this,e=this.total;if(e>1e4)this.$message.error("最多只能导出10000条数据，当前"+e+"条，请筛选数据点击搜索后再操作导出数据！");else{var a=JSON.parse(i()(this.searchForm));if(!a.top_name||a.type){this.downloadLoading=!0;var n=a.start_time;n&&n.length>1?(a.start_time=n[0]/1e3,a.end_time=n[1]/1e3):(a.start_time="",a.end_time="");var r=this.$util.getProCurrentHref(),o=r.indexOf("?")>0?"":"?",l=r.indexOf("?")>0;s()(a).forEach(function(t,e){o+=l?"&"+t+"="+a[t]:t+"="+a[t],l=!0});var c=window.localStorage.getItem("massage_minitk"),u=r+"/massage/admin/AdminExcel/commList"+o+"&token="+c;window.location.href=u,setTimeout(function(){t.downloadLoading=!1},5e3)}else this.$message.error("搜索佣金获得者时需选择佣金类型哦！")}}},filters:{handleTime:function(t,e){return 1===e?_()(1e3*t).format("YYYY-MM-DD"):2===e?_()(1e3*t).format("HH:mm:ss"):_()(1e3*t).format("YYYY-MM-DD HH:mm:ss")},handleTitle:function(t,e){var a=e.filter(function(e){return e.value===t});return[2,5,6].includes(t)?"代理":a&&a.length>0?a[0].label:""}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"lb-finance-finance-commission"},[a("top-nav"),t._v(" "),a("div",{staticClass:"page-main"},[a("lb-tips",[t._v(t._s(t.$t("action.agentName"))+"在提现时，会将线下"+t._s(t.$t("action.attendantName"))+"的提成以及自己的分成一并提现出来\n      "),a("div",{staticClass:"mt-sm"},[t._v("\n        平台统一处理后，"+t._s(t.$t("action.agentName"))+"再将提现出来的费用私下结算给线下"+t._s(t.$t("action.attendantName"))+"，可通过操作栏的“"+t._s(t.$t("action.attendantName"))+"转账”按钮来记录是否已转账\n      ")])]),t._v(" "),a("el-row",{staticClass:"page-search-form"},[a("div",{staticClass:"flex-x-between pt-sm pb-lg c-title"},[a("div",[a("div",[t._v("\n            可提现余额（包含线下"+t._s(t.$t("action.attendantName"))+"的提成）\n          ")]),t._v(" "),a("div",{staticClass:"f-lg-title mt-md flex-y-center cursor-pointer"},[a("div",{staticClass:"c-link mr-md"},[t._v(t._s(t.total_cash||0))]),t._v(" "),t.routesItem.userInfo.is_admin||t.routesItem.userInfo.admin_id?t._e():a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:t.toShowDialog}},[t._v("提现")]),t._v(" "),t.pagePermission.includes("pagedata")?a("div",{staticClass:"f-title c-link ml-md",on:{click:function(e){return t.$router.push("/finance/record")}}},[t._v("\n              提现记录\n            ")]):t._e()],1)]),t._v(" "),a("div",{staticClass:"flex-center"},[a("div",[a("div",[t._v("\n              "+t._s(t.$t("action.agentName"))+"总佣金（元）"),a("lb-tool-tips",{attrs:{padding:0}},[t._v("\n                "+t._s(t.$t("action.agentName"))+"总佣金=可提现余额+已提现金额，"+t._s(t.$t("action.agentName"))+"自己的应得佣金\n              ")])],1),t._v(" "),a("div",{staticClass:"f-lg-title mt-md"},[t._v("\n              "+t._s(t.total_wallet_cash||0)+"\n            ")])])]),t._v(" "),a("div",{staticClass:"flex-center"},[a("div",[a("div",[t._v("\n              今日到账佣金（元）"),a("lb-tool-tips",{attrs:{padding:0}},[t._v("\n                "+t._s(t.$t("action.agentName"))+"今日到账的佣金总和，只统计订单佣金，手动修改余额不计入当日到账佣金里\n              ")])],1),t._v(" "),a("div",{staticClass:"f-lg-title mt-md"},[t._v("\n              "+t._s(t.today_cash||0)+"\n            ")])])]),t._v(" "),a("div",[a("div",[t._v("\n            未入账（元）"),a("lb-tool-tips",{attrs:{padding:0}},[t._v("\n              未到账的服务订单金额\n            ")])],1),t._v(" "),a("div",{staticClass:"f-lg-title mt-md"},[t._v("\n            "+t._s(t.unrecorded_cash||0)+"\n          ")])])])]),t._v(" "),t.loading||!t.routesItem.auth.adapay&&!t.routesItem.auth.heepay||t.routesItem.userInfo.is_admin||t.routesItem.userInfo.admin_id?t._e():a("div",{staticClass:"c-warning",staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"pd-lg flex-center",staticStyle:{background:"rgba(64, 158, 255, 0.3)"}},[a("div",{staticClass:"flex-1 flex-y-center"},[a("div",{staticClass:"text-bold"},[t._v("银行卡账号")]),t._v(" "),t.routesItem.auth.adapay&&!t.routesItem.auth.heepay?a("block",[t._v("\n            （提现后T+1工作日到账）\n            "),a("el-popover",{attrs:{placement:"top-start",width:"400",trigger:"hover"}},[a("div",{staticClass:"f-caption c-title",attrs:{slot:""},slot:"default"},[a("div",{staticClass:"c-caption pb-sm"},[t._v("规则说明：")]),t._v(" "),a("div",{domProps:{innerHTML:t._s("<div>T+1工作日到账，T是指工作日，用户在工作日发起提现次日可到，本周末或者本周五发起提现会在下周一到账</div>")}})]),t._v(" "),a("span",{staticClass:"iconfont iconwentifankui1 c-warning ml-sm",attrs:{slot:"reference"},slot:"reference"})])],1):t._e()],1),t._v(" "),a("div",[t.routesItem.auth.adapay&&!t.adapayForm.hasOwnProperty("bank_info")?a("lb-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.$router.push("/finance/adapay")}}},[t._v("去绑定")]):t._e(),t._v(" "),t.routesItem.auth.heepay&&!t.heepayForm.id?a("lb-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.$router.push("/finance/heepay")}}},[t._v("去绑定")]):t._e()],1)]),t._v(" "),t.routesItem.auth.adapay&&t.adapayForm.hasOwnProperty("bank_info")?a("div",{staticClass:"flex-between pd-lg"},[a("div",{staticClass:"flex-y-center"},[a("div",{staticClass:"f-title"},[t._v("\n            "+t._s(t.adapayForm.bank_info.card_id.substring(0,4))+"****"+t._s(t.adapayForm.bank_info.card_id.substring(t.adapayForm.bank_info.card_id.length-4,t.adapayForm.bank_info.card_id.length))+"\n          ")]),t._v(" "),t.routesItem.auth.adapay&&t.routesItem.auth.heepay?a("div",{staticClass:"flex-y-center c-title"},[a("div",{staticClass:"ml-md mr-sm"},[t._v("(提现后T+1工作日到账)")]),t._v(" "),a("el-popover",{attrs:{placement:"top-start",width:"400",trigger:"hover"}},[a("div",{staticClass:"f-caption c-title",attrs:{slot:""},slot:"default"},[a("div",{staticClass:"c-caption pb-sm"},[t._v("规则说明：")]),t._v(" "),a("div",{domProps:{innerHTML:t._s("<div>T+1工作日到账，T是指工作日，用户在工作日发起提现次日可到，本周末或者本周五发起提现会在下周一到账</div>")}})]),t._v(" "),a("span",{staticClass:"iconfont iconwentifankui1",attrs:{slot:"reference"},slot:"reference"})])],1):t._e(),t._v(" "),a("div",{staticClass:"ml-lg",class:[t.colorType[t.adapayForm.member_info.status]]},[t._v("\n            "+t._s(t.adapayStatusType[t.adapayForm.member_info.status])+"\n          ")])]),t._v(" "),a("div",[0!==t.adapayForm.member_info.status?a("block",[a("lb-button",{attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(e){return t.$router.push("/finance/adapay")}}},[t._v(t._s(t.$t("action.edit")))]),t._v(" "),a("lb-button",{attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(e){return t.confirmDel(t.adapayForm.member_info.id,1)}}},[t._v(t._s(t.$t("action.delete")))])],1):t._e()],1)]):t._e(),t._v(" "),t.routesItem.auth.heepay&&t.heepayForm.id?a("div",{staticClass:"flex-between pd-lg",class:[{"b-1px-t":t.routesItem.auth.adapay}]},[a("div",{staticClass:"flex-y-center"},[a("div",{staticClass:"f-title"},[t._v("\n            "+t._s(t.heepayForm.bank_card_no.substring(0,4))+"****"+t._s(t.heepayForm.bank_card_no.substring(t.heepayForm.bank_card_no.length-4,t.heepayForm.bank_card_no.length))+"\n          ")]),t._v(" "),a("div",{staticClass:"ml-lg",class:[t.colorType[t.heepayForm.audit_status]]},[t._v("\n            "+t._s(t.heepayStatusType[t.heepayForm.audit_status])+"\n          ")])]),t._v(" "),a("div",[0!==t.heepayForm.audit_status?a("block",[a("lb-button",{attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(e){return t.$router.push("/finance/heepay")}}},[t._v(t._s(t.$t("action.edit")))]),t._v(" "),a("lb-button",{attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(e){return t.confirmDel(t.heepayForm.id,2)}}},[t._v(t._s(t.$t("action.delete")))])],1):t._e()],1)]):t._e()]),t._v(" "),a("el-row",{staticClass:"page-search-form"},[a("el-form",{ref:"searchForm",attrs:{inline:!0,model:t.searchForm},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{label:"佣金获得者",prop:"top_name"}},[a("el-input",{attrs:{placeholder:"请输入佣金获得者姓名"},model:{value:t.searchForm.top_name,callback:function(e){t.$set(t.searchForm,"top_name",e)},expression:"searchForm.top_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"系统订单号",prop:"order_code"}},[a("el-input",{attrs:{placeholder:"请输入系统订单号"},model:{value:t.searchForm.order_code,callback:function(e){t.$set(t.searchForm,"order_code",e)},expression:"searchForm.order_code"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"佣金类型",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.getTableDataList(1)}},model:{value:t.searchForm.type,callback:function(e){t.$set(t.searchForm,"type",e)},expression:"searchForm.type"}},t._l(t.agentCashTypeList,function(e){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:[1,14].includes(e.value)&&t.routesItem.auth.reseller&&t.routesItem.auth.reseller_auth||9===e.value&&t.routesItem.auth.coachbroker&&t.routesItem.auth.partner_auth||10===e.value&&t.routesItem.auth.channel&&t.routesItem.auth.channel_auth||12===e.value&&t.routesItem.auth.salesman&&t.routesItem.auth.salesman_auth||[3,8,17,18].includes(e.value)&&t.routesItem.auth.agent_coach_auth||![1,14,9,10,12,3,8,17,18].includes(e.value),expression:"\n                ([1, 14].includes(item.value) &&\n                  routesItem.auth.reseller &&\n                  routesItem.auth.reseller_auth) ||\n                (item.value === 9 &&\n                  routesItem.auth.coachbroker &&\n                  routesItem.auth.partner_auth) ||\n                (item.value === 10 &&\n                  routesItem.auth.channel &&\n                  routesItem.auth.channel_auth) ||\n                (item.value === 12 &&\n                  routesItem.auth.salesman &&\n                  routesItem.auth.salesman_auth) ||\n                ([3, 8, 17, 18].includes(item.value) &&\n                  routesItem.auth.agent_coach_auth) ||\n                ![1, 14, 9, 10, 12, 3, 8, 17, 18].includes(item.value)\n              "}],key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.getTableDataList(1)}},model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},t._l(t.statusTypeList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"日期",prop:"start_time"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp","picker-options":t.pickerOptions,"default-time":["00:00:00","23:59:59"]},on:{change:function(e){return t.getTableDataList(1)}},model:{value:t.searchForm.start_time,callback:function(e){t.$set(t.searchForm,"start_time",e)},expression:"searchForm.start_time"}})],1),t._v(" "),a("el-form-item",[a("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",type:"primary",icon:"el-icon-search"},on:{click:function(e){return t.getTableDataList(1)}}},[t._v(t._s(t.$t("action.search")))]),t._v(" "),a("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(e){return t.resetForm("searchForm")}}},[t._v(t._s(t.$t("action.reset")))])],1)],1)],1),t._v(" "),a("el-row",{staticClass:"page-top-operate"},[a("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:t.$route.name+"-export",expression:"`${$route.name}-export`"}],attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-download",loading:t.downloadLoading},on:{click:t.toExportExcel}},[t._v("\n        "+t._s(t.$t("action.export")))])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[a("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"top_name",label:"佣金获得者","min-width":"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nickName",label:"来源"}}),t._v(" "),a("el-table-column",{attrs:{prop:"order_code","min-width":"130",label:"系统订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"transaction_id","min-width":"130",label:"付款订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"佣金类型","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"flex-y-center"},[a("div",[t._v("\n              "+t._s([2,5,6].includes(e.row.type)?t.cityType[e.row.city_type]:"")+"\n            ")]),t._v(" "),a("div",[t._v("\n              "+t._s(t._f("handleTitle")(e.row.type,t.agentCashTypeList))+"\n            ")])]),t._v(" "),8===e.row.type?a("div",{staticClass:"f-caption c-warning",staticStyle:{"line-height":"1.4"}},[1===e.row.car_admin?a("div",[t._v("\n              车费归属"+t._s(t.$t("action.agentName"))+"\n            ")]):t._e(),t._v(" "),1*e.row.free_fare>0?a("div",[t._v("\n              "+t._s(["","平台补贴",t.$t("action.attendantName")+"补贴",t.$t("action.agentName")+"补贴"][e.row.free_fare])+"\n            ")]):t._e()]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.statusType[e.row.status])+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"is_adapay",label:"分佣通道","min-width":"125"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(["系统分账","三方自动分账"][e.row.is_adapay])+"\n        ")]}}])},[a("template",{slot:"header"},[a("div",{staticStyle:{"margin-top":"7px",padding:"0"}},[t._v("\n            分佣通道\n            "),a("lb-tool-tips",{attrs:{padding:"11"}},[t.routesItem.auth.adapay||t.routesItem.auth.heepay?a("div",{staticClass:"mb-md"},[t._v("\n                分佣通道分为系统分账和三方自动分账：\n              ")]):t._e(),t._v(" "),a("div",[t._v("\n                系统分账是用户手动发起提现，平台人工操作转账，包含了微信转账、支付宝转账、线下转账方式\n              ")]),t._v(" "),t.routesItem.auth.adapay||t.routesItem.auth.heepay?a("div",{staticClass:"mt-sm"},[t._v("\n                对接了三方支付公司的，且用户绑定了银行卡，用户手动发起提现，自动划到绑定的银行账户里；由于风控问题，实际到账日期为T+1\n              ")]):t._e()])],1)])],2),t._v(" "),a("el-table-column",{attrs:{prop:"order_goods",width:"210",label:"提成比例"},scopedSlots:t._u([{key:"default",fn:function(e){return[[1,14].includes(e.row.type)?a("div",t._l(e.row.order_goods,function(n,s){return a("div",{key:s,staticClass:"goods-info-text flex-warp pt-sm",class:[{"pb-sm":s!==e.row.order_goods.length-1}]},[a("lb-image",{staticClass:"radius-5",attrs:{src:n.goods_cover}}),t._v(" "),a("div",{staticClass:"info-item flex-1 f-icontext c-caption ml-md"},[a("div",{staticClass:"flex-between"},[a("div",{staticClass:"f-caption c-title ellipsis",class:[{"max-160":n.refund_num>0}],staticStyle:{"line-height":"1.2"}},[t._v("\n                    "+t._s(n.goods_name)+"\n                  ")]),t._v(" "),n.refund_num>0?a("div",{staticClass:"c-warning"},[t._v("\n                    已退x"+t._s(n.refund_num)+"\n                  ")]):t._e()]),t._v(" "),a("div",{staticClass:"flex-y-center"},[t._v("\n                  提成比例\n                  "),a("div",{staticClass:"c-warning ml-sm"},[t._v(t._s(n.balance)+"%")])]),t._v(" "),a("div",{staticClass:"flex-between f-caption"},[a("div",{staticClass:"c-warning"},[t._v("¥"+t._s(n.true_price))]),t._v(" "),a("div",[t._v("x"+t._s(n.num))])])])],1)}),0):8===e.row.type?a("div",[t._v("-")]):a("div",[t._v(t._s(e.row.balance)+"%")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"pay_price",label:"订单总金额","min-width":"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" ¥"+t._s(e.row.pay_price))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"cash",label:"此单提成金额","min-width":"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" ¥"+t._s(e.row.cash))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"create_time","min-width":"110",label:"时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(t._f("handleTime")(e.row.create_time,1)))]),t._v(" "),a("div",[t._v(t._s(t._f("handleTime")(e.row.create_time,2)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"160",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"table-operate"},[a("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:t.$route.name+"-coachCashOut",expression:"`${$route.name}-coachCashOut`"},{name:"show",rawName:"v-show",value:1===e.row.coach_cash_control,expression:"scope.row.coach_cash_control === 1"}],attrs:{disabled:1===e.row.cash_status,size:"mini",plain:"",type:0===e.row.cash_status?"primary":"info"},on:{click:function(a){0===e.row.cash_status&&t.confirmCashOut(e.row.id)}}},[t._v(t._s(0===e.row.cash_status?t.$t("action.attendantName")+"转账":"已转账"))])],1)]}}])})],1),t._v(" "),a("lb-page",{attrs:{batch:!1,page:t.searchForm.page,pageSize:t.searchForm.limit,total:t.total},on:{handleSizeChange:t.handleSizeChange,handleCurrentChange:t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"提现信息核对",visible:t.showDialog,width:"600px",center:"",top:"5vh"},on:{"update:visible":function(e){t.showDialog=e}}},[t.routesItem.userInfo.is_admin?t._e():a("el-form",{ref:"subForm",staticClass:"dialog-form",attrs:{model:t.subForm,rules:t.subFormRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"提现方式",prop:"apply_transfer"}},[a("el-radio-group",{model:{value:t.subForm.apply_transfer,callback:function(e){t.$set(t.subForm,"apply_transfer",e)},expression:"subForm.apply_transfer"}},t._l(t.payList,function(e,n){return a("div",{key:n,staticClass:"c-title",staticStyle:{"margin-top":"13px"}},[a("el-radio",{attrs:{label:e.id,disabled:2===e.id&&(!t.alipayForm.hasOwnProperty("alipay_number")&&!t.alipayForm.hasOwnProperty("alipay_name")||!t.alipayForm.alipay_number&&!t.alipayForm.alipay_name)||4===e.id&&(t.routesItem.auth.adapay&&!t.routesItem.auth.heepay&&(!t.adapayForm.hasOwnProperty("bank_info")||t.adapayForm.hasOwnProperty("bank_info")&&1!==t.adapayForm.member_info.status)||!t.routesItem.auth.adapay&&t.routesItem.auth.heepay&&(!t.heepayForm.id||t.heepayForm.id&&1!==t.heepayForm.audit_status))}},[t._v(t._s(e.title)+"\n\n              "),[2,4].includes(e.id)?a("div",{staticClass:"mt-sm f-caption c-link",staticStyle:{"margin-left":"24px"}},[2===e.id?a("div",[t.alipayForm.hasOwnProperty("alipay_number")&&t.alipayForm.alipay_number?a("div",[t._v("\n                    "+t._s(t.alipayForm.alipay_number.substring(0,3))+"****"+t._s(t.alipayForm.alipay_number.substring(t.alipayForm.alipay_number.length-4,t.alipayForm.alipay_number.length))+"\n                  ")]):t._e(),t._v(" "),t.alipayForm.hasOwnProperty("alipay_name")&&t.alipayForm.alipay_name&&t.alipayForm.hasOwnProperty("alipay_number")&&t.alipayForm.alipay_number?t._e():a("div",{staticClass:"c-warning"},[t._v("\n                    请在手机端个人中心添加"+t._s(t.alipayForm.hasOwnProperty("alipay_name")&&t.alipayForm.alipay_name?"支付宝账号名称":"支付宝姓名信息")+"\n                  ")])]):t._e(),t._v(" "),4===e.id?a("div",[t.routesItem.auth.adapay&&!t.routesItem.auth.heepay&&t.adapayForm.hasOwnProperty("bank_info")?a("div",{staticClass:"flex-y-center"},[a("div",[t._v("\n                      "+t._s(t.adapayForm.bank_info.card_id.substring(0,4))+"****"+t._s(t.adapayForm.bank_info.card_id.substring(t.adapayForm.bank_info.card_id.length-4,t.adapayForm.bank_info.card_id.length))+"\n                    ")]),t._v(" "),a("div",{staticClass:"ml-md",class:[t.colorType[t.adapayForm.member_info.status]]},[t._v("\n                      "+t._s(t.adapayStatusType[t.adapayForm.member_info.status])+"\n                    ")])]):t._e(),t._v(" "),t.routesItem.auth.heepay&&t.heepayForm.id?a("div",{staticClass:"flex-y-center"},[a("div",[t._v("\n                      "+t._s(t.heepayForm.bank_card_no.substring(0,4))+"****"+t._s(t.heepayForm.bank_card_no.substring(t.heepayForm.bank_card_no.length-4,t.heepayForm.bank_card_no.length))+"\n                    ")]),t._v(" "),a("div",{staticClass:"ml-md",class:[t.colorType[t.heepayForm.audit_status]]},[t._v("\n                      "+t._s(t.heepayStatusType[t.heepayForm.audit_status])+"\n                    ")])]):t._e(),t._v(" "),t.routesItem.auth.adapay&&!t.adapayForm.hasOwnProperty("bank_info")?a("div",{on:{click:function(e){return t.toBindBank("adapay")}}},[t._v("\n                    去绑定\n                  ")]):t._e(),t._v(" "),t.routesItem.auth.heepay&&!t.heepayForm.id?a("div",{on:{click:function(e){return t.toBindBank("heepay")}}},[t._v("\n                    去绑定\n                  ")]):t._e()]):t._e()]):t._e()])],1)}),0)],1),t._v(" "),a("el-form-item",{attrs:{label:"提现金额",prop:"apply_price"}},[a("el-input",{attrs:{placeholder:"请输入提现金额"},model:{value:t.subForm.apply_price,callback:function(e){t.$set(t.subForm,"apply_price",e)},expression:"subForm.apply_price"}},[a("template",{slot:"append"},[t._v("元")])],2),t._v(" "),a("div",{staticClass:"flex-y-center f-caption c-caption mt-md",staticStyle:{"line-height":"1"},on:{click:t.withAll}},[t._v("\n          可提现余额￥"+t._s(t.total_cash)+"\n          "),a("div",{staticClass:"ml-md c-warning"},[t._v("全部提现")])]),t._v(" "),a("div",{staticClass:"flex-y-center f-caption c-caption mt-md",staticStyle:{"line-height":"1"}},[t._v("\n          最低提现额度\n          "),a("div",{staticClass:"ml-md c-warning"},[t._v("￥"+t._s(t.cash_mini||0))])])],1),t._v(" "),a("el-form-item",{attrs:{label:"到账信息",prop:"text"}},[a("el-input",{attrs:{type:"textarea",rows:10,maxlength:"300","show-word-limit":"",resize:"none",placeholder:"请输入到账信息"},model:{value:t.subForm.text,callback:function(e){t.$set(t.subForm,"text",e)},expression:"subForm.text"}})],1),t._v(" "),a("el-form-item",[t.tax_point?a("div",{staticClass:"flex-y-center f-desc c-warning"},[t._v("\n          需扣除"+t._s(t.tax_point)+"%"+t._s(t.personal_income_tax_text)+"\n          "),t.tax_price?a("div",{staticClass:"ml-md"},[t._v("¥"+t._s(t.tax_price))]):t._e()]):t._e()])],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:function(e){return t.submitFormInfo("sub")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var y=a("C7Lr")(v,f,!1,function(t){a("dHl5")},"data-v-0984918e",null);e.default=y.exports}});