webpackJsonp([88],{"2rEu":function(e,t){},"6hHg":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("3cXf"),s=r.n(a),o=r("lC5x"),n=r.n(o),i=r("J0Oq"),l=r.n(i),c=r("4YfN"),u=r.n(c),m=r("bSIt"),p={data:function(){return{loading:!1,navTitle:"",subForm:{status:0,fxq_api_key:"",fxq_secret_key:"",company_name:"",company_title:"",contract_years:"",company_seq_no:"",company_id_no:"",contract:"",commitment:"",corporation:"",is_check:0},fxq_check_type:1,subFormRules:{status:{required:!0,type:"number",message:"请选择",trigger:"blur"}},bFormRules:{fxq_api_key:{required:!0,validator:this.$reg.isNotNull,text:"AppId",reg_type:2,trigger:"blur"},fxq_secret_key:{required:!0,validator:this.$reg.isNotNull,text:"AppSecret",reg_type:2,trigger:"blur"},company_name:{required:!0,validator:this.$reg.isNotNull,text:"公司名称",reg_type:2,trigger:"blur"},company_title:{required:!0,validator:this.$reg.isNotNull,text:"公章副标题",reg_type:2,trigger:"blur"},contract_years:{required:!0,validator:this.$reg.isNum,text:"合同有效期",reg_type:2,trigger:"blur"},contract:{required:!0,validator:this.$reg.isNotNull,text:"合同模版",reg_type:2,trigger:"blur"},company_id_no:{required:!0,validator:this.$reg.isNotNull,text:"社会统一信用代码",reg_type:2,trigger:"blur"},corporation:{required:!0,validator:this.$reg.isNotNull,text:"公司法人",reg_type:2,trigger:"blur"},company_seq_no:{required:!0,validator:this.$reg.isNotNull,text:"公章下弦文",reg_type:2,trigger:"blur"}},regArr:{reg:/\.(doc|docx)$/,text:"doc/docx"},showDialog:!1}},computed:u()({},Object(m.e)({routesItem:function(e){return e.routes}})),created:function(){this.getDetail(),this.routesItem.userInfo.is_admin&&this.getConfigInfo()},methods:{getConfigInfo:function(){var e=this;return l()(n.a.mark(function t(){var r,a,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.system.configInfo();case 2:if(r=t.sent,a=r.code,s=r.data,200===a){t.next=7;break}return t.abrupt("return");case 7:e.fxq_check_type=s.fxq_check_type;case 8:case"end":return t.stop()}},t,e)}))()},getDetail:function(){var e=this;return l()(n.a.mark(function t(){var r,a,s,o;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.system.fxqConfigInfo();case 2:if(r=t.sent,a=r.code,s=r.data,200===a){t.next=7;break}return t.abrupt("return");case 7:for(o in e.subForm)e.subForm[o]=s[o];case 8:case"end":return t.stop()}},t,e)}))()},getFile:function(e,t){var r=e.length-1;this.subForm[t]=e[r].url},toResetFile:function(e){this.subForm[e]=""},submitFormInfo:function(){var e=this;return l()(n.a.mark(function t(){var r,a,o,i,l,c,u,m,p;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(r=JSON.parse(s()(e.subForm)),a=["aForm"],1===r.status&&a.push("bForm"),o=!0,i=0,l=a.length;i<l;i++)e.$refs[a[i]].validate(function(e){if(!e)return o=!1,!1});if(o){t.next=7;break}return t.abrupt("return");case 7:if(c=e.regArr,u=c.reg,m=c.text,1!==r.status||u.test(r.contract)){t.next=11;break}return e.$message.error("合同模版仅支持"+m+"格式!"),t.abrupt("return");case 11:if(!r.commitment||1!==r.status||u.test(r.commitment)){t.next=14;break}return e.$message.error("承诺书仅支持"+m+"格式!"),t.abrupt("return");case 14:return delete r.attestation_status,e.loading=!0,e.$api.system.configUpdate({fxq_check_type:e.fxq_check_type}),t.next=19,e.$api.system.fxqConfigUpdate(r);case 19:if(p=t.sent,200===p.code){t.next=23;break}return t.abrupt("return");case 23:e.loading=!1,e.$message.success(e.$t("tips.successSub"));case 25:case"end":return t.stop()}},t,e)}))()}},filters:{handleFileName:function(e,t){var r=1===t?"请上传合同模版":"请上传承诺书";return e&&(r=e.substring(e.lastIndexOf("/")+1)),r}}},_={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"lb-system-fdd-set"},[r("top-nav"),e._v(" "),r("div",{staticClass:"page-main"},[r("lb-tips",[e._v("系统目前对接的是放心签第三方电子签约平台，用于和平台入驻"+e._s(e.$t("action.attendantName"))+"签订线上合作协议，如需使用需在放心签平台购买套餐后，电子合同方可生效\n    ")]),e._v(" "),r("el-form",{ref:"aForm",staticClass:"basic-form",attrs:{model:e.subForm,rules:e.subFormRules,"label-width":"160px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"是否启用",prop:"status"}},[r("el-radio-group",{model:{value:e.subForm.status,callback:function(t){e.$set(e.subForm,"status",t)},expression:"subForm.status"}},[r("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("action.ON")))]),e._v(" "),r("el-radio",{attrs:{label:0}},[e._v(e._s(e.$t("action.OFF")))])],1)],1),e._v(" "),1===e.subForm.status?r("el-form",{ref:"bForm",staticClass:"basic-form",attrs:{model:e.subForm,rules:e.bFormRules,"label-width":"160px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"实名认证方式 ",prop:"status"}},[r("el-radio-group",{model:{value:e.fxq_check_type,callback:function(t){e.fxq_check_type=t},expression:"fxq_check_type"}},[r("el-radio",{attrs:{label:1}},[e._v("公安二要素")]),e._v(" "),r("el-radio",{attrs:{label:2}},[e._v("人脸识别")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"AppId",prop:"fxq_api_key"}},[r("el-input",{attrs:{placeholder:"请输入AppId"},model:{value:e.subForm.fxq_api_key,callback:function(t){e.$set(e.subForm,"fxq_api_key",t)},expression:"subForm.fxq_api_key"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"AppSecret",prop:"fxq_secret_key"}},[r("el-input",{attrs:{placeholder:"请输入AppSecret"},model:{value:e.subForm.fxq_secret_key,callback:function(t){e.$set(e.subForm,"fxq_secret_key",t)},expression:"subForm.fxq_secret_key"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"公司名称",prop:"company_name"}},[r("el-input",{attrs:{placeholder:"请输入公司名称"},model:{value:e.subForm.company_name,callback:function(t){e.$set(e.subForm,"company_name",t)},expression:"subForm.company_name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"公司法人",prop:"corporation"}},[r("el-input",{attrs:{placeholder:"请输入公司法人"},model:{value:e.subForm.corporation,callback:function(t){e.$set(e.subForm,"corporation",t)},expression:"subForm.corporation"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"公章副标题",prop:"company_title"}},[r("el-input",{attrs:{placeholder:"请输入公章副标题"},model:{value:e.subForm.company_title,callback:function(t){e.$set(e.subForm,"company_title",t)},expression:"subForm.company_title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"公章下弦文",prop:"company_seq_no"}},[r("el-input",{attrs:{placeholder:"请输入公章下弦文"},model:{value:e.subForm.company_seq_no,callback:function(t){e.$set(e.subForm,"company_seq_no",t)},expression:"subForm.company_seq_no"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"合同有效期",prop:"contract_years"}},[r("el-input",{attrs:{placeholder:"请输入合同有效期"},model:{value:e.subForm.contract_years,callback:function(t){e.$set(e.subForm,"contract_years",t)},expression:"subForm.contract_years"}},[r("template",{slot:"append"},[e._v("年")])],2),e._v(" "),r("lb-tool-tips",[e._v("\n            自签约合同当日起算时间，合同期设置多少年，就在签约日期上增加年限，"),r("br"),e._v("到期后，"+e._s(e.$t("action.attendantName"))+"可续费，未到合同期限日，"+e._s(e.$t("action.attendantName"))+"不可操作续签\n          ")])],1),e._v(" "),r("el-form-item",{attrs:{label:"社会统一信用代码",prop:"company_id_no"}},[r("el-input",{attrs:{placeholder:"请输入社会统一信用代码"},model:{value:e.subForm.company_id_no,callback:function(t){e.$set(e.subForm,"company_id_no",t)},expression:"subForm.company_id_no"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"合同模版",prop:"contract"}},[r("div",{staticClass:"flex-warp"},[r("div",{staticClass:"lb-file-input flex-between"},[r("div",{class:[{"c-title":e.subForm.contract}]},[e._v("\n                "+e._s(e._f("handleFileName")(e.subForm.contract,1))+"\n              ")]),e._v(" "),r("div",{staticClass:"flex-center"},[e.subForm.contract?r("i",{staticClass:"c-warning iconfont icon-guanbi-fill pl-sm pr-sm",on:{click:function(t){return e.toResetFile("contract")}}}):e._e(),e._v(" "),r("lb-cover",{attrs:{type:"button",fileType:"file",fileSize:1,regType:3},on:{selectedFiles:function(t){return e.getFile(t,"contract")}}})],1)]),e._v(" "),r("lb-tool-tips",[e._v("\n              合同模版上传要求：\n              "),r("p",{staticClass:"pt-sm"},[e._v("1、文件格式只支持doc\\docx格式。")]),e._v(" "),r("p",{staticClass:"pt-sm"},[e._v("\n                2、文件头部甲方信息需填写完整。头部乙方（技师）信息必须包含“乙方签字”四个字。\n              ")]),e._v(" "),r("p",{staticClass:"pt-sm"},[e._v("\n                3、文件底部甲乙双方，必须包含“甲方（盖章）”和“乙方（签字）”，冒号和括号必须用中文符号。\n              ")]),e._v(" "),r("div",{staticClass:"cursor-pointer c-link mt-md",on:{click:function(t){e.showDialog=!0}}},[e._v("\n                查看示例\n              ")])])],1)]),e._v(" "),r("el-form-item",{attrs:{label:"承诺书",prop:"commitment"}},[r("div",{staticClass:"flex-warp"},[r("div",{staticClass:"lb-file-input flex-between"},[r("div",{class:[{"c-title":e.subForm.commitment}]},[e._v("\n                "+e._s(e._f("handleFileName")(e.subForm.commitment,2))+"\n              ")]),e._v(" "),r("div",{staticClass:"flex-center"},[e.subForm.commitment?r("i",{staticClass:"c-warning iconfont icon-guanbi-fill pl-sm pr-sm",on:{click:function(t){return e.toResetFile("commitment")}}}):e._e(),e._v(" "),r("lb-cover",{attrs:{type:"button",fileType:"file",fileSize:1,regType:3},on:{selectedFiles:function(t){return e.getFile(t,"commitment")}}})],1)]),e._v(" "),r("lb-tool-tips",[e._v(" 文件支持doc、docx格式 ")])],1)]),e._v(" "),r("el-form-item",{attrs:{label:"实名认证",prop:"is_check"}},[r("div",{staticClass:"flex-y-center"},[r("el-tag",{staticClass:"mt-md",attrs:{size:"small",type:1===e.subForm.is_check?"primary":"danger"}},[e._v(e._s(1===e.subForm.is_check?"已认证":"未认证"))])],1)])],1):e._e(),e._v(" "),r("el-form-item",[r("lb-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:e.submitFormInfo}},[e._v(e._s(e.$t("action.submit")))])],1)],1)],1),e._v(" "),r("el-dialog",{staticClass:"lbmiddle-dialog",attrs:{title:"查看设置区别",visible:e.showDialog,width:"800px",top:"5vh",center:""},on:{"update:visible":function(t){e.showDialog=t}}},[r("div",{staticClass:"gzh-img-list flex-center"},[r("img",{attrs:{src:"https://lbqny.migugu.com/admin/anmo/pc/fxq.png"}})])])],1)},staticRenderFns:[]};var f=r("C7Lr")(p,_,!1,function(e){r("2rEu")},"data-v-6b1d8181",null);t.default=f.exports}});