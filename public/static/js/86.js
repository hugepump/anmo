webpackJsonp([86],{"+M0j":function(e,t){},Af7h:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("aA9S"),r=a.n(s),n=a("3cXf"),i=a.n(n),o=a("rVsN"),l=a.n(o),m=a("KH7x"),c=a.n(m),u=a("4YfN"),d=a.n(u),p=a("lC5x"),h=a.n(p),_=a("J0Oq"),v=a.n(_),b=a("PxTW"),f=a.n(b),g=a("bSIt"),w={data:function(){var e=this,t=function(t,a,s){var r=e.max_balance,n=e.routesItem.userInfo.is_admin,i=e.subForm.admin_id,o=n&&!(void 0===i?0:i)?100:1*r;""!==a&&(!/^(?:0|[1-9][0-9]?|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2}))|100)$/.test(a)||1*a>o)?s(new Error("请输入正确的"+t.text+"，0-"+o+"，支持2位小数")):s()};return{selectable:function(e,t){return!!e.is_selectable},statusText:{1:{type:"info",text:"申请中"},2:{type:"",text:"已授权"},3:{type:"danger",text:"取消授权"},4:{type:"danger",text:"已驳回"}},pickerOptions:{disabledDate:function(e){return e.getTime()>1e3*(f()(f()(Date.now()).format("YYYY-MM-DD")).unix()+86400-1)}},loading:{list:!1,topbind:!1},searchForm:{list:{page:1,limit:10,status:0,start_time:"",end_time:"",name:""},topbind:{page:1,limit:10,status:2,name:""}},tableData:{list:[],topbind:[]},total:{list:0,topbind:0},count:{},currentRow:{},multipleSelection:[],base_agent:[],fx_check:0,max_balance:"",reseller_cash_type:"",showDialog:{sub:!1,change:!1,topbind:!1,cash:!1},applyForm:{title:"",status:"",sh_text:""},subForm:{id:0,status:0,admin_id:"",balance:"",level_balance:"",sh_text:""},subFormRules:{status:{required:!0,type:"number",message:"请选择审核结果",trigger:"blur"},balance:{required:!1,validator:t,text:"一级提成比例",trigger:"blur"},level_balance:{required:!1,validator:t,text:"二级提成比例",trigger:"blur"}},changeForm:{id:"",admin_name:"",admin_id:""},topbindForm:{id:"",pid:""},cashForm:{id:[],user_name:"",recommend_cash:"",recommend_day:"",recommend_range:1},cashFormRules:{recommend_cash:{required:!0,validator:this.$reg.isFloatNum,text:"推荐费",trigger:"blur"},recommend_day:{required:!0,validator:this.$reg.isNum,reg_type:2,text:"返佣时效",trigger:"blur"},recommend_range:{required:!0,type:"number",message:"请选择返佣范围",trigger:"blur"}}}},activated:function(){var e=this;return v()(h.a.mark(function t(){var a;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=1,Number(window.sessionStorage.getItem("currentPage"))&&(a=Number(window.sessionStorage.getItem("currentPage")),window.sessionStorage.removeItem("currentPage")),t.next=4,e.getBaseInfo();case 4:e.getTableDataList(a,"list");case 5:case"end":return t.stop()}},t,e)}))()},beforeRouteLeave:function(e,t,a){"DistributionEdit"===e.name&&window.sessionStorage.setItem("currentPage",this.searchForm.list.page),a()},computed:d()({},Object(g.e)({routesItem:function(e){return e.routes}})),methods:{getBaseInfo:function(){var e=this;return v()(h.a.mark(function t(){var a,s,r,n;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.all([e.$api.agent.adminSelect({reseller_auth:1}),e.$api.system.configInfo()]);case 2:a=t.sent,s=c()(a,2),r=s[0],n=s[1],e.base_agent=r.data,e.fx_check=n.data.fx_check,e.max_balance=n.data.agent_reseller_max_balance,e.reseller_cash_type=n.data.reseller_cash_type;case 10:case"end":return t.stop()}},t,e)}))()},resetForm:function(e){var t=e+"Form";this.$refs[t].resetFields(),this.getTableDataList(1,e)},handleSizeChange:function(e,t){this.searchForm[t].limit=e,this.handleCurrentChange(1,t)},handleCurrentChange:function(e,t){this.searchForm[t].page=e,this.getTableDataList("",t)},toChange:function(e){var t=this;return v()(h.a.mark(function a(){return h.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.searchForm.list.status=e,t.getTableDataList(1,"list");case 2:case"end":return a.stop()}},a,t)}))()},getTableDataList:function(e,t){var a=this;return v()(h.a.mark(function s(){var r,n,o,l,m,c,u,d,p,_,v,b;return h.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e&&(a.searchForm[t].page=e),a.tableData[t]=[],a.loading[t]=!0,r=JSON.parse(i()(a.searchForm[t])),"list"===t&&((n=r.start_time)&&n.length>1?(r.start_time=n[0]/1e3,r.end_time=n[1]/1e3):(r.start_time="",r.end_time="")),o={list:{methodKey:"distribution",methodModel:"resellerList"},topbind:{methodKey:"distribution",methodModel:"resellerList"}}[t],l=o.methodKey,m=o.methodModel,s.next=9,a.$api[l][m](r);case 9:if(c=s.sent,u=c.code,d=c.data,a.loading[t]=!1,200===u){s.next=15;break}return s.abrupt("return");case 15:"list"===t&&(p=a.routesItem.userInfo,_=p.is_admin,v=p.id,b=p.admin_id,d.data.map(function(e){e.is_selectable=![1,4].includes(e.status)&&e.recommend_cash_auth&&(_||!_&&e.admin_id&&(v===e.admin_id||b===e.admin_id));var t=e.text||"该用户没有填写备注";e.text=t.replace(/\n/g,"<br>"),e.recommend_time=e.recommend_time&&e.recommend_day?e.recommend_time+24*e.recommend_day*3600:""})),a.tableData[t]=d.data,a.total[t]=d.total,"list"===t&&(a.count=a.$util.pick(d,["all","nopass","ing","pass"]));case 19:case"end":return s.stop()}},s,a)}))()},handleMenuCommand:function(e,t){var a=(t=JSON.parse(i()(t))).id;switch(e){case"authStatus":this.toShowDialog("sub",t);break;case"updateAgent":this.toShowDialog("change",t);break;case"cancelAuth":this.confirmDel({id:a},3);break;case"updateTopBind":this.toShowDialog("topbind",t);break;case"setUserBindCash":this.toShowDialog("cash",t);break;case"delete":this.confirmDel({id:a},-1)}},toShowDialog:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v()(h.a.mark(function s(){var n,o,l,m,c,u;return h.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(a=JSON.parse(i()(a)),"sub"!==e){s.next=17;break}return n=a.id,s.next=5,t.$api.distribution.resellerInfo({id:n});case 5:if(o=s.sent,l=o.code,m=o.data,200===l){s.next=10;break}return s.abrupt("return");case 10:c=m.text||"该用户没有填写备注",m.text=c.replace(/\n/g,"<br>"),m.sh_text=m.sh_text?m.sh_text.replace(/\n/g,"<br>"):"",m.balance=1*m.balance==-1?"":m.balance,m.level_balance=1*m.level_balance==-1?"":m.level_balance,t.applyForm=m,t.subForm=r()({},t.$util.pick(m,["id","admin_id","balance","level_balance"]),{status:2,sh_text:""});case 17:if(["change","cash"].includes(e))for(u in"change"===e&&(a.admin_id=a.admin_id||""),"cash"===e&&(a.id=[a.id],a.recommend_cash=1*a.recommend_cash||"",a.recommend_day=1*a.recommend_day||""),t[e+"Form"])t[e+"Form"][u]=a[u];if("topbind"!==e){s.next=24;break}return t.topbindForm.id=a.id,t.searchForm[e].reseller_id=a.id,t.searchForm[e].name="",s.next=24,t.getTableDataList(1,e);case 24:t.showDialog[e]=!t.showDialog[e],["cash"].includes(e)&&t.$refs[e+"Form"].validate&&t.$refs[e+"Form"].clearValidate();case 26:case"end":return s.stop()}},s,t)}))()},handleSelectionChange:function(e){this.currentRow=e},handleMulSelectionChange:function(e){this.multipleSelection=e},toBatch:function(e){if(0!==this.multipleSelection.length){var t=this.multipleSelection.filter(function(t){return 1===e?t.id:t.id&&-1!==t.balance}),a=t.map(function(e){return e.id});if(0!==a.length){var s="";if(t.map(function(e,t){s+=(0===t?"":"、")+e.user_name}),1===e)return this.cashForm={id:a,user_name:s,recommend_cash:"",recommend_day:"",recommend_range:1},void(this.showDialog.cash=!0);this.confirmDel({id:a,user_name:s},-2)}else this.$message.error("当前选择的数据暂未设置提成比例，不可操作删除提成比例哦")}else this.$message.error("请选择要操作的数据")},confirmDel:function(e,t){var a=this,s=e.id,r=e.user_name,n=this.$createElement;this.$confirm(n("p",null,-2===t?[n("p",null,this.$t("tips.confirmDelete")),n("p",{style:"font-size:13px;line-height:1.2;color: red"},"删除后，"+this.$t("action.resellerName")+"“"+r+"”的推荐费将默认为0")]:-1===t?[n("p",null,this.$t("tips.confirmDelete")),n("p",{style:"font-size:13px;line-height:1.2;color: red"},"删除后，该"+this.$t("action.resellerName")+"的佣金也将一并删除！")]:[n("p",null,this.$t("tips.confirmNoPass"))]),this.$t("tips.reminder"),{confirmButtonText:this.$t("action.comfirm"),cancelButtonText:this.$t("action.cancel"),type:"warning"}).then(function(){a.updateItem(s,t,"list")}).catch(function(){})},updateItem:function(e,t,a){var s=this;return v()(h.a.mark(function r(){var n;return h.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=-2===t?"updateRecommendCash":"resellerUpdate",s.$api.distribution[n](-2===t?{id:e,recommend_cash:0,recommend_day:0,recommend_range:1}:{id:e,status:t}).then(function(e){if(200===e.code)s.$message.success(s.$t(3===t?"tips.successOper":"tips.successDel")),-1===t&&(s.searchForm[a].page=s.searchForm[a].page<Math.ceil((s.total[a]-1)/s.searchForm[a].limit)?s.searchForm[a].page:Math.ceil((s.total[a]-1)/s.searchForm[a].limit)),s.getTableDataList("",a);else{if(-1===t)return;s.getTableDataList("",a)}});case 2:case"end":return r.stop()}},r,s)}))()},submitFormInfo:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return v()(h.a.mark(function s(){var r,n,o;return h.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if("topbind"!==e||null!==t.currentRow&&t.currentRow.id){s.next=3;break}return t.$message.error("请选择上级"+t.$t("action.resellerName")),s.abrupt("return");case 3:if(r=!0,1===a&&t.$refs[e+"Form"].validate(function(e){e||(r=!1)}),r){s.next=7;break}return s.abrupt("return");case 7:n=JSON.parse(i()(t[e+"Form"])),"sub"===e&&2===n.status&&(n.balance=""===n.balance?"-1":n.balance,n.level_balance=""===n.level_balance?"-1":n.level_balance),"sub"===e&&delete n.admin_id,"change"===e&&delete n.admin_name,"topbind"===e&&(n.pid=t.currentRow.id),o="cash"===e?"updateRecommendCash":"resellerUpdate",t.$api.distribution[o](n).then(function(a){200===a.code&&(t.$message.success(t.$t("tips.successSub")),t.showDialog[e]=!1,t.getTableDataList("","list"))});case 14:case"end":return s.stop()}},s,t)}))()}},filters:{handleTime:function(e,t){return 1===t?f()(1e3*e).format("YYYY-MM-DD"):2===t?f()(1e3*e).format("HH:mm:ss"):f()(1e3*e).format("YYYY-MM-DD HH:mm:ss")}}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lb-distribution-examine"},[a("top-nav"),e._v(" "),a("div",{staticClass:"page-main"},[e.fx_check?a("el-row",{staticClass:"page-top-operate"},[a("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-add",expression:"`${$route.name}-add`"}],attrs:{size:"medium",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.$router.push("/promotion/distribution/edit")}}},[e._v(e._s(e.$t("menu.DistributionAdd")))])],1):e._e(),e._v(" "),a("el-row",{staticClass:"page-top-operate"},[a("el-button",{attrs:{type:0===e.searchForm.list.status?"primary":"",plain:"",size:"medium"},on:{click:function(t){return e.toChange(0)}}},[e._v("全部（"+e._s(e.count.all||0)+"）")]),e._v(" "),a("el-badge",{staticStyle:{margin:"14px 12px 0 0"},style:{marginRight:e.count.ing>99?"32px":e.count.ing>9?"22px":"12px"},attrs:{value:e.count.ing>0?e.count.ing:"",max:99}},[a("el-button",{staticStyle:{"margin-right":"0"},attrs:{type:1===e.searchForm.list.status?"primary":"",plain:"",size:"medium"},on:{click:function(t){return e.toChange(1)}}},[e._v("申请中"),0===e.count.ing?a("span",[e._v("（0）")]):e._e()])],1),e._v(" "),a("el-button",{attrs:{type:2===e.searchForm.list.status?"primary":"",plain:"",size:"medium"},on:{click:function(t){return e.toChange(2)}}},[e._v("已授权（"+e._s(e.count.pass||0)+"）")]),e._v(" "),a("el-button",{attrs:{type:4===e.searchForm.list.status?"primary":"",plain:"",size:"medium"},on:{click:function(t){return e.toChange(4)}}},[e._v("已驳回（"+e._s(e.count.nopass||0)+"）")])],1),e._v(" "),a("el-row",{staticClass:"page-search-form"},[a("el-form",{ref:"listForm",attrs:{inline:!0,model:e.searchForm.list},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"输入查询",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入姓名/手机号"},model:{value:e.searchForm.list.name,callback:function(t){e.$set(e.searchForm.list,"name",t)},expression:"searchForm.list.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"申请时间",prop:"start_time"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp","picker-options":e.pickerOptions,"default-time":["00:00:00","23:59:59"]},on:{change:function(t){return e.getTableDataList(1,"list")}},model:{value:e.searchForm.list.start_time,callback:function(t){e.$set(e.searchForm.list,"start_time",t)},expression:"searchForm.list.start_time"}})],1),e._v(" "),a("el-form-item",[a("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.getTableDataList(1,"list")}}},[e._v(e._s(e.$t("action.search")))]),e._v(" "),a("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("list")}}},[e._v(e._s(e.$t("action.reset")))])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.list,expression:"loading.list"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData.list,"header-cell-style":{background:"#f5f7fa",color:"#606266"}},on:{"selection-change":e.handleMulSelectionChange}},[e.routesItem.auth.recommendcash&&e.$route.meta.pagePermission[0].auth.includes("setUserBindCash")?a("el-table-column",{attrs:{type:"selection",width:"55",selectable:e.selectable,fixed:""}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_id",label:"用户ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"avatarUrl",label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("lb-image",{attrs:{src:e.row.avatarUrl}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nickName",label:"昵称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号","min-width":"110"}}),e._v(" "),e.reseller_cash_type?e._e():a("el-table-column",{attrs:{prop:"balance",label:"一级提成比例","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return 2===t.row.status||3===t.row.status?[e._v("\n          "+e._s(t.row.balance)+"%\n        ")]:void 0}}],null,!0)}),e._v(" "),e.reseller_cash_type?e._e():a("el-table-column",{attrs:{prop:"balance",label:"二级提成比例","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return 2===t.row.status||3===t.row.status?[e._v("\n          "+e._s(t.row.level_balance)+"%\n        ")]:void 0}}],null,!0)}),e._v(" "),e.routesItem.auth.recommendcash&&(e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&e.routesItem.auth.recommend_cash_auth)?a("el-table-column",{attrs:{prop:"recommend_cash",label:"推荐费","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return 1!==t.row.status&&t.row.recommend_cash_auth&&1*t.row.recommend_cash>0?[e._v("\n          ¥"+e._s(t.row.recommend_cash)+"\n          "),t.row.recommend_time?a("div",{staticClass:"f-caption c-tips",staticStyle:{"line-height":"1.4"}},[e._v("\n            "+e._s(e._f("handleTime")(t.row.recommend_time))+"到期无佣金 ("+e._s(["","仅限与"+e.$t("action.resellerName")+"同城市","仅限平台开放城市","不限地区"][t.row.recommend_range])+")\n          ")]):e._e()]:void 0}}],null,!0)}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"admin_name",label:"所属"+e.$t("action.agentName"),"min-width":"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"top_name",label:"上级"+e.$t("action.resellerName"),"min-width":"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"text",label:"备注信息","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"top-start",width:"350",trigger:"hover"}},[a("div",{staticClass:"f-caption c-title",attrs:{slot:""},slot:"default"},[a("div",{staticClass:"c-caption pb-sm"},[e._v("备注信息：")]),e._v(" "),a("div",{staticStyle:{"max-height":"80vh",overflow:"auto"},domProps:{innerHTML:e._s(t.row.text)}})]),e._v(" "),a("div",{staticClass:"ellipsis-2",attrs:{slot:"reference"},domProps:{innerHTML:e._s(t.row.text)},slot:"reference"})])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"申请时间","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("handleTime")(t.row.create_time,1)))]),e._v(" "),a("p",[e._v(e._s(e._f("handleTime")(t.row.create_time,2)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"small",type:e.statusText[t.row.status].type}},[e._v(e._s(e.statusText[t.row.status].text))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-operate"},[a("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-view",expression:"`${$route.name}-view`"},{name:"show",rawName:"v-show",value:!e.routesItem.userInfo.is_admin&&(!e.routesItem.userInfo.admin_id&&e.routesItem.userInfo.id!==t.row.admin_id||e.routesItem.userInfo.admin_id&&e.routesItem.userInfo.admin_id!==t.row.admin_id),expression:"\n                !routesItem.userInfo.is_admin &&\n                ((!routesItem.userInfo.admin_id &&\n                  routesItem.userInfo.id !== scope.row.admin_id) ||\n                  (routesItem.userInfo.admin_id &&\n                    routesItem.userInfo.admin_id !== scope.row.admin_id))\n              "}],attrs:{size:"mini",plain:"",type:"success"},on:{click:function(a){return e.toShowDialog("sub",t.row)}}},[e._v(e._s(e.$t("action.view")))]),e._v(" "),e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&t.row.admin_id&&(e.routesItem.userInfo.id===t.row.admin_id||e.routesItem.userInfo.admin_id===t.row.admin_id)?a("block",[a("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:2===t.row.status?e.$route.name+"-edit":e.$route.name+"-view",expression:"\n                  scope.row.status === 2\n                    ? `${$route.name}-edit`\n                    : `${$route.name}-view`\n                "},{name:"show",rawName:"v-show",value:[2,4].includes(t.row.status),expression:"[2, 4].includes(scope.row.status)"}],attrs:{size:"mini",plain:"",type:2===t.row.status?"primary":"success"},on:{click:function(a){2===t.row.status?e.$router.push("/promotion/distribution/edit?id="+t.row.id):e.toShowDialog("sub",t.row)}}},[e._v(e._s(e.$t(2===t.row.status?"action.edit":"action.view")))]),e._v(" "),1===t.row.status&&e.$route.meta.pagePermission[0].auth.includes("authDistribution")||3===t.row.status&&e.$route.meta.pagePermission[0].auth.includes("resetAuth")||2===t.row.status&&e.routesItem.userInfo.is_admin&&e.$route.meta.pagePermission[0].auth.includes("updateAgent")||1!==t.row.status&&e.$route.meta.pagePermission[0].auth.includes("updateTopBind")||![1,4].includes(t.row.status)&&e.routesItem.auth.recommendcash&&t.row.recommend_cash_auth&&e.$route.meta.pagePermission[0].auth.includes("setUserBindCash")||2===t.row.status&&e.$route.meta.pagePermission[0].auth.includes("cancelAuth")||1!==t.row.status&&e.$route.meta.pagePermission[0].auth.includes("delete")?a("el-dropdown",{on:{command:function(a){return e.handleMenuCommand(a,t.row)}}},[a("el-button",{attrs:{type:"danger",plain:"",size:"mini"}},[e._v("\n                  更多菜单"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:[1,3].includes(t.row.status),expression:"[1, 3].includes(scope.row.status)"},{name:"hasPermi",rawName:"v-hasPermi",value:1===t.row.status?e.$route.name+"-authDistribution":e.$route.name+"-resetAuth",expression:"\n                      scope.row.status === 1\n                        ? `${$route.name}-authDistribution`\n                        : `${$route.name}-resetAuth`\n                    "}],attrs:{command:"authStatus"}},[e._v(e._s(e.$t(1===t.row.status?"action.authDistribution":"action.resetAuth")))]),e._v(" "),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:2===t.row.status&&e.routesItem.userInfo.is_admin,expression:"\n                      scope.row.status === 2 && routesItem.userInfo.is_admin\n                    "},{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-updateAgent",expression:"`${$route.name}-updateAgent`"}],attrs:{command:"updateAgent"}},[e._v(e._s(e.$t("action.updateAgent")))]),e._v(" "),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:2===t.row.status,expression:"scope.row.status === 2"},{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-updateTopBind",expression:"`${$route.name}-updateTopBind`"}],attrs:{command:"updateTopBind"}},[e._v(e._s(e.$t("action.updateTopBind")))]),e._v(" "),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:![1,4].includes(t.row.status)&&e.routesItem.auth.recommendcash&&t.row.recommend_cash_auth,expression:"\n                      ![1, 4].includes(scope.row.status) &&\n                      routesItem.auth.recommendcash &&\n                      scope.row.recommend_cash_auth\n                    "},{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-setUserBindCash",expression:"`${$route.name}-setUserBindCash`"}],attrs:{command:"setUserBindCash"}},[e._v(e._s(e.$t("action.setUserBindCash")))]),e._v(" "),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:2===t.row.status,expression:"scope.row.status === 2"},{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-cancelAuth",expression:"`${$route.name}-cancelAuth`"}],attrs:{command:"cancelAuth"}},[e._v(e._s(e.$t("action.cancelAuth")))]),e._v(" "),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:1!==t.row.status,expression:"scope.row.status !== 1"},{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-delete",expression:"`${$route.name}-delete`"}],attrs:{command:"delete"}},[e._v(e._s(e.$t("action.delete")))])],1)],1):e._e()],1):e._e()],1)]}}])})],1),e._v(" "),a("lb-page",{attrs:{batch:e.routesItem.auth.recommendcash&&e.$route.meta.pagePermission[0].auth.includes("setUserBindCash"),page:e.searchForm.list.page,pageSize:e.searchForm.list.limit,total:e.total.list,selected:e.multipleSelection.length},on:{handleSizeChange:function(t){return e.handleSizeChange(t,"list")},handleCurrentChange:function(t){return e.handleCurrentChange(t,"list")}}},[a("lb-button",{attrs:{size:"mini",type:"warning"},on:{click:function(t){return e.toBatch(1)}}},[e._v(e._s(e.$t("action.setUserBindCash")))]),e._v(" "),a("lb-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.toBatch(2)}}},[e._v(e._s(e.$t("action.delUserBindCash")))])],1),e._v(" "),a("el-dialog",{attrs:{title:"申请详情",visible:e.showDialog.sub,width:"800px",top:"10vh",center:""},on:{"update:visible":function(t){return e.$set(e.showDialog,"sub",t)}}},[e.showDialog.sub?a("div",{staticStyle:{height:"60vh",overflow:"auto"}},[a("el-form",{staticClass:"dialog-form",attrs:{model:e.applyForm,"label-width":"130px",size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"用户ID："}},[a("div",[e._v(e._s(e.applyForm.user_id))])]),e._v(" "),a("el-form-item",{attrs:{label:"昵称："}},[a("div",[e._v(e._s(e.applyForm.nickName))])]),e._v(" "),a("el-form-item",{attrs:{label:"姓名："}},[a("div",[e._v(e._s(e.applyForm.user_name))])]),e._v(" "),a("el-form-item",{attrs:{label:"真实姓名："}},[a("div",[e._v(e._s(e.applyForm.true_user_name))])]),e._v(" "),a("el-form-item",{attrs:{label:"手机号："}},[a("div",[e._v(e._s(e.applyForm.mobile))])]),e._v(" "),a("el-form-item",{attrs:{label:"备注信息："}},[a("div",{domProps:{innerHTML:e._s(e.applyForm.text)}})]),e._v(" "),a("el-form-item",{attrs:{label:"申请时间："}},[a("div",[e._v("\n              "+e._s(e._f("handleTime")(e.applyForm.create_time))+"\n            ")])]),e._v(" "),a("div",{staticClass:"space-lg"}),e._v(" "),a("div",{staticClass:"space-lg b-1px-t"}),e._v(" "),a("div",{staticClass:"space-lg"}),e._v(" "),1!==e.applyForm.status?a("block",[a("div",{staticClass:"flex-warp"},[a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"审核结果：",prop:"status"}},[a("el-tag",{attrs:{size:"small",type:e.statusText[e.applyForm.status].type}},[e._v(e._s(e.statusText[e.applyForm.status].text))])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1!==e.applyForm.status&&e.applyForm.sh_time,expression:"applyForm.status !== 1 && applyForm.sh_time"}],staticStyle:{width:"50%"},attrs:{label:"审核时间：",prop:""}},[a("div",{staticClass:"c-warning"},[e._v("\n                  "+e._s(e._f("handleTime")(e.applyForm.sh_time))+"\n                ")])])],1),e._v(" "),e.applyForm.sh_text?a("el-form-item",{attrs:{label:"审核意见：",prop:"sh_text"}},[a("div",{domProps:{innerHTML:e._s(e.applyForm.sh_text)}})]):e._e()],1):e._e()],1),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:[1,3].includes(e.applyForm.status),expression:"[1, 3].includes(applyForm.status)"}],ref:"subForm",attrs:{model:e.subForm,rules:e.subFormRules,"label-width":"130px",size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"审核结果：",prop:"status"}},[a("el-radio-group",{model:{value:e.subForm.status,callback:function(t){e.$set(e.subForm,"status",t)},expression:"subForm.status"}},[a("el-radio",{attrs:{label:2}},[e._v("通过")]),e._v(" "),1===e.applyForm.status?a("el-radio",{attrs:{label:4}},[e._v("驳回")]):e._e()],1)],1),e._v(" "),2===e.subForm.status&&!e.reseller_cash_type&&(e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&1*e.max_balance>0)?a("block",[a("el-form-item",{attrs:{label:"一级提成比例",prop:"balance"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{size:"medium",placeholder:"请输入一级提成比例"},model:{value:e.subForm.balance,callback:function(t){e.$set(e.subForm,"balance",t)},expression:"subForm.balance"}},[a("template",{slot:"append"},[e._v("%")])],2),e._v(" "),a("lb-tool-tips",{attrs:{padding:9}},[e._v("取值0-"+e._s(e.routesItem.userInfo.is_admin&&!e.subForm.admin_id?"100":e.max_balance)+"\n                "),a("div",{staticClass:"mt-sm"},[e._v("\n                  不输入则表示不单独设置，使用全局设置比例\n                ")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"二级提成比例",prop:"level_balance"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{size:"medium",placeholder:"请输入二级提成比例"},model:{value:e.subForm.level_balance,callback:function(t){e.$set(e.subForm,"level_balance",t)},expression:"subForm.level_balance"}},[a("template",{slot:"append"},[e._v("%")])],2),e._v(" "),a("lb-tool-tips",{attrs:{padding:9}},[e._v("取值0-"+e._s(e.routesItem.userInfo.is_admin&&!e.subForm.admin_id?"100":e.max_balance)+"\n                "),a("div",{staticClass:"mt-sm"},[e._v("\n                  不输入则表示不单独设置，使用全局设置比例\n                ")])])],1)],1):e._e(),e._v(" "),1===e.applyForm.status?a("el-form-item",{attrs:{label:"审核意见："}},[a("el-input",{attrs:{type:"textarea",rows:10,maxlength:"300","show-word-limit":"",resize:"none",placeholder:"请输入审核意见"},model:{value:e.subForm.sh_text,callback:function(t){e.$set(e.subForm,"sh_text",t)},expression:"subForm.sh_text"}})],1):e._e()],1)],1):e._e(),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showDialog.sub=!1}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),a("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"},{name:"show",rawName:"v-show",value:[1,3].includes(e.applyForm.status),expression:"[1, 3].includes(applyForm.status)"},{name:"hasPermi",rawName:"v-hasPermi",value:1===e.applyForm.status?e.$route.name+"-authDistribution":e.$route.name+"-resetAuth",expression:"\n            applyForm.status === 1\n              ? `${$route.name}-authDistribution`\n              : `${$route.name}-resetAuth`\n          "}],attrs:{type:"primary"},on:{click:function(t){return e.submitFormInfo("sub")}}},[e._v(e._s(e.$t("action.comfirm")))])],1)]),e._v(" "),a("el-dialog",{attrs:{title:e.$t("action.updateAgent"),visible:e.showDialog.change,width:"600px",center:""},on:{"update:visible":function(t){return e.$set(e.showDialog,"change",t)}}},[a("el-form",{ref:"changeForm",staticClass:"dialog-form",attrs:{model:e.changeForm,"label-width":"140px"},nativeOn:{submit:function(e){e.preventDefault()}}},[e.changeForm.admin_name?a("el-form-item",{attrs:{label:"原"+e.$t("action.agentName")+"："}},[e._v("\n          "+e._s(e.changeForm.admin_name)+"\n        ")]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"修改所属"+e.$t("action.agentName")+"："}},[a("el-select",{attrs:{placeholder:"请选择"+e.$t("action.agentName"),filterable:"",clearable:""},on:{change:function(t){return e.getStoreList(2)}},model:{value:e.changeForm.admin_id,callback:function(t){e.$set(e.changeForm,"admin_id",t)},expression:"changeForm.admin_id"}},e._l(e.base_agent,function(e){return a("el-option",{key:e.id,attrs:{label:e.agent_name,value:e.id}})}),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showDialog.change=!1}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),a("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:function(t){return e.submitFormInfo("change",2)}}},[e._v(e._s(e.$t("action.comfirm")))])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.$t("action.updateTopBind"),visible:e.showDialog.topbind,width:"800px",top:"5vh",center:""},on:{"update:visible":function(t){return e.$set(e.showDialog,"topbind",t)}}},[a("el-form",{ref:"topbindForm",staticClass:"dialog-form",attrs:{inline:!0,model:e.searchForm.topbind,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"输入查询",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入姓名/手机号"},model:{value:e.searchForm.topbind.name,callback:function(t){e.$set(e.searchForm.topbind,"name",t)},expression:"searchForm.topbind.name"}})],1),e._v(" "),a("el-form-item",[a("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.getTableDataList(1,"topbind")}}},[e._v(e._s(e.$t("action.search")))]),e._v(" "),a("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("topbind")}}},[e._v(e._s(e.$t("action.reset")))])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.topbind,expression:"loading.topbind"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData.topbind,"header-cell-style":{background:"#f5f7fa",color:"#606266"},"tooltip-effect":"dark","highlight-current-row":""},on:{"current-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"avatarUrl",label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("lb-image",{attrs:{src:e.row.avatarUrl}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nickName",label:"昵称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号"}})],1),e._v(" "),a("lb-page",{attrs:{batch:!1,page:e.searchForm.topbind.page,pageSize:e.searchForm.topbind.limit,total:e.total.topbind},on:{handleSizeChange:function(t){return e.handleSizeChange(t,"topbind")},handleCurrentChange:function(t){return e.handleCurrentChange(t,"topbind")}}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showDialog.topbind=!1}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),a("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:function(t){return e.submitFormInfo("topbind",2)}}},[e._v(e._s(e.$t("action.comfirm")))])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.$t("action.setUserBindCash"),visible:e.showDialog.cash,width:"600px",center:""},on:{"update:visible":function(t){return e.$set(e.showDialog,"cash",t)}}},[a("el-form",{ref:"cashForm",staticClass:"dialog-form",attrs:{model:e.cashForm,rules:e.cashFormRules,"label-width":"140px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:e.$t("action.resellerName")+"："}},[a("div",{staticStyle:{padding:"9px 0","line-height":"1.5"}},[e._v("\n            "+e._s(e.cashForm.user_name)+"\n          ")])]),e._v(" "),a("el-form-item",{attrs:{label:"推荐费",prop:"recommend_cash"}},[a("el-input",{attrs:{placeholder:"请输入推荐费"},model:{value:e.cashForm.recommend_cash,callback:function(t){e.$set(e.cashForm,"recommend_cash",t)},expression:"cashForm.recommend_cash"}},[a("template",{slot:"append"},[e._v("元/人")])],2),e._v(" "),a("lb-tool-tips",[e._v(e._s(e.$t("action.resellerName"))+"每邀请一个新用户，应该获得的线索奖励，无论该新用户是否下单\n          ")])],1),e._v(" "),a("el-form-item",{attrs:{label:"返佣时效",prop:"recommend_day"}},[a("el-input",{attrs:{placeholder:"请输入返佣时效"},model:{value:e.cashForm.recommend_day,callback:function(t){e.$set(e.cashForm,"recommend_day",t)},expression:"cashForm.recommend_day"}},[a("template",{slot:"append"},[e._v("天")])],2),e._v(" "),a("lb-tool-tips",[e._v("自设置推荐费开始计算时间，每次保存后重新累计推荐费到期时间\n          ")])],1),e._v(" "),a("el-form-item",{attrs:{label:"返佣范围",prop:"recommend_range"}},[a("el-radio-group",{model:{value:e.cashForm.recommend_range,callback:function(t){e.$set(e.cashForm,"recommend_range",t)},expression:"cashForm.recommend_range"}},[a("el-radio",{attrs:{label:3}},[e._v("不限地区")]),e._v(" "),a("div",{staticClass:"mt-sm mb-sm"},[a("el-radio",{attrs:{label:2}},[e._v("仅限平台开放城市")])],1),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("仅限与"+e._s(e.$t("action.resellerName"))+"同城市")])],1),e._v(" "),a("lb-tool-tips",{attrs:{padding:18}},[e._v("\n            不限地区：只要"+e._s(e.$t("action.resellerName"))+"邀请新用户进入系统就可以获得推荐费，不限制新用户所在地区\n            "),a("div",{staticClass:"mt-sm"},[e._v("\n              仅限平台开放城市："+e._s(e.$t("action.resellerName"))+"邀请的新用户所在城市，平台有开通业务则返佣\n            ")]),e._v(" "),a("div",{staticClass:"mt-sm"},[e._v("\n              仅限与"+e._s(e.$t("action.resellerName"))+"同城市："+e._s(e.$t("action.resellerName"))+"邀请进入的新用户如果和"+e._s(e.$t("action.resellerName"))+"所属上级"+e._s(e.$t("action.agentName"))+"代理的城市范围相同，则返佣金，反之不返\n            ")])])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showDialog.cash=!1}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),a("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:function(t){return e.submitFormInfo("cash")}}},[e._v(e._s(e.$t("action.comfirm")))])],1)],1)],1)],1)},staticRenderFns:[]};var x=a("C7Lr")(w,$,!1,function(e){a("+M0j")},"data-v-6da66c33",null);t.default=x.exports}});