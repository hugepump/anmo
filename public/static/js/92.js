webpackJsonp([92],{K3sn:function(e,t){},WeBM:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("3cXf"),o=r.n(a),s=r("rVsN"),i=r.n(s),n=r("KH7x"),l=r.n(n),p=r("lC5x"),c=r.n(p),u=r("J0Oq"),_=r.n(u),d={data:function(){return{subForm:{app_key:"",app_secret:"",company_id:"",phone_type:"",wait_pay_script_id:"",wait_pay_phone_id:"",order_radar_script_id:"",order_radar_phone_id:""},subFormRules:{app_key:{required:!0,validator:this.$reg.isNotNull,text:"APP_KEY",reg_type:2,trigger:"blur"},app_secret:{required:!0,validator:this.$reg.isNotNull,text:"APP_SECRET",reg_type:2,trigger:"blur"},company_id:{required:!0,validator:this.$reg.isNotNull,text:"公司id",reg_type:2,trigger:"blur"},phone_type:{required:!0,type:"number",message:"请选择回访电话拨打方式",trigger:"blur"}},scriptList:[],phoneList:[],activeName:"basic"}},created:function(){var e=this;return _()(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDetail();case 2:case"end":return t.stop()}},t,e)}))()},methods:{handleClick:function(e){console.log(e,"==========> ");var t=e.name;this.activeName=t,"option"===t&&this.getScriptList()},getDetail:function(){var e=this;return _()(c.a.mark(function t(){var r,a,o,s,i;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.system.bySetting();case 2:if(r=t.sent,a=r.code,o=r.data,200===a){t.next=7;break}return t.abrupt("return");case 7:for(i in s=["wait_pay_script_id","wait_pay_phone_id","order_radar_script_id","order_radar_phone_id"],e.subForm)e.subForm[i]=s.includes(i)?Number(o[i]):o[i];console.log(e.subForm,"========> this.subForm");case 10:case"end":return t.stop()}},t,e)}))()},getScriptList:function(){var e=this;return _()(c.a.mark(function t(){var r,a,o,s,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.subForm.app_key&&e.subForm.app_secret&&e.subForm.company_id){t.next=2;break}return t.abrupt("return");case 2:return r={app_key:e.subForm.app_key,app_secret:e.subForm.app_secret,company_id:e.subForm.company_id},t.next=5,i.a.all([e.$api.system.scriptListV2(r),e.$api.system.phoneListV2(r)]);case 5:a=t.sent,o=l()(a,2),s=o[0],n=o[1],e.scriptList=s.data,e.phoneList=n.data;case 11:case"end":return t.stop()}},t,e)}))()},submitFormInfo:function(e){var t=this,r=!0;if(this.$refs[e].validate(function(e){e||(r=!1)}),r){var a=JSON.parse(o()(this.subForm));this.$api.system.postBySetting(a).then(function(e){200===e.code&&t.$message.success(t.$t("tips.successSub"))})}}}},m={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"lb-system-yunxin"},[r("top-nav"),e._v(" "),r("div",{staticClass:"page-main"},[r("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"基本配置",name:"basic"}}),e._v(" "),r("el-tab-pane",{attrs:{label:"外呼选项",name:"option"}})],1),e._v(" "),r("el-form",{ref:"subForm",attrs:{model:e.subForm,rules:e.subFormRules,"label-width":"160px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("block",{directives:[{name:"show",rawName:"v-show",value:"basic"===e.activeName,expression:"activeName === 'basic'"}]},[r("el-form-item",{attrs:{label:"APP_KEY",prop:"app_key"}},[r("el-input",{attrs:{placeholder:"请输入APP_KEY"},model:{value:e.subForm.app_key,callback:function(t){e.$set(e.subForm,"app_key",t)},expression:"subForm.app_key"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"APP_SECRET",prop:"app_secret"}},[r("el-input",{attrs:{placeholder:"请输入APP_SECRET值"},model:{value:e.subForm.app_secret,callback:function(t){e.$set(e.subForm,"app_secret",t)},expression:"subForm.app_secret"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"公司ID",prop:"company_id"}},[r("el-input",{attrs:{placeholder:"请输入公司ID"},model:{value:e.subForm.company_id,callback:function(t){e.$set(e.subForm,"company_id",t)},expression:"subForm.company_id"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"回访电话拨打方式",prop:"phone_type"}},[r("el-radio-group",{model:{value:e.subForm.phone_type,callback:function(t){e.$set(e.subForm,"phone_type",t)},expression:"subForm.phone_type"}},[r("el-radio",{attrs:{label:1}},[e._v("手动拨打")]),e._v(" "),r("el-radio",{attrs:{label:2}},[e._v("自动拨打")])],1),e._v(" "),r("lb-tool-tips",[e._v("\n            手动拨打：在百应允许时间范围内，用户可筛选符合条件的，一键拨打意向客户电话。\n            "),r("div",{staticClass:"mt-sm"},[e._v("\n              自动拨打：订单雷达生成一条数据，运营时间范围内就可实时拨打一次。\n            ")])])],1)],1),e._v(" "),r("block",{directives:[{name:"show",rawName:"v-show",value:"option"===e.activeName,expression:"activeName === 'option'"}]},[r("el-form-item",{attrs:{label:"待支付AI话术",prop:"wait_pay_script_id"}},[r("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择待支付AI话术"},on:{change:function(t){return e.changeSelect(t,"wait_pay_script_id")}},model:{value:e.subForm.wait_pay_script_id,callback:function(t){e.$set(e.subForm,"wait_pay_script_id",t)},expression:"subForm.wait_pay_script_id"}},e._l(e.scriptList,function(e){return r("el-option",{key:e.robotDefId,attrs:{label:e.robotName,value:e.robotDefId}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"外呼号码",prop:"wait_pay_phone_id"}},[r("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择外呼号码"},on:{change:function(t){return e.changeSelect(t,"wait_pay_phone_id")}},model:{value:e.subForm.wait_pay_phone_id,callback:function(t){e.$set(e.subForm,"wait_pay_phone_id",t)},expression:"subForm.wait_pay_phone_id"}},e._l(e.phoneList,function(e){return r("el-option",{key:e.userPhoneId,attrs:{label:e.phone,value:e.userPhoneId}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"待支付AI话术",prop:"order_radar_script_id"}},[r("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择待支付AI话术"},on:{change:function(t){return e.changeSelect(t,"order_radar_script_id")}},model:{value:e.subForm.order_radar_script_id,callback:function(t){e.$set(e.subForm,"order_radar_script_id",t)},expression:"subForm.order_radar_script_id"}},e._l(e.scriptList,function(e){return r("el-option",{key:e.robotDefId,attrs:{label:e.robotName,value:e.robotDefId}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"外呼号码",prop:"order_radar_phone_id"}},[r("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择外呼号码"},on:{change:function(t){return e.changeSelect(t,"order_radar_phone_id")}},model:{value:e.subForm.order_radar_phone_id,callback:function(t){e.$set(e.subForm,"order_radar_phone_id",t)},expression:"subForm.order_radar_phone_id"}},e._l(e.phoneList,function(e){return r("el-option",{key:e.userPhoneId,attrs:{label:e.phone,value:e.userPhoneId}})}),1)],1)],1),e._v(" "),r("el-form-item",[r("lb-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:function(t){return e.submitFormInfo("subForm")}}},[e._v(e._s(e.$t("action.submit")))])],1)],1)],1)],1)},staticRenderFns:[]};var b=r("C7Lr")(d,m,!1,function(e){r("K3sn")},"data-v-6673e24f",null);t.default=b.exports}});