webpackJsonp([71],{"4mcm":function(e,t){},EXqs:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("hRKE"),l=a.n(r),i=a("3cXf"),n=a.n(i),s=a("lC5x"),o=a.n(s),c=a("rVsN"),u=a.n(c),d=a("J0Oq"),m=a.n(d),h=a("PxTW"),p=a.n(h),f={data:function(){return{pickerOptions:{disabledDate:function(e){return e.getTime()>1e3*(p()(p()(Date.now()).format("YYYY-MM-DD")).unix()+86400-1)}},loading:{list:!1,child:!1,user:!1},searchForm:{list:{page:1,limit:10,user_id:""},child:{page:1,limit:10,user_id:""},user:{page:1,limit:10,user_id:""}},tableData:{child:[],user:[]},total:{child:0,user:0}}},created:function(){},methods:{resetForm:function(e){var t=e+"Form";this.$refs[t].resetFields(),this.user_info=[],this.level_info=[],this.tableData={child:[],user:[]},this.total={child:0,user:0}},handleSizeChange:function(e,t){this.searchForm[t].limit=e,this.handleCurrentChange(1,t)},handleCurrentChange:function(e,t){this.searchForm[t].page=e,this.getTableDataList("",t)},toSearch:function(){var e=this;return m()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((a=e.searchForm.list.user_id)&&/^[1-9]\d*$/.test(a)){t.next=4;break}return e.$message.error("请输入需要查找的用户ID"),t.abrupt("return");case 4:return t.next=6,e.getTableDataList(1,"list");case 6:if(0!==e.user_info.length){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,u.a.all([e.getTableDataList(1,"child"),e.getTableDataList(1,"user")]);case 10:case"end":return t.stop()}},t,e)}))()},getTableDataList:function(e,t){var a=this;return m()(o.a.mark(function r(){var i,s,c,u,d,m,h,p,f,_,b;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e&&(a.searchForm[t].page=e),a.loading[t]=!0,(i=JSON.parse(n()(a.searchForm[t]))).user_id=a.searchForm.list.user_id,s={list:{methodKey:"distribution",methodModel:"resellerRelationshipTop"},child:{methodKey:"distribution",methodModel:"subReseller"},user:{methodKey:"distribution",methodModel:"subUser"}}[t],c=s.methodKey,u=s.methodModel,r.next=8,a.$api[c][u](i);case 8:if(d=r.sent,m=d.code,h=d.data,a.loading[t]=!1,200===m){r.next=14;break}return r.abrupt("return");case 14:"list"===t?(p=h.level_info,f=void 0===p?{}:p,_=h.user_info,b=void 0===_?{}:_,a.level_info="object"===(void 0===f?"undefined":l()(f))&&f.id?[f]:f,a.user_info="object"===(void 0===b?"undefined":l()(b))&&b.id?[b]:b):(a.tableData[t]=h.data,a.total[t]=h.total);case 15:case"end":return r.stop()}},r,a)}))()},confirmDel:function(e,t,a,r){var l=this,i=this.user_info[0].user_name,n={1:"["+r+"]将不再是"+i+"的上级",2:"["+r+"]将不再是"+i+"的下级",3:"["+r+"]将不再是"+i+"的邀请用户"};this.$confirm("解除关系后，"+n[a]+"，你确认要解除绑定关系吗？",this.$t("tips.reminder"),{confirmButtonText:this.$t("action.comfirm"),cancelButtonText:"我再想想",type:"warning"}).then(function(){l.updateItem(e,t)}).catch(function(){})},updateItem:function(e,t){var a=this;return m()(o.a.mark(function r(){var l,i;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:l="user"===t?"delSubUser":"resellerUpdate",i="user"===t?{user_id:e}:{id:e,pid:0},a.$api.distribution[l](i).then(function(e){200===e.code&&(a.$message.success(a.$t("tips.successOper")),a.toSearch())});case 3:case"end":return r.stop()}},r,a)}))()}},filters:{handleTime:function(e,t){return 1===t?p()(1e3*e).format("YYYY-MM-DD"):2===t?p()(1e3*e).format("HH:mm:ss"):p()(1e3*e).format("YYYY-MM-DD HH:mm:ss")}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lb-top-count"},[a("top-nav",{attrs:{isBack:!0}}),e._v(" "),a("div",{staticClass:"page-main"},[a("el-row",{staticClass:"page-search-form"},[a("el-form",{ref:"listForm",attrs:{inline:!0,model:e.searchForm.list},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"输入查询",prop:"user_id"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入需要查找用户的ID"},model:{value:e.searchForm.list.user_id,callback:function(t){e.$set(e.searchForm.list,"user_id",t)},expression:"searchForm.list.user_id"}})],1),e._v(" "),a("el-form-item",[a("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",type:"primary",icon:"el-icon-search"},on:{click:e.toSearch}},[e._v(e._s(e.$t("action.search")))]),e._v(" "),a("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("list")}}},[e._v(e._s(e.$t("action.reset")))])],1)],1)],1),e._v(" "),a("lb-classify-title",{attrs:{title:"当前"+e.$t("action.resellerName")+"信息"}}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.list,expression:"loading.list"}],staticStyle:{width:"100%"},attrs:{data:e.user_info,"header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[a("el-table-column",{attrs:{prop:"user_id",label:"用户ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"avatarUrl",label:"微信头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("lb-image",{attrs:{src:e.row.avatarUrl}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nickName",label:"微信昵称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_name",label:e.$t("action.resellerName")+"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号","min-width":"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sh_time",label:"加入时间","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("handleTime")(t.row.sh_time,1)))]),e._v(" "),a("p",[e._v(e._s(e._f("handleTime")(t.row.sh_time,2)))])]}}])})],1),e._v(" "),a("div",{staticClass:"space-xxl"}),e._v(" "),a("lb-classify-title",{attrs:{title:"上级"+e.$t("action.resellerName")+"信息"}}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.list,expression:"loading.list"}],staticStyle:{width:"100%"},attrs:{data:e.level_info,"header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[a("el-table-column",{attrs:{prop:"user_id",label:"用户ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"avatarUrl",label:"微信头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("lb-image",{attrs:{src:e.row.avatarUrl}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nickName",label:"微信昵称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_name",label:e.$t("action.resellerName")+"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号","min-width":"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sh_time",label:"加入时间","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("handleTime")(t.row.sh_time,1)))]),e._v(" "),a("p",[e._v(e._s(e._f("handleTime")(t.row.sh_time,2)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-operate"},[a("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"DistributionCount-cancelBindUser",expression:"`DistributionCount-cancelBindUser`"}],attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(a){return e.confirmDel(e.user_info[0].id,"top",1,t.row.user_name)}}},[e._v(e._s(e.$t("action.cancelBindUser")))])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"space-xxl"}),e._v(" "),a("lb-classify-title",{attrs:{title:"下级"+e.$t("action.resellerName")+"信息"}}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.child,expression:"loading.child"}],staticStyle:{width:"100%"},attrs:{data:e.tableData.child,"header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[a("el-table-column",{attrs:{prop:"user_id",label:"用户ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"avatarUrl",label:"微信头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("lb-image",{attrs:{src:e.row.avatarUrl}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nickName",label:"微信昵称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_name",label:e.$t("action.resellerName")+"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号","min-width":"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sh_time",label:"加入时间","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("handleTime")(t.row.sh_time,1)))]),e._v(" "),a("p",[e._v(e._s(e._f("handleTime")(t.row.sh_time,2)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-operate"},[a("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"DistributionCount-cancelBindUser",expression:"`DistributionCount-cancelBindUser`"}],attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(a){return e.confirmDel(t.row.id,"top",2,t.row.user_name)}}},[e._v(e._s(e.$t("action.cancelBindUser")))])],1)]}}])})],1),e._v(" "),e.total.child>e.searchForm.child.limit?a("lb-page",{attrs:{batch:!1,page:e.searchForm.child.page,pageSize:e.searchForm.child.limit,total:e.total.child},on:{handleSizeChange:function(t){return e.handleSizeChange(t,"child")},handleCurrentChange:function(t){return e.handleCurrentChange(t,"child")}}}):e._e(),e._v(" "),a("div",{staticClass:"space-xxl"}),e._v(" "),a("lb-classify-title",{attrs:{title:"邀请的用户信息"}}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.user,expression:"loading.user"}],staticStyle:{width:"100%"},attrs:{data:e.tableData.user,"header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[a("el-table-column",{attrs:{prop:"id",label:"用户ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"avatarUrl",label:"微信头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("lb-image",{attrs:{src:e.row.avatarUrl}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nickName",label:"微信昵称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号","min-width":"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"加入时间","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("handleTime")(t.row.create_time,1)))]),e._v(" "),a("p",[e._v(e._s(e._f("handleTime")(t.row.create_time,2)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-operate"},[a("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:"DistributionCount-cancelBindUser",expression:"`DistributionCount-cancelBindUser`"}],attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(a){return e.confirmDel(t.row.id,"user",3,t.row.nickName)}}},[e._v(e._s(e.$t("action.cancelBindUser")))])],1)]}}])})],1),e._v(" "),e.total.user>e.searchForm.user.limit?a("lb-page",{attrs:{batch:!1,page:e.searchForm.user.page,pageSize:e.searchForm.user.limit,total:e.total.user},on:{handleSizeChange:function(t){return e.handleSizeChange(t,"user")},handleCurrentChange:function(t){return e.handleCurrentChange(t,"user")}}}):e._e()],1)],1)},staticRenderFns:[]};var b=a("C7Lr")(f,_,!1,function(e){a("4mcm")},"data-v-856c2f02",null);t.default=b.exports}});