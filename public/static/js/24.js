webpackJsonp([24],{"+8Qb":function(e,t){},"7c6x":function(e,t){},HRYs:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("aA9S"),n=a.n(r),i=a("3cXf"),s=a.n(i),o=a("lC5x"),l=a.n(o),c=a("J0Oq"),m=a.n(c),u=a("4YfN"),d=a.n(u),_=a("PxTW"),p=a.n(_),f=a("bSIt"),h={data:function(){return{pickerOptions:{disabledDate:function(e){return e.getTime()>1e3*(p()(p()(Date.now()).format("YYYY-MM-DD")).unix()+86400-1)}},serviceTypeList:[{id:0,title:"全部服务"},{id:2,title:"上门服务"},{id:1,title:"到店服务"}],transfreTypeList:[{id:1,title:"距离最近"},{id:2,title:"最早可预约"}],base_agent:[],base_agent_coach:[],carType:{0:"公交/地铁",1:"出租车"},payType:{1:"微信支付",2:"余额支付",3:"支付宝支付",4:"折扣卡支付"},statusType:{"-1":"已取消",1:"待支付",2:"待接单",3:"已接单",4:"已出发",5:"已到达",6:"服务中",7:"已完成",8:"待转单"},cityType:{3:{type:"success",text:"省"},1:{type:"primary",text:"市"},2:{type:"danger",text:"区县"}},pagePermission:[],pagePermissionBell:[],loading:{list:!1,transfer:!1},searchForm:{list:{page:1,limit:10,goods_name:"",coach_name:"",channel_name:"",channel_qr_name:"",order_code:"",mobile:"",start_time:"",end_time:"",is_store:0,admin_id:"",pay_type:8},transfer:{page:1,limit:10,order_id:"",type:1}},tableData:{list:[],transfer:[]},total:{list:0,transfer:0},order_price:0,car_price:0,downloadLoading:!1,showDialog:{transfer:!1},transferForm:{order_id:"",init_service_price:"",coach_type:1,coach_id:"",coach_name:"",mobile:"",text:"",admin_id:""},transferSubFormRules:{coach_name:{required:!0,validator:this.$reg.isNotNull,text:this.$t("action.attendantName")+"姓名",reg_type:2,trigger:"blur"},mobile:{required:!0,validator:this.$reg.isTel,text:"联系电话",reg_type:2,trigger:"blur"}},lockTap:!1}},computed:d()({},Object(f.e)({routesItem:function(e){return e.routes}})),created:function(){var e=this;return m()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.routesItem.routes.map(function(t){"/shop"===t.path&&t.children.map(function(t){"ShopOrder"===t.name&&(e.pagePermission=t.meta.pagePermission[0].auth),"ShopBellOrder"===t.name&&(e.pagePermissionBell=t.meta.pagePermission[0].auth)})});case 1:case"end":return t.stop()}},t,e)}))()},activated:function(){var e=this;return m()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=1,Number(window.sessionStorage.getItem("currentPage"))&&(a=Number(window.sessionStorage.getItem("currentPage")),window.sessionStorage.removeItem("currentPage")),t.next=4,e.getBaseInfo();case 4:e.getTableDataList(a,"list");case 5:case"end":return t.stop()}},t,e)}))()},beforeRouteLeave:function(e,t,a){"ShopOrderDetail"===e.name&&window.sessionStorage.setItem("currentPage",this.searchForm.list.page),a()},methods:{getBaseInfo:function(){var e=this;return m()(l.a.mark(function t(){var a,r,n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.agent.adminSelect();case 2:if(a=t.sent,r=a.code,n=a.data,200===r){t.next=7;break}return t.abrupt("return");case 7:e.base_agent=n;case 8:case"end":return t.stop()}},t,e)}))()},resetForm:function(e){var t=e+"Form";this.$refs[t].resetFields(),this.getTableDataList(1,e)},handleSizeChange:function(e,t){this.searchForm[t].limit=e,this.handleCurrentChange(1,t)},handleCurrentChange:function(e,t){this.searchForm[t].page=e,this.getTableDataList("",t)},getTableDataList:function(e,t){var a=this;e&&(this.searchForm[t].page=e),this.loading[t]=!0;var r=JSON.parse(s()(this.searchForm[t]));if("list"===t){var n=r.start_time;n&&n.length>1?(r.start_time=n[0]/1e3,r.end_time=n[1]/1e3):(r.start_time="",r.end_time="")}var i={list:"orderList",transfer:"orderChangeCoachList"}[t];this.$api.shop[i](r).then(function(e){if(a.loading[t]=!1,200===e.code){var r=e.data,n=r.data,i=r.total;a.tableData[t]=n,a.total[t]=i}})},toShowDialog:function(e,t){var a=this;return m()(l.a.mark(function r(){var n,i;return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t=JSON.parse(s()(t)),n=t.id,"transfer"!==e){r.next=16;break}if([2,3,4,5,6,8].includes(t.pay_type)){r.next=7;break}return a.$message.error("当前订单不支持转单哦"),a.getTableDataList("","list"),r.abrupt("return");case 7:for(i in t.init_service_price=t.true_service_price,t.order_id=n,t.coach_type=1,a[e+"Form"])a[e+"Form"][i]=t[i];return a.searchForm.transfer.order_id=n,a.searchForm.transfer.type=1,a.currentRow={},r.next=16,a.getTableDataList(1,e);case 16:a.showDialog[e]=!0,["transfer"].includes(e)&&a.$refs[e+"Form"].validate&&a.$refs[e+"Form"].clearValidate();case 18:case"end":return r.stop()}},r,a)}))()},changeCoachType:function(e){var t=this;return m()(l.a.mark(function a(){var r,i,s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=n()({},t.transferForm,{coach_id:"",coach_name:"",mobile:"",text:"",admin_id:""}),t.transferForm=r,t.currentRow={},1!==e){a.next=5;break}return a.abrupt("return");case 5:return a.next=7,t.$api.agent.adminSelect({agent_coach_auth:1});case 7:i=a.sent,s=i.data,t.base_agent_coach=s;case 10:case"end":return a.stop()}},a,t)}))()},handleTableChange:function(e,t){e=JSON.parse(s()(e)),this.currentRow=e},handleDialogConfirm:function(){var e=this;return m()(l.a.mark(function t(){var a,r,n,i,o,c,m,u,d,_;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=!0,r=JSON.parse(s()(e.transferForm)),n=r.coach_type,1!==(void 0===n?1:n)){t.next=16;break}if(null!==e.currentRow&&e.currentRow.id){t.next=7;break}return e.$message.error("请选择"+e.$t("action.attendantName")),t.abrupt("return");case 7:i=e.currentRow,o=i.id,c=void 0===o?0:o,m=i.near_time,u=void 0===m?"":m,r.coach_id=c,r.near_time=u,delete r.coach_name,delete r.mobile,delete r.text,delete r.admin_id,t.next=18;break;case 16:r.coach_id=0,e.$refs.transferSubForm.validate(function(e){e||(a=!1)});case 18:if(delete r.coach_type,delete r.init_service_price,!e.lockTap&&a){t.next=22;break}return t.abrupt("return");case 22:return e.lockTap=!0,t.prev=23,t.next=26,e.$api.shop.orderChangeCoach(r);case 26:if(d=t.sent,_=d.code,e.lockTap=!1,200===_){t.next=31;break}return t.abrupt("return");case 31:e.$message.success(e.$t("tips.successOper")),e.getTableDataList("","list"),e.showDialog.transfer=!1,t.next=39;break;case 36:t.prev=36,t.t0=t.catch(23),e.lockTap=!1;case 39:case"end":return t.stop()}},t,e,[[23,36]])}))()},toPassRefund:function(e){var t=this;return m()(l.a.mark(function a(){var r,n;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e=JSON.parse(s()(e)),r=e.can_refund_price,delete e.can_refund_price,n=t.$createElement,t.$confirm(n("p",null,[n("p",null,"你确认要操作退款吗？"),n("p",{style:"font-size:13px;line-height:1.2;color: red"},"退款金额：¥"+r)]),t.$t("tips.reminder"),{confirmButtonText:t.$t("action.comfirm"),cancelButtonText:t.$t("action.cancel"),type:"warning"}).then(function(){if(!t.lockTap){t.lockTap=!0;try{t.$api.shop.adminUpdateOrder(e).then(function(e){t.lockTap=!1,200===e.code&&(t.$message.success(t.$t("tips.successOper")),t.getTableDataList("","list"))})}catch(e){t.lockTap=!1}}});case 5:case"end":return a.stop()}},a,t)}))()}},filters:{handleTime:function(e,t){return 1===t?p()(1e3*e).format("YYYY-MM-DD"):2===t?p()(1e3*e).format("HH:mm:ss"):p()(1e3*e).format("YYYY-MM-DD HH:mm:ss")}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lb-shop-order-refuse"},[a("top-nav"),e._v(" "),a("div",{staticClass:"page-main"},[a("el-row",{staticClass:"page-search-form"},[a("el-form",{ref:"listForm",attrs:{inline:!0,model:e.searchForm.list},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"服务名称",prop:"goods_name"}},[a("el-input",{attrs:{placeholder:"请输入服务名称"},model:{value:e.searchForm.list.goods_name,callback:function(t){e.$set(e.searchForm.list,"goods_name",t)},expression:"searchForm.list.goods_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("action.attendantName")+"姓名",prop:"coach_name"}},[a("el-input",{attrs:{placeholder:"请输入"+e.$t("action.attendantName")+"姓名"},model:{value:e.searchForm.list.coach_name,callback:function(t){e.$set(e.searchForm.list,"coach_name",t)},expression:"searchForm.list.coach_name"}})],1),e._v(" "),e.routesItem.auth.channel&&(e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&e.routesItem.auth.channel_auth)?a("el-form-item",{attrs:{label:e.$t("action.channelName")+"姓名",prop:"channel_name"}},[a("el-input",{attrs:{placeholder:"请输入"+e.$t("action.channelName")+"姓名"},model:{value:e.searchForm.list.channel_name,callback:function(t){e.$set(e.searchForm.list,"channel_name",t)},expression:"searchForm.list.channel_name"}})],1):e._e(),e._v(" "),e.routesItem.auth.channel&&(e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&e.routesItem.auth.channel_auth)?a("el-form-item",{attrs:{label:"渠道码名称",prop:"channel_qr_name"}},[a("el-input",{attrs:{placeholder:"请输入渠道码名称"},model:{value:e.searchForm.list.channel_qr_name,callback:function(t){e.$set(e.searchForm.list,"channel_qr_name",t)},expression:"searchForm.list.channel_qr_name"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"系统订单号",prop:"order_code"}},[a("el-input",{attrs:{placeholder:"请输入系统订单号"},model:{value:e.searchForm.list.order_code,callback:function(t){e.$set(e.searchForm.list,"order_code",t)},expression:"searchForm.list.order_code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"下单手机号",prop:"mobile"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入下单时填写的手机号"},model:{value:e.searchForm.list.mobile,callback:function(t){e.$set(e.searchForm.list,"mobile",t)},expression:"searchForm.list.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"日期",prop:"start_time"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp","picker-options":e.pickerOptions,"default-time":["00:00:00","23:59:59"]},on:{change:function(t){return e.getTableDataList(1,"list")}},model:{value:e.searchForm.list.start_time,callback:function(t){e.$set(e.searchForm.list,"start_time",t)},expression:"searchForm.list.start_time"}})],1),e._v(" "),e.routesItem.auth.store?a("el-form-item",{attrs:{label:"服务方式",prop:"is_store"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.getTableDataList(1,"list")}},model:{value:e.searchForm.list.is_store,callback:function(t){e.$set(e.searchForm.list,"is_store",t)},expression:"searchForm.list.is_store"}},e._l(e.serviceTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}),1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:""+e.$t("action.agentName"),prop:"admin_id"}},[a("el-select",{attrs:{placeholder:"请选择"+e.$t("action.agentName"),filterable:"",clearable:""},on:{change:function(t){return e.getTableDataList(1,"list")}},model:{value:e.searchForm.list.admin_id,callback:function(t){e.$set(e.searchForm.list,"admin_id",t)},expression:"searchForm.list.admin_id"}},e._l(e.base_agent,function(e){return a("el-option",{key:e.id,attrs:{label:e.agent_name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",[a("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.getTableDataList(1,"list")}}},[e._v(e._s(e.$t("action.search")))]),e._v(" "),a("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("list")}}},[e._v(e._s(e.$t("action.reset")))])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.list,expression:"loading.list"}],staticStyle:{width:"100%"},attrs:{data:e.tableData.list,"header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goods_info_text",width:"210",label:"服务项目信息"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.order_goods,function(t,r){return a("div",{key:r,staticClass:"goods-info-text flex-warp pt-md pb-sm"},[a("lb-image",{staticClass:"radius-5",attrs:{src:t.goods_cover}}),e._v(" "),a("div",{staticClass:"info-item flex-1 f-icontext c-caption ml-md"},[a("div",{staticClass:"flex-between"},[a("div",{staticClass:"f-caption c-title ellipsis",class:[{"max-160":t.refund_num>0}],staticStyle:{"line-height":"1.2"}},[e._v("\n                  "+e._s(t.goods_name)+"\n                ")]),e._v(" "),t.refund_num>0?a("div",{staticClass:"c-warning"},[e._v("\n                  已退x"+e._s(t.refund_num)+"\n                ")]):e._e()]),e._v(" "),a("div",{staticClass:"flex-y-center",staticStyle:{"line-height":"1.4"}},[e._v("\n                时长："+e._s(t.time_long)+" 分钟\n              ")]),e._v(" "),1*t.init_material_price>0?a("div",{staticClass:"flex-y-center",staticStyle:{"line-height":"1.4"}},[e._v("\n                "+e._s(e.$t("action.materialText"))+"：\n                "),a("div",{staticClass:"c-warning"},[e._v("¥"+e._s(t.init_material_price))])]):e._e(),e._v(" "),a("div",{staticClass:"flex-between mt-sm",staticStyle:{"line-height":"1.4"}},[a("div",{staticClass:"c-warning"},[e._v("¥"+e._s(t.price))]),e._v(" "),a("div",[e._v("x"+e._s(t.num))])])])],1)})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"user_name",label:"下单人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile","min-width":"110",label:"下单手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"coach_info.coach_name",label:"原"+e.$t("action.attendantName")}}),e._v(" "),a("el-table-column",{attrs:{prop:"store_id",label:"服务方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.store_id?"到店服务":"上门服务"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"start_time","min-width":"110",label:"服务开始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("handleTime")(t.row.start_time,1)))]),e._v(" "),a("div",[e._v(e._s(e._f("handleTime")(t.row.start_time,2)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"car_type","min-width":"120",label:"出行费用"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.store_id?void 0:[a("div",[e._v("\n            "+e._s(e.carType[t.row.car_type])+"\n          ")]),e._v(" "),1==t.row.car_type?a("div",{staticClass:"flex-y-center"},[e._v("\n            全程"+e._s(t.row.distance)+"，车费¥"+e._s(t.row.car_price)+"\n          ")]):e._e(),e._v(" "),t.row.free_fare?a("div",{staticClass:"c-warning"},[e._v("\n            "+e._s(["","平台补贴",e.$t("action.attendantName")+"补贴",e.$t("action.agentName")+"补贴"][t.row.free_fare])+"\n          ")]):e._e()]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"init_service_price",label:"服务项目费用"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          ¥"+e._s(t.row.init_service_price)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"pay_price",label:"实收金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("¥"+e._s(t.row.pay_price))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"order_code","min-width":"130",label:"系统订单号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"transaction_id","min-width":"130",label:"付款订单号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"admin_name",label:""+e.$t("action.agentName")}}),e._v(" "),e.routesItem.auth.channel&&(e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&e.routesItem.auth.channel_auth)?a("el-table-column",{attrs:{prop:"channel_name",label:e.$t("action.channelName")}}):e._e(),e._v(" "),e.routesItem.auth.channel&&(e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&e.routesItem.auth.channel_auth)?a("el-table-column",{attrs:{prop:"channel_qr_name","min-width":"100",label:"渠道码"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"create_time","min-width":"110",label:"下单时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("handleTime")(t.row.create_time,1)))]),e._v(" "),a("div",[e._v(e._s(e._f("handleTime")(t.row.create_time,2)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"pay_model",label:"支付方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.payType[t.row.pay_model])+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"160",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-operate"},[a("lb-button",{directives:[{name:"show",rawName:"v-show",value:t.row.is_add?e.pagePermissionBell.includes("view"):e.pagePermission.includes("view"),expression:"\n                scope.row.is_add\n                  ? pagePermissionBell.includes('view')\n                  : pagePermission.includes('view')\n              "}],attrs:{size:"mini",type:"primary",plain:""},on:{click:function(a){return e.$router.push("/shop/order/detail?id="+t.row.id)}}},[e._v(e._s(e.$t("action.view")))]),e._v(" "),a("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-transferOrder",expression:"`${$route.name}-transferOrder`"}],attrs:{size:"mini",type:"danger",plain:""},on:{click:function(a){return e.toShowDialog("transfer",t.row)}}},[e._v(e._s(e.$t("action.transferOrder")))]),e._v(" "),a("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-agreeRefund",expression:"`${$route.name}-agreeRefund`"}],attrs:{size:"mini",type:"success",plain:""},on:{click:function(a){return e.toPassRefund({type:-1,order_id:t.row.id,can_refund_price:t.row.can_refund_price})}}},[e._v(e._s(e.$t("action.agreeRefund")))])],1)]}}])})],1),e._v(" "),a("lb-page",{attrs:{batch:!1,page:e.searchForm.list.page,pageSize:e.searchForm.list.limit,total:e.total.list},on:{handleSizeChange:function(t){return e.handleSizeChange(t,"list")},handleCurrentChange:function(t){return e.handleCurrentChange(t,"list")}}}),e._v(" "),a("el-dialog",{attrs:{title:"转派"+e.$t("action.attendantName"),visible:e.showDialog.transfer,width:"1000px",top:"5vh",center:""},on:{"update:visible":function(t){return e.$set(e.showDialog,"transfer",t)}}},[a("lb-tips",[e._v("\n        温馨提示：\n        "),a("div",{staticClass:"mt-sm"},[e._v("\n          1、本单用户实际支付服务项目费用"),a("span",{staticClass:"c-warning"},[e._v("¥"+e._s(e.transferForm.init_service_price))]),e._v("，因平台/"+e._s(e.$t("action.agentName"))+"可在服务管理里面为每位"+e._s(e.$t("action.attendantName"))+"设置不同的服务价格，因此存在服务项目费用有偏差，转派订单前需联系"+e._s(e.$t("action.attendantName"))+"说明此单实际服务项目费用情况\n        ")]),e._v(" "),a("div",{staticClass:"mt-sm"},[e._v("\n          2、转派给线下"+e._s(e.$t("action.attendantName"))+"的服务提成按照系统内最低比例核算，加钟订单遵循加钟比例设置提现\n        ")])]),e._v(" "),a("el-form",{ref:"transferSubForm",staticClass:"dialog-form",attrs:{model:e.transferForm,rules:e.transferSubFormRules,"label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"转派订单",prop:"coach_type"}},[a("el-radio-group",{on:{change:e.changeCoachType},model:{value:e.transferForm.coach_type,callback:function(t){e.$set(e.transferForm,"coach_type",t)},expression:"transferForm.coach_type"}},[a("el-radio",{attrs:{label:1}},[e._v("更换"+e._s(e.$t("action.attendantName")))]),e._v(" "),e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&e.routesItem.auth.delegated_coach?a("el-radio",{attrs:{label:2}},[e._v("委派"+e._s(e.$t("action.attendantName")))]):e._e()],1)],1),e._v(" "),2===e.transferForm.coach_type?a("block",[a("el-form-item",{attrs:{label:"线下"+e.$t("action.attendantName"),prop:"coach_name"}},[a("el-input",{attrs:{placeholder:"请输入线下"+e.$t("action.attendantName")+"姓名",maxlength:"15","show-word-limit":""},model:{value:e.transferForm.coach_name,callback:function(t){e.$set(e.transferForm,"coach_name",t)},expression:"transferForm.coach_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话",prop:"mobile"}},[a("el-input",{attrs:{placeholder:"请输入联系电话",maxlength:"11","show-word-limit":""},model:{value:e.transferForm.mobile,callback:function(t){e.$set(e.transferForm,"mobile",t)},expression:"transferForm.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"转派备注",prop:"text"}},[a("el-input",{attrs:{type:"textarea",rows:5,maxlength:"400","show-word-limit":"",resize:"none",placeholder:"若订单有其他特殊情况可单独备注在此处"},model:{value:e.transferForm.text,callback:function(t){e.$set(e.transferForm,"text",t)},expression:"transferForm.text"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关联"+e.$t("action.agentName"),prop:"admin_id"}},[a("div",{staticClass:"flex-y-center"},[a("el-select",{attrs:{placeholder:"请选择"+e.$t("action.agentName"),filterable:"",clearable:""},model:{value:e.transferForm.admin_id,callback:function(t){e.$set(e.transferForm,"admin_id",t)},expression:"transferForm.admin_id"}},e._l(e.base_agent_coach,function(e){return a("el-option",{key:e.id,attrs:{label:e.agent_name,value:e.id}})}),1),e._v(" "),a("div",{staticClass:"lb-text-red-tips ml-md"},[e._v("\n                不关联"+e._s(e.$t("action.agentName"))+"则默认是平台的"+e._s(e.$t("action.attendantName"))+"\n              ")])],1)])],1):e._e()],1),e._v(" "),1===e.transferForm.coach_type?a("div",{staticStyle:{"padding-left":"30px"}},[a("el-form",{ref:"transferForm",attrs:{inline:!0,model:e.searchForm.transfer,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"输入查询",prop:"coach_name"}},[a("el-input",{attrs:{placeholder:"请输入"+e.$t("action.attendantName")+"姓名"},model:{value:e.searchForm.transfer.coach_name,callback:function(t){e.$set(e.searchForm.transfer,"coach_name",t)},expression:"searchForm.transfer.coach_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"筛选排序",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.getTableDataList(1,"transfer")}},model:{value:e.searchForm.transfer.type,callback:function(t){e.$set(e.searchForm.transfer,"type",t)},expression:"searchForm.transfer.type"}},e._l(e.transfreTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",[a("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.getTableDataList(1,"transfer")}}},[e._v(e._s(e.$t("action.search")))]),e._v(" "),a("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("transfer")}}},[e._v(e._s(e.$t("action.reset")))])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.transfer,expression:"loading.transfer"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData.transfer,"header-cell-style":{background:"#f5f7fa",color:"#606266"},"tooltip-effect":"dark","highlight-current-row":""},on:{"current-change":e.handleTableChange}},[a("el-table-column",{attrs:{prop:"coach_name",label:e.$t("action.attendantName")+"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"work_img",width:"150",label:e.$t("action.attendantName")+"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("lb-image",{attrs:{src:e.row.work_img}})]}}],null,!1,1359628658)}),e._v(" "),a("el-table-column",{attrs:{prop:"distance",label:"距离"}}),e._v(" "),a("el-table-column",{attrs:{prop:"near_time",label:"最早可预约"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"服务项目费用"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" ¥"+e._s(t.row.price)+" ")]}}],null,!1,3098777173)}),e._v(" "),a("el-table-column",{attrs:{prop:"admin_info.username",label:"所属"+e.$t("action.agentName")},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.admin_id?a("div",[e._v("平台")]):a("div",[a("div",[e._v(e._s(t.row.admin_info.username))]),e._v(" "),a("el-tag",{attrs:{size:"small",type:e.cityType[t.row.admin_info.city_type].type}},[e._v(e._s(e.cityType[t.row.admin_info.city_type].text)+"代理")])],1)]}}],null,!1,4099677802)}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"联系电话"}})],1),e._v(" "),a("lb-page",{attrs:{batch:!1,page:e.searchForm.transfer.page,pageSize:e.searchForm.transfer.limit,total:e.total.transfer},on:{handleSizeChange:function(t){return e.handleSizeChange(t,"transfer")},handleCurrentChange:function(t){return e.handleCurrentChange(t,"transfer")}}})],1):e._e(),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showDialog.transfer=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:e.handleDialogConfirm}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var b=a("C7Lr")(h,v,!1,function(e){a("7c6x"),a("+8Qb")},"data-v-3c87c07d",null);t.default=b.exports}});