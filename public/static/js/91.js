webpackJsonp([91],{AVlF:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("3cXf"),i=a.n(s),n=a("lC5x"),r=a.n(n),c=a("J0Oq"),l=a.n(c),o=a("4YfN"),d=a.n(o),v=a("bSIt"),u=a("PxTW"),_=a.n(u),p={data:function(){return{detail:{},pay_type:1,timer:null,subForm:{pay_price:""},subFormRules:{pay_price:{required:!0,validator:this.$reg.isMoney,text:"充值金额",reg_type:2,trigger:"blur"}}}},created:function(){this.getDetail()},destroyed:function(){this.timer&&clearInterval(this.timer)},computed:d()({},Object(v.e)({routesItem:function(t){return t.routes}})),methods:{getDetail:function(){var t=this;return l()(r.a.mark(function e(){var a,s,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.adapay.adminInfo();case 2:if(a=e.sent,s=a.code,i=a.data,200===s){e.next=7;break}return e.abrupt("return");case 7:t.detail=i;case 8:case"end":return e.stop()}},e,t)}))()},submitFormInfo:function(){var t=this;return l()(r.a.mark(function e(){var a,s,n,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!0,t.$refs.subForm.validate(function(t){t||(a=!1)}),s=JSON.parse(i()(t.subForm)),a){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t.$api.adapay.adminPay(s);case 7:n=e.sent,c=n.data,t.pay_order=c,t.toConfirmPay(c);case 11:case"end":return e.stop()}},e,t)}))()},toConfirmPay:function(t){var e=this;return l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.timer=setInterval(function(){if(_()(_()().format("YYYY-MM-DD HH:mm:ss")).unix()>t.expiration_time)return clearInterval(e.timer),e.pay_order.order_code=0,void(e.pay_type=3);e.findOrderPay(t.order_code)},2e3),e.pay_type=2;case 2:case"end":return a.stop()}},a,e)}))()},findOrderPay:function(t){var e=this;return l()(r.a.mark(function a(){var s,i,n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$api.adapay.checkAdminPay({order_code:t});case 2:s=a.sent,i=s.code,n=s.data,200===i&&n&&(e.timer&&clearInterval(e.timer),e.pay_order.order_code=n,e.pay_type=3,e.getDetail());case 6:case"end":return a.stop()}},a,e)}))()},toChangeBtn:function(){this.timer&&clearInterval(this.timer),this.pay_type=1}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"lb-adapay-balance"},[a("top-nav"),t._v(" "),a("div",{staticClass:"page-main"},[a("div",{staticClass:"class-menu-list flex-warp mt-lg"},[a("div",{staticClass:"item-child flex-center"},[t._m(0),t._v(" "),a("div",{staticClass:"flex-1 ml-lg c-title"},[a("div",{staticClass:"f-sm-title text-bold"},[t._v("\n            "+t._s(t.detail.cash||0)+"\n          ")]),t._v(" "),a("div",{staticClass:"flex-y-baseline"},[a("div",{staticClass:"f-caption"},[t._v("当前余额")]),t._v(" "),a("lb-tool-tips",{attrs:{padding:0}},[t._v("当前可用于分账的金额")])],1)])]),t._v(" "),a("div",{staticClass:"item-child flex-center"},[t._m(1),t._v(" "),a("div",{staticClass:"flex-1 ml-lg c-title"},[a("div",{staticClass:"f-sm-title text-bold"},[t._v("\n            "+t._s(t.detail.accounts_cash||0)+"\n          ")]),t._v(" "),a("div",{staticClass:"flex-y-baseline"},[a("div",{staticClass:"f-caption"},[t._v("已分账金额")]),t._v(" "),a("lb-tool-tips",{attrs:{padding:0}},[t._v("商家充值进来后，已经参与分账，划分到各角色的金额总数")])],1)])]),t._v(" "),a("div",{staticClass:"item-child flex-center"},[t._m(2),t._v(" "),a("div",{staticClass:"flex-1 ml-lg c-title"},[a("div",{staticClass:"f-sm-title text-bold"},[t._v("\n            "+t._s(t.detail.over_cash||0)+"\n          ")]),t._v(" "),a("div",{staticClass:"flex-y-baseline"},[a("div",{staticClass:"f-caption"},[t._v("过期余额")]),t._v(" "),a("lb-tool-tips",{attrs:{padding:0}},[t._v("由于三方支付公司，分账时间最长为一年半，若商家充值进来的金额在一年半内未使用，则会失效，不能参与分账，可自行到第三方分账控制台提现到对公账户")])],1)])])])]),t._v(" "),a("div",{staticClass:"space-lg fill-body"}),t._v(" "),a("div",{staticClass:"page-main"},[a("lb-tips",[t._v("当我方系统平台余额大于第三方余额时，会导致使用余额支付的订单无法分账，当余额不足时，需要商家进行充值后，"+t._s(t.$t("action.attendantName"))+"、"+t._s(t.routesItem.auth.coachbroker?""+t.$t("action.attendantName")+t.$t("action.brokerName")+"、":"")+"\n      "+t._s(t.routesItem.auth.reseller?t.$t("action.resellerName")+"、":"")+"\n      "+t._s(t.routesItem.auth.channel?t.$t("action.channelName")+"、":"")+"\n      "+t._s(t.routesItem.auth.salesman?"业务员、":"")+t._s(t.$t("action.agentName"))+"才能分账提现")]),t._v(" "),1===t.pay_type?a("el-form",{ref:"subForm",staticClass:"basic-form",staticStyle:{"margin-top":"40px"},attrs:{model:t.subForm,rules:t.subFormRules,"label-width":"120px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{label:"充值金额",prop:"pay_price"}},[a("el-input",{attrs:{placeholder:"请输入充值金额"},model:{value:t.subForm.pay_price,callback:function(e){t.$set(t.subForm,"pay_price",e)},expression:"subForm.pay_price"}},[a("template",{slot:"append"},[t._v("元")])],2),t._v(" "),a("lb-tool-tips",[t._v("仅能使用支付宝充值")])],1),t._v(" "),a("el-form-item",[a("lb-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:t.submitFormInfo}},[t._v("充值")])],1)],1):t._e(),t._v(" "),2===t.pay_type?a("div",{staticClass:"pay-order-info flex-center flex-column"},[a("div",{staticClass:"f-big-title text-bold"},[t._v("扫一扫付款")]),t._v(" "),a("div",{staticClass:"flex-y-baseline f-title c-warning text-bold mt-sm"},[t._v("\n        ¥\n        "),a("div",{staticClass:"f-big-title",staticStyle:{"margin-left":"3px"}},[t._v("\n          "+t._s(t.subForm.pay_price)+"\n        ")])]),t._v(" "),a("div",{staticClass:"space-xxl"}),t._v(" "),a("div",{staticClass:"pay-info flex-center flex-column pd-sm"},[a("img",{staticClass:"img",attrs:{src:t.pay_order.code||""}}),t._v(" "),t._m(3),t._v(" "),a("div",{staticClass:"space-lg"}),t._v(" "),a("el-button",{attrs:{size:"mini",plain:"",type:"danger"},on:{click:t.toChangeBtn}},[t._v("\n          重新充值\n        ")]),t._v(" "),a("div",{staticClass:"space-lg"})],1)]):t._e(),t._v(" "),3===t.pay_type?a("div",{staticClass:"pay-order-info flex-center flex-column"},[a("i",{staticClass:"pay-icon iconfont",class:[{"iconjishiwancheng c-success":1===t.pay_order.order_code},{"iconyuqi c-warning":0===t.pay_order.order_code}]}),t._v(" "),a("div",{staticClass:"c-title text-bold mt-sm"},[t._v("\n        "+t._s(1===t.pay_order.order_code?"支付成功":"二维码已过期，请重新下单")+"\n      ")]),t._v(" "),a("div",{staticClass:"space-xxl"}),t._v(" "),a("el-button",{attrs:{size:"mini",plain:"",type:"danger"},on:{click:t.toChangeBtn}},[t._v("\n        "+t._s(1===t.pay_order.order_code?"再次充值":"重新充值")+"\n      ")]),t._v(" "),a("div",{staticClass:"space-lg"})],1):t._e()],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-icon flex-center radius mb-sm",staticStyle:{background:"#608dff"}},[e("i",{staticClass:"iconfont icon-caiwuguanli c-base"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-icon flex-center radius mb-sm",staticStyle:{background:"#2bcd8e"}},[e("i",{staticClass:"iconfont iconfenzhang c-base"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-icon flex-center radius mb-sm",staticStyle:{background:"#ffa500"}},[e("i",{staticClass:"iconfont iconyuqi c-base"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-info flex-center f-paragraph c-base",staticStyle:{background:"#06b4fd"}},[e("i",{staticClass:"iconfont icon-scan"}),this._v(" "),e("div",{staticClass:"ml-md"},[e("div",[this._v("打开手机支付宝")]),this._v(" "),e("div",[this._v("扫一扫继续付款")])])])}]};var f=a("C7Lr")(p,m,!1,function(t){a("WDlu")},"data-v-67a80dbe",null);e.default=f.exports},WDlu:function(t,e){}});