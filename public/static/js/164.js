webpackJsonp([164],{"1bmz":function(e,t){},"1mGT":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("aA9S"),l=r.n(a),i=r("3cXf"),s=r.n(i),o=r("IHPB"),n=r.n(o),c=r("rVsN"),u=r.n(c),m=r("KH7x"),p=r.n(m),b=r("4YfN"),d=r.n(b),_=r("lC5x"),v=r.n(_),h=r("J0Oq"),f=r.n(h),g=r("bSIt"),F={components:{},data:function(){var e=this,t=function(t,r,a){var l=e.max_balance,i=e.routesItem.userInfo.is_admin,s=e.subForm.admin_id,o=i&&!(void 0===s?0:s)?100:1*l;""!==r&&(!/^(?:0|[1-9][0-9]?|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2}))|100)$/.test(r)||1*r>o)?a(new Error("请输入正确的"+t.text+"，0-"+o+"，支持2位小数")):a()};return{navTitle:"",base_industry:[],base_cate:[],base_position:[],base_guarantee:[],base_service_level:[],reseller_cash_type:1,max_balance:"",base_sendtype:[{title:"上门服务",key:"is_door"},{title:"到店服务",key:"is_store",auth:"store"}],edit_page_info:1,subForm:{id:"",title:"",sub_title:"",industry_type:"",industry_title:"",cate_id:[],cate_name:[],position:[],position_title:[],send_type:[],is_door:0,is_store:0,cover:[],imgs:[],price:"",init_price:"",show_unit:"",time_long:"",material_price:"",sale:"",true_sale:"",show_salenum:!1,com_balance:"",level_balance:"",admin_id:"",reseller_auth:0,member_service:0,service_level:[],member_service_level:[],guarantee:[],guarantee_title:[],introduce:"",explain:"",notice:"",coach:[],status:1,top:0},subFormRules:{title:{required:!0,type:"string",message:"请输入服务名称",trigger:"blur"},sub_title:{required:!0,type:"string",message:"请输入副标题",trigger:"blur"},industry_type:{required:!0,type:"number",message:"请选择关联行业",trigger:"blur"},send_type:{required:!0,type:"array",message:"请选择服务方式",trigger:"blur"},cover:{required:!0,type:"array",message:"请上传图片",trigger:["blur","change"]},imgs:{required:!0,type:"array",message:"请上传图片",trigger:["blur","change"]},price:{required:!0,validator:this.$reg.isMoney,text:"服务价格",trigger:"blur"},material_price:{required:!0,validator:this.$reg.isMoney,text:this.$t("action.materialText"),trigger:"blur"},sale:{required:!0,validator:this.$reg.isNum,trigger:"blur"},time_long:{required:!0,validator:this.$reg.isNum,reg_type:2,trigger:"blur"},com_balance:{required:!1,validator:t,text:"一级"+this.$t("action.resellerName")+"提成",trigger:"blur"},level_balance:{required:!1,validator:t,text:"二级"+this.$t("action.resellerName")+"提成",trigger:"blur"},member_service:{required:!0,type:"number",message:"请选择",trigger:"blur"},service_level:{required:!0,validator:function(t,r,a){var l=e.subForm.service_level;void 0!==l&&l&&0===r.length?a(new Error("请选择指定会员等级专享")):a()},trigger:"blur"},top:{required:!0,type:"number",message:"请输入排序值",trigger:"blur"},introduce:{required:!0,type:"string",message:"请输入项目介绍",trigger:"blur"},notice:{required:!0,type:"string",message:"请输入下单须知",trigger:"blur"},coach:{required:!0,type:"array",message:"请选择关联"+this.$t("action.attendantName"),trigger:"blur"}},priceForm:{id:[],price:""},priceFormRules:{price:{required:!0,validator:this.$reg.isMoney,text:"服务价格",trigger:"blur"}},balanceForm:{id:[],balance:""},balanceFormRules:{balance:{required:!0,validator:this.$reg.isPercentDot,text:"服务提成",trigger:"blur"}},searchForm:{page:1,limit:10,status:2,industry_type:"",name:""},total:0,loading:!1,tableData:[],multipleSelection:[],showDialog:{coach:!1,price:!1,balance:!1}}},created:function(){var e=this;return f()(v.a.mark(function t(){var r,a,l,i,s,o,n,c,u,m;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$route.query,a=r.id,l=r.view,i=void 0===l?0:l,e.edit_page_info=1*i==1?0:1,s=e.routesItem.userInfo,o=s.is_admin,n=s.id,c=s.admin_id,n=(void 0===c?0:c)||n,e.searchForm.admin_id=o?0:n,t.next=7,e.getBaseInfo();case 7:a?(e.subForm.id=a,e.getDetail(a)):3!==(u=e.routesItem.auth.industrytype)&&(m=e.base_industry.filter(function(e){return e.type===u})[0].id,e.subForm.industry_type=m),e.navTitle=e.edit_page_info?e.$t(a?"menu.ServiceEdit":"menu.ServiceAdd"):"查看服务";case 9:case"end":return t.stop()}},t,e)}))()},watch:{"subForm.industry_type":function(e){this.searchForm.industry_type=e,this.$refs.subForm.validate&&this.$refs.subForm.clearValidate()}},computed:d()({},Object(g.e)({routesItem:function(e){return e.routes}})),methods:{getBaseInfo:function(){var e=this;return f()(v.a.mark(function t(){var r,a,l,i,s,o,n,c,m,b;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.routesItem.auth.member,t.next=3,u.a.all([e.$api.technician.typeSelect(),e.$api.service.cateSelect(),e.$api.service.positionSelect(),e.$api.service.guaranteeListNopage(),e.$api.system.configInfo()]);case 3:if(a=t.sent,l=p()(a,5),i=l[0],s=l[1],o=l[2],n=l[3],c=l[4],e.base_industry=i.data,e.base_cate=s.data,e.base_position=o.data,e.base_guarantee=n.data,e.reseller_cash_type=c.data.reseller_cash_type,e.max_balance=c.data.agent_reseller_max_balance,!r){t.next=22;break}return t.next=19,e.$api.member.levelSelect({is_service:1});case 19:m=t.sent,b=m.data,e.base_service_level=b;case 22:case"end":return t.stop()}},t,e)}))()},getCover:function(e){this.subForm.cover=e},selectedFiles:function(e,t){var r;(r=this.subForm[t]).push.apply(r,n()(e))},moveFiles:function(e,t){this.subForm[t]=e},getDetail:function(e){var t=this;return f()(v.a.mark(function r(){var a,l,i,s,o;return v.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$api.service.serviceInfo({id:e});case 2:if(a=r.sent,l=a.code,i=a.data,200===l){r.next=7;break}return r.abrupt("return");case 7:for(s in i.cover=[{url:i.cover}],i.imgs=i.imgs.map(function(e){return{url:e}}),i.member_service_level=i.service_level,i.service_level=i.service_level.length>0?i.service_level.map(function(e){return e.id}):[],!t.routesItem.auth.store&&i.is_store&&(i.is_store=0),i.show_salenum=0===i.show_salenum,i.com_balance=1*i.com_balance==-1?"":i.com_balance,i.level_balance=1*i.level_balance==-1?"":i.level_balance,t.subForm)t.subForm[s]=i[s];o=[],t.base_sendtype.map(function(e){1===i[e.key]&&o.push(e.title)}),t.subForm.send_type=o,t.searchForm.admin_id=i.admin_id;case 21:case"end":return r.stop()}},r,t)}))()},changeCheckBox:function(e){var t=this;this.base_sendtype.map(function(r){t.subForm[r.key]=e.includes(r.title)?1:0})},toShowDialog:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(v.a.mark(function a(){var l;return v.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if("coach"!==e){a.next=6;break}return t.searchForm.name="",a.next=4,t.getTableDataList();case 4:a.next=7;break;case 6:for(l in t[e+"Form"])t[e+"Form"][l]=r[l];case 7:t.showDialog[e]=!t.showDialog[e];case 8:case"end":return a.stop()}},a,t)}))()},resetForm:function(e){this.$refs[e].resetFields(),this.getTableDataList(1)},handleSizeChange:function(e){this.searchForm.limit=e,this.handleCurrentChange(1)},handleCurrentChange:function(e){this.searchForm.page=e,this.getTableDataList()},getTableDataList:function(e){var t=this;return f()(v.a.mark(function r(){var a,l,i;return v.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e&&(t.searchForm.page=e),t.loading=!0,t.multipleSelection.length>0&&t.$refs.multipleTable.clearSelection(),r.next=5,t.$api.technician.coachList(t.searchForm);case 5:if(a=r.sent,l=a.code,i=a.data,t.loading=!1,200===l){r.next=11;break}return r.abrupt("return");case 11:t.tableData=i.data,t.total=i.total;case 13:case"end":return r.stop()}},r,t)}))()},handleSelectionChange:function(e){this.multipleSelection=e},handleDialogConfirm:function(){var e=this;if(0!==this.multipleSelection.length){var t=JSON.parse(s()(this.subForm.coach)),r=t.length>0?t.map(function(e){return e.id}):[],a=this.subForm.price,l=/^(([0-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/;this.multipleSelection.map(function(i){i.price=a&&l.test(a)?a:0,r.includes(i.id)||t.push(e.$util.pick(i,["id","admin_id","admin_name","coach_name","work_img","price"]))}),this.subForm.coach=t,this.showDialog.coach=!1}else this.$message.error("请选择"+this.$t("action.attendantName"))},toResetMultipleSelection:function(){this.multipleSelection=[]},toDelItem:function(e){this.subForm.coach.splice(e,1)},toBatch:function(e){var t=this;return f()(v.a.mark(function r(){var a,i,s;return v.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(0!==t.multipleSelection.length){r.next=3;break}return t.$message.error("请选择要操作的数据"),r.abrupt("return");case 3:if(a=t.multipleSelection.map(function(e){return e.id}),"delete"!==e){r.next=8;break}return i=t.subForm.coach.filter(function(e){return!a.includes(e.id)}),t.subForm.coach=i,r.abrupt("return");case 8:s="price"===e?{price:""}:{balance:""},s=l()({},s,{id:a}),t.toShowDialog(e,s);case 11:case"end":return r.stop()}},r,t)}))()},submitFormInfo:function(e){var t=this,r=!0;if(this.$refs[e+"Form"].validate(function(e){e||(r=!1)}),r){var a=JSON.parse(s()(this[e+"Form"]));if("sub"!==e){var l=this.subForm.coach;return l.map(function(t){a.id.includes(t.id)&&(t[e]=1*a[e])}),this.subForm.coach=l,void(this.showDialog[e]=!1)}var i=a.init_price,o=void 0===i?0:i,n=a.price;a.init_price=o?1*o<1*n?n:o:n,a.cover=a.cover[0].url,a.imgs=a.imgs.map(function(e){return e.url});var c=a.coach.map(function(e){return{coach_id:e.id,price:e.price||0}});a.coach=c,a.show_salenum=a.show_salenum?0:1,a.com_balance=""===a.com_balance?"-1":a.com_balance,a.level_balance=""===a.level_balance?"-1":a.level_balance,delete a.industry_title,delete a.send_type,delete a.cate_name,delete a.position_title,delete a.guarantee_title,delete a.admin_id,delete a.reseller_auth,delete a.member_service_level;var u=a.id?"serviceUpdate":"serviceAdd";this.$api.service[u](a).then(function(e){200===e.code&&(t.$message.success(t.$t(a.id?"tips.successRev":"tips.successSub")),t.$router.back(-1))})}}},filters:{handleIndustry:function(e,t){var r=t.filter(function(t){return t.id===e});return r&&r.length>0?r[0].title:""}}},y={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"lb-service-service-edit"},[r("top-nav",{attrs:{title:e.navTitle,isBack:!0}}),e._v(" "),r("div",{staticClass:"page-main"},[e.edit_page_info?e._e():r("block",[r("lb-service-info",{attrs:{info:e.subForm,reseller_cash_type:e.reseller_cash_type}})],1),e._v(" "),e.edit_page_info?r("el-form",{ref:"subForm",attrs:{model:e.subForm,rules:e.subFormRules,"label-width":"140px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("lb-classify-title",{attrs:{title:"基础信息"}}),e._v(" "),r("el-form-item",{attrs:{label:"服务名称",prop:"title"}},[r("el-input",{attrs:{maxlength:"15","show-word-limit":"",placeholder:"请输入服务名称"},model:{value:e.subForm.title,callback:function(t){e.$set(e.subForm,"title",t)},expression:"subForm.title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"副标题",prop:"sub_title"}},[r("el-input",{attrs:{maxlength:"30","show-word-limit":"",placeholder:"请输入副标题"},model:{value:e.subForm.sub_title,callback:function(t){e.$set(e.subForm,"sub_title",t)},expression:"subForm.sub_title"}})],1),e._v(" "),3===e.routesItem.auth.industrytype?r("block",[r("el-form-item",{attrs:{label:"关联行业",prop:"industry_type"}},[r("div",{staticClass:"flex-y-center"},[r("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:""},on:{change:function(t){e.subForm.coach=[]}},model:{value:e.subForm.industry_type,callback:function(t){e.$set(e.subForm,"industry_type",t)},expression:"subForm.industry_type"}},e._l(e.base_industry,function(e){return r("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}),1),e._v(" "),r("div",{staticClass:"ml-md f-caption c-tips"},[e._v("\n              切换关联行业，将清空关联"+e._s(e.$t("action.attendantName"))+"数据\n            ")])],1)])],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"所属分类",prop:"cate_id"}},[r("el-select",{attrs:{multiple:"","collapse-tags":"",filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.subForm.cate_id,callback:function(t){e.$set(e.subForm,"cate_id",t)},expression:"subForm.cate_id"}},e._l(e.base_cate,function(e){return r("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"服务部位",prop:"position"}},[r("el-select",{attrs:{multiple:"","collapse-tags":"",filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.subForm.position,callback:function(t){e.$set(e.subForm,"position",t)},expression:"subForm.position"}},e._l(e.base_position,function(e){return r("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"服务类型",prop:"send_type"}},[r("el-checkbox-group",{on:{change:e.changeCheckBox},model:{value:e.subForm.send_type,callback:function(t){e.$set(e.subForm,"send_type",t)},expression:"subForm.send_type"}},e._l(e.base_sendtype,function(t,a){return r("div",{directives:[{name:"show",rawName:"v-show",value:"is_store"===t.key&&e.routesItem.auth.store||"is_store"!==t.key,expression:"\n              (item.key === 'is_store' && routesItem.auth.store) ||\n              item.key !== 'is_store'\n            "}],key:a,style:{display:"inline-block",marginLeft:0===a?0:"15px"}},[r("el-checkbox",{attrs:{label:t.title}}),e._v(" "),t.tips?r("lb-tool-tips",[e._v(e._s(t.tips))]):e._e()],1)}),0)],1),e._v(" "),r("el-form-item",{attrs:{label:"封面图",prop:"cover"}},[r("lb-cover",{attrs:{fileList:e.subForm.cover},on:{selectedFiles:e.getCover}}),e._v(" "),r("lb-tool-tips",[e._v("图片建议尺寸: 400 * 400")])],1),e._v(" "),r("el-form-item",{attrs:{label:"轮播图",prop:"imgs"}},[r("lb-cover",{attrs:{fileList:e.subForm.imgs,fileType:"image",type:"more",tips:"750 * 667",fileSize:9},on:{selectedFiles:function(t){return e.selectedFiles(t,"imgs")},moveFiles:function(t){return e.moveFiles(t,"imgs")}}})],1),e._v(" "),r("el-form-item",{attrs:{label:"服务价格",prop:"price"}},[r("el-input",{attrs:{placeholder:"请输入服务价格"},model:{value:e.subForm.price,callback:function(t){e.$set(e.subForm,"price",t)},expression:"subForm.price"}},[r("template",{slot:"append"},[e._v("元")])],2)],1),e._v(" "),r("el-form-item",{attrs:{label:"显示单位",prop:"show_unit"}},[r("el-input",{attrs:{placeholder:"请输入显示单位，例如：小时/次/平方"},model:{value:e.subForm.show_unit,callback:function(t){e.$set(e.subForm,"show_unit",t)},expression:"subForm.show_unit"}}),e._v(" "),r("lb-tool-tips",[e._v("例如：小时/次/平方")])],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("action.materialText"),prop:"material_price"}},[r("el-input",{attrs:{placeholder:"请输入"+e.$t("action.materialText")},model:{value:e.subForm.material_price,callback:function(t){e.$set(e.subForm,"material_price",t)},expression:"subForm.material_price"}},[r("template",{slot:"append"},[e._v("元")])],2),e._v(" "),r("lb-tool-tips",[e._v("服务过程中消耗的"+e._s(e.$t("action.materialText"))+"，例如：一次性衣物，"+e._s(e.$t("action.materialText"))+"不计入"+e._s(e.$t("action.attendantName"))+"提成")])],1),e._v(" "),r("el-form-item",{attrs:{label:"服务时长",prop:"time_long"}},[r("el-input",{attrs:{placeholder:"请输入服务时长"},model:{value:e.subForm.time_long,callback:function(t){e.$set(e.subForm,"time_long",t)},expression:"subForm.time_long"}},[r("template",{slot:"append"},[e._v("分钟")])],2),e._v(" "),r("lb-tool-tips",[e._v("一次服务的时间段，一般为60分钟")])],1),e._v(" "),r("el-form-item",{attrs:{label:"虚拟销售量",prop:"sale"}},[r("el-input",{attrs:{placeholder:"请输入虚拟销售量"},model:{value:e.subForm.sale,callback:function(t){e.$set(e.subForm,"sale",t)},expression:"subForm.sale"}},[r("template",{slot:"prepend"},[e._v("已售")])],2),e._v(" "),r("lb-tool-tips",[e._v("该虚拟销售量=虚拟+实际销售量")]),e._v(" "),r("div",[r("el-checkbox",{model:{value:e.subForm.show_salenum,callback:function(t){e.$set(e.subForm,"show_salenum",t)},expression:"subForm.show_salenum"}},[e._v("不显示实际销量和虚拟销量")])],1)],1),e._v(" "),e.routesItem.auth.reseller&&1===e.reseller_cash_type&&(e.routesItem.userInfo.is_admin&&(!e.subForm.admin_id||e.subForm.admin_id&&e.subForm.reseller_auth)||!e.routesItem.userInfo.is_admin&&e.routesItem.auth.reseller_auth)?r("block",[r("el-form-item",{attrs:{label:"一级"+e.$t("action.resellerName")+"提成",prop:"com_balance"}},[r("el-input",{attrs:{placeholder:"请输入一级"+e.$t("action.resellerName")+"提成"},model:{value:e.subForm.com_balance,callback:function(t){e.$set(e.subForm,"com_balance",t)},expression:"subForm.com_balance"}},[r("template",{slot:"append"},[e._v("%")])],2),e._v(" "),r("lb-tool-tips",[e._v("实际支付金额的百分比，取值0-100\n            "),r("div",{staticClass:"mt-sm"},[e._v("不输入则表示不单独设置，使用全局设置比例")])])],1),e._v(" "),r("el-form-item",{attrs:{label:"二级"+e.$t("action.resellerName")+"提成",prop:"level_balance"}},[r("el-input",{attrs:{placeholder:"请输入二级"+e.$t("action.resellerName")+"提成"},model:{value:e.subForm.level_balance,callback:function(t){e.$set(e.subForm,"level_balance",t)},expression:"subForm.level_balance"}},[r("template",{slot:"append"},[e._v("%")])],2),e._v(" "),r("lb-tool-tips",[e._v("实际支付金额的百分比，取值0-100\n            "),r("div",{staticClass:"mt-sm"},[e._v("\n              不输入则表示不单独设置，使用全局设置比例\n            ")])])],1)],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"排序值",prop:"top"}},[r("el-input-number",{staticClass:"lb-input-number",attrs:{min:0,controls:!1,placeholder:"请输入排序值"},model:{value:e.subForm.top,callback:function(t){e.$set(e.subForm,"top",t)},expression:"subForm.top"}}),e._v(" "),r("lb-tool-tips",[e._v("值越大, 排序越靠前")])],1),e._v(" "),e.routesItem.auth.member?r("block",[r("lb-classify-title",{attrs:{title:"会员信息"}}),e._v(" "),r("el-form-item",{attrs:{label:"会员专享",prop:"member_service"}},[r("el-radio-group",{model:{value:e.subForm.member_service,callback:function(t){e.$set(e.subForm,"member_service",t)},expression:"subForm.member_service"}},[r("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("action.ON")))]),e._v(" "),r("el-radio",{attrs:{label:0}},[e._v(e._s(e.$t("action.OFF")))])],1),e._v(" "),r("lb-tool-tips",[e._v("选择开启，该服务只能是指定等级会员可下单")])],1),e._v(" "),e.subForm.member_service?r("el-form-item",{attrs:{label:"指定会员等级专享",prop:"service_level"}},[r("el-select",{attrs:{multiple:"","collapse-tags":"",filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.subForm.service_level,callback:function(t){e.$set(e.subForm,"service_level",t)},expression:"subForm.service_level"}},e._l(e.base_service_level,function(e){return r("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}),1)],1):e._e()],1):e._e(),e._v(" "),r("lb-classify-title",{attrs:{title:"其他信息"}}),e._v(" "),r("el-form-item",{attrs:{label:"关联保障",prop:"guarantee"}},[r("el-select",{attrs:{multiple:"","collapse-tags":"",filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.subForm.guarantee,callback:function(t){e.$set(e.subForm,"guarantee",t)},expression:"subForm.guarantee"}},e._l(e.base_guarantee,function(e){return r("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"项目介绍",prop:"introduce"}},[r("lb-ueditor",{attrs:{destroy:!0},model:{value:e.subForm.introduce,callback:function(t){e.$set(e.subForm,"introduce",t)},expression:"subForm.introduce"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"禁忌说明",prop:"explain"}},[r("lb-ueditor",{attrs:{destroy:!0},model:{value:e.subForm.explain,callback:function(t){e.$set(e.subForm,"explain",t)},expression:"subForm.explain"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"下单须知",prop:"notice"}},[r("lb-ueditor",{attrs:{destroy:!0},model:{value:e.subForm.notice,callback:function(t){e.$set(e.subForm,"notice",t)},expression:"subForm.notice"}})],1),e._v(" "),e.subForm.industry_type?r("el-form-item",{attrs:{label:"关联"+e.$t("action.attendantName"),prop:"coach"}},[r("lb-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.toShowDialog("coach")}}},[e._v("选择"+e._s(e.$t("action.attendantName")))]),e._v(" "),r("el-table",{ref:"multipleTable",staticClass:"mt-lg",staticStyle:{width:"100%"},attrs:{data:e.subForm.coach,"header-cell-style":{background:"#f5f7fa",color:"#606266"},height:e.subForm.coach.length>5?550:""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),r("el-table-column",{attrs:{prop:"work_img",label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("lb-image",{attrs:{src:e.row.work_img}})]}}],null,!1,1359628658)}),e._v(" "),r("el-table-column",{attrs:{prop:"coach_name",label:"姓名"}}),e._v(" "),r("el-table-column",{attrs:{prop:"admin_name",label:"所属"+e.$t("action.agentName")}}),e._v(" "),r("el-table-column",{attrs:{prop:"price",label:"","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input-number",{staticStyle:{width:"120px"},attrs:{size:"small",precision:2,controls:!1,min:0},model:{value:t.row.price,callback:function(r){e.$set(t.row,"price",r)},expression:"scope.row.price"}})]}}],null,!1,3333415811)},[r("template",{slot:"header"},[r("div",{staticStyle:{"margin-top":"7px",padding:"0"}},[e._v("\n                "+e._s(e.$t("action.attendantName"))+"服务价格"),r("lb-tool-tips",{attrs:{padding:"10"}},[e._v("选择"+e._s(e.$t("action.attendantName"))+"点击确认后，该价格默认为服务价格\n                  "),r("div",{staticClass:"mt-sm"},[e._v("\n                    若没有填写服务价格或填写错误则默认为0\n                  ")])])],1)])],2),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"table-operate"},[r("lb-button",{attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(r){return e.toDelItem(t.$index)}}},[e._v(e._s(e.$t("action.delete")))])],1)]}}],null,!1,2461405206)})],1),e._v(" "),e.subForm.coach.length>0?r("lb-page",{attrs:{selected:e.showDialog.coach?0:e.multipleSelection.length,onlyBatch:!0}},[r("div",{staticClass:"flex-warp batch-btn-list"},[r("lb-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.toBatch("price")}}},[e._v("设置服务价格")]),e._v(" "),r("lb-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.toBatch("delete")}}},[e._v("删除")])],1)]):e._e()],1):e._e(),e._v(" "),r("el-form-item",[r("lb-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:function(t){return e.submitFormInfo("sub")}}},[e._v(e._s(e.$t("action.submit")))]),e._v(" "),r("lb-button",{on:{click:function(t){return e.$router.back(-1)}}},[e._v(e._s(e.$t("action.back")))])],1)],1):e._e(),e._v(" "),r("el-dialog",{attrs:{title:"关联"+e.$t("action.attendantName"),visible:e.showDialog.coach,width:"1000px",top:"5vh",center:""},on:{"update:visible":function(t){return e.$set(e.showDialog,"coach",t)},close:e.toResetMultipleSelection}},[r("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.searchForm,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"输入查询",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入"+e.$t("action.attendantName")+"姓名/手机号"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),r("el-form-item",[r("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.getTableDataList(1)}}},[e._v(e._s(e.$t("action.search")))]),e._v(" "),r("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v(e._s(e.$t("action.reset")))])],1)],1),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":{background:"#f5f7fa",color:"#606266"},"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),r("el-table-column",{attrs:{prop:"work_img",label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("lb-image",{attrs:{src:e.row.work_img}})]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"coach_name",label:"姓名"}}),e._v(" "),r("el-table-column",{attrs:{prop:"admin_name",label:"所属"+e.$t("action.agentName")}}),e._v(" "),r("el-table-column",{attrs:{prop:"mobile",label:"手机号"}})],1),e._v(" "),r("lb-page",{attrs:{batch:!1,page:e.searchForm.page,pageSize:e.searchForm.limit,total:e.total},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}}),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.showDialog.coach=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:e.handleDialogConfirm}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"批量设置服务价格",visible:e.showDialog.price,width:"500px",center:""},on:{"update:visible":function(t){return e.$set(e.showDialog,"price",t)}}},[r("el-form",{ref:"priceForm",attrs:{inline:!0,model:e.priceForm,rules:e.priceFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"服务价格",prop:"price"}},[r("el-input",{attrs:{placeholder:"请输入服务价格"},model:{value:e.priceForm.price,callback:function(t){e.$set(e.priceForm,"price",t)},expression:"priceForm.price"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.showDialog.price=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:function(t){return e.submitFormInfo("price")}}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"批量设置服务提成",visible:e.showDialog.balance,width:"500px",center:""},on:{"update:visible":function(t){return e.$set(e.showDialog,"balance",t)}}},[r("el-form",{ref:"balanceForm",attrs:{inline:!0,model:e.balanceForm,rules:e.balanceFormRules,"label-width":"100px"}},[r("lb-tips",[e._v(e._s(e.$t("action.attendantName"))+"提成优先级：服务提成＞阶段性提成＞等级提成\n          "),r("div",{staticClass:"mt-sm"},[e._v("\n            输入为0，则按照"+e._s(e.$t("action.attendantName"))+"对应的阶段性提成或等级提成来核算\n          ")])]),e._v(" "),r("el-form-item",{attrs:{label:"服务提成",prop:"balance"}},[r("el-input",{attrs:{placeholder:"请输入服务提成"},model:{value:e.balanceForm.balance,callback:function(t){e.$set(e.balanceForm,"balance",t)},expression:"balanceForm.balance"}}),e._v(" "),r("lb-tool-tips",[e._v("\n            取值0-100的数值，支持输入小数，保留小数点后2位\n          ")])],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.showDialog.balance=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:function(t){return e.submitFormInfo("balance")}}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var k=r("C7Lr")(F,y,!1,function(e){r("1bmz")},"data-v-28d256f8",null);t.default=k.exports}});