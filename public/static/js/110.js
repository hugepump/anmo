webpackJsonp([110],{aj4M:function(e,t){},gwxm:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("3cXf"),i=r.n(s),o=r("IHPB"),a=r.n(o),n=r("4YfN"),l=r.n(n),u=r("lC5x"),c=r.n(u),m=r("J0Oq"),p=r.n(m),d=r("bSIt"),_=r("PxTW"),b=r.n(_),v={data:function(){var e=this;return{pickerOptions:{disabledDate:function(e){return e.getTime()<1e3*b()(b()(Date.now()).format("YYYY-MM-DD")).unix()}},id:"",navTitle:"",showMap:!1,have_user_id:!1,subForm:{id:0,store_id:"",store_name:"",name:"",sub_name:"",cover:"",price:"",init_price:"",sale:0,imgs:[],introduce:"",term_type:1,term_start_time:"",term_end_time:"",days:1,use_type:2,use_trade_week:[0,6],use_start_time:"",use_end_time:"",reservation_day:0,rule_text:"",ensure:1,sku:[],reservation_type:1,term_start_end:"",use_trade_week_max:6,use_trade_week_min:0},subFormRules:{store_id:{required:!0,type:"number",message:"请选择门店",trigger:"blur"},name:{required:!0,validator:this.$reg.isNotNull,text:"套餐名称",reg_type:2,trigger:"blur"},sub_name:{required:!0,validator:this.$reg.isNotNull,text:"副标题",reg_type:2,trigger:"blur"},cover:{required:!0,type:"array",message:"请上传图片",trigger:"blur"},price:{required:!0,validator:this.$reg.isMoney,text:"现价",trigger:"blur",reg_type:1},init_price:{required:!0,validator:this.$reg.isMoney,text:"划线价",trigger:"blur",reg_type:1},sale:{required:!0,type:"number",message:"请输入虚拟销量",trigger:"blur"},imgs:{required:!0,type:"array",message:"请上传图片",trigger:"blur"},sku:{required:!0,validator:function(t,r,s){var i=e.subForm.sku;if(0===i.length)s(new Error("请添加规格"));else{for(var o=0;o<i.length;o++)for(var a=0;a<i[o].price.length;a++){if(!i[o].price[a].name)return void s(new Error("请输入规格值"));if(!i[o].price[a].num&&0!==i[o].price[a].num)return void s(new Error("请输入规格数量"));if(i[o].price[a].num<=0)return void s(new Error("规格数量不能为0"));if(!i[o].price[a].price&&0!==i[o].price[a].price)return void s(new Error("请输入规格价格"));if(i[o].price[a].price<=0)return void s(new Error("规格价格不能为0"))}s()}},trigger:"blur"},term_type:{required:!0,validator:function(t,r,s){var i=e.subForm,o=i.term_type,a=i.term_start_time,n=i.term_end_time,l=i.days;1===o?a&&n?s():s(new Error("请选择指定日期")):l?s():s(new Error("请输入有效天数"))},trigger:"blur"},use_trade_week:{required:!0,validator:function(t,r,s){var i=e.subForm,o=i.use_start_time,a=i.use_end_time,n=i.use_type,l=i.store_id,u=i.use_trade_week,c=e.currentRow,m=c.end_time,p=c.start_time;console.log(e.currentRow,"=========> currentRow");var d=new Date("2023-11-23 "+o).getTime(),_=new Date("2023-11-23 "+p).getTime(),b=new Date("2023-11-23 "+a).getTime(),v=new Date("2023-11-23 "+m).getTime(),h=!1,f=!1;if(1!==n)if(o)if(a){if(u[0]===u[1])return console.log(v,b),void(d>=b?s(new Error("开始时间不能大于结束时间")):_>d?s(new Error("开始时间不能小于门店开始时间")):v<b&&_<v?s(new Error("结束时间不能大于门店结束时间")):s());_>v&&(v=new Date("2023-11-24 "+m).getTime()),d>b&&(b=new Date("2023-11-24 "+a).getTime()),console.log("开始时间大于结束时间",d,_,b),d>=_&&d<=b&&(h=!0),b<=v&&b>=d&&(f=!0),console.log(n,l),2===n&&l?o&&a?h?f?s():s(new Error("结束时间不能大于门店结束时间")):s(new Error("开始时间不能小于门店开始时间")):s(new Error(o?"请选择结束时间":"请选择开始时间")):s()}else s(new Error("请选择结束时间"));else s(new Error("请选择开始时间"));else s()},trigger:"blur"},reservation_day:{required:!0,validator:function(t,r,s){var i=e.subForm,o=i.reservation_day;2!==i.reservation_type||o?s():s(new Error("请输入"))},trigger:"blur"},rule_text:{required:!0,type:"string",message:"请输入使用规则",trigger:"blur"},ensure:{required:!0,type:"number",message:"请选择保障",trigger:"blur"}},searchForm:{store:{page:1,limit:10,title:"",auth_status:2},service:{page:1,limit:10,name:""}},total:{store:0,service:0},loading:{store:!1,service:!1},tableData:{store:[],service:[]},showDialog:{store:!1,specs:!1},currentRow:{},multipleSelection:[],coachPriceList:[],userInfo:{},inputVisible:!1,inputValue:"",weekMarks:{0:{style:{color:"#1989FA"},label:this.$createElement("strong","周一")},1:{style:{color:"#1989FA"},label:this.$createElement("strong","周二")},2:{style:{color:"#1989FA"},label:this.$createElement("strong","周三")},3:{style:{color:"#1989FA"},label:this.$createElement("strong","周四")},4:{style:{color:"#1989FA"},label:this.$createElement("strong","周五")},5:{style:{color:"#1989FA"},label:this.$createElement("strong","周六")},6:{style:{color:"#1989FA"},label:this.$createElement("strong","周天")}},specsTableData:[],specsLoading:!1,specsForm:{name:"",index:""},specsFormRules:{name:{required:!0,validator:this.$reg.isNotNull,text:"规格名",reg_type:2,trigger:"blur"}},isCopy:!1,isSlider:!1}},created:function(){var e=this;return p()(c.a.mark(function t(){var r,s,i,o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.userInfo=JSON.parse(window.localStorage.getItem("massage_userInfo")),r=e.$route.query,s=r.id,i=r.type,o=void 0===i?"":i,!s){t.next=7;break}return e.subForm.id=s,o&&(e.isCopy=!0),t.next=7,e.getDetail(s);case 7:console.log(s),e.navTitle=e.$t(s?"menu.StorePackageEdit":"menu.StorePackageAdd");case 9:case"end":return t.stop()}},t,e)}))()},computed:l()({},Object(d.e)({routesItem:function(e){return e.routes}})),methods:{getCover:function(e,t){this.subForm[t]=e,this.$refs.subForm.validate()},moveFiles:function(e,t){this.subForm[t]=e,this.$refs.subForm.validate()},getBannerList:function(e,t){var r;(r=this.subForm[t]).push.apply(r,a()(e)),this.$refs.subForm.validate()},getLatLng:function(e){this.subForm.lat=e.lat,this.subForm.lng=e.lng},getDetail:function(e){var t=this;return p()(c.a.mark(function r(){var s,i,o,a,n,l,u;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$api.store.packageInfo({id:e});case 2:if(s=r.sent,i=s.code,o=s.data,200===i){r.next=7;break}return r.abrupt("return");case 7:for(u in o.cover=[{url:o.cover}],a=["imgs"],o.imgs=o.imgs.split(","),a.map(function(e){o[e]=o[e]?o[e].map(function(e){return{url:e}}):[]}),o.store.title=o.store.name,(n={smax:6,smin:0,max:o.use_trade_week.substring(o.use_trade_week.length-1),min:o.use_trade_week.substring(0,1)}).smax===n.smin&&(t.isSlider=!0),["smax","smin","max","min"].forEach(function(e){0==n[e]?n[e]=6:n[e]=n[e]-1}),t.currentRow=t.isCopy?{}:o.store,o.store_name=o.store.name,o.reservation_type=0===o.reservation_day?1:2,o.term_start_end=o.term_start_time?[1e3*o.term_start_time,1e3*o.term_end_time]:[],o.use_trade_week=[n.min,n.max],o.use_trade_week_max=6,o.use_trade_week_min=0,l=["store_id","use_type","use_trade_week","use_trade_week_max","use_trade_week_min"],t.subForm)t.isCopy&&l.includes(u)||(t.subForm[u]=o[u]);console.log(t.subForm,n,"============> subForm");case 26:case"end":return r.stop()}},r,t)}))()},toShowDialog:function(e){var t=this;return p()(c.a.mark(function r(){return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.searchForm[e].name="",r.next=3,t.getTableDataList(1,e);case 3:t.showDialog[e]=!t.showDialog[e];case 4:case"end":return r.stop()}},r,t)}))()},resetForm:function(e){var t=e+"Form";this.$refs[t].resetFields(),this.getTableDataList(1,e)},handleSizeChange:function(e,t){this.searchForm[t].limit=e,this.handleCurrentChange(1,t)},handleCurrentChange:function(e,t){this.searchForm[t].page=e,this.getTableDataList("",t)},getTableDataList:function(e,t){var r=this;return p()(c.a.mark(function s(){var o,a,n,l,u,m,p;return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e&&(r.searchForm[t].page=1),r.loading[t]=!0,o=JSON.parse(i()(r.searchForm[t])),a={store:{methodKey:"store",methodModel:"storeList"},service:{methodKey:"service",methodModel:"serviceList"}}[t],n=a.methodKey,l=a.methodModel,s.next=7,r.$api[n][l](o);case 7:if(u=s.sent,m=u.code,p=u.data,r.loading[t]=!1,200===m){s.next=13;break}return s.abrupt("return");case 13:console.log(p,"data",t),r.tableData[t]=p.data,r.total[t]=p.total;case 16:case"end":return s.stop()}},s,r)}))()},handleSelectionChange:function(e,t){if("store"===t){var r=e=JSON.parse(i()(e)),s=r.id,o=r.title;return e.nickName=o||"门店ID "+s,void(this.currentRow=e)}this.multipleSelection=e},handleDialogConfirm:function(e){if("store"===e){if(null===this.currentRow||!this.currentRow.id)return void this.$message.error("请选择门店");this.resetTime()}else{var t=JSON.parse(i()(this.subForm.service)),r=t.length>0?t.map(function(e){return e.id}):[];this.multipleSelection.map(function(e){r.includes(e.id)||t.push(e)}),this.subForm.service=t;var s=[];t.forEach(function(e){s.push({ser_id:e.id,price:e.price||0})}),this.coachPriceList=s}this.showDialog[e]=!1},submitForm:function(){var e=this,t=!0;if(this.$refs.subForm.validate(function(e){e||(t=!1)}),console.log(t,this.subForm,this.isCopy),t){var r=JSON.parse(i()(this.subForm));if(1*r.price>1*r.init_price)return void this.$message.error("划线价不能小于现价");if(["imgs"].map(function(e){r[e]=r[e].length>0&&r[e].map(function(e){return e.url})}),2===r.use_type){var s,o=[];(s=this.$util).betweenNumbers.apply(s,a()(r.use_trade_week)).split(",").forEach(function(e){7===(e=1*e+1)&&(e=0),o.push(e)}),r.use_trade_week=o}r.reservation_day=1===r.reservation_type?0:r.reservation_day,r.cover=r.cover[0].url,this.isCopy&&(r.id="");var n=r.id?"packageEdit":"packageAdd";this.$api.store[n](r).then(function(t){200===t.code&&(e.$message.success(e.$t(r.id?"tips.successRev":"tips.successSub")),e.$router.back(-1))})}},setPrice:function(e){this.coachPriceList[e].price||(this.coachPriceList[e].price=0)},changeTradeWeek:function(e){var t,r=(t=this.$util).betweenNumbers.apply(t,a()(e)).split(",");for(var s in this.weekMarks)this.weekMarks[s].style.color="#909399",r.includes(s)&&(this.weekMarks[s].style.color="#1989FA")},resetTime:function(){console.log(this.currentRow);var e=this.currentRow,t=e.id,r=void 0===t?0:t,s=e.title,i=void 0===s?"":s,o=e.trade_week,a=void 0===o?"1, 0":o,n=e.end_time,l=e.start_time;this.subForm.store_id=r,this.subForm.store_name=i;var u=a.substring(0,1),c=a.substring(a.length-1);console.log(u,c),this.isSlider=u===c;var m=6,p=0;p=0==u?6:1*u-1,m=0==c?6:1*c-1,this.subForm.use_trade_week_max=6,this.subForm.use_trade_week_min=0,this.subForm.use_trade_week=[p,m],this.subForm.use_start_time=l,this.subForm.use_end_time=n,this.$refs.subForm.clearValidate()},changeShowDialog:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{name:"",index:-1};this.specsForm=t,console.log(t),this.showDialog[e]=!0},submitFormInfo:function(){var e=!0;if(this.$refs.specsForm.validate(function(t){t||(e=!1)}),e){var t=this.specsForm,r=t.name,s=t.index,i=void 0===s?"":s;-1==i?this.subForm.sku.push({name:r,price:[{name:"",num:"",price:""}]}):this.subForm.sku[i].name=r,this.showDialog.specs=!1}},delItemSku:function(e,t){this.subForm.sku[e].price.splice(t,1)},addItemSku:function(e){this.subForm.sku[e].price.push({name:"",num:"",price:""})},delSku:function(e){this.subForm.sku.splice(e,1)},getTermTime:function(){var e=JSON.parse(i()(this.subForm)).term_start_end;e&&e.length>0&&(this.subForm.term_start_time=e[0]/1e3,this.subForm.term_end_time=e[1]/1e3)}}},h={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"lb-system-banner-edit"},[r("top-nav",{attrs:{title:e.navTitle,isBack:!0}}),e._v(" "),r("div",{staticClass:"page-main"},[r("el-form",{ref:"subForm",attrs:{model:e.subForm,rules:e.subFormRules,"label-width":"130px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("lb-classify-title",{attrs:{title:"基本信息"}}),e._v(" "),r("el-form-item",{attrs:{prop:"cover",label:"套餐封面"}},[r("lb-cover",{attrs:{fileList:e.subForm.cover},on:{selectedFiles:function(t){return e.getCover(t,"cover")},moveFiles:function(t){return e.moveFiles(t,"cover")}}}),e._v(" "),r("lb-tool-tips",[e._v("图片比例: 340*230")])],1),e._v(" "),r("el-form-item",{attrs:{label:"套餐名称",prop:"name"}},[r("el-input",{attrs:{maxlength:"10","show-word-limit":"",placeholder:"请输入套餐名称"},model:{value:e.subForm.name,callback:function(t){e.$set(e.subForm,"name",t)},expression:"subForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"副标题",prop:"sub_name"}},[r("el-input",{attrs:{maxlength:"12","show-word-limit":"",placeholder:"请输入副标题"},model:{value:e.subForm.sub_name,callback:function(t){e.$set(e.subForm,"sub_name",t)},expression:"subForm.sub_name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"现价",prop:"price"}},[r("el-input",{attrs:{placeholder:"请输入现价"},model:{value:e.subForm.price,callback:function(t){e.$set(e.subForm,"price",t)},expression:"subForm.price"}},[r("template",{slot:"append"},[e._v("元")])],2)],1),e._v(" "),r("el-form-item",{attrs:{label:"划线价",prop:"init_price"}},[r("el-input",{attrs:{placeholder:"请输入划线价"},model:{value:e.subForm.init_price,callback:function(t){e.$set(e.subForm,"init_price",t)},expression:"subForm.init_price"}},[r("template",{slot:"append"},[e._v("元")])],2)],1),e._v(" "),r("el-form-item",{attrs:{label:"虚拟销量",prop:"sale"}},[r("el-input-number",{staticClass:"lb-input-number",attrs:{min:0,precision:0,controls:!1,placeholder:"请输入虚拟销量"},model:{value:e.subForm.sale,callback:function(t){e.$set(e.subForm,"sale",t)},expression:"subForm.sale"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"详情图",prop:"imgs"}},[r("lb-cover",{attrs:{fileList:e.subForm.imgs,fileType:"image",type:"more",fileSize:9},on:{selectedFiles:function(t){return e.getBannerList(t,"imgs")},moveFiles:function(t){return e.moveFiles(t,"imgs")}}}),e._v(" "),r("lb-tool-tips",[e._v("图片比例: 750*527")])],1),e._v(" "),r("lb-classify-title",{attrs:{title:"团购详情"}}),e._v(" "),r("el-form-item",{attrs:{label:"创建套餐规格",prop:"sku"}},[r("lb-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus",plain:""},on:{click:function(t){return e.changeShowDialog("specs")}}},[e._v("添加规格")]),e._v(" "),e.subForm.sku.length>0?r("block",e._l(e.subForm.sku,function(t,s){return r("div",{key:s},[r("div",{staticClass:"space-lg"}),e._v(" "),r("div",[r("span",[e._v("规格名："+e._s(t.name))]),e._v(" "),r("lb-button",{staticClass:"ml-lg",attrs:{size:"mini",type:"primary",icon:"el-icon-edit",plain:""},on:{click:function(r){return e.changeShowDialog("specs",{name:t.name,index:s})}}},[e._v("编辑")]),e._v(" "),r("lb-button",{staticClass:"ml-lg",attrs:{size:"mini",type:"danger",icon:"el-icon-delete",plain:""},on:{click:function(t){return e.delSku(s)}}},[e._v("删除")])],1),e._v(" "),r("div",{staticClass:"space-lg"}),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.price,"header-cell-style":{background:"#f5f7fa",color:"#606266"},"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{prop:"name",label:"规格值"},scopedSlots:e._u([{key:"default",fn:function(s){return[r("el-input",{staticStyle:{width:"auto"},attrs:{placeholder:"请输入内容",maxlength:"25"},model:{value:t.price[s.$index].name,callback:function(r){e.$set(t.price[s.$index],"name",r)},expression:"item.price[scope.$index].name"}})]}}],null,!0)}),e._v(" "),r("el-table-column",{attrs:{prop:"name",label:"数量"},scopedSlots:e._u([{key:"default",fn:function(s){return[r("el-input-number",{staticClass:"lb-input-number",staticStyle:{width:"auto"},attrs:{placeholder:"请输入内容",min:0,precision:0,controls:!1},model:{value:t.price[s.$index].num,callback:function(r){e.$set(t.price[s.$index],"num",r)},expression:"item.price[scope.$index].num"}})]}}],null,!0)}),e._v(" "),r("el-table-column",{attrs:{prop:"name",label:"价格"},scopedSlots:e._u([{key:"default",fn:function(s){return[r("el-input-number",{staticClass:"lb-input-number",staticStyle:{width:"auto"},attrs:{placeholder:"请输入价格",min:0,precision:1,controls:!1},model:{value:t.price[s.$index].price,callback:function(r){e.$set(t.price[s.$index],"price",r)},expression:"item.price[scope.$index].price"}})]}}],null,!0)}),e._v(" "),r("el-table-column",{attrs:{label:"操作","min-width":"60",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(i){return[r("div",{staticClass:"table-operate"},[0==i.$index&&t.price.length>1||0!=i.$index?r("el-button",{staticClass:"mr-md",attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(t){return e.delItemSku(s,i.$index)}}}):e._e(),e._v(" "),i.$index==t.price.length-1||0==i.$index&&1==t.price.length?r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:"",size:"mini"},on:{click:function(t){return e.addItemSku(s)}}}):e._e()],1)]}}],null,!0)})],1)],1)}),0):e._e()],1),e._v(" "),r("el-form-item",{attrs:{label:"图文详情",prop:"introduce"}},[r("lb-ueditor",{attrs:{destroy:!0},model:{value:e.subForm.introduce,callback:function(t){e.$set(e.subForm,"introduce",t)},expression:"subForm.introduce"}})],1),e._v(" "),r("lb-classify-title",{attrs:{title:"购买须知"}}),e._v(" "),r("el-form-item",{attrs:{label:"所属门店",prop:"store_id"}},[r("el-tag",{staticClass:"cursor-pointer",attrs:{type:e.have_user_id?"info":"primary"},on:{click:function(t){return e.toShowDialog("store")}}},[e._v(e._s(e.subForm.store_id?e.subForm.store_name:"选择门店"))])],1),e._v(" "),r("el-form-item",{attrs:{label:"有效期",prop:"term_type"}},[r("el-radio-group",{model:{value:e.subForm.term_type,callback:function(t){e.$set(e.subForm,"term_type",t)},expression:"subForm.term_type"}},[r("el-radio",{attrs:{label:1}},[e._v("指定日期")]),e._v(" "),r("el-radio",{attrs:{label:2}},[e._v("有效天数")])],1),e._v(" "),1==e.subForm.term_type?r("div",[r("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp","picker-options":e.pickerOptions,"default-time":["00:00:00","23:59:59"]},on:{change:e.getTermTime},model:{value:e.subForm.term_start_end,callback:function(t){e.$set(e.subForm,"term_start_end",t)},expression:"subForm.term_start_end"}}),e._v(" "),r("lb-tool-tips",[e._v("下单的客户必须在该时间段内使用")])],1):e._e(),e._v(" "),2==e.subForm.term_type?r("div",[e._v("\n          自购买当日起\n          "),r("el-input-number",{staticClass:"lb-input-number",staticStyle:{width:"150px"},attrs:{min:1,precision:0,controls:!1,placeholder:"请输入"},model:{value:e.subForm.days,callback:function(t){e.$set(e.subForm,"days",t)},expression:"subForm.days"}}),e._v("\n          天内可用\n          "),r("lb-tool-tips",[e._v("有效期按自然天计算。\n            "),r("p",[e._v("\n              举例：如设置套餐当日起30天内可用，用户在5月18日14:00时领取优惠券，"),r("br"),e._v("则该团购套餐的可用时间为5月18日的14:00:00至6月18日的14:00\n            ")]),e._v(" "),r("p",[e._v("注意：时间按自然天来算，不是月")])])],1):e._e()],1),e._v(" "),r("el-form-item",{attrs:{label:"使用时间",prop:"use_trade_week"}},[2==e.subForm.use_type?r("block",[r("div",{staticClass:"trade-week"},[r("el-slider",{attrs:{range:"","show-stops":"",marks:e.weekMarks,max:e.subForm.use_trade_week_max,min:e.subForm.use_trade_week_min,"show-tooltip":!1,disabled:e.isSlider},on:{change:e.changeTradeWeek},model:{value:e.subForm.use_trade_week,callback:function(t){e.$set(e.subForm,"use_trade_week",t)},expression:"subForm.use_trade_week"}})],1),e._v(" "),r("div",{staticClass:"flex-y-center"},[r("el-time-select",{staticStyle:{width:"150px"},attrs:{placeholder:"开始时间","picker-options":{start:"00:00",step:"00:01",end:"23:59"}},model:{value:e.subForm.use_start_time,callback:function(t){e.$set(e.subForm,"use_start_time",t)},expression:"subForm.use_start_time"}}),e._v(" "),r("span",{staticClass:"pl-md pr-md"},[e._v("至")]),e._v(" "),r("el-time-select",{staticStyle:{width:"150px"},attrs:{placeholder:"结束时间","picker-options":{start:"00:00",step:"00:01",end:"23:59"}},model:{value:e.subForm.use_end_time,callback:function(t){e.$set(e.subForm,"use_end_time",t)},expression:"subForm.use_end_time"}}),e._v(" "),r("lb-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"el-icon-refresh-left",type:"warning"},on:{click:e.resetTime}},[e._v(e._s(e.$t("action.reset")))])],1)]):e._e()],1),e._v(" "),r("el-form-item",{attrs:{label:"预约信息",prop:"reservation_day"}},[r("el-radio-group",{model:{value:e.subForm.reservation_type,callback:function(t){e.$set(e.subForm,"reservation_type",t)},expression:"subForm.reservation_type"}},[r("el-radio",{attrs:{label:1}},[e._v("无需预约")]),e._v(" "),r("el-radio",{attrs:{label:2}},[e._v("需提前"),r("el-input-number",{staticClass:"lb-input-number",staticStyle:{width:"150px",margin:"0 5px"},attrs:{min:1,precision:0,controls:!1,placeholder:"请输入"},model:{value:e.subForm.reservation_day,callback:function(t){e.$set(e.subForm,"reservation_day",t)},expression:"subForm.reservation_day"}}),e._v("天预约")],1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"使用规则",prop:"rule_text"}},[r("el-input",{attrs:{type:"textarea",rows:10,maxlength:"1000",resize:"none","show-word-limit":"",placeholder:"请输入使用规则"},model:{value:e.subForm.rule_text,callback:function(t){e.$set(e.subForm,"rule_text",t)},expression:"subForm.rule_text"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"保障",prop:"ensure"}},[r("el-radio-group",{model:{value:e.subForm.ensure,callback:function(t){e.$set(e.subForm,"ensure",t)},expression:"subForm.ensure"}},[r("el-radio",{attrs:{label:1}},[e._v("随时退（秒退款）")]),e._v(" "),r("el-radio",{attrs:{label:2}},[e._v("人工退款")])],1),e._v(" "),r("lb-tool-tips",[r("p",[e._v("\n            1、随时退：用户在核销前发起退款，系统自动秒退款，无需平台或者商家同意。\n          ")]),e._v(" "),r("p",[e._v("2、人工退款：用户在核销前发起退款，需要平台或者商家处理退款。")])])],1),e._v(" "),r("el-form-item",[r("lb-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:e.submitForm}},[e._v(e._s(e.$t("action.submit")))]),e._v(" "),r("lb-button",{on:{click:function(t){return e.$router.back(-1)}}},[e._v(e._s(e.$t("action.back")))])],1)],1),e._v(" "),r("lb-map",{attrs:{dialogVisible:e.showMap},on:{"update:dialogVisible":function(t){e.showMap=t},"update:dialog-visible":function(t){e.showMap=t},selectedLatLng:e.getLatLng}})],1),e._v(" "),r("el-dialog",{attrs:{title:e.specsForm.index>-1?"编辑规格":"添加规格",visible:e.showDialog.specs,width:"500px",center:""},on:{"update:visible":function(t){return e.$set(e.showDialog,"specs",t)}}},[r("el-form",{ref:"specsForm",staticClass:"dialog-form",attrs:{model:e.specsForm,rules:e.specsFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"规格名",prop:"name"}},[r("el-input",{attrs:{maxlength:"10","show-word-limit":"",placeholder:"请输入规格名"},model:{value:e.specsForm.name,callback:function(t){e.$set(e.specsForm,"name",t)},expression:"specsForm.name"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.showDialog.specs=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.submitFormInfo}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"选择门店",visible:e.showDialog.store,width:"800px",center:""},on:{"update:visible":function(t){return e.$set(e.showDialog,"store",t)}}},[r("el-form",{ref:"storeForm",attrs:{inline:!0,model:e.searchForm.store,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"输入查询",prop:"title"}},[r("el-input",{attrs:{placeholder:"输入关键词搜索店铺"},model:{value:e.searchForm.store.title,callback:function(t){e.$set(e.searchForm.store,"title",t)},expression:"searchForm.store.title"}})],1),e._v(" "),r("el-form-item",[r("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.getTableDataList(1,"store")}}},[e._v(e._s(e.$t("action.search")))]),e._v(" "),r("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("store")}}},[e._v(e._s(e.$t("action.reset")))])],1)],1),e._v(" "),r("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData.store,"header-cell-style":{background:"#f5f7fa",color:"#606266"},"tooltip-effect":"dark","highlight-current-row":""},on:{"current-change":function(t){return e.handleSelectionChange(t,"store")}}},[r("el-table-column",{attrs:{prop:"title",label:"店铺名称"}}),e._v(" "),r("el-table-column",{attrs:{prop:"cover",label:"店铺封面"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("lb-image",{attrs:{src:e.row.cover}})]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"phone",label:"商家电话"}})],1),e._v(" "),r("lb-page",{attrs:{batch:!1,page:e.searchForm.store.page,pageSize:e.searchForm.store.limit,total:e.total.store},on:{handleSizeChange:function(t){return e.handleSizeChange(t,"store")},handleCurrentChange:function(t){return e.handleCurrentChange(t,"store")}}}),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.showDialog.store=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleDialogConfirm("store")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var f=r("C7Lr")(v,h,!1,function(e){r("aj4M")},"data-v-55c6a88c",null);t.default=f.exports}});