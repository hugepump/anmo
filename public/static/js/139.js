webpackJsonp([139],{qRge:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("3cXf"),n=a.n(r),i=a("lC5x"),s=a.n(i),o=a("J0Oq"),l=a.n(o),c=a("PxTW"),u=a.n(c),m={data:function(){return{pickerOptions:{disabledDate:function(t){return t.getTime()>1e3*(u()(u()(Date.now()).format("YYYY-MM-DD")).unix()+86400-1)}},count:{},loading:{list:!1},searchForm:{list:{page:1,limit:10,order_code:"",start_time:"",end_time:""}},tableData:{list:[]},total:{list:0}}},activated:function(){var t=this;return l()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.getTableDataList(1,"list");case 1:case"end":return e.stop()}},e,t)}))()},methods:{resetForm:function(t){var e=t+"Form";this.$refs[e].resetFields(),this.getTableDataList(1,t)},handleSizeChange:function(t,e){this.searchForm[e].limit=t,this.handleCurrentChange(1,e)},handleCurrentChange:function(t,e){this.searchForm[e].page=t,this.getTableDataList("",e)},toChange:function(t){var e=this;return l()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.searchForm.list.status=t,e.getTableDataList(1,"list");case 2:case"end":return a.stop()}},a,e)}))()},getTableDataList:function(t,e){var a=this;return l()(s.a.mark(function r(){var i,o,l,c,u,m,d,_;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t&&(a.searchForm[e].page=t),a.loading[e]=!0,i=JSON.parse(n()(a.searchForm[e])),"list"===e&&((o=i.start_time)&&o.length>1?(i.start_time=o[0]/1e3,i.end_time=o[1]/1e3):(i.start_time="",i.end_time="")),l={list:{methodKey:"distribution",methodModel:"resellerOrderList"}}[e],c=l.methodKey,u=l.methodModel,r.next=8,a.$api[c][u](i);case 8:if(m=r.sent,d=m.code,_=m.data,a.loading[e]=!1,200===d){r.next=14;break}return r.abrupt("return");case 14:a.tableData[e]=_.data,a.total[e]=_.total,"list"===e&&(a.count=a.$util.pick(_,["total_pay_price","total_comm_cash","company_comm_cash"]));case 17:case"end":return r.stop()}},r,a)}))()}},filters:{handleTime:function(t,e){return 1===e?u()(1e3*t).format("YYYY-MM-DD"):2===e?u()(1e3*t).format("HH:mm:ss"):u()(1e3*t).format("YYYY-MM-DD HH:mm:ss")}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"lb-distribution-count"},[a("top-nav"),t._v(" "),a("div",{staticClass:"page-main"},[a("el-row",{staticClass:"page-top-operate"},[a("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:t.$route.name+"-distributionFind",expression:"`${$route.name}-distributionFind`"}],attrs:{size:"medium",type:"primary",icon:"el-icon-search"},on:{click:function(e){return t.$router.push("/promotion/distribution/find")}}},[t._v(t._s(t.$t("menu.DistributionFind")))])],1),t._v(" "),a("el-row",{staticClass:"page-search-form"},[a("el-form",{ref:"listForm",attrs:{inline:!0,model:t.searchForm.list},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{label:"输入查询",prop:"order_code"}},[a("el-input",{attrs:{placeholder:"请输入系统订单号"},model:{value:t.searchForm.list.order_code,callback:function(e){t.$set(t.searchForm.list,"order_code",e)},expression:"searchForm.list.order_code"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"下单时间",prop:"start_time"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp","picker-options":t.pickerOptions,"default-time":["00:00:00","23:59:59"]},on:{change:function(e){return t.getTableDataList(1,"list")}},model:{value:t.searchForm.list.start_time,callback:function(e){t.$set(t.searchForm.list,"start_time",e)},expression:"searchForm.list.start_time"}})],1),t._v(" "),a("el-form-item",[a("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",type:"primary",icon:"el-icon-search"},on:{click:function(e){return t.getTableDataList(1,"list")}}},[t._v(t._s(t.$t("action.search")))]),t._v(" "),a("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(e){return t.resetForm("list")}}},[t._v(t._s(t.$t("action.reset")))])],1)],1)],1),t._v(" "),a("div",{staticClass:"pb-lg"},[t._v("\n      共"),a("span",{staticClass:"c-warning"},[t._v(t._s(t.total.list||0)+"条")]),t._v("数据，门槛费总计："),a("span",{staticClass:"c-warning"},[t._v(t._s(t.count.total_pay_price||0)+"元")]),t._v("，推荐费总计："),a("span",{staticClass:"c-warning"},[t._v(t._s(t.count.total_comm_cash||0)+"元")]),t._v("，平台总获利："),a("span",{staticClass:"c-warning"},[t._v(t._s(t.count.company_comm_cash||0)+"元")])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.list,expression:"loading.list"}],staticStyle:{width:"100%"},attrs:{data:t.tableData.list,"header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"user_id",label:"用户ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"user_info",label:"微信头像"},scopedSlots:t._u([{key:"default",fn:function(t){return t.row.user_info?[a("lb-image",{attrs:{src:t.row.user_info.avatarUrl}})]:void 0}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"user_info",label:"微信昵称"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.user_info?[t._v("\n          "+t._s(e.row.user_info.nickName)+"\n        ")]:void 0}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"成为角色"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(1===e.row.type?"一级"+t.$t("action.resellerName"):"二级"+t.$t("action.resellerName"))+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"pay_price",label:"门槛费","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" ¥"+t._s(e.row.pay_price)+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"inv_user_name",label:"推荐人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"inv_comm_cash",label:"推荐费","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.top_reseller_id?[t._v("\n          ¥"+t._s(e.row.inv_comm_cash)+"\n        ")]:void 0}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"order_code","min-width":"130",label:"系统订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"transaction_id","min-width":"130",label:"付款订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"下单时间","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t._f("handleTime")(e.row.create_time,1)))]),t._v(" "),a("p",[t._v(t._s(t._f("handleTime")(e.row.create_time,2)))])]}}])})],1),t._v(" "),a("lb-page",{attrs:{batch:!1,page:t.searchForm.list.page,pageSize:t.searchForm.list.limit,total:t.total.list},on:{handleSizeChange:function(e){return t.handleSizeChange(e,"list")},handleCurrentChange:function(e){return t.handleCurrentChange(e,"list")}}})],1)],1)},staticRenderFns:[]};var _=a("C7Lr")(m,d,!1,function(t){a("uSX1")},"data-v-3f38ef47",null);e.default=_.exports},uSX1:function(t,e){}});