webpackJsonp([172],{IMDQ:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t("p00s"),r=t.n(n),s=t("aA9S"),o=t.n(s),i=t("3cXf"),l=t.n(i),c=t("lC5x"),u=t.n(c),m=t("J0Oq"),d=t.n(m),h=t("4YfN"),_=t.n(h),p=t("bSIt"),v=t("PxTW"),b=t.n(v),f={data:function(){return{activeName:"technician",statusText:{1:{type:"info",text:"申请中"},2:{type:"",text:"已授权"},3:{type:"danger",text:"取消授权"},4:{type:"danger",text:"已驳回"}},authStatusText:{0:{type:"info",text:"未认证"},1:{type:"",text:"认证中"},2:{type:"success",text:"已认证"},3:{type:"warning",text:"已驳回"}},cityTypeList:[{label:"全部",value:0},{label:"省代理",value:3},{label:"市代理",value:1},{label:"区县代理",value:2}],cityType:{3:{type:"success",text:"省"},1:{type:"primary",text:"市"},2:{type:"danger",text:"区县"}},adminTypeList:{"-1":"自主充值","-2":this.$t("action.resellerName")+"推荐费",0:"修改余额",1:this.$t("action.attendantName")+"服务费",2:this.$t("action.attendantName")+"车费",3:this.$t("action.agentName")+"余额",4:this.$t("action.resellerName")+"余额",5:this.$t("action.channelName")+"余额",6:"业务员余额",7:this.$t("action.brokerName")+"余额",8:"平台管理员余额",9:"补贴车费"},record_name:"",loading:{technician:!1,agent:!1,reseller:!1,salesman:!1,channel:!1,coachbroker:!1,adminuser:!1,record:!1},searchForm:{technician:{page:1,limit:10,coach_name:""},agent:{page:1,limit:10,city_type:0,admin_name:""},reseller:{page:1,limit:10,name:""},salesman:{page:1,limit:10,name:""},channel:{page:1,limit:10,name:""},coachbroker:{page:1,limit:10,name:""},adminuser:{},record:{page:1,limit:10,coach_id:"",type:1}},tableData:{technician:[],agent:[],reseller:[],salesman:[],channel:[],coachbroker:[],adminuser:[],record:[]},total:{technician:0,agent:0,reseller:0,salesman:0,channel:0,coachbroker:0,adminuser:0,record:0},count:{service_cash:0,car_cash:0,total_cash:0},downloadLoading:!1,storeList:[],showDialog:{balance:!1,record:!1},phone_config:{},authTime:0,timer:null,lockTap:!1,balanceForm:{id:"",nickName:"",avatarUrl:"",price:"",new_price:"",text:"",type:1,formtype:1,phone_code:""},balanceFormRules:{new_price:{required:!0,validator:this.$reg.isFloatNum,text:"金额",trigger:"blur"},text:{required:!0,validator:this.$reg.isNotNull,reg_type:2,text:"备注信息",trigger:"blur"},phone_code:{required:!0,validator:this.$reg.isNum,text:"验证码",trigger:"blur"}}}},created:function(){if(!this.routesItem.userInfo.is_admin){var e=this.routesItem.auth;e.agent_coach_auth?this.activeName="technician":e.reseller&&e.reseller_auth?this.activeName="reseller":e.salesman&&e.salesman_auth?this.activeName="salesman":e.channel&&e.channel_auth&&(this.activeName="channel")}this.getTableDataList(1,this.activeName)},computed:_()({},Object(p.e)({routesItem:function(e){return e.routes}})),methods:{getBaseInfo:function(){var e=this;return d()(u.a.mark(function a(){var t,n,r;return u.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$api.finance.walletCheckConfig();case 2:t=a.sent,n=t.code,r=t.data,200===n&&(e.phone_config=r);case 6:case"end":return a.stop()}},a,e)}))()},resetForm:function(e){var a=e+"Form";this.$refs[a].resetFields(),this.getTableDataList(1,e)},handleSizeChange:function(e,a){this.searchForm[a].limit=e,this.handleCurrentChange(1,a)},handleCurrentChange:function(e,a){this.searchForm[a].page=e,this.getTableDataList("",a)},getTableDataList:function(e,a){var t=this;return d()(u.a.mark(function n(){var r,s,i,c,m,d,h;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e&&(t.searchForm[a].page=e),t.loading[a]=!0,r=JSON.parse(l()(t.searchForm[a])),s={technician:{methodKey:"finance",methodModel:"financeList"},agent:{methodKey:"finance",methodModel:"adminFinanceList"},reseller:{methodKey:"finance",methodModel:"resellerList"},salesman:{methodKey:"finance",methodModel:"salesmanList"},channel:{methodKey:"finance",methodModel:"channelList"},coachbroker:{methodKey:"finance",methodModel:"brokerList"},adminuser:{methodKey:"adminuser",methodModel:"configInfo"},record:{methodKey:"finance",methodModel:"updateCoachCashList"}}[a],i=s.methodKey,c=s.methodModel,n.next=7,t.$api[i][c](r);case 7:if(m=n.sent,d=m.code,h=m.data,t.loading[a]=!1,200===d){n.next=13;break}return n.abrupt("return");case 13:"adminuser"===a&&(h={data:[h]}),h.data.map(function(e){"technician"===a&&(e.service_car_price=(e.service_price+e.car_price).toFixed(2)),"record"===a&&(e.text=e.text&&e.text.length>0?e.text.replace(/\n/g,"<br>"):"")}),t.tableData[a]=h.data,t.total[a]=h.total,["adminuser","record"].includes(a)||(t.count=o()({},t.count,t.$util.pick(h,"technician"===a?["service_cash","car_cash"]:["total_cash"])));case 18:case"end":return n.stop()}},n,t)}))()},handleClick:function(e){var a=e.name;switch(this.activeName=a,this.downloadLoading=!1,a){case"technician":this.searchForm[a].coach_name="";break;case"agent":this.searchForm[a].city_type=0,this.searchForm[a].admin_name=""}this.getTableDataList(1,a)},toShowDialog:function(e){var a=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];return d()(u.a.mark(function r(){var s;return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if((t=JSON.parse(l()(t))).formtype=n,t.type=1,"balance"!==e){r.next=11;break}return t.price=1===n?t.service_price:2===n?t.car_price:4===n?t.new_cash:t.cash,t.nickName=n<3?t.coach_name:3===n?t.agent_name:t.user_name,t.avatarUrl=n<3?t.work_img:8===n&&t.user_id?t.user_info.avatarUrl:"",t.new_price="",t.text="",r.next=11,a.getBaseInfo();case 11:if(4===n&&(t.id=t.user_id),"record"===e&&(a.record_name=n<3?t.coach_name:3===n?t.agent_name:t.user_name,a.searchForm[e].coach_id=t.id,a.searchForm[e].type=n),!["record"].includes(e)){r.next=18;break}return r.next=16,a.getTableDataList(1,e);case 16:r.next=19;break;case 18:for(s in a[e+"Form"])a[e+"Form"][s]=t[s];case 19:a.showDialog[e]=!a.showDialog[e],["balance"].includes(e)&&a.$refs[e+"Form"].validate&&a.$refs[e+"Form"].clearValidate();case 21:case"end":return r.stop()}},r,a)}))()},toClearTimer:function(){this.authTime=0,clearInterval(this.timer)},toSend:function(){var e=this;return d()(u.a.mark(function a(){var t,n,r,s,o;return u.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.authTime){a.next=3;break}return a.abrupt("return");case 3:if(!e.lockTap){a.next=5;break}return a.abrupt("return");case 5:return e.lockTap=!0,t=e.balanceForm.formtype,n=e.phone_config.login_auth_phone,a.prev=8,a.next=11,e.$api.finance.sendShortMsg({type:t});case 11:if(r=a.sent,s=r.code,e.lockTap=!1,e.balanceForm.phone_code="",200===s){a.next=17;break}return a.abrupt("return");case 17:e.$message.success("已向 "+n+" 发送短信验证码，请注意查收"),o=60,e.timer=setInterval(function(){0!==o?(o--,e.authTime=o):e.toClearTimer()},1e3),a.next=25;break;case 22:a.prev=22,a.t0=a.catch(8),setTimeout(function(){e.lockTap=!1},2e3);case 25:case"end":return a.stop()}},a,e,[[8,22]])}))()},submitFormInfo:function(e){var a=this;return d()(u.a.mark(function t(){var n,r,s,o,i,c,m,d,h,_,p,v;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=!0,r=JSON.parse(l()(a[e+"Form"])),a.$refs[e+"Form"].validate(function(e){e||(n=!1)}),n){t.next=5;break}return t.abrupt("return");case 5:if(s=r.type,o=r.price,i=r.new_price,c=r.formtype,(m=a.$util.pick(r,["id","text","phone_code"])).is_add=s,m.type=c,m.cash=i,"balance"!==e){t.next=15;break}if(s||!(1*i>1*o)){t.next=15;break}return d=1===c?"服务费收入":2===c?"车费收入":"可提现金额",a.$message.error("扣减余额不能大于原"+d+"！"),t.abrupt("return");case 15:return h={balance:{methodKey:"finance",methodModel:"updateCash"}}[e],_=h.methodKey,p=h.methodModel,t.next=19,a.$api[_][p](m);case 19:if(v=t.sent,200===v.code){t.next=23;break}return t.abrupt("return");case 23:a.$message.success(a.$t("tips.successSub")),a.showDialog[e]=!1,a.getTableDataList("",a.activeName);case 26:case"end":return t.stop()}},t,a)}))()},toExportExcel:function(){var e=this,a=this.activeName,t={technician:"coachFinanceList",agent:"adminFinanceList",reseller:"resellerFinanceList",salesman:"salesmanFinanceList",channel:"channelFinanceList",coachbroker:"brokerFinanceList"}[a];this.downloadLoading=!0;var n=JSON.parse(l()(this.searchForm[a])),s=this.$util.getProCurrentHref(),o=s.indexOf("?")>0?"":"?",i=s.indexOf("?")>0;r()(n).forEach(function(e,a){o+=i?"&"+e+"="+n[e]:e+"="+n[e],i=!0});var c=window.localStorage.getItem("massage_minitk"),u=s+"/massage/admin/AdminExcel/"+t+o+"&token="+c;window.location.href=u,setTimeout(function(){e.downloadLoading=!1},5e3)}},filters:{handleTime:function(e,a){return 1===a?b()(1e3*e).format("YYYY-MM-DD"):2===a?b()(1e3*e).format("HH:mm:ss"):b()(1e3*e).format("YYYY-MM-DD HH:mm:ss")}}},g={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"lb-finance-finance-list"},[t("top-nav"),e._v(" "),t("div",{staticClass:"page-main"},[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(a){e.activeName=a},expression:"activeName"}},[e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&e.routesItem.auth.agent_coach_auth?t("el-tab-pane",{attrs:{label:e.$t("action.attendantName"),name:"technician"}}):e._e(),e._v(" "),e.routesItem.userInfo.is_admin?t("el-tab-pane",{attrs:{label:""+e.$t("action.agentName"),name:"agent"}}):e._e(),e._v(" "),e.routesItem.auth.reseller&&(e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&e.routesItem.auth.reseller_auth)?t("el-tab-pane",{attrs:{label:""+e.$t("action.resellerName"),name:"reseller"}}):e._e(),e._v(" "),e.routesItem.auth.salesman&&(e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&e.routesItem.auth.salesman_auth)?t("el-tab-pane",{attrs:{label:"业务员",name:"salesman"}}):e._e(),e._v(" "),e.routesItem.auth.channel&&(e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&e.routesItem.auth.channel_auth)?t("el-tab-pane",{attrs:{label:e.$t("action.channelName"),name:"channel"}}):e._e(),e._v(" "),e.routesItem.auth.coachbroker&&e.routesItem.userInfo.is_admin?t("el-tab-pane",{attrs:{label:""+e.$t("action.brokerName"),name:"coachbroker"}}):e._e(),e._v(" "),1===e.routesItem.userInfo.is_admin&&e.routesItem.auth.adminuser?t("el-tab-pane",{attrs:{label:"平台管理员",name:"adminuser"}}):e._e()],1),e._v(" "),t("block",{directives:[{name:"show",rawName:"v-show",value:"technician"===e.activeName,expression:"activeName === 'technician'"}]},[t("el-row",{staticClass:"page-search-form"},[t("el-form",{ref:"technicianForm",attrs:{inline:!0,model:e.searchForm.technician},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"输入查询",prop:"coach_name"}},[t("el-input",{attrs:{placeholder:"请输入"+e.$t("action.attendantName")+"名称"},model:{value:e.searchForm.technician.coach_name,callback:function(a){e.$set(e.searchForm.technician,"coach_name",a)},expression:"searchForm.technician.coach_name"}})],1),e._v(" "),t("el-form-item",[t("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",type:"primary",icon:"el-icon-search"},on:{click:function(a){return e.getTableDataList(1,"technician")}}},[e._v(e._s(e.$t("action.search")))]),e._v(" "),t("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(a){return e.resetForm("technician")}}},[e._v(e._s(e.$t("action.reset")))])],1)],1)],1),e._v(" "),t("el-row",{staticClass:"page-top-operate"},[t("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-coachExport",expression:"`${$route.name}-coachExport`"}],attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-download",loading:e.downloadLoading},on:{click:e.toExportExcel}},[e._v("\n          "+e._s(e.$t("action.export")))])],1),e._v(" "),t("div",{staticClass:"pb-lg"},[e._v("\n        "+e._s(e.$t("action.attendantName"))+"服务费余额总计："),t("span",{staticClass:"c-warning"},[e._v(e._s(e.count.service_cash||0)+"元")]),e._v("，车费总计："),t("span",{staticClass:"c-warning"},[e._v(e._s(e.count.car_cash||0)+"元")])]),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.technician,expression:"loading.technician"}],staticStyle:{width:"100%"},attrs:{data:e.tableData.technician,"header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[t("el-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),t("el-table-column",{attrs:{prop:"user_id",label:"关联用户ID",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{prop:"coach_name",label:e.$t("action.attendantName")+"姓名"}}),e._v(" "),t("el-table-column",{attrs:{prop:"work_img",label:e.$t("action.attendantName")+"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("lb-image",{attrs:{src:e.row.work_img}})]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"mobile",label:"手机号","min-width":"110"}}),e._v(" "),t("el-table-column",{attrs:{prop:"create_time",label:"申请时间","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("p",[e._v(e._s(e._f("handleTime")(a.row.create_time,1)))]),e._v(" "),t("p",[e._v(e._s(e._f("handleTime")(a.row.create_time,2)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"status",label:"","min-width":"125"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{size:"small",type:e.authStatusText[a.row.auth_status].type}},[e._v(e._s(e.authStatusText[a.row.auth_status].text))])]}}])},[t("template",{slot:"header"},[t("div",{staticStyle:{"margin-top":"7px",padding:"0"}},[e._v("\n              认证状态\n              "),t("lb-tool-tips",{attrs:{padding:"11"}},[e._v("实名认证状态")])],1)])],2),e._v(" "),t("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{size:"small",type:e.statusText[a.row.status].type}},[e._v("\n              "+e._s(e.statusText[a.row.status].text)+"\n            ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"order_price",label:"收入(元)","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"flex-column"},[t("div",{staticClass:"c-success"},[e._v("+¥"+e._s(a.row.order_price))]),e._v(" "),t("div",[e._v(e._s(a.row.order_count)+"笔")])])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"total_price",label:"提现(元)","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"flex-column"},[t("div",{staticClass:"c-warning"},[e._v("-¥"+e._s(a.row.total_price))]),e._v(" "),t("div",[e._v(e._s(a.row.total_count)+"笔")])])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"total_price",label:"实际到账(元)","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"flex-column"},[t("div",{staticClass:"c-success"},[e._v("+¥"+e._s(a.row.wallet_price))]),e._v(" "),t("div",[e._v(e._s(a.row.wallet_count)+"笔")])])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"service_price",label:"服务费收入","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"c-warning"},[e._v("¥"+e._s(a.row.service_price))]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.$route.meta.pagePermission[0].auth.includes("changeBalance")&&(e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&e.routesItem.auth.coach_cash_auth),expression:"\n                $route.meta.pagePermission[0].auth.includes(\n                  'changeBalance'\n                ) &&\n                (routesItem.userInfo.is_admin ||\n                  (!routesItem.userInfo.is_admin &&\n                    routesItem.auth.coach_cash_auth))\n              "}],staticClass:"c-warning cursor-pointer",on:{click:function(t){return e.toShowDialog("balance",a.row,1)}}},[t("i",{staticClass:"el-icon-edit"}),e._v("\n              修改余额\n            ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"car_price",label:"车费收入","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"c-warning"},[e._v("¥"+e._s(a.row.car_price))]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.$route.meta.pagePermission[0].auth.includes("changeCarFeeBalance")&&(e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&e.routesItem.auth.coach_cash_auth),expression:"\n                $route.meta.pagePermission[0].auth.includes(\n                  'changeCarFeeBalance'\n                ) &&\n                (routesItem.userInfo.is_admin ||\n                  (!routesItem.userInfo.is_admin &&\n                    routesItem.auth.coach_cash_auth))\n              "}],staticClass:"c-warning cursor-pointer",on:{click:function(t){return e.toShowDialog("balance",a.row,2)}}},[t("i",{staticClass:"el-icon-edit"}),e._v("\n              修改余额\n            ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"service_car_price",label:"当前总余额","min-width":"125"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"c-link"},[e._v("¥"+e._s(a.row.service_car_price))])]}}])},[t("template",{slot:"header"},[t("div",{staticStyle:{"margin-top":"7px",padding:"0"}},[e._v("\n              当前总余额\n              "),t("lb-tool-tips",{attrs:{padding:"11"}},[e._v("包含车费收入")])],1)])],2),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"130",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"table-operate"},[t("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-balanceRecord",expression:"`${$route.name}-balanceRecord`"}],attrs:{size:"mini",plain:"",type:"success"},on:{click:function(t){return e.toShowDialog("record",a.row,1)}}},[e._v(e._s(e.$t("action.balanceRecord")))]),e._v(" "),t("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-balanceCarFeeRecord",expression:"`${$route.name}-balanceCarFeeRecord`"}],attrs:{size:"mini",plain:"",type:"warning"},on:{click:function(t){return e.toShowDialog("record",a.row,2)}}},[e._v(e._s(e.$t("action.balanceCarFeeRecord")))])],1)]}}])})],1),e._v(" "),t("lb-page",{attrs:{batch:!1,page:e.searchForm.technician.page,pageSize:e.searchForm.technician.limit,total:e.total.technician},on:{handleSizeChange:function(a){return e.handleSizeChange(a,"technician")},handleCurrentChange:function(a){return e.handleCurrentChange(a,"technician")}}})],1),e._v(" "),t("block",{directives:[{name:"show",rawName:"v-show",value:"agent"===e.activeName,expression:"activeName === 'agent'"}]},[t("el-row",{staticClass:"page-search-form"},[t("el-form",{ref:"agentForm",attrs:{inline:!0,model:e.searchForm.agent},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"输入查询",prop:"admin_name"}},[t("el-input",{attrs:{placeholder:"请输入"+e.$t("action.agentName")+"名称"},model:{value:e.searchForm.agent.admin_name,callback:function(a){e.$set(e.searchForm.agent,"admin_name",a)},expression:"searchForm.agent.admin_name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"代理等级",prop:"city_type"}},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return e.getTableDataList(1,"agent")}},model:{value:e.searchForm.agent.city_type,callback:function(a){e.$set(e.searchForm.agent,"city_type",a)},expression:"searchForm.agent.city_type"}},e._l(e.cityTypeList,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),t("el-form-item",[t("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",type:"primary",icon:"el-icon-search"},on:{click:function(a){return e.getTableDataList(1,"agent")}}},[e._v(e._s(e.$t("action.search")))]),e._v(" "),t("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(a){return e.resetForm("agent")}}},[e._v(e._s(e.$t("action.reset")))])],1)],1)],1),e._v(" "),t("el-row",{staticClass:"page-top-operate"},[t("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-agentExport",expression:"`${$route.name}-agentExport`"}],attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-download",loading:e.downloadLoading},on:{click:e.toExportExcel}},[e._v("\n          "+e._s(e.$t("action.export")))])],1),e._v(" "),t("div",{staticClass:"pb-lg"},[e._v("\n        "+e._s(e.$t("action.agentName"))+"佣金余额总计："),t("span",{staticClass:"c-warning"},[e._v(e._s(e.count.total_cash||0)+"元")])]),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.agent,expression:"loading.agent"}],staticStyle:{width:"100%"},attrs:{data:e.tableData.agent,"header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[t("el-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),t("el-table-column",{attrs:{prop:"user_id",label:"关联用户ID"}}),e._v(" "),t("el-table-column",{attrs:{prop:"agent_name",label:e.$t("action.agentName")+"姓名"}}),e._v(" "),t("el-table-column",{attrs:{prop:"city_type",label:"代理等级"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{size:"small",type:e.cityType[a.row.city_type].type}},[e._v(e._s(e.cityType[a.row.city_type].text))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"phone",label:"手机号","min-width":"110"}}),e._v(" "),t("el-table-column",{attrs:{prop:"create_time",label:"注册时间","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("p",[e._v(e._s(e._f("handleTime")(a.row.create_time,1)))]),e._v(" "),t("p",[e._v(e._s(e._f("handleTime")(a.row.create_time,2)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"status",label:"是否删除"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{size:"small",type:-1===a.row.status?"danger":"primary"}},[e._v("\n              "+e._s(-1===a.row.status?"是":"否"))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"total_cash",label:"总佣金收入(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"flex-column"},[t("div",{staticClass:"c-success"},[e._v("+¥"+e._s(a.row.total_cash))])])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"wallet_cash",label:"已提现(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"flex-column"},[t("div",{staticClass:"c-warning"},[e._v("-¥"+e._s(a.row.wallet_cash))])])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"not_recorded_cash",label:"未入账(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n            ¥"+e._s(a.row.not_recorded_cash)+"\n          ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"cash",label:"可提现","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"c-warning"},[e._v("¥"+e._s(a.row.cash))]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.$route.meta.pagePermission[0].auth.includes("agentChangeBalance")&&(e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&e.routesItem.auth.coach_cash_auth),expression:"\n                $route.meta.pagePermission[0].auth.includes(\n                  'agentChangeBalance'\n                ) &&\n                (routesItem.userInfo.is_admin ||\n                  (!routesItem.userInfo.is_admin &&\n                    routesItem.auth.coach_cash_auth))\n              "}],staticClass:"c-warning cursor-pointer",on:{click:function(t){return e.toShowDialog("balance",a.row,3)}}},[t("i",{staticClass:"el-icon-edit"}),e._v("\n              修改余额\n            ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"130",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"table-operate"},[t("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-balanceRecord",expression:"`${$route.name}-balanceRecord`"}],attrs:{size:"mini",plain:"",type:"success"},on:{click:function(t){return e.toShowDialog("record",a.row,3)}}},[e._v(e._s(e.$t("action.balanceRecord")))])],1)]}}])})],1),e._v(" "),t("lb-page",{attrs:{batch:!1,page:e.searchForm.agent.page,pageSize:e.searchForm.agent.limit,total:e.total.agent},on:{handleSizeChange:function(a){return e.handleSizeChange(a,"agent")},handleCurrentChange:function(a){return e.handleCurrentChange(a,"agent")}}})],1),e._v(" "),t("block",{directives:[{name:"show",rawName:"v-show",value:"reseller"===e.activeName,expression:"activeName === 'reseller'"}]},[t("el-row",{staticClass:"page-search-form"},[t("el-form",{ref:"resellerForm",attrs:{inline:!0,model:e.searchForm.reseller},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"输入查询",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入"+e.$t("action.resellerName")+"名称"},model:{value:e.searchForm.reseller.name,callback:function(a){e.$set(e.searchForm.reseller,"name",a)},expression:"searchForm.reseller.name"}})],1),e._v(" "),t("el-form-item",[t("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",type:"primary",icon:"el-icon-search"},on:{click:function(a){return e.getTableDataList(1,"reseller")}}},[e._v(e._s(e.$t("action.search")))]),e._v(" "),t("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(a){return e.resetForm("reseller")}}},[e._v(e._s(e.$t("action.reset")))])],1)],1)],1),e._v(" "),t("el-row",{staticClass:"page-top-operate"},[t("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-resellerExport",expression:"`${$route.name}-resellerExport`"}],attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-download",loading:e.downloadLoading},on:{click:e.toExportExcel}},[e._v("\n          "+e._s(e.$t("action.export")))])],1),e._v(" "),t("div",{staticClass:"pb-lg"},[e._v("\n        "+e._s(e.$t("action.resellerName"))+"佣金余额总计："),t("span",{staticClass:"c-warning"},[e._v(e._s(e.count.total_cash||0)+"元")])]),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.reseller,expression:"loading.reseller"}],staticStyle:{width:"100%"},attrs:{data:e.tableData.reseller,"header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[t("el-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),t("el-table-column",{attrs:{prop:"user_id",label:"关联用户ID"}}),e._v(" "),t("el-table-column",{attrs:{prop:"user_name",label:e.$t("action.resellerName")+"姓名"}}),e._v(" "),t("el-table-column",{attrs:{prop:"mobile",label:"手机号","min-width":"110"}}),e._v(" "),t("el-table-column",{attrs:{prop:"create_time",label:"注册时间","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("p",[e._v(e._s(e._f("handleTime")(a.row.create_time,1)))]),e._v(" "),t("p",[e._v(e._s(e._f("handleTime")(a.row.create_time,2)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"total_cash",label:"总佣金收入(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"flex-column"},[t("div",{staticClass:"c-success"},[e._v("+¥"+e._s(a.row.total_cash))])])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"wallet_cash",label:"已提现(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"flex-column"},[t("div",{staticClass:"c-warning"},[e._v("-¥"+e._s(a.row.wallet_cash))])])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"not_recorded_cash",label:"未入账(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n            ¥"+e._s(a.row.not_recorded_cash)+"\n          ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"new_cash",label:"可提现","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"c-warning"},[e._v("¥"+e._s(a.row.new_cash))]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.$route.meta.pagePermission[0].auth.includes("resellerChangeBalance")&&(e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&e.routesItem.auth.coach_cash_auth),expression:"\n                $route.meta.pagePermission[0].auth.includes(\n                  'resellerChangeBalance'\n                ) &&\n                (routesItem.userInfo.is_admin ||\n                  (!routesItem.userInfo.is_admin &&\n                    routesItem.auth.coach_cash_auth))\n              "}],staticClass:"c-warning cursor-pointer",on:{click:function(t){return e.toShowDialog("balance",a.row,4)}}},[t("i",{staticClass:"el-icon-edit"}),e._v("\n              修改余额\n            ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"130",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"table-operate"},[t("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-balanceRecord",expression:"`${$route.name}-balanceRecord`"}],attrs:{size:"mini",plain:"",type:"success"},on:{click:function(t){return e.toShowDialog("record",a.row,4)}}},[e._v(e._s(e.$t("action.balanceRecord")))])],1)]}}])})],1),e._v(" "),t("lb-page",{attrs:{batch:!1,page:e.searchForm.reseller.page,pageSize:e.searchForm.reseller.limit,total:e.total.reseller},on:{handleSizeChange:function(a){return e.handleSizeChange(a,"reseller")},handleCurrentChange:function(a){return e.handleCurrentChange(a,"reseller")}}})],1),e._v(" "),t("block",{directives:[{name:"show",rawName:"v-show",value:"salesman"===e.activeName,expression:"activeName === 'salesman'"}]},[t("el-row",{staticClass:"page-search-form"},[t("el-form",{ref:"salesmanForm",attrs:{inline:!0,model:e.searchForm.salesman},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"输入查询",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入业务员名称"},model:{value:e.searchForm.salesman.name,callback:function(a){e.$set(e.searchForm.salesman,"name",a)},expression:"searchForm.salesman.name"}})],1),e._v(" "),t("el-form-item",[t("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",type:"primary",icon:"el-icon-search"},on:{click:function(a){return e.getTableDataList(1,"salesman")}}},[e._v(e._s(e.$t("action.search")))]),e._v(" "),t("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(a){return e.resetForm("salesman")}}},[e._v(e._s(e.$t("action.reset")))])],1)],1)],1),e._v(" "),t("el-row",{staticClass:"page-top-operate"},[t("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-salesmanExport",expression:"`${$route.name}-salesmanExport`"}],attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-download",loading:e.downloadLoading},on:{click:e.toExportExcel}},[e._v("\n          "+e._s(e.$t("action.export")))])],1),e._v(" "),t("div",{staticClass:"pb-lg"},[e._v("\n        业务员佣金余额总计："),t("span",{staticClass:"c-warning"},[e._v(e._s(e.count.total_cash||0)+"元")])]),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.salesman,expression:"loading.salesman"}],staticStyle:{width:"100%"},attrs:{data:e.tableData.salesman,"header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[t("el-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),t("el-table-column",{attrs:{prop:"user_id",label:"关联用户ID"}}),e._v(" "),t("el-table-column",{attrs:{prop:"user_name",label:"业务员姓名"}}),e._v(" "),t("el-table-column",{attrs:{prop:"phone",label:"手机号","min-width":"110"}}),e._v(" "),t("el-table-column",{attrs:{prop:"create_time",label:"注册时间","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("p",[e._v(e._s(e._f("handleTime")(a.row.create_time,1)))]),e._v(" "),t("p",[e._v(e._s(e._f("handleTime")(a.row.create_time,2)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"total_cash",label:"总佣金收入(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"flex-column"},[t("div",{staticClass:"c-success"},[e._v("+¥"+e._s(a.row.total_cash))])])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"wallet_cash",label:"已提现(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"flex-column"},[t("div",{staticClass:"c-warning"},[e._v("-¥"+e._s(a.row.wallet_cash))])])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"not_recorded_cash",label:"未入账(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n            ¥"+e._s(a.row.not_recorded_cash)+"\n          ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"cash",label:"可提现","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"c-warning"},[e._v("¥"+e._s(a.row.cash))]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.$route.meta.pagePermission[0].auth.includes("salesmanChangeBalance")&&(e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&e.routesItem.auth.coach_cash_auth),expression:"\n                $route.meta.pagePermission[0].auth.includes(\n                  'salesmanChangeBalance'\n                ) &&\n                (routesItem.userInfo.is_admin ||\n                  (!routesItem.userInfo.is_admin &&\n                    routesItem.auth.coach_cash_auth))\n              "}],staticClass:"c-warning cursor-pointer",on:{click:function(t){return e.toShowDialog("balance",a.row,6)}}},[t("i",{staticClass:"el-icon-edit"}),e._v("\n              修改余额\n            ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"130",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"table-operate"},[t("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-balanceRecord",expression:"`${$route.name}-balanceRecord`"}],attrs:{size:"mini",plain:"",type:"success"},on:{click:function(t){return e.toShowDialog("record",a.row,6)}}},[e._v(e._s(e.$t("action.balanceRecord")))])],1)]}}])})],1),e._v(" "),t("lb-page",{attrs:{batch:!1,page:e.searchForm.salesman.page,pageSize:e.searchForm.salesman.limit,total:e.total.salesman},on:{handleSizeChange:function(a){return e.handleSizeChange(a,"salesman")},handleCurrentChange:function(a){return e.handleCurrentChange(a,"salesman")}}})],1),e._v(" "),t("block",{directives:[{name:"show",rawName:"v-show",value:"channel"===e.activeName,expression:"activeName === 'channel'"}]},[t("el-row",{staticClass:"page-search-form"},[t("el-form",{ref:"channelForm",attrs:{inline:!0,model:e.searchForm.channel},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"输入查询",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入"+e.$t("action.channelName")+"名称"},model:{value:e.searchForm.channel.name,callback:function(a){e.$set(e.searchForm.channel,"name",a)},expression:"searchForm.channel.name"}})],1),e._v(" "),t("el-form-item",[t("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",type:"primary",icon:"el-icon-search"},on:{click:function(a){return e.getTableDataList(1,"channel")}}},[e._v(e._s(e.$t("action.search")))]),e._v(" "),t("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(a){return e.resetForm("channel")}}},[e._v(e._s(e.$t("action.reset")))])],1)],1)],1),e._v(" "),t("el-row",{staticClass:"page-top-operate"},[t("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-channelExport",expression:"`${$route.name}-channelExport`"}],attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-download",loading:e.downloadLoading},on:{click:e.toExportExcel}},[e._v("\n          "+e._s(e.$t("action.export")))])],1),e._v(" "),t("div",{staticClass:"pb-lg"},[e._v("\n        "+e._s(e.$t("action.channelName"))+"佣金余额总计："),t("span",{staticClass:"c-warning"},[e._v(e._s(e.count.total_cash||0)+"元")])]),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.channel,expression:"loading.channel"}],staticStyle:{width:"100%"},attrs:{data:e.tableData.channel,"header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[t("el-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),t("el-table-column",{attrs:{prop:"user_id",label:"关联用户ID"}}),e._v(" "),t("el-table-column",{attrs:{prop:"user_name",label:e.$t("action.channelName")+"姓名"}}),e._v(" "),t("el-table-column",{attrs:{prop:"mobile",label:"手机号","min-width":"110"}}),e._v(" "),t("el-table-column",{attrs:{prop:"create_time",label:"注册时间","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("p",[e._v(e._s(e._f("handleTime")(a.row.create_time,1)))]),e._v(" "),t("p",[e._v(e._s(e._f("handleTime")(a.row.create_time,2)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"total_cash",label:"总佣金收入(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"flex-column"},[t("div",{staticClass:"c-success"},[e._v("+¥"+e._s(a.row.total_cash))])])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"wallet_cash",label:"已提现(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"flex-column"},[t("div",{staticClass:"c-warning"},[e._v("-¥"+e._s(a.row.wallet_cash))])])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"not_recorded_cash",label:"未入账(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n            ¥"+e._s(a.row.not_recorded_cash)+"\n          ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"cash",label:"可提现","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"c-warning"},[e._v("¥"+e._s(a.row.cash))]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.$route.meta.pagePermission[0].auth.includes("channelChangeBalance")&&(e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&e.routesItem.auth.coach_cash_auth),expression:"\n                $route.meta.pagePermission[0].auth.includes(\n                  'channelChangeBalance'\n                ) &&\n                (routesItem.userInfo.is_admin ||\n                  (!routesItem.userInfo.is_admin &&\n                    routesItem.auth.coach_cash_auth))\n              "}],staticClass:"c-warning cursor-pointer",on:{click:function(t){return e.toShowDialog("balance",a.row,5)}}},[t("i",{staticClass:"el-icon-edit"}),e._v("\n              修改余额\n            ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"130",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"table-operate"},[t("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-balanceRecord",expression:"`${$route.name}-balanceRecord`"}],attrs:{size:"mini",plain:"",type:"success"},on:{click:function(t){return e.toShowDialog("record",a.row,5)}}},[e._v(e._s(e.$t("action.balanceRecord")))])],1)]}}])})],1),e._v(" "),t("lb-page",{attrs:{batch:!1,page:e.searchForm.channel.page,pageSize:e.searchForm.channel.limit,total:e.total.channel},on:{handleSizeChange:function(a){return e.handleSizeChange(a,"channel")},handleCurrentChange:function(a){return e.handleCurrentChange(a,"channel")}}})],1),e._v(" "),t("block",{directives:[{name:"show",rawName:"v-show",value:"coachbroker"===e.activeName,expression:"activeName === 'coachbroker'"}]},[t("el-row",{staticClass:"page-search-form"},[t("el-form",{ref:"coachbrokerForm",attrs:{inline:!0,model:e.searchForm.coachbroker},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"输入查询",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入"+e.$t("action.brokerName")+"名称"},model:{value:e.searchForm.coachbroker.name,callback:function(a){e.$set(e.searchForm.coachbroker,"name",a)},expression:"searchForm.coachbroker.name"}})],1),e._v(" "),t("el-form-item",[t("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",type:"primary",icon:"el-icon-search"},on:{click:function(a){return e.getTableDataList(1,"coachbroker")}}},[e._v(e._s(e.$t("action.search")))]),e._v(" "),t("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(a){return e.resetForm("coachbroker")}}},[e._v(e._s(e.$t("action.reset")))])],1)],1)],1),e._v(" "),t("el-row",{staticClass:"page-top-operate"},[t("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-coachbrokerExport",expression:"`${$route.name}-coachbrokerExport`"}],attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-download",loading:e.downloadLoading},on:{click:e.toExportExcel}},[e._v("\n          "+e._s(e.$t("action.export")))])],1),e._v(" "),t("div",{staticClass:"pb-lg"},[e._v("\n        "+e._s(e.$t("action.brokerName"))+"佣金余额总计："),t("span",{staticClass:"c-warning"},[e._v(e._s(e.count.total_cash||0)+"元")])]),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.coachbroker,expression:"loading.coachbroker"}],staticStyle:{width:"100%"},attrs:{data:e.tableData.coachbroker,"header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[t("el-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),t("el-table-column",{attrs:{prop:"user_id",label:"关联用户ID"}}),e._v(" "),t("el-table-column",{attrs:{prop:"user_name",label:e.$t("action.brokerName")+"姓名"}}),e._v(" "),t("el-table-column",{attrs:{prop:"mobile",label:"手机号","min-width":"110"}}),e._v(" "),t("el-table-column",{attrs:{prop:"create_time",label:"注册时间","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("p",[e._v(e._s(e._f("handleTime")(a.row.create_time,1)))]),e._v(" "),t("p",[e._v(e._s(e._f("handleTime")(a.row.create_time,2)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"total_cash",label:"总佣金收入(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"flex-column"},[t("div",{staticClass:"c-success"},[e._v("+¥"+e._s(a.row.total_cash))])])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"wallet_cash",label:"已提现(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"flex-column"},[t("div",{staticClass:"c-warning"},[e._v("-¥"+e._s(a.row.wallet_cash))])])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"not_recorded_cash",label:"未入账(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n            ¥"+e._s(a.row.not_recorded_cash)+"\n          ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"cash",label:"可提现","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"c-warning"},[e._v("¥"+e._s(a.row.cash))]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.$route.meta.pagePermission[0].auth.includes("coachbrokerChangeBalance"),expression:"\n                $route.meta.pagePermission[0].auth.includes(\n                  'coachbrokerChangeBalance'\n                )\n              "}],staticClass:"c-warning cursor-pointer",on:{click:function(t){return e.toShowDialog("balance",a.row,7)}}},[t("i",{staticClass:"el-icon-edit"}),e._v("\n              修改余额\n            ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"130",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"table-operate"},[t("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-balanceRecord",expression:"`${$route.name}-balanceRecord`"}],attrs:{size:"mini",plain:"",type:"success"},on:{click:function(t){return e.toShowDialog("record",a.row,7)}}},[e._v(e._s(e.$t("action.balanceRecord")))])],1)]}}])})],1),e._v(" "),t("lb-page",{attrs:{batch:!1,page:e.searchForm.coachbroker.page,pageSize:e.searchForm.coachbroker.limit,total:e.total.coachbroker},on:{handleSizeChange:function(a){return e.handleSizeChange(a,"coachbroker")},handleCurrentChange:function(a){return e.handleCurrentChange(a,"coachbroker")}}})],1),e._v(" "),t("block",{directives:[{name:"show",rawName:"v-show",value:"adminuser"===e.activeName,expression:"activeName === 'adminuser'"}]},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.adminuser,expression:"loading.adminuser"}],staticStyle:{width:"100%"},attrs:{data:e.tableData.adminuser,"header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[t("el-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),t("el-table-column",{attrs:{prop:"user_id",label:"关联用户ID"}}),e._v(" "),t("el-table-column",{attrs:{prop:"user_name",label:"管理员姓名"}}),e._v(" "),t("el-table-column",{attrs:{prop:"user_info.avatarUrl",label:"管理员头像"},scopedSlots:e._u([{key:"default",fn:function(e){return e.row.user_id&&e.row.user_info?[t("lb-image",{attrs:{src:e.row.user_info.avatarUrl}})]:void 0}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{prop:"phone",label:"手机号","min-width":"110"}}),e._v(" "),t("el-table-column",{attrs:{prop:"bind_time",label:"绑定时间","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("p",[e._v(e._s(e._f("handleTime")(a.row.bind_time,1)))]),e._v(" "),t("p",[e._v(e._s(e._f("handleTime")(a.row.bind_time,2)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"total_cash",label:"总佣金收入(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"flex-column"},[t("div",{staticClass:"c-success"},[e._v("+¥"+e._s(a.row.total_cash))])])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"wallet_cash",label:"已提现(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"flex-column"},[t("div",{staticClass:"c-warning"},[e._v("-¥"+e._s(a.row.wallet_cash))])])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"cash",label:"可提现","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"c-warning"},[e._v("¥"+e._s(a.row.cash))]),e._v(" "),t("div",{staticClass:"c-warning cursor-pointer",on:{click:function(t){return e.toShowDialog("balance",a.row,8)}}},[t("i",{staticClass:"el-icon-edit"}),e._v("\n              修改余额\n            ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"130",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"table-operate"},[t("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-balanceRecord",expression:"`${$route.name}-balanceRecord`"}],attrs:{size:"mini",plain:"",type:"success"},on:{click:function(t){return e.toShowDialog("record",a.row,8)}}},[e._v(e._s(e.$t("action.balanceRecord")))])],1)]}}])})],1),e._v(" "),t("lb-page",{attrs:{batch:!1,page:e.searchForm.adminuser.page,pageSize:e.searchForm.adminuser.limit,total:e.total.adminuser},on:{handleSizeChange:function(a){return e.handleSizeChange(a,"adminuser")},handleCurrentChange:function(a){return e.handleCurrentChange(a,"adminuser")}}})],1),e._v(" "),t("el-dialog",{attrs:{title:1===e.balanceForm.formtype?"修改服务费收入":2===e.balanceForm.formtype?"修改车费收入":"修改可提现金额",visible:e.showDialog.balance,width:"700px",center:""},on:{"update:visible":function(a){return e.$set(e.showDialog,"balance",a)}}},[t("el-form",{ref:"balanceForm",staticClass:"dialog-form",attrs:{model:e.balanceForm,rules:e.balanceFormRules,"label-width":"120px"}},[t("div",{staticClass:"flex-center",staticStyle:{margin:"0 0 10px 48px"}},[e.balanceForm.avatarUrl?t("lb-image",{staticStyle:{width:"60px",height:"60px"},attrs:{src:e.balanceForm.avatarUrl,isLook:!0}}):e._e(),e._v(" "),t("div",{staticClass:"flex-1 ml-md f-caption c-caption",style:{marginLeft:e.balanceForm.avatarUrl?"":"70px"}},[t("div",{staticClass:"f-paragraph c-title text-bold"},[e._v("\n              "+e._s(e.balanceForm.nickName)+"\n            ")]),e._v(" "),e.balanceForm.phone?t("div",{staticClass:"mt-sm"},[e._v("\n              "+e._s(e.balanceForm.phone)+"\n            ")]):e._e(),e._v(" "),t("div",{staticClass:"mt-sm"},[e._v("\n              "+e._s(1===e.balanceForm.formtype?"原服务费收入":2===e.balanceForm.formtype?"原车费收入":"原可提现金额")+"："),t("span",{staticClass:"c-warning"},[e._v("¥"+e._s(e.balanceForm.price))])])])],1),e._v(" "),t("el-form-item",{attrs:{label:"选择增减方式",prop:"type"}},[t("el-radio-group",{model:{value:e.balanceForm.type,callback:function(a){e.$set(e.balanceForm,"type",a)},expression:"balanceForm.type"}},[t("el-radio",{attrs:{label:1}},[e._v("增加余额")]),e._v(" "),t("el-radio",{attrs:{label:0}},[e._v("减扣余额")])],1)],1),e._v(" "),e.phone_config.wallet_phone_check?t("el-form-item",{attrs:{label:"验证码",prop:"phone_code"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入验证码"},model:{value:e.balanceForm.phone_code,callback:function(a){e.$set(e.balanceForm,"phone_code",a)},expression:"balanceForm.phone_code"}}),e._v(" "),t("el-button",{staticClass:"ml-sm",attrs:{plain:"",type:"primary"},on:{click:e.toSend}},[e._v(e._s(e.authTime>0?"("+e.authTime+"s)后重新获取":"获取验证码"))])],1):e._e(),e._v(" "),t("el-form-item",{attrs:{label:1===e.balanceForm.type?"增加余额":"减扣余额",prop:"new_price"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入金额"},model:{value:e.balanceForm.new_price,callback:function(a){e.$set(e.balanceForm,"new_price",a)},expression:"balanceForm.new_price"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"备注信息",prop:"text"}},[t("el-input",{attrs:{type:"textarea",resize:"none",rows:5,placeholder:"请输入金额变动的原因"},model:{value:e.balanceForm.text,callback:function(a){e.$set(e.balanceForm,"text",a)},expression:"balanceForm.text"}})],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.showDialog.balance=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:function(a){return e.submitFormInfo("balance")}}},[e._v("确 定")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"「"+e.record_name+"」"+e.adminTypeList[e.searchForm.record.type]+"修改记录",visible:e.showDialog.record,width:"1000px",top:"5vh",center:""},on:{"update:visible":function(a){return e.$set(e.showDialog,"record",a)}}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.record,expression:"loading.record"}],staticStyle:{width:"100%"},attrs:{data:e.tableData.record,"header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[t("el-table-column",{attrs:{prop:"id",label:"ID",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{prop:"create_user",label:"操作者",width:"120"}}),e._v(" "),t("el-table-column",{attrs:{prop:"",label:"操作记录"},scopedSlots:e._u([{key:"default",fn:function(a){return[3===a.row.type?t("span",[e._v("\n              "+e._s(a.row.admin_type>0?"给":"")+"\n            ")]):e._e(),e._v(" "),3===a.row.type?t("span",{staticClass:"c-title text-bold"},[e._v("\n              "+e._s(a.row.admin_type>0?""+(a.row.admin_update_name||"-"):"")+"\n            ")]):e._e(),e._v(" "),3===a.row.type?t("span",[e._v("\n              "+e._s(e.adminTypeList[a.row.admin_type])+"\n            ")]):e._e(),e._v(" "),3===a.row.type?t("span",{class:[{"c-link":!a.row.is_add},{"c-warning":a.row.is_add}]},[e._v("\n              "+e._s(a.row.admin_type>0?(a.row.is_add?"-":"+")+" ¥"+a.row.cash:"")+"\n            ")]):e._e(),e._v(" "),3===a.row.type?t("span",[e._v("\n              ，"+e._s(a.row.admin_type>0?"自己账户":"")+"\n            ")]):e._e(),e._v(" "),t("span",{class:[{"c-link":a.row.is_add},{"c-warning":!a.row.is_add}]},[e._v(e._s((a.row.is_add?"+":"-")+" ¥"+a.row.cash))]),e._v("\n            ，现余额"),t("span",{staticClass:"ml-sm c-success"},[e._v("¥"+e._s(a.row.after_cash))]),e._v(" "),a.row.text?t("el-popover",{attrs:{placement:"top-start",width:"400",trigger:"hover"}},[t("div",{staticClass:"f-caption c-title",attrs:{slot:""},slot:"default"},[t("div",{staticClass:"c-caption pb-sm"},[e._v("操作原因：")]),e._v(" "),t("div",{staticStyle:{"max-height":"80vh",overflow:"auto"},domProps:{innerHTML:e._s(a.row.text)}})]),e._v(" "),t("span",{staticClass:"iconfont iconwentifankui1 c-warning",attrs:{slot:"reference"},slot:"reference"})]):e._e()]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"create_time",label:"操作时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("p",[e._v(e._s(e._f("handleTime")(a.row.create_time,1)))]),e._v(" "),t("p",[e._v(e._s(e._f("handleTime")(a.row.create_time,2)))])]}}])})],1),e._v(" "),t("lb-page",{attrs:{batch:!1,page:e.searchForm.record.page,pageSize:e.searchForm.record.limit,total:e.total.record},on:{handleSizeChange:function(a){return e.handleSizeChange(a,"record")},handleCurrentChange:function(a){return e.handleCurrentChange(a,"record")}}})],1)],1)],1)},staticRenderFns:[]};var w=t("C7Lr")(f,g,!1,function(e){t("hmN0")},"data-v-21e5ea89",null);a.default=w.exports},hmN0:function(e,a){}});