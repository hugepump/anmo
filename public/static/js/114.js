webpackJsonp([114],{IQm8:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("3cXf"),a=r.n(s),n=r("lC5x"),i=r.n(n),l=r("J0Oq"),o=r.n(l),u={data:function(){return{navTitle:"",subForm:{status:0,AppId:"",AppSecret:"",agreement_title:"",agreement_time:"",agreement:"",attestation_status:0},subFormRules:{status:{required:!0,type:"number",message:"请选择",trigger:"blur"}},bFormRules:{AppId:{required:!0,validator:this.$reg.isNotNull,text:"AppId",reg_type:2,trigger:"blur"},AppSecret:{required:!0,validator:this.$reg.isNotNull,text:"AppSecret",reg_type:2,trigger:"blur"},agreement_title:{required:!0,validator:this.$reg.isNotNull,text:"合同名称",reg_type:2,trigger:"blur"},agreement_time:{required:!0,validator:this.$reg.isNum,text:"合同有效期",reg_type:2,trigger:"blur"},agreement:{required:!0,validator:this.$reg.isNotNull,text:"合同模版",reg_type:2,trigger:"blur"}},regArr:{reg:/\.(doc|docx|xls|xlsx|pdf)$/,text:"doc/docx/xls/xlsx/pdf"}}},created:function(){this.getDetail()},methods:{getDetail:function(){var e=this;return o()(i.a.mark(function t(){var r,s,a,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.system.fddConfigInfo();case 2:if(r=t.sent,s=r.code,a=r.data,200===s){t.next=7;break}return t.abrupt("return");case 7:for(n in e.subForm)e.subForm[n]=a[n];case 8:case"end":return t.stop()}},t,e)}))()},toFddAuth:function(){var e=this;return o()(i.a.mark(function t(){var r,s,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.system.getCompanyVerifyUrl();case 2:if(r=t.sent,s=r.code,a=r.data,200===s){t.next=7;break}return t.abrupt("return");case 7:window.open(a);case 8:case"end":return t.stop()}},t,e)}))()},getFile:function(e,t){var r=e.length-1;this.subForm[t]=e[r].url},toResetFile:function(e){this.subForm[e]=""},submitFormInfo:function(){var e=this;return o()(i.a.mark(function t(){var r,s,n,l,o,u,c,m,p;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(r=JSON.parse(a()(e.subForm)),s=["aForm"],1===r.status&&s.push("bForm"),n=!0,l=0,o=s.length;l<o;l++)e.$refs[s[l]].validate(function(e){if(!e)return n=!1,!1});if(n){t.next=7;break}return t.abrupt("return");case 7:if(u=e.regArr,c=u.reg,m=u.text,1!==r.status||c.test(r.agreement)){t.next=11;break}return e.$message.error("合同模版仅支持"+m+"格式!"),t.abrupt("return");case 11:return delete r.attestation_status,t.next=14,e.$api.system.fddConfigUpdate(r);case 14:if(p=t.sent,200===p.code){t.next=18;break}return t.abrupt("return");case 18:e.$message.success(e.$t("tips.successSub"));case 19:case"end":return t.stop()}},t,e)}))()}},filters:{handleFileName:function(e){var t="请上传合同模版";return e&&(t=e.substring(e.lastIndexOf("/")+1)),t}}},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"lb-system-fdd-set"},[r("top-nav"),e._v(" "),r("div",{staticClass:"page-main"},[r("lb-tips",[e._v("系统目前对接的是法大大第三方电子签约平台，用于和平台入驻"+e._s(e.$t("action.attendantName"))+"签订线上合作协议，如需使用需在法大大平台购买套餐后，电子合同方可生效\n    ")]),e._v(" "),r("el-form",{ref:"aForm",staticClass:"basic-form",attrs:{model:e.subForm,rules:e.subFormRules,"label-width":"160px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"是否启用",prop:"status"}},[r("el-radio-group",{model:{value:e.subForm.status,callback:function(t){e.$set(e.subForm,"status",t)},expression:"subForm.status"}},[r("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("action.ON")))]),e._v(" "),r("el-radio",{attrs:{label:0}},[e._v(e._s(e.$t("action.OFF")))])],1)],1),e._v(" "),1===e.subForm.status?r("el-form",{ref:"bForm",staticClass:"basic-form",attrs:{model:e.subForm,rules:e.bFormRules,"label-width":"160px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"AppId",prop:"AppId"}},[r("el-input",{attrs:{placeholder:"请输入AppId"},model:{value:e.subForm.AppId,callback:function(t){e.$set(e.subForm,"AppId",t)},expression:"subForm.AppId"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"AppSecret",prop:"AppSecret"}},[r("el-input",{attrs:{placeholder:"请输入AppSecret"},model:{value:e.subForm.AppSecret,callback:function(t){e.$set(e.subForm,"AppSecret",t)},expression:"subForm.AppSecret"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"合同名称",prop:"agreement_title"}},[r("el-input",{attrs:{placeholder:"请输入合同名称"},model:{value:e.subForm.agreement_title,callback:function(t){e.$set(e.subForm,"agreement_title",t)},expression:"subForm.agreement_title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"合同有效期",prop:"agreement_time"}},[r("el-input",{attrs:{placeholder:"请输入合同有效期"},model:{value:e.subForm.agreement_time,callback:function(t){e.$set(e.subForm,"agreement_time",t)},expression:"subForm.agreement_time"}},[r("template",{slot:"append"},[e._v("年")])],2)],1),e._v(" "),r("el-form-item",{attrs:{label:"合同模版",prop:"agreement"}},[r("div",{staticClass:"flex-warp"},[r("div",{staticClass:"lb-file-input flex-between"},[r("div",{class:[{"c-title":e.subForm.agreement}]},[e._v("\n                "+e._s(e._f("handleFileName")(e.subForm.agreement))+"\n              ")]),e._v(" "),r("div",{staticClass:"flex-center"},[e.subForm.agreement?r("i",{staticClass:"c-warning iconfont icon-guanbi-fill pl-sm pr-sm",on:{click:function(t){return e.toResetFile("agreement")}}}):e._e(),e._v(" "),r("lb-cover",{attrs:{type:"button",fileType:"file",fileSize:1,regType:3},on:{selectedFiles:function(t){return e.getFile(t,"agreement")}}})],1)]),e._v(" "),r("lb-tool-tips",[e._v("\n              文件支持doc、docx、xls、xlsx、pdf格式\n            ")])],1)]),e._v(" "),r("el-form-item",{attrs:{label:"实名认证",prop:"attestation_status"}},[r("div",{staticClass:"flex-y-center"},[r("el-tag",{class:[{"mt-md":e.subForm.attestation_status}],attrs:{size:"small",type:1===e.subForm.attestation_status?"primary":"danger"}},[e._v(e._s(1===e.subForm.attestation_status?"已认证":"未认证"))]),e._v(" "),e.subForm.attestation_status?e._e():r("div",{staticClass:"c-link cursor-pointer ml-md",on:{click:e.toFddAuth}},[e._v("\n              发起合同前需实名认证，点击去认证\n            ")])],1)])],1):e._e(),e._v(" "),r("el-form-item",[r("lb-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:e.submitFormInfo}},[e._v(e._s(e.$t("action.submit")))])],1)],1)],1)],1)},staticRenderFns:[]};var m=r("C7Lr")(u,c,!1,function(e){r("cJQA")},"data-v-51c00272",null);t.default=m.exports},cJQA:function(e,t){}});