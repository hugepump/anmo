webpackJsonp([129],{SYER:function(e,t){},"po9+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("3cXf"),s=a.n(n),r=a("rVsN"),i=a.n(r),o=a("KH7x"),l=a.n(o),m=a("4YfN"),u=a.n(m),c=a("lC5x"),d=a.n(c),p=a("J0Oq"),h=a.n(p),_=a("bSIt"),v=a("PxTW"),f=a.n(v),b={data:function(){var e=this;return{selectable:function(e,t){return!!e.is_selectable},loading:!1,statusText:{1:{type:"info",text:"申请中"},2:{type:"",text:"已授权"},3:{type:"danger",text:"取消授权"},4:{type:"danger",text:"已驳回"}},pickerOptions:{disabledDate:function(e){return e.getTime()>1e3*(f()(f()(Date.now()).format("YYYY-MM-DD")).unix()+86400-1)}},base_agent:[],salesman_balance:"",searchForm:{page:1,limit:10,status:0,admin_id:"",start_time:"",end_time:"",name:""},tableData:[],total:0,count:{},multipleSelection:[],currentRow:{},showDialog:{sub:!1,change:!1,balance:!1},applyForm:{title:"",status:"",sh_text:""},subForm:{id:0,status:0,sh_text:""},subFormRules:{status:{required:!0,validator:function(t,a,n){e.subForm.status?n():n(new Error("请选择审核结果"))},trigger:"blur"}},changeForm:{id:"",admin_id:"",admin_name:""},balanceForm:{id:[],user_name:"",balance:""},balanceFormRules:{balance:{required:!0,validator:this.$reg.isDotPercent,text:"提成比例",trigger:"blur"}}}},activated:function(){var e=this;return h()(d.a.mark(function t(){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=1,Number(window.sessionStorage.getItem("currentPage"))&&(a=Number(window.sessionStorage.getItem("currentPage")),window.sessionStorage.removeItem("currentPage")),t.next=4,e.getBaseInfo();case 4:e.getTableDataList(a);case 5:case"end":return t.stop()}},t,e)}))()},beforeRouteLeave:function(e,t,a){if(["SalesmanEdit","SalesmanChannel"].includes(e.name)){var n=e.query.id;(void 0===n?0:n)&&window.sessionStorage.setItem("currentPage",this.searchForm.page)}a()},computed:u()({},Object(_.e)({routesItem:function(e){return e.routes}})),methods:{getBaseInfo:function(){var e=this;return h()(d.a.mark(function t(){var a,n,s,r;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.all([e.$api.agent.adminSelect({salesman_auth:1}),e.$api.system.configInfo()]);case 2:a=t.sent,n=l()(a,2),s=n[0],r=n[1],e.base_agent=s.data,e.salesman_balance=1*r.data.salesman_balance;case 8:case"end":return t.stop()}},t,e)}))()},resetForm:function(e){this.$refs[e].resetFields(),this.getTableDataList(1)},handleSizeChange:function(e){this.searchForm.limit=e,this.handleCurrentChange(1)},handleCurrentChange:function(e){this.searchForm.page=e,this.getTableDataList()},toChange:function(e){var t=this;return h()(d.a.mark(function a(){return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.searchForm.status=e,t.getTableDataList(1);case 2:case"end":return a.stop()}},a,t)}))()},getTableDataList:function(e){var t=this;return h()(d.a.mark(function a(){var n,r,i,o,l,m,u,c,p;return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e&&(t.searchForm.page=e),t.tableData=[],t.loading=!0,n=JSON.parse(s()(t.searchForm)),(r=n.start_time)&&r.length>1?(n.start_time=r[0]/1e3,n.end_time=r[1]/1e3):(n.start_time="",n.end_time=""),a.next=8,t.$api.salesman.salesmanList(n);case 8:if(i=a.sent,o=i.code,l=i.data,t.loading=!1,200===o){a.next=14;break}return a.abrupt("return");case 14:m=t.routesItem.userInfo,u=m.is_admin,c=m.id,p=m.admin_id,l.data.map(function(e){e.is_selectable=![1,4].includes(e.status)&&(u||!u&&e.admin_id&&(c===e.admin_id||p===e.admin_id));var t=e.text||"该用户没有填写备注";e.text=t.replace(/\n/g,"<br>")}),t.tableData=l.data,t.total=l.total,t.count=t.$util.pick(l,["all","nopass","ing","pass"]);case 19:case"end":return a.stop()}},a,t)}))()},handleMulSelectionChange:function(e){this.multipleSelection=e},handleMenuCommand:function(e,t){var a=t.id,n=t.user_name;switch(e){case"authStatus":this.toShowDialog("sub",a);break;case"updateAgent":this.toShowDialog("change",a);break;case"bindChannel":this.$router.push("/promotion/salesman/channel?id="+a+"&name="+n);break;case"setSalesmanBalance":this.toShowDialog("balance",a);break;case"delSalesmanBalance":this.confirmDel({id:[a],user_name:n},-2);break;case"cancelAuth":this.confirmDel({id:a},3);break;case"delete":this.confirmDel({id:a},-1)}},toShowDialog:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return h()(d.a.mark(function n(){var s,r,i,o;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$api.salesman.salesmanInfo({id:a});case 2:if(s=n.sent,r=s.code,i=s.data,200===r){n.next=7;break}return n.abrupt("return");case 7:if("sub"===e)i.sh_text=i.sh_text?i.sh_text.replace(/\n/g,"<br>"):"",t.applyForm=i,t.subForm={id:a,status:2,sh_text:""};else for(o in i.balance=1*i.balance==-1?"":i.balance,i.admin_id=i.admin_id||"",i.admin_name=i.admin_name||"","balance"===e&&(i.id=[i.id]),t[e+"Form"])t[e+"Form"][o]=i[o];t.showDialog[e]=!t.showDialog[e],["balance"].includes(e)&&t.$refs[e+"Form"].validate&&t.$refs[e+"Form"].clearValidate();case 10:case"end":return n.stop()}},n,t)}))()},toBatchBalance:function(e){if(0!==this.multipleSelection.length){var t=this.multipleSelection.filter(function(t){return 1===e?t.id:t.id&&-1!==t.balance}),a=t.map(function(e){return e.id});if(0!==a.length){var n="";if(t.map(function(e,t){n+=(0===t?"":"、")+e.user_name}),1===e)return this.balanceForm={id:a,user_name:n,balance:""},void(this.showDialog.balance=!0);this.confirmDel({id:a,user_name:n},-2)}else this.$message.error("当前选择的数据暂未设置提成比例，不可操作删除提成比例哦")}else this.$message.error("请选择要操作的数据")},confirmDel:function(e,t){var a=this,n=e.id,s=e.user_name,r=this.$createElement;this.$confirm(r("p",null,-2===t?[r("p",null,this.$t("tips.confirmDelete")),r("p",{style:"font-size:13px;line-height:1.2;color: red"},"删除后，业务员“"+s+"”的提成比例将默认为【业务员设置 - 业务员返佣】所设置的比例")]:[r("p",null,this.$t(3===t?"tips.confirmNoPass":"tips.confirmDelete"))]),this.$t("tips.reminder"),{confirmButtonText:this.$t("action.comfirm"),cancelButtonText:this.$t("action.cancel"),type:"warning"}).then(function(){a.updateItem(n,t)}).catch(function(){})},updateItem:function(e,t){var a=this;return h()(d.a.mark(function n(){var s;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:s=-2===t?"delSalesmanBalance":"checkSalesman",a.$api.salesman[s](-2===t?{id:e}:{id:e,status:t}).then(function(e){if(200===e.code)a.$message.success(a.$t(3===t?"tips.successOper":"tips.successDel")),-1===t&&(a.searchForm.page=a.searchForm.page<Math.ceil((a.total-1)/a.searchForm.limit)?a.searchForm.page:Math.ceil((a.total-1)/a.searchForm.limit)),a.getTableDataList();else{if(-1===t)return;a.getTableDataList()}});case 2:case"end":return n.stop()}},n,a)}))()},submitFormInfo:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return h()(d.a.mark(function n(){var r,i,o;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=!0,1===a&&t.$refs[e+"Form"].validate(function(e){e||(r=!1)}),r){n.next=4;break}return n.abrupt("return");case 4:i=JSON.parse(s()(t[e+"Form"])),"change"===e&&delete i.admin_name,"balance"===e&&delete i.user_name,o="balance"===e?"setSalesmanBalance":"checkSalesman",t.$api.salesman[o](i).then(function(a){200===a.code&&(t.$message.success(t.$t("tips.successSub")),t.showDialog[e]=!1,t.getTableDataList())});case 9:case"end":return n.stop()}},n,t)}))()}},filters:{handleTime:function(e,t){return 1===t?f()(1e3*e).format("YYYY-MM-DD"):2===t?f()(1e3*e).format("HH:mm:ss"):f()(1e3*e).format("YYYY-MM-DD HH:mm:ss")}}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lb-salesman-examine"},[a("top-nav"),e._v(" "),a("div",{staticClass:"page-main"},[a("el-row",{staticClass:"page-top-operate"},[a("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-add",expression:"`${$route.name}-add`"}],attrs:{size:"medium",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.$router.push("/promotion/salesman/edit")}}},[e._v(e._s(e.$t("menu.SalesmanAdd")))])],1),e._v(" "),a("el-row",{staticClass:"page-top-operate"},[a("el-button",{attrs:{type:0===e.searchForm.status?"primary":"",plain:"",size:"medium"},on:{click:function(t){return e.toChange(0)}}},[e._v("全部（"+e._s(e.count.all||0)+"）")]),e._v(" "),a("el-badge",{staticStyle:{margin:"14px 12px 0 0"},style:{marginRight:e.count.ing>99?"32px":e.count.ing>9?"22px":"12px"},attrs:{value:e.count.ing>0?e.count.ing:"",max:99}},[a("el-button",{staticStyle:{"margin-right":"0"},attrs:{type:1===e.searchForm.status?"primary":"",plain:"",size:"medium"},on:{click:function(t){return e.toChange(1)}}},[e._v("申请中"),0===e.count.ing?a("span",[e._v("（0）")]):e._e()])],1),e._v(" "),a("el-button",{attrs:{type:2===e.searchForm.status?"primary":"",plain:"",size:"medium"},on:{click:function(t){return e.toChange(2)}}},[e._v("已授权（"+e._s(e.count.pass||0)+"）")]),e._v(" "),a("el-button",{attrs:{type:4===e.searchForm.status?"primary":"",plain:"",size:"medium"},on:{click:function(t){return e.toChange(4)}}},[e._v("已驳回（"+e._s(e.count.nopass||0)+"）")])],1),e._v(" "),a("el-row",{staticClass:"page-search-form"},[a("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.searchForm},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"输入查询",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入姓名/手机号"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""+e.$t("action.agentName"),prop:"admin_id"}},[a("el-select",{attrs:{placeholder:"请选择"+e.$t("action.agentName"),filterable:"",clearable:""},on:{change:function(t){return e.getTableDataList(1)}},model:{value:e.searchForm.admin_id,callback:function(t){e.$set(e.searchForm,"admin_id",t)},expression:"searchForm.admin_id"}},e._l(e.base_agent,function(e){return a("el-option",{key:e.id,attrs:{label:e.agent_name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"申请时间",prop:"start_time"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp","picker-options":e.pickerOptions,"default-time":["00:00:00","23:59:59"]},on:{change:function(t){return e.getTableDataList(1)}},model:{value:e.searchForm.start_time,callback:function(t){e.$set(e.searchForm,"start_time",t)},expression:"searchForm.start_time"}})],1),e._v(" "),a("el-form-item",[a("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.getTableDataList(1)}}},[e._v(e._s(e.$t("action.search")))]),e._v(" "),a("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v(e._s(e.$t("action.reset")))])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":{background:"#f5f7fa",color:"#606266"}},on:{"selection-change":e.handleMulSelectionChange}},[e.$route.meta.pagePermission[0].auth.includes("setSalesmanBalance")||e.$route.meta.pagePermission[0].auth.includes("delSalesmanBalance")?a("el-table-column",{attrs:{type:"selection",width:"55",selectable:e.selectable}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_id",label:"用户ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"avatarUrl",label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("lb-image",{attrs:{src:e.row.avatarUrl}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nickName",label:"昵称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号","min-width":"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"admin_name",label:"所属"+e.$t("action.agentName"),"min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"balance",label:"提成比例"},scopedSlots:e._u([{key:"default",fn:function(t){return 1*t.row.balance!=-1?[e._v("\n          "+e._s(t.row.balance)+"%\n        ")]:void 0}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"申请时间","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e._f("handleTime")(t.row.create_time,1)))]),e._v(" "),a("p",[e._v(e._s(e._f("handleTime")(t.row.create_time,2)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"small",type:e.statusText[t.row.status].type}},[e._v(e._s(e.statusText[t.row.status].text))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-operate"},[a("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-view",expression:"`${$route.name}-view`"},{name:"show",rawName:"v-show",value:!e.routesItem.userInfo.is_admin&&(!e.routesItem.userInfo.admin_id&&e.routesItem.userInfo.id!==t.row.admin_id||e.routesItem.userInfo.admin_id&&e.routesItem.userInfo.admin_id!==t.row.admin_id),expression:"\n                !routesItem.userInfo.is_admin &&\n                ((!routesItem.userInfo.admin_id &&\n                  routesItem.userInfo.id !== scope.row.admin_id) ||\n                  (routesItem.userInfo.admin_id &&\n                    routesItem.userInfo.admin_id !== scope.row.admin_id))\n              "}],attrs:{size:"mini",plain:"",type:"success"},on:{click:function(a){return e.toShowDialog("sub",t.row)}}},[e._v(e._s(e.$t("action.view")))]),e._v(" "),e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&t.row.admin_id&&(e.routesItem.userInfo.id===t.row.admin_id||e.routesItem.userInfo.admin_id===t.row.admin_id)?a("block",[a("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:2===t.row.status?e.$route.name+"-edit":e.$route.name+"-view",expression:"\n                  scope.row.status === 2\n                    ? `${$route.name}-edit`\n                    : `${$route.name}-view`\n                "},{name:"show",rawName:"v-show",value:[2,4].includes(t.row.status),expression:"[2, 4].includes(scope.row.status)"}],attrs:{size:"mini",plain:"",type:2===t.row.status?"primary":"success"},on:{click:function(a){2===t.row.status?e.$router.push("/promotion/salesman/edit?id="+t.row.id):e.toShowDialog("sub",t.row.id)}}},[e._v(e._s(e.$t(2===t.row.status?"action.edit":"action.view")))]),e._v(" "),1===t.row.status&&e.$route.meta.pagePermission[0].auth.includes("authSalesman")||3===t.row.status&&e.$route.meta.pagePermission[0].auth.includes("resetAuth")||2===t.row.status&&e.routesItem.userInfo.is_admin&&e.$route.meta.pagePermission[0].auth.includes("updateAgent")||2===t.row.status&&e.routesItem.auth.channel&&(e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&e.routesItem.auth.channel_auth)&&e.$route.meta.pagePermission[0].auth.includes("bindChannel")||![1,4].includes(t.row.status)&&e.$route.meta.pagePermission[0].auth.includes("setSalesmanBalance")||![1,4].includes(t.row.status)&&1*t.row.balance!==e.salesman_balance&&e.$route.meta.pagePermission[0].auth.includes("delSalesmanBalance")||2===t.row.status&&e.$route.meta.pagePermission[0].auth.includes("cancelAuth")||1!==t.row.status&&e.$route.meta.pagePermission[0].auth.includes("delete")?a("el-dropdown",{on:{command:function(a){return e.handleMenuCommand(a,t.row)}}},[a("el-button",{attrs:{type:"danger",plain:"",size:"mini"}},[e._v("\n                  更多菜单"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:[1,3].includes(t.row.status),expression:"[1, 3].includes(scope.row.status)"},{name:"hasPermi",rawName:"v-hasPermi",value:1===t.row.status?e.$route.name+"-authSalesman":e.$route.name+"-resetAuth",expression:"\n                      scope.row.status === 1\n                        ? `${$route.name}-authSalesman`\n                        : `${$route.name}-resetAuth`\n                    "}],attrs:{command:"authStatus"}},[e._v(e._s(e.$t(1===t.row.status?"action.authSalesman":"action.resetAuth")))]),e._v(" "),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:2===t.row.status&&e.routesItem.userInfo.is_admin,expression:"\n                      scope.row.status === 2 && routesItem.userInfo.is_admin\n                    "},{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-updateAgent",expression:"`${$route.name}-updateAgent`"}],attrs:{command:"updateAgent"}},[e._v(e._s(e.$t("action.updateAgent")))]),e._v(" "),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-bindChannel",expression:"`${$route.name}-bindChannel`"},{name:"show",rawName:"v-show",value:2===t.row.status&&e.routesItem.auth.channel&&(e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&e.routesItem.auth.channel_auth),expression:"\n                      scope.row.status === 2 &&\n                      routesItem.auth.channel &&\n                      (routesItem.userInfo.is_admin ||\n                        (!routesItem.userInfo.is_admin &&\n                          routesItem.auth.channel_auth))\n                    "}],attrs:{command:"bindChannel"}},[e._v(e._s(e.$t("action.bindChannel")))]),e._v(" "),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-setSalesmanBalance",expression:"`${$route.name}-setSalesmanBalance`"},{name:"show",rawName:"v-show",value:![1,4].includes(t.row.status),expression:"![1, 4].includes(scope.row.status)"}],attrs:{command:"setSalesmanBalance"}},[e._v(e._s(e.$t("action.setSalesmanBalance")))]),e._v(" "),a("el-dropdown-item",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-delSalesmanBalance",expression:"`${$route.name}-delSalesmanBalance`"},{name:"show",rawName:"v-show",value:![1,4].includes(t.row.status)&&1*t.row.balance!==e.salesman_balance,expression:"\n                      ![1, 4].includes(scope.row.status) &&\n                      scope.row.balance * 1 !== salesman_balance\n                    "}],attrs:{command:"delSalesmanBalance"}},[e._v(e._s(e.$t("action.delSalesmanBalance")))]),e._v(" "),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:2===t.row.status,expression:"scope.row.status === 2"},{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-cancelAuth",expression:"`${$route.name}-cancelAuth`"}],attrs:{command:"cancelAuth"}},[e._v(e._s(e.$t("action.cancelAuth")))]),e._v(" "),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:1!==t.row.status,expression:"scope.row.status !== 1"},{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-delete",expression:"`${$route.name}-delete`"}],attrs:{command:"delete"}},[e._v(e._s(e.$t("action.delete")))])],1)],1):e._e()],1):e._e()],1)]}}])})],1),e._v(" "),a("lb-page",{attrs:{batch:e.$route.meta.pagePermission[0].auth.includes("setSalesmanBalance")||e.$route.meta.pagePermission[0].auth.includes("delSalesmanBalance"),page:e.searchForm.page,pageSize:e.searchForm.limit,total:e.total,selected:e.multipleSelection.length},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}},[a("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-setSalesmanBalance",expression:"`${$route.name}-setSalesmanBalance`"}],attrs:{size:"mini",type:"warning"},on:{click:function(t){return e.toBatchBalance(1)}}},[e._v(e._s(e.$t("action.setSalesmanBalance")))]),e._v(" "),a("lb-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:e.$route.name+"-delSalesmanBalance",expression:"`${$route.name}-delSalesmanBalance`"}],attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.toBatchBalance(2)}}},[e._v(e._s(e.$t("action.delSalesmanBalance")))])],1),e._v(" "),a("el-dialog",{attrs:{title:"申请详情",visible:e.showDialog.sub,width:"800px",top:"10vh",center:""},on:{"update:visible":function(t){return e.$set(e.showDialog,"sub",t)}}},[e.showDialog.sub?a("div",{staticStyle:{height:"60vh",overflow:"auto"}},[a("el-form",{staticClass:"dialog-form",attrs:{model:e.applyForm,"label-width":"130px",size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"用户ID："}},[a("div",[e._v(e._s(e.applyForm.user_id))])]),e._v(" "),a("el-form-item",{attrs:{label:"昵称："}},[a("div",[e._v(e._s(e.applyForm.nickName))])]),e._v(" "),a("el-form-item",{attrs:{label:"姓名："}},[a("div",[e._v(e._s(e.applyForm.user_name))])]),e._v(" "),a("el-form-item",{attrs:{label:"真实姓名："}},[a("div",[e._v(e._s(e.applyForm.true_user_name))])]),e._v(" "),a("el-form-item",{attrs:{label:"手机号："}},[a("div",[e._v(e._s(e.applyForm.phone))])]),e._v(" "),e.applyForm.admin_name?a("el-form-item",{attrs:{label:"所属"+e.$t("action.agentName")+"："}},[a("div",[e._v(e._s(e.applyForm.admin_name))])]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"申请时间："}},[a("div",[e._v("\n              "+e._s(e._f("handleTime")(e.applyForm.create_time))+"\n            ")])]),e._v(" "),a("div",{staticClass:"space-lg"}),e._v(" "),a("div",{staticClass:"space-lg b-1px-t"}),e._v(" "),a("div",{staticClass:"space-lg"}),e._v(" "),1!==e.applyForm.status?a("block",[a("div",{staticClass:"flex-warp"},[a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"审核结果：",prop:"status"}},[a("el-tag",{attrs:{size:"small",type:e.statusText[e.applyForm.status].type}},[e._v(e._s(e.statusText[e.applyForm.status].text))])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1!==e.applyForm.status&&e.applyForm.sh_time,expression:"applyForm.status !== 1 && applyForm.sh_time"}],staticStyle:{width:"50%"},attrs:{label:"审核时间：",prop:""}},[a("div",{staticClass:"c-warning"},[e._v("\n                  "+e._s(e._f("handleTime")(e.applyForm.sh_time))+"\n                ")])])],1),e._v(" "),e.applyForm.sh_text?a("el-form-item",{attrs:{label:"审核意见：",prop:"sh_text"}},[a("div",{domProps:{innerHTML:e._s(e.applyForm.sh_text)}})]):e._e()],1):e._e()],1),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:[1,3].includes(e.applyForm.status)&&(e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&(e.routesItem.userInfo.id===e.applyForm.admin_id||e.routesItem.userInfo.admin_id===e.applyForm.admin_id)),expression:"\n            [1, 3].includes(applyForm.status) &&\n            (routesItem.userInfo.is_admin ||\n              (!routesItem.userInfo.is_admin &&\n                (routesItem.userInfo.id === applyForm.admin_id ||\n                  routesItem.userInfo.admin_id === applyForm.admin_id)))\n          "}],ref:"subForm",attrs:{model:e.subForm,rules:e.subFormRules,"label-width":"130px",size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"审核结果：",prop:"status"}},[a("el-radio-group",{model:{value:e.subForm.status,callback:function(t){e.$set(e.subForm,"status",t)},expression:"subForm.status"}},[a("el-radio",{attrs:{label:2}},[e._v("通过")]),e._v(" "),1===e.applyForm.status?a("el-radio",{attrs:{label:4}},[e._v("驳回")]):e._e()],1)],1),e._v(" "),1===e.applyForm.status?a("el-form-item",{attrs:{label:"审核意见："}},[a("el-input",{attrs:{type:"textarea",rows:10,maxlength:"300","show-word-limit":"",resize:"none",placeholder:"请输入审核意见"},model:{value:e.subForm.sh_text,callback:function(t){e.$set(e.subForm,"sh_text",t)},expression:"subForm.sh_text"}})],1):e._e()],1)],1):e._e(),e._v(" "),e.routesItem.userInfo.is_admin||!e.routesItem.userInfo.is_admin&&(e.routesItem.userInfo.id===e.applyForm.admin_id||e.routesItem.userInfo.admin_id===e.applyForm.admin_id)?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showDialog.sub=!1}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),a("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"},{name:"show",rawName:"v-show",value:[1,3].includes(e.applyForm.status),expression:"[1, 3].includes(applyForm.status)"},{name:"hasPermi",rawName:"v-hasPermi",value:1===e.applyForm.status?e.$route.name+"-authSalesman":e.$route.name+"-resetAuth",expression:"\n            applyForm.status === 1\n              ? `${$route.name}-authSalesman`\n              : `${$route.name}-resetAuth`\n          "}],attrs:{type:"primary"},on:{click:function(t){return e.submitFormInfo("sub")}}},[e._v(e._s(e.$t("action.comfirm")))])],1):e._e()]),e._v(" "),a("el-dialog",{attrs:{title:e.$t("action.updateAgent"),visible:e.showDialog.change,width:"600px",center:""},on:{"update:visible":function(t){return e.$set(e.showDialog,"change",t)}}},[a("el-form",{ref:"changeForm",staticClass:"dialog-form",attrs:{model:e.changeForm,"label-width":"140px"},nativeOn:{submit:function(e){e.preventDefault()}}},[e.changeForm.admin_name?a("el-form-item",{attrs:{label:"原"+e.$t("action.agentName")+"："}},[e._v("\n          "+e._s(e.changeForm.admin_name)+"\n        ")]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"修改所属"+e.$t("action.agentName")+"："}},[a("el-select",{attrs:{placeholder:"请选择"+e.$t("action.agentName"),filterable:"",clearable:""},model:{value:e.changeForm.admin_id,callback:function(t){e.$set(e.changeForm,"admin_id",t)},expression:"changeForm.admin_id"}},e._l(e.base_agent,function(e){return a("el-option",{key:e.id,attrs:{label:e.agent_name,value:e.id}})}),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showDialog.change=!1}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),a("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:function(t){return e.submitFormInfo("change",2)}}},[e._v(e._s(e.$t("action.comfirm")))])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.$t("action.setSalesmanBalance"),visible:e.showDialog.balance,width:"600px",center:""},on:{"update:visible":function(t){return e.$set(e.showDialog,"balance",t)}}},[a("el-form",{ref:"balanceForm",staticClass:"dialog-form",attrs:{model:e.balanceForm,rules:e.balanceFormRules,"label-width":"140px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"业务员："}},[e._v("\n          "+e._s(e.balanceForm.user_name)+"\n        ")]),e._v(" "),a("el-form-item",{attrs:{label:"提成比例",prop:"balance"}},[a("el-input",{staticClass:"md",attrs:{placeholder:"请输入提成比例"},model:{value:e.balanceForm.balance,callback:function(t){e.$set(e.balanceForm,"balance",t)},expression:"balanceForm.balance"}},[a("template",{slot:"append"},[e._v("%")])],2),e._v(" "),a("lb-tool-tips",[e._v("提成比例取值0-100，输入0则表示没有提成")])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showDialog.balance=!1}}},[e._v(e._s(e.$t("action.cancel")))]),e._v(" "),a("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:function(t){return e.submitFormInfo("balance")}}},[e._v(e._s(e.$t("action.comfirm")))])],1)],1)],1)],1)},staticRenderFns:[]};var g=a("C7Lr")(b,w,!1,function(e){a("SYER")},"data-v-458622de",null);t.default=g.exports}});