webpackJsonp([63],{AvUi:function(t,e){},hTF3:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("3cXf"),n=a.n(r),o=a("lC5x"),l=a.n(o),i=a("hRKE"),s=a.n(i),m=a("aA9S"),_=a.n(m),c=a("J0Oq"),d=a.n(c),p=a("zsLt"),u=a.n(p),h=a("IHPB"),v=a.n(h),g={data:function(){var t=this,e=function(t,e,a){var r=/^1[3-9]\d{9}$/;for(var n in e){var o=1*n+1,l=e[n].phone;if(!l||!r.test(l)){var i=l?l+" 手机号无效":"请输入"+t.text;return void a(new Error("第"+o+"条数据："+i))}}var s=e.filter(function(t){return t.phone});if(s.length>0){if([].concat(v()(new u.a(s.map(function(t){return t.phone})))).length!==s.length)return void a(new Error("请勿添加重复的手机号码"));s.length===e.length&&a()}};return{orderForm:{notice_agent:0,reminder_admin_status:0,reminder_admin_phone:[],notice_admin:0,order_tmpl_agent_status:0,order_tmpl_admin_status:0,order_tmpl_text:[],order_tmpl_notice_admin:0},orderFormRules:{notice_agent:{required:!0,type:"number",message:"请选择是否通知"+this.$t("action.agentName"),trigger:"blur"},reminder_admin_status:{required:!0,type:"number",message:"请选择是否通知管理员",trigger:"blur"},reminder_admin_phone:{required:!0,validator:e,text:"管理员手机号",trigger:"blur"},notice_admin:{required:!0,type:"number",message:"请选择是否通知平台",trigger:"blur"},order_tmpl_agent_status:{required:!0,type:"number",message:"请选择是否通知"+this.$t("action.agentName"),trigger:"blur"},order_tmpl_admin_status:{required:!0,type:"number",message:"请选择是否通知管理员",trigger:"blur"},order_tmpl_text:{required:!0,type:"array",message:"请选择公众号通知人员",trigger:"blur"},order_tmpl_notice_admin:{required:!0,type:"number",message:"请选择是否通知平台",trigger:"blur"}},noticeForm:{order_end_status:0,wechat_tmpl:0,order_wechat_agent_status:0,wechat_tmpl_admin:[],order_wechat_admin_status:0},noticeFormRules:{order_end_status:{required:!0,type:"number",message:"请选择到钟前5分钟通知",trigger:"change"},order_wechat_agent_status:{required:!0,type:"number",message:"请选择是否通知"+this.$t("action.agentName"),trigger:"change"},wechat_tmpl:{required:!0,type:"number",message:"请选择是否通知管理员",trigger:"change"},wechat_tmpl_admin:{required:!0,validator:function(e,a,r){!t.noticeForm.wechat_tmpl||a&&0!==a.length?r():r(new Error(""+e.message))},message:"请选择公众号通知人员",trigger:"blur"},order_wechat_admin_status:{required:!0,type:"number",message:"请选择是否通知平台",trigger:"change"}},helpForm:{help_reminder_agent_status:1,reminder_admin_status:1,reminder_notice_phone:[],reminder_notice_admin:0,help_short_agent_status:1,short_admin_status:1,help_phone:[],short_notice_admin:0,help_wechat_agent_status:0,tmpl_admin_status:1,help_user_id:[],tmpl_notice_admin:0},helpFormRules:{help_reminder_agent_status:{required:!0,type:"number",message:"请选择是否通知"+this.$t("action.agentName"),trigger:"blur"},reminder_admin_status:{required:!0,type:"number",message:"请选择是否通知管理员",trigger:"blur"},reminder_notice_phone:{required:!0,validator:e,text:"管理员手机号",trigger:"blur"},reminder_notice_admin:{required:!0,type:"number",message:"请选择是否通知平台",trigger:"blur"},help_short_agent_status:{required:!0,type:"number",message:"请选择是否通知"+this.$t("action.agentName"),trigger:"blur"},short_admin_status:{required:!0,type:"number",message:"请选择是否通知管理员",trigger:"blur"},help_phone:{required:!0,validator:e,text:"管理员手机号",trigger:"blur"},short_notice_admin:{required:!0,type:"number",message:"请选择是否通知平台",trigger:"blur"},help_wechat_agent_status:{required:!0,type:"number",message:"请选择是否通知"+this.$t("action.agentName"),trigger:"blur"},tmpl_admin_status:{required:!0,type:"number",message:"请选择是否通知管理员",trigger:"blur"},help_user_id:{required:!0,type:"array",message:"请选择公众号通知人员",trigger:"blur"},tmpl_notice_admin:{required:!0,type:"number",message:"请选择是否通知平台",trigger:"blur"}},searchForm:{page:1,limit:10,nickName:""},total:0,loading:!1,tableData:[],multipleSelection:[],showDialog:!1,showDialogType:""}},created:function(){this.getBaseInfo()},methods:{getBaseInfo:function(){var t=this;return d()(l.a.mark(function e(){var a,r,n,o,i,m,c,d,p,u,h,v;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.system.noticeInfo();case 2:if(a=e.sent,r=a.code,n=a.data,200===r){e.next=7;break}return e.abrupt("return");case 7:for(u in o=n.pay_order_config,i=n.order_config,m=n.help_config,c=_()({},o.wechat,o.reminder),d=_()({},i.wechat,i.reminder),p=_()({},m.wechat,m.reminder,m.short),c.reminder_admin_phone=c.reminder_admin_phone&&"object"===s()(c.reminder_admin_phone)&&c.reminder_admin_phone.length>0?c.reminder_admin_phone.map(function(t){return{phone:t}}):[{phone:""}],c.order_tmpl_text="string"==typeof c.order_tmpl_text?[]:c.order_tmpl_text,d.wechat_tmpl_admin="string"==typeof d.wechat_tmpl_admin?[]:d.wechat_tmpl_admin,["reminder_notice_phone","help_phone"].map(function(t){p[t]=p[t]&&"object"===s()(p[t])&&p[t].length>0?p[t].map(function(t){return{phone:t}}):[{phone:""}]}),t.orderForm)t.orderForm[u]=c[u];for(h in t.noticeForm)t.noticeForm[h]=d[h];for(v in t.helpForm)t.helpForm[v]=p[v];case 19:case"end":return e.stop()}},e,t)}))()},toShowDialog:function(t){var e=this;return d()(l.a.mark(function a(){return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.showDialogType=t,e.searchForm.nickName="",a.next=4,e.getTableDataList();case 4:e.showDialog=!e.showDialog;case 5:case"end":return a.stop()}},a,e)}))()},resetForm:function(t){this.$refs[t].resetFields(),this.getTableDataList(1)},handleSizeChange:function(t){this.searchForm.limit=t,this.handleCurrentChange(1)},handleCurrentChange:function(t){this.searchForm.page=t,this.getTableDataList()},getTableDataList:function(t){var e=this;return d()(l.a.mark(function a(){var r,o,i,s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t&&(e.searchForm.page=t),e.loading=!0,r=JSON.parse(n()(e.searchForm)),a.next=5,e.$api.custom.userList(r);case 5:if(o=a.sent,i=o.code,s=o.data,e.loading=!1,200===i){a.next=11;break}return a.abrupt("return");case 11:e.tableData=s.data,e.total=s.total;case 13:case"end":return a.stop()}},a,e)}))()},handleSelectionChange:function(t){this.multipleSelection=t},handleDialogConfirm:function(){if(0!==this.multipleSelection.length){var t=this.showDialogType,e={wechat_tmpl_admin:"noticeForm",help_user_id:"helpForm",order_tmpl_text:"orderForm"}[t],a=JSON.parse(n()(this[e][t])),r=a.length>0?a.map(function(t){return t.id}):[];this.multipleSelection.map(function(t){r.includes(t.id)||a.push(t)}),this[e][t]=a,this.showDialog=!1}else this.$message.error("请选择用户")},toAddItem:function(t,e,a,r){var n=this;return d()(l.a.mark(function o(){return l.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:2===a?n[t][e].splice(r,1):n[t][e].push({phone:""});case 1:case"end":return o.stop()}},o,n)}))()},changeAdminStatus:function(t,e,a){t||(this[e][a]=0)},submitFormInfo:function(){var t=this;return d()(l.a.mark(function e(){var a,r,o,i,s,m,_,c,d,p,u;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=!0,o=0,i=(a=["orderForm","helpForm","noticeForm"]).length;o<i;o++)t.$refs[a[o]].validate(function(t){if(!t)return r=!1,!1});if(r){e.next=5;break}return e.abrupt("return");case 5:return s=/^1[3-9]\d{9}$/,m=JSON.parse(n()(t.orderForm)),_=m.reminder_admin_phone,c=_.filter(function(t){return t.phone&&s.test(t.phone)}),m.reminder_admin_phone=c.map(function(t){return t.phone}),t.orderForm.reminder_admin_phone=c.length>0?c:[{phone:""}],m.order_tmpl_text=t.$util.getItems(m.order_tmpl_text).split(","),(d=JSON.parse(n()(t.helpForm))).help_user_id=t.$util.getItems(d.help_user_id).split(","),["reminder_notice_phone","help_phone"].map(function(e){var a=d[e].filter(function(t){return t.phone&&s.test(t.phone)});d[e]=a.map(function(t){return t.phone}),t.helpForm[e]=a.length>0?a:[{phone:""}]}),(p=JSON.parse(n()(t.noticeForm))).wechat_tmpl_admin=t.$util.getItems(p.wechat_tmpl_admin).split(","),u={pay_order_config:{reminder:t.$util.pick(m,["notice_agent","reminder_admin_status","reminder_admin_phone","notice_admin"]),wechat:t.$util.pick(m,["order_tmpl_agent_status","order_tmpl_admin_status","order_tmpl_text","order_tmpl_notice_admin"])},order_config:{reminder:t.$util.pick(p,["order_end_status"]),wechat:t.$util.pick(p,["order_wechat_agent_status","wechat_tmpl","wechat_tmpl_admin","order_wechat_admin_status"])},help_config:{reminder:t.$util.pick(d,["help_reminder_agent_status","reminder_admin_status","reminder_notice_phone","reminder_notice_admin"]),short:t.$util.pick(d,["help_short_agent_status","short_admin_status","help_phone","short_notice_admin"]),wechat:t.$util.pick(d,["help_wechat_agent_status","tmpl_admin_status","help_user_id","tmpl_notice_admin"])}},e.next=21,t.$api.system.noticeUpdate(u);case 21:t.$message.success(t.$t("tips.successSub"));case 22:case"end":return e.stop()}},e,t)}))()}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"lb-system-notice-message"},[a("top-nav"),t._v(" "),a("div",{staticClass:"page-main"},[a("lb-classify-title",{attrs:{title:"下单通知",tips:"订单来单，"+t.$t("action.attendantName")+"的通知方式默认有来电通知、短信通知以及公众号模版通知；通知"+t.$t("action.agentName")+"方式默认为来电通知、公众号通知"}}),t._v(" "),a("el-form",{ref:"orderForm",staticClass:"baseform",attrs:{model:t.orderForm,rules:t.orderFormRules,"label-width":"160px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("div",{staticClass:"c-title text-bold pb-lg"},[t._v("来电通知")]),t._v(" "),a("el-form-item",{attrs:{label:"是否通知"+t.$t("action.agentName"),prop:"notice_agent"}},[a("el-radio-group",{model:{value:t.orderForm.notice_agent,callback:function(e){t.$set(t.orderForm,"notice_agent",e)},expression:"orderForm.notice_agent"}},[a("el-radio",{attrs:{label:1}},[t._v("通知")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("不通知")])],1),t._v(" "),a("lb-tool-tips",[t._v("选择通知，用户下单后，订单所属"+t._s(t.$t("action.attendantName"))+"关联的"+t._s(t.$t("action.agentName"))+"将收到来电提醒")])],1),t._v(" "),a("el-form-item",{attrs:{label:"是否通知管理员",prop:"reminder_admin_status"}},[a("el-radio-group",{on:{change:function(e){return t.changeAdminStatus(e,"orderForm","notice_admin")}},model:{value:t.orderForm.reminder_admin_status,callback:function(e){t.$set(t.orderForm,"reminder_admin_status",e)},expression:"orderForm.reminder_admin_status"}},[a("el-radio",{attrs:{label:1}},[t._v("通知")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("不通知")])],1),t._v(" "),a("lb-tool-tips",[t._v("选择通知，用户下单后，以下设置的管理员将收到来电提醒")])],1),t._v(" "),1===t.orderForm.reminder_admin_status?a("block",[a("el-form-item",{attrs:{label:"管理员手机号",prop:"reminder_admin_phone"}},t._l(t.orderForm.reminder_admin_phone,function(e,r){return a("div",{key:r,staticClass:"mb-md"},[a("el-input",{attrs:{maxlength:"11","show-word-limit":"",placeholder:"请输入管理员手机号"},model:{value:e.phone,callback:function(a){t.$set(e,"phone",a)},expression:"item.phone"}}),t._v(" "),t.orderForm.reminder_admin_phone.length>1||1===t.orderForm.reminder_admin_phone.length&&0!==r?a("lb-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.toAddItem("orderForm","reminder_admin_phone",2,r)}}},[t._v("删除")]):t._e(),t._v(" "),r===t.orderForm.reminder_admin_phone.length-1?a("lb-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.toAddItem("orderForm","reminder_admin_phone",1)}}},[t._v("新增")]):t._e()],1)}),0),t._v(" "),a("el-form-item",{attrs:{label:"是否通知平台",prop:"notice_admin"}},[a("el-radio-group",{model:{value:t.orderForm.notice_admin,callback:function(e){t.$set(t.orderForm,"notice_admin",e)},expression:"orderForm.notice_admin"}},[a("el-radio",{attrs:{label:1}},[t._v("通知")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("不通知")])],1),t._v(" "),a("lb-tool-tips",[t._v("选择不通知，"+t._s(t.$t("action.agentName"))+"的订单不会电话通知到平台的管理员")])],1)],1):t._e(),t._v(" "),a("div",{staticClass:"c-title text-bold pt-lg pb-lg"},[t._v("公众号通知")]),t._v(" "),a("el-form-item",{attrs:{label:"是否通知"+t.$t("action.agentName"),prop:"order_tmpl_agent_status"}},[a("el-radio-group",{model:{value:t.orderForm.order_tmpl_agent_status,callback:function(e){t.$set(t.orderForm,"order_tmpl_agent_status",e)},expression:"orderForm.order_tmpl_agent_status"}},[a("el-radio",{attrs:{label:1}},[t._v("通知")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("不通知")])],1),t._v(" "),a("lb-tool-tips",[t._v("选择通知，用户下单后，订单所属"+t._s(t.$t("action.attendantName"))+"关联的"+t._s(t.$t("action.agentName"))+"将收到公众号通知")])],1),t._v(" "),a("el-form-item",{attrs:{label:"是否通知管理员",prop:"order_tmpl_admin_status"}},[a("el-radio-group",{on:{change:function(e){return t.changeAdminStatus(e,"orderForm","order_tmpl_notice_admin")}},model:{value:t.orderForm.order_tmpl_admin_status,callback:function(e){t.$set(t.orderForm,"order_tmpl_admin_status",e)},expression:"orderForm.order_tmpl_admin_status"}},[a("el-radio",{attrs:{label:1}},[t._v("通知")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("不通知")])],1),t._v(" "),a("lb-tool-tips",[t._v("选择通知，启用公众号通知模板后，当"+t._s(t.$t("action.attendantName"))+"来单时，以下设置的管理员将收到公众号通知\n          "),a("div",{staticClass:"mt-sm"},[t._v("\n            请前往【系统设置 - 通知/虚拟号通知 - 公众号通知 -\n            下单通知模板ID】配置公众号模板\n          ")])])],1),t._v(" "),1===t.orderForm.order_tmpl_admin_status?a("block",[a("el-form-item",{attrs:{label:"公众号通知人员",prop:"order_tmpl_text"}},[a("el-tag",{staticClass:"cursor-pointer",attrs:{type:"danger"},on:{click:function(e){return t.toShowDialog("order_tmpl_text")}}},[t._v("选择关联用户\n          ")]),t._v(" "),a("el-table",{staticClass:"mt-lg",staticStyle:{width:"100%"},attrs:{data:t.orderForm.order_tmpl_text,"header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[a("el-table-column",{attrs:{prop:"id",label:"用户ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"avatarUrl",label:"头像"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("lb-image",{attrs:{src:t.row.avatarUrl}})]}}],null,!1,199011125)}),t._v(" "),a("el-table-column",{attrs:{prop:"nickName",label:"昵称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"table-operate"},[a("lb-button",{attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(a){return t.toAddItem("orderForm","order_tmpl_text",2,e.$index)}}},[t._v(t._s(t.$t("action.delete")))])],1)]}}],null,!1,3715625184)})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"是否通知平台",prop:"order_tmpl_notice_admin"}},[a("el-radio-group",{model:{value:t.orderForm.order_tmpl_notice_admin,callback:function(e){t.$set(t.orderForm,"order_tmpl_notice_admin",e)},expression:"orderForm.order_tmpl_notice_admin"}},[a("el-radio",{attrs:{label:1}},[t._v("通知")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("不通知")])],1),t._v(" "),a("lb-tool-tips",[t._v("选择不通知，"+t._s(t.$t("action.agentName"))+"的"+t._s(t.$t("action.attendantName"))+"来单时，不会通知到平台的管理员")])],1)],1):t._e()],1),t._v(" "),a("div",{staticClass:"space-xl"}),t._v(" "),a("lb-classify-title",{attrs:{title:"订单服务通知",tips:"当遇到"+t.$t("action.attendantName")+"拒单、长时间不接单、迟到预警、接私单预警以及用户退单的情况时，将通知以下设置的关联人员和订单所属"+t.$t("action.attendantName")+"的关联"+t.$t("action.agentName")}}),t._v(" "),a("el-form",{ref:"noticeForm",staticClass:"baseform",attrs:{model:t.noticeForm,rules:t.noticeFormRules,"label-width":"160px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("div",{staticClass:"c-title text-bold pb-lg"},[t._v("来电通知")]),t._v(" "),a("el-form-item",{attrs:{label:"到钟前5分钟通知",prop:"order_end_status"}},[a("el-radio-group",{model:{value:t.noticeForm.order_end_status,callback:function(e){t.$set(t.noticeForm,"order_end_status",e)},expression:"noticeForm.order_end_status"}},[a("el-radio",{attrs:{label:1}},[t._v("通知")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("不通知")])],1),t._v(" "),a("lb-tool-tips",[t._v("\n          选择通知，启用来电通知模板后，到钟前5分钟时"+t._s(t.$t("action.attendantName"))+"将收到来电提醒\n          "),a("div",{staticClass:"mt-sm"},[t._v("\n            请前往【系统设置 - 通知/虚拟号通知 - 来电通知 -\n            到钟语音通知】配置来电模板\n          ")])])],1),t._v(" "),a("div",{staticClass:"c-title text-bold pb-lg"},[t._v("公众号通知")]),t._v(" "),a("el-form-item",{attrs:{label:"是否通知"+t.$t("action.agentName"),prop:"order_wechat_agent_status"}},[a("el-radio-group",{model:{value:t.noticeForm.order_wechat_agent_status,callback:function(e){t.$set(t.noticeForm,"order_wechat_agent_status",e)},expression:"noticeForm.order_wechat_agent_status"}},[a("el-radio",{attrs:{label:1}},[t._v("通知")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("不通知")])],1),t._v(" "),a("lb-tool-tips",[t._v("选择通知，需要配置订单服务通知模板ID、公众号通知人员，当遇到以下情况，订单所属"+t._s(t.$t("action.attendantName"))+"关联的"+t._s(t.$t("action.agentName"))+"将收到公众号通知\n          "),a("div",{staticClass:"mt-md"},[t._v("1、"+t._s(t.$t("action.attendantName"))+"拒单")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("\n            2、"+t._s(t.$t("action.attendantName"))+"长时间不接单\n          ")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("\n            3、"+t._s(t.$t("action.attendantName"))+"迟到预警，"+t._s(t.$t("action.attendantName"))+"未按照订单开始时间到达目的地\n          ")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("\n            4、"+t._s(t.$t("action.attendantName"))+"接私单预警，"+t._s(t.$t("action.attendantName"))+"结束订单后，长时间未离开\n          ")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("5、用户退单")]),t._v(" "),a("div",{staticClass:"mt-md c-danger"},[t._v("\n            温馨提示：\n            "),a("div",{staticClass:"mt-sm ml-lg"},[t._v("\n              （1）订单服务通知模板ID在【系统设置 - 通知/虚拟号通知 -\n              公众号通知】中设置\n            ")]),t._v(" "),a("div",{staticClass:"mt-sm ml-lg"},[t._v("\n              （2）未接单、服务迟到、跳单预警与【"+t._s(t.$t("action.attendantName"))+"管理 -\n              "+t._s(t.$t("action.attendantName"))+"设置】中对应内容相关，开启通知请确保已配置\n            ")])])])],1),t._v(" "),a("el-form-item",{attrs:{label:"是否通知管理员",prop:"wechat_tmpl"}},[a("el-radio-group",{on:{change:function(e){return t.changeAdminStatus(e,"noticeForm","order_wechat_admin_status")}},model:{value:t.noticeForm.wechat_tmpl,callback:function(e){t.$set(t.noticeForm,"wechat_tmpl",e)},expression:"noticeForm.wechat_tmpl"}},[a("el-radio",{attrs:{label:1}},[t._v("通知")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("不通知")])],1),t._v(" "),a("lb-tool-tips",[t._v("选择开启，需要配置订单服务通知模板ID、公众号通知人员，当遇到以下情况，以下设置的管理员将收到公众号通知\n          "),a("div",{staticClass:"mt-md"},[t._v("1、"+t._s(t.$t("action.attendantName"))+"拒单")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("\n            2、"+t._s(t.$t("action.attendantName"))+"长时间不接单\n          ")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("\n            3、"+t._s(t.$t("action.attendantName"))+"迟到预警，"+t._s(t.$t("action.attendantName"))+"未按照订单开始时间到达目的地\n          ")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("\n            4、"+t._s(t.$t("action.attendantName"))+"接私单预警，"+t._s(t.$t("action.attendantName"))+"结束订单后，长时间未离开\n          ")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("5、用户退单")]),t._v(" "),a("div",{staticClass:"mt-md c-danger"},[t._v("\n            温馨提示：\n            "),a("div",{staticClass:"mt-sm ml-lg"},[t._v("\n              （1）订单服务通知模板ID在【系统设置 - 通知/虚拟号通知 -\n              公众号通知】中设置\n            ")]),t._v(" "),a("div",{staticClass:"mt-sm ml-lg"},[t._v("\n              （2）未接单、服务迟到、跳单预警与【"+t._s(t.$t("action.attendantName"))+"管理 -\n              "+t._s(t.$t("action.attendantName"))+"设置】中对应内容相关，开启通知请确保已配置\n            ")])])])],1),t._v(" "),t.noticeForm.wechat_tmpl?a("block",[a("el-form-item",{attrs:{label:"公众号通知人员",prop:"wechat_tmpl_admin"}},[a("el-tag",{staticClass:"cursor-pointer",attrs:{type:"danger"},on:{click:function(e){return t.toShowDialog("wechat_tmpl_admin")}}},[t._v("选择关联用户\n          ")]),t._v(" "),a("el-table",{staticClass:"mt-lg",staticStyle:{width:"100%"},attrs:{data:t.noticeForm.wechat_tmpl_admin,"header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[a("el-table-column",{attrs:{prop:"id",label:"用户ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"avatarUrl",label:"头像"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("lb-image",{attrs:{src:t.row.avatarUrl}})]}}],null,!1,199011125)}),t._v(" "),a("el-table-column",{attrs:{prop:"nickName",label:"昵称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"table-operate"},[a("lb-button",{attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(a){return t.toAddItem("noticeForm","wechat_tmpl_admin",2,e.$index)}}},[t._v(t._s(t.$t("action.delete")))])],1)]}}],null,!1,992214788)})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"是否通知平台",prop:"order_wechat_admin_status"}},[a("el-radio-group",{model:{value:t.noticeForm.order_wechat_admin_status,callback:function(e){t.$set(t.noticeForm,"order_wechat_admin_status",e)},expression:"noticeForm.order_wechat_admin_status"}},[a("el-radio",{attrs:{label:1}},[t._v("通知")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("不通知")])],1),t._v(" "),a("lb-tool-tips",[t._v("选择不通知，当"+t._s(t.$t("action.agentName"))+"的"+t._s(t.$t("action.attendantName"))+"遇到以下情况，不会通知到平台的管理员\n            "),a("div",{staticClass:"mt-md"},[t._v("1、"+t._s(t.$t("action.attendantName"))+"拒单")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("\n              2、"+t._s(t.$t("action.attendantName"))+"长时间不接单\n            ")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("\n              3、"+t._s(t.$t("action.attendantName"))+"迟到预警，"+t._s(t.$t("action.attendantName"))+"未按照订单开始时间到达目的地\n            ")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("\n              4、"+t._s(t.$t("action.attendantName"))+"接私单预警，"+t._s(t.$t("action.attendantName"))+"结束订单后，长时间未离开\n            ")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("5、用户退单")])])],1)],1):t._e()],1),t._v(" "),a("div",{staticClass:"space-xl"}),t._v(" "),a("lb-classify-title",{attrs:{title:"求救通知",tips:t.$t("action.attendantName")+"求救可直接通知平台指定人员，帮忙报警。"+t.$t("action.agentName")+"的"+t.$t("action.attendantName")+"求救时，默认"+t.$t("action.agentName")+"都会收到来电通知、短信通知和公众号通知"}}),t._v(" "),a("el-form",{ref:"helpForm",attrs:{model:t.helpForm,rules:t.helpFormRules,"label-width":"160px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("div",{staticClass:"c-title text-bold pb-lg"},[t._v("来电通知")]),t._v(" "),a("el-form-item",{attrs:{label:"是否通知"+t.$t("action.agentName"),prop:"help_reminder_agent_status"}},[a("el-radio-group",{model:{value:t.helpForm.help_reminder_agent_status,callback:function(e){t.$set(t.helpForm,"help_reminder_agent_status",e)},expression:"helpForm.help_reminder_agent_status"}},[a("el-radio",{attrs:{label:1}},[t._v("通知")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("不通知")])],1),t._v(" "),a("lb-tool-tips",[t._v("选择通知，启用来电通知模板后，当"+t._s(t.$t("action.attendantName"))+"求救时，订单所属"+t._s(t.$t("action.attendantName"))+"关联的"+t._s(t.$t("action.agentName"))+"将收到来电提醒")])],1),t._v(" "),a("el-form-item",{attrs:{label:"是否通知管理员",prop:"reminder_admin_status"}},[a("el-radio-group",{on:{change:function(e){return t.changeAdminStatus(e,"helpForm","reminder_notice_admin")}},model:{value:t.helpForm.reminder_admin_status,callback:function(e){t.$set(t.helpForm,"reminder_admin_status",e)},expression:"helpForm.reminder_admin_status"}},[a("el-radio",{attrs:{label:1}},[t._v("通知")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("不通知")])],1),t._v(" "),a("lb-tool-tips",[t._v("\n          选择通知，启用来电通知模板后，当"+t._s(t.$t("action.attendantName"))+"求救时，以下设置的管理员将收到来电提醒\n          "),a("div",{staticClass:"mt-sm"},[t._v("\n            请前往【系统设置 - 通知/虚拟号通知 - 来电通知 -\n            求救语音通知】配置来电模板\n          ")])])],1),t._v(" "),1===t.helpForm.reminder_admin_status?a("block",[a("el-form-item",{attrs:{label:"管理员手机号",prop:"reminder_notice_phone"}},t._l(t.helpForm.reminder_notice_phone,function(e,r){return a("div",{key:r,staticClass:"mb-md"},[a("el-input",{attrs:{maxlength:"11","show-word-limit":"",placeholder:"请输入管理员手机号"},model:{value:e.phone,callback:function(a){t.$set(e,"phone",a)},expression:"item.phone"}}),t._v(" "),t.helpForm.reminder_notice_phone.length>1||1===t.helpForm.reminder_notice_phone.length&&0!==r?a("lb-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.toAddItem("helpForm","reminder_notice_phone",2,r)}}},[t._v("删除")]):t._e(),t._v(" "),r===t.helpForm.reminder_notice_phone.length-1?a("lb-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.toAddItem("helpForm","reminder_notice_phone",1)}}},[t._v("新增")]):t._e()],1)}),0),t._v(" "),a("el-form-item",{attrs:{label:"是否通知平台",prop:"reminder_notice_admin"}},[a("el-radio-group",{model:{value:t.helpForm.reminder_notice_admin,callback:function(e){t.$set(t.helpForm,"reminder_notice_admin",e)},expression:"helpForm.reminder_notice_admin"}},[a("el-radio",{attrs:{label:1}},[t._v("通知")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("不通知")])],1),t._v(" "),a("lb-tool-tips",[t._v("选择不通知，"+t._s(t.$t("action.agentName"))+"的"+t._s(t.$t("action.attendantName"))+"求救时，不会电话通知到平台的管理员")])],1)],1):t._e(),t._v(" "),a("div",{staticClass:"c-title text-bold pt-lg pb-lg"},[t._v("短信通知")]),t._v(" "),a("el-form-item",{attrs:{label:"是否通知"+t.$t("action.agentName"),prop:"help_short_agent_status"}},[a("el-radio-group",{model:{value:t.helpForm.help_short_agent_status,callback:function(e){t.$set(t.helpForm,"help_short_agent_status",e)},expression:"helpForm.help_short_agent_status"}},[a("el-radio",{attrs:{label:1}},[t._v("通知")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("不通知")])],1),t._v(" "),a("lb-tool-tips",[t._v("选择通知，启用短信通知模板后，当"+t._s(t.$t("action.attendantName"))+"求救时，订单所属"+t._s(t.$t("action.attendantName"))+"关联的"+t._s(t.$t("action.agentName"))+"将收到短信通知")])],1),t._v(" "),a("el-form-item",{attrs:{label:"是否通知管理员",prop:"short_admin_status"}},[a("el-radio-group",{on:{change:function(e){return t.changeAdminStatus(e,"helpForm","short_notice_admin")}},model:{value:t.helpForm.short_admin_status,callback:function(e){t.$set(t.helpForm,"short_admin_status",e)},expression:"helpForm.short_admin_status"}},[a("el-radio",{attrs:{label:1}},[t._v("通知")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("不通知")])],1),t._v(" "),a("lb-tool-tips",[t._v("选择通知，启用短信通知模板后，当"+t._s(t.$t("action.attendantName"))+"求救时，以下设置的管理员将收到短信通知\n          "),a("div",{staticClass:"mt-sm"},[t._v("\n            请前往【系统设置 - 通知/虚拟号通知 - 短信通知 -\n            求救通知模板CODE】配置短信模板\n          ")])])],1),t._v(" "),1===t.helpForm.short_admin_status?a("block",[a("el-form-item",{attrs:{label:"管理员手机号",prop:"help_phone"}},t._l(t.helpForm.help_phone,function(e,r){return a("div",{key:r,staticClass:"mb-md"},[a("el-input",{attrs:{maxlength:"11","show-word-limit":"",placeholder:"请输入管理员手机号"},model:{value:e.phone,callback:function(a){t.$set(e,"phone",a)},expression:"item.phone"}}),t._v(" "),t.helpForm.help_phone.length>1||1===t.helpForm.help_phone.length&&0!==r?a("lb-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.toAddItem("helpForm","help_phone",2,r)}}},[t._v("删除")]):t._e(),t._v(" "),r===t.helpForm.help_phone.length-1?a("lb-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.toAddItem("helpForm","help_phone",1)}}},[t._v("新增")]):t._e()],1)}),0),t._v(" "),a("el-form-item",{attrs:{label:"是否通知平台",prop:"short_notice_admin"}},[a("el-radio-group",{model:{value:t.helpForm.short_notice_admin,callback:function(e){t.$set(t.helpForm,"short_notice_admin",e)},expression:"helpForm.short_notice_admin"}},[a("el-radio",{attrs:{label:1}},[t._v("通知")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("不通知")])],1),t._v(" "),a("lb-tool-tips",[t._v("选择不通知，"+t._s(t.$t("action.agentName"))+"的"+t._s(t.$t("action.attendantName"))+"求救时，不会短信通知到平台的管理员")])],1)],1):t._e(),t._v(" "),a("div",{staticClass:"c-title text-bold pt-lg pb-lg"},[t._v("公众号通知")]),t._v(" "),a("el-form-item",{attrs:{label:"是否通知"+t.$t("action.agentName"),prop:"help_wechat_agent_status"}},[a("el-radio-group",{model:{value:t.helpForm.help_wechat_agent_status,callback:function(e){t.$set(t.helpForm,"help_wechat_agent_status",e)},expression:"helpForm.help_wechat_agent_status"}},[a("el-radio",{attrs:{label:1}},[t._v("通知")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("不通知")])],1),t._v(" "),a("lb-tool-tips",[t._v("选择通知，启用公众号通知模板后，当"+t._s(t.$t("action.attendantName"))+"求救时，订单所属"+t._s(t.$t("action.attendantName"))+"关联的"+t._s(t.$t("action.agentName"))+"将收到公众号通知\n          "),a("div",{staticClass:"mt-sm"},[t._v("\n            请前往【系统设置 - 通知/虚拟号通知 - 公众号通知 -\n            求救通知模板ID】配置公众号模板\n          ")])])],1),t._v(" "),a("el-form-item",{attrs:{label:"是否通知管理员",prop:"tmpl_admin_status"}},[a("el-radio-group",{on:{change:function(e){return t.changeAdminStatus(e,"helpForm","tmpl_notice_admin")}},model:{value:t.helpForm.tmpl_admin_status,callback:function(e){t.$set(t.helpForm,"tmpl_admin_status",e)},expression:"helpForm.tmpl_admin_status"}},[a("el-radio",{attrs:{label:1}},[t._v("通知")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("不通知")])],1),t._v(" "),a("lb-tool-tips",[t._v("选择通知，启用公众号通知模板后，当"+t._s(t.$t("action.attendantName"))+"求救时，以下设置的管理员将收到公众号通知\n          "),a("div",{staticClass:"mt-sm"},[t._v("\n            请前往【系统设置 - 通知/虚拟号通知 - 公众号通知 -\n            求救通知模板ID】配置公众号模板\n          ")])])],1),t._v(" "),1===t.helpForm.tmpl_admin_status?a("block",[a("el-form-item",{attrs:{label:"公众号通知人员",prop:"help_user_id"}},[a("el-tag",{staticClass:"cursor-pointer",attrs:{type:"danger"},on:{click:function(e){return t.toShowDialog("help_user_id")}}},[t._v("选择关联用户\n          ")]),t._v(" "),a("el-table",{staticClass:"mt-lg",staticStyle:{width:"100%"},attrs:{data:t.helpForm.help_user_id,"header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[a("el-table-column",{attrs:{prop:"id",label:"用户ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"avatarUrl",label:"头像"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("lb-image",{attrs:{src:t.row.avatarUrl}})]}}],null,!1,199011125)}),t._v(" "),a("el-table-column",{attrs:{prop:"nickName",label:"昵称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"table-operate"},[a("lb-button",{attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(a){return t.toAddItem("helpForm","help_user_id",2,e.$index)}}},[t._v(t._s(t.$t("action.delete")))])],1)]}}],null,!1,1369508078)})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"是否通知平台",prop:"tmpl_notice_admin"}},[a("el-radio-group",{model:{value:t.helpForm.tmpl_notice_admin,callback:function(e){t.$set(t.helpForm,"tmpl_notice_admin",e)},expression:"helpForm.tmpl_notice_admin"}},[a("el-radio",{attrs:{label:1}},[t._v("通知")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("不通知")])],1),t._v(" "),a("lb-tool-tips",[t._v("选择不通知，"+t._s(t.$t("action.agentName"))+"的"+t._s(t.$t("action.attendantName"))+"求救时，不会通知到平台的管理员")])],1)],1):t._e()],1),t._v(" "),a("lb-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],staticStyle:{"margin-left":"140px"},attrs:{type:"primary"},on:{click:t.submitFormInfo}},[t._v(t._s(t.$t("action.submit")))]),t._v(" "),a("el-dialog",{attrs:{title:"关联用户",visible:t.showDialog,width:"800px",top:"5vh",center:""},on:{"update:visible":function(e){t.showDialog=e}}},[a("el-form",{ref:"searchForm",staticClass:"dialog-form",attrs:{inline:!0,model:t.searchForm,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"输入查询",prop:"nickName"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入微信昵称/手机号"},model:{value:t.searchForm.nickName,callback:function(e){t.$set(t.searchForm,"nickName",e)},expression:"searchForm.nickName"}})],1),t._v(" "),a("el-form-item",[a("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",type:"primary",icon:"el-icon-search"},on:{click:function(e){return t.getTableDataList(1)}}},[t._v(t._s(t.$t("action.search")))]),t._v(" "),a("lb-button",{staticStyle:{"margin-right":"5px"},attrs:{size:"medium",icon:"el-icon-refresh-left"},on:{click:function(e){return t.resetForm("searchForm")}}},[t._v(t._s(t.$t("action.reset")))])],1)],1),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-cell-style":{background:"#f5f7fa",color:"#606266"},"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"id",label:"用户ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"avatarUrl",label:"头像"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("lb-image",{attrs:{src:t.row.avatarUrl}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"nickName",label:"昵称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号"}})],1),t._v(" "),a("lb-page",{attrs:{batch:!1,page:t.searchForm.page,pageSize:t.searchForm.limit,total:t.total},on:{handleSizeChange:t.handleSizeChange,handleCurrentChange:t.handleCurrentChange}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:t.handleDialogConfirm}},[t._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var f=a("C7Lr")(g,b,!1,function(t){a("AvUi")},"data-v-9f131efe",null);e.default=f.exports}});