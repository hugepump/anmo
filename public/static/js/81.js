webpackJsonp([81],{"782l":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("lC5x"),r=a.n(s),n=a("J0Oq"),l=a.n(n),i={data:function(){return{statusOptions:[{label:"全部",value:0},{label:"用户",value:1},{label:this.$t("action.attendantName"),value:2}],userTypeText:{1:{type:"primary",text:"用户"},2:{type:"success",text:this.$t("action.attendantName")}},statusText:{1:{type:"danger",text:"未处理"},2:{type:"primary",text:"已处理"}},loading:{list:!1,user:!1},count:{},searchForm:{list:{page:1,limit:10,status:0,type:0}},tableData:{list:[]},total:{list:0},cur_coupon:{}}},activated:function(){var t=this;return l()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=1,Number(window.sessionStorage.getItem("currentPage"))&&(a=Number(window.sessionStorage.getItem("currentPage")),window.sessionStorage.removeItem("currentPage")),t.getTableDataList(a,"list");case 3:case"end":return e.stop()}},e,t)}))()},beforeRouteLeave:function(t,e,a){"FeedbackDetail"===t.name&&window.sessionStorage.setItem("currentPage",this.searchForm.list.page),a()},methods:{resetForm:function(t){var e=t+"Form";this.$refs[e].resetFields(),this.getTableDataList(1,t)},handleSizeChange:function(t,e){this.searchForm[e].limit=t,this.handleCurrentChange(1,e)},handleCurrentChange:function(t,e){this.searchForm[e].page=t,this.getTableDataList("",e)},toChange:function(t){this.searchForm.list.status=t,this.getTableDataList(1,"list")},getTableDataList:function(t,e){var a=this;return l()(r.a.mark(function s(){var n,l,i,o;return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t&&(a.searchForm[e].page=t),a.tableData[e]=[],a.loading[e]=!0,n=a.searchForm[e],s.next=6,a.$api.system.feedbackList(n);case 6:if(l=s.sent,i=l.code,o=l.data,a.loading[e]=!1,200===i){s.next=12;break}return s.abrupt("return");case 12:a.tableData[e]=o.data,a.total[e]=o.total,a.count={nopass:o.status1,pass:o.status2,all:Number(o.status1)+Number(o.status2)};case 15:case"end":return s.stop()}},s,a)}))()}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"lb-feedback-list"},[a("top-nav"),t._v(" "),a("div",{staticClass:"page-main"},[a("el-row",{staticClass:"page-search-form"},[a("el-form",{ref:"listForm",attrs:{inline:!0,model:t.searchForm.list},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{label:"反馈人身份",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.getTableDataList(1,"list")}},model:{value:t.searchForm.list.type,callback:function(e){t.$set(t.searchForm.list,"type",e)},expression:"searchForm.list.type"}},t._l(t.statusOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1)],1),t._v(" "),a("el-row",{staticClass:"page-top-operate"},[a("el-button",{attrs:{type:0===t.searchForm.list.status?"primary":"",plain:"",size:"medium"},on:{click:function(e){return t.toChange(0)}}},[t._v("全部（"+t._s(t.count.all||0)+"）")]),t._v(" "),a("el-button",{attrs:{type:1===t.searchForm.list.status?"primary":"",plain:"",size:"medium"},on:{click:function(e){return t.toChange(1)}}},[t._v("未处理（"+t._s(t.count.nopass||0)+"）")]),t._v(" "),a("el-button",{attrs:{type:2===t.searchForm.list.status?"primary":"",plain:"",size:"medium"},on:{click:function(e){return t.toChange(2)}}},[t._v("已处理（"+t._s(t.count.pass||0)+"）")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.list,expression:"loading.list"}],staticStyle:{width:"100%"},attrs:{data:t.tableData.list,"header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type_name",label:"反馈类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"coach_name",label:"反馈人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"反馈人身份"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.type?[a("el-tag",{attrs:{size:"small",type:t.userTypeText[e.row.type].type}},[t._v(t._s(t.userTypeText[e.row.type].text))])]:void 0}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"反馈人手机号","min-width":"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"small",type:t.statusText[e.row.status].type}},[t._v(t._s(t.statusText[e.row.status].text))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"反馈时间","min-width":"140"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"110",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"table-operate"},[a("lb-button",{directives:[{name:"show",rawName:"v-show",value:[1,2].includes(e.row.status),expression:"[1, 2].includes(scope.row.status)"},{name:"hasPermi",rawName:"v-hasPermi",value:1===e.row.status?t.$route.name+"-handle":t.$route.name+"-view",expression:"\n                scope.row.status === 1\n                  ? `${$route.name}-handle`\n                  : `${$route.name}-view`\n              "}],attrs:{size:"mini",plain:"",type:1===e.row.status?"success":"primary"},on:{click:function(a){return t.$router.push("/feedback/detail?id="+e.row.id)}}},[t._v(t._s(t.$t(1===e.row.status?"action.handle":"action.view")))])],1)]}}])})],1),t._v(" "),a("lb-page",{attrs:{batch:!1,page:t.searchForm.list.page,pageSize:t.searchForm.list.limit,total:t.total.list},on:{handleSizeChange:function(e){return t.handleSizeChange(e,"list")},handleCurrentChange:function(e){return t.handleCurrentChange(e,"list")}}})],1)],1)},staticRenderFns:[]};var u=a("C7Lr")(i,o,!1,function(t){a("nKDM")},"data-v-77ee1558",null);e.default=u.exports},nKDM:function(t,e){}});