webpackJsonp([138],{"7cqC":function(e,t){},uAII:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("3cXf"),a=s.n(r),i=s("lC5x"),o=s.n(i),n=s("J0Oq"),l=s.n(n),c=s("4YfN"),p=s.n(c),m=s("bSIt"),u={data:function(){return{showDialog:!1,subForm:{web_app_id:"",web_app_secret:"",web_code_img:[],popup_img:[],wechat_qr_type:0,wechat_reply_text:""},subFormRules:{web_app_id:{required:!0,validator:this.$reg.isNotNull,text:"公众号AppID",reg_type:2,trigger:"blur"},web_app_secret:{required:!0,validator:this.$reg.isNotNull,text:"公众号AppSecret",reg_type:2,trigger:"blur"},web_code_img:{required:!0,type:"array",message:"请上传公众号二维码",trigger:"blur"},wechat_qr_type:{required:!0,type:"number",message:"请选择扫码方式",trigger:"blur"}}}},created:function(){this.getFormInfo()},computed:p()({},Object(m.e)({routesItem:function(e){return e.routes}})),methods:{getCover:function(e,t){this.subForm[t]=e},getFormInfo:function(){var e=this;return l()(o.a.mark(function t(){var s,r,a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.system.configInfo();case 2:if(s=t.sent,r=s.code,a=s.data,200===r){t.next=7;break}return t.abrupt("return");case 7:for(i in a.web_code_img=a.web_code_img?[{url:a.web_code_img}]:[],a.popup_img=a.popup_img?[{url:a.popup_img}]:[],e.subForm)e.subForm[i]=a[i];case 10:case"end":return t.stop()}},t,e)}))()},submitFormInfo:function(){var e=this,t=!0;if(this.$refs.subForm.validate(function(e){e||(t=!1)}),t){var s=JSON.parse(a()(this.subForm));s.web_code_img=s.web_code_img[0].url,s.popup_img=s.popup_img.length>0?s.popup_img[0].url:"",this.$api.system.configUpdate(s).then(function(t){200===t.code&&e.$message.success(e.$t("tips.successSub"))})}}}},_={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"lb-system-h5"},[s("top-nav"),e._v(" "),s("div",{staticClass:"page-main"},[s("el-form",{ref:"subForm",attrs:{model:e.subForm,rules:e.subFormRules,"label-width":"160px"},nativeOn:{submit:function(e){e.preventDefault()}}},[s("el-form-item",{attrs:{label:"AppID",prop:"web_app_id"}},[s("el-input",{attrs:{placeholder:"请输入公众号AppID"},model:{value:e.subForm.web_app_id,callback:function(t){e.$set(e.subForm,"web_app_id",t)},expression:"subForm.web_app_id"}}),e._v(" "),s("lb-tool-tips",[e._v("请输入公众号AppID，输入错误会影响H5的正常使用，谨慎修改")])],1),e._v(" "),s("el-form-item",{attrs:{label:"AppSecret",prop:"web_app_secret"}},[s("el-input",{attrs:{placeholder:"请输入公众号AppSecret"},model:{value:e.subForm.web_app_secret,callback:function(t){e.$set(e.subForm,"web_app_secret",t)},expression:"subForm.web_app_secret"}}),e._v(" "),s("lb-tool-tips",[e._v("请输入公众号AppSecret，输入错误会影响H5的正常使用，谨慎修改")])],1),e._v(" "),e.routesItem.auth.reseller||e.routesItem.auth.channel?s("el-form-item",{attrs:{label:"扫码到公众号",prop:"wechat_qr_type"}},[s("el-radio-group",{model:{value:e.subForm.wechat_qr_type,callback:function(t){e.$set(e.subForm,"wechat_qr_type",t)},expression:"subForm.wechat_qr_type"}},[s("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("action.ON")))]),e._v(" "),s("el-radio",{attrs:{label:0}},[e._v(e._s(e.$t("action.OFF")))])],1),e._v(" "),s("lb-tool-tips",[e._v("开启扫码到公众号，需到公众号配置服务器配置，服务器地址域名+massage/CallBack/valid\n          "),e.routesItem.auth.reseller||e.routesItem.auth.channel?s("div",{staticClass:"mt-sm"},[e._v("\n            当用户扫描"+e._s(e.routesItem.auth.reseller?e.$t("action.resellerName")+"的推广海报":"")+"\n            "+e._s(e.routesItem.auth.reseller&&e.routesItem.auth.channel?"或":"")+"\n            "+e._s(e.routesItem.auth.channel?e.$t("action.channelName")+"的渠道默认码":"")+"\n            ，会直接跳转到公众号界面，若关闭则默认跳转到系统里面的引导用户关注公众号的页面\n          ")]):e._e(),e._v(" "),e.routesItem.auth.channel?s("div",{staticClass:"c-tips mt-md"},[e._v("\n            渠道默认码：用户通过手机端申请"+e._s(e.$t("action.channelName"))+"或后台通过【"+e._s(e.$t("action.channelName"))+"-"+e._s(e.$t("action.channelName"))+"审核-新增"+e._s(e.$t("action.channelName"))+"】将某个用户添加为"+e._s(e.$t("action.channelName"))+"，该"+e._s(e.$t("action.channelName"))+"才会生成默认码\n          ")]):e._e(),e._v(" "),s("div",{staticClass:"cursor-pointer c-link mt-md",on:{click:function(t){e.showDialog=!0}}},[e._v("\n            查看设置区别\n          ")])]),e._v(" "),s("div",{staticClass:"lb-text-red-tips"},[e._v("\n          开启此功能前需联系售后配置，否则渠道码返佣将会失效\n        ")])],1):e._e(),e._v(" "),1===e.subForm.wechat_qr_type?s("el-form-item",{attrs:{label:"关注公众号自动回复",prop:"wechat_reply_text"}},[s("el-input",{attrs:{type:"textarea",rows:10,placeholder:"请输入关注公众号自动回复内容",resize:"none"},model:{value:e.subForm.wechat_reply_text,callback:function(t){e.$set(e.subForm,"wechat_reply_text",t)},expression:"subForm.wechat_reply_text"}})],1):e._e(),e._v(" "),s("el-form-item",{attrs:{label:"公众号二维码",prop:"web_code_img"}},[s("lb-cover",{attrs:{fileList:e.subForm.web_code_img},on:{selectedFiles:function(t){return e.getCover(t,"web_code_img")}}}),e._v(" "),s("lb-tool-tips",[e._v("图片建议尺寸：750 * n (高度不限)\n          "),s("div",{staticClass:"mt-sm"},[e._v("\n            商家/平台需要自己上传自己设计好的公众号二维码海报图，用户进入h5之前可以先关注公众号\n          ")]),e._v(" "),e.routesItem.auth.reseller||e.routesItem.auth.channel?s("div",{staticClass:"mt-sm"},[e._v("\n            用户扫描"+e._s(e.routesItem.auth.reseller&&e.routesItem.auth.channel?e.$t("action.resellerName")+"的推广海报/渠道码":e.routesItem.auth.reseller?e.$t("action.resellerName")+"的推广海报":"渠道码")+"，就会直接跳转到系统里面的引导用户关注公众号的页面\n          ")]):e._e()]),e._v(" "),s("div",[s("a",{staticClass:"c-link cursor-pointer",attrs:{href:"https://docs.qq.com/doc/DWXlGeVlWdlhOTnh6",target:"_blank"}},[e._v("如何获取公众号二维码？")])])],1),e._v(" "),s("el-form-item",{attrs:{label:"公众号弹窗",prop:"popup_img"}},[s("lb-cover",{attrs:{fileList:e.subForm.popup_img},on:{selectedFiles:function(t){return e.getCover(t,"popup_img")}}}),e._v(" "),s("lb-tool-tips",[e._v("图片建议尺寸：588 * 862\n          "),s("div",{staticClass:"mt-sm"},[e._v("\n            用于首页展示（用户登录系统后才展示），卡券弹窗优先级大于公众号弹窗。若用户勾选已关注/收藏则不再弹出\n          ")])])],1),e._v(" "),s("el-form-item",[s("lb-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:e.submitFormInfo}},[e._v(e._s(e.$t("action.submit")))])],1)],1),e._v(" "),s("el-dialog",{staticClass:"lbmiddle-dialog",attrs:{title:"查看设置区别",visible:e.showDialog,width:"800px",top:"5vh",center:""},on:{"update:visible":function(t){e.showDialog=t}}},[s("div",{staticClass:"gzh-img-list"},[s("div",{staticClass:"c-title text-bold mb-md"},[e._v("开启扫码到公众号")]),e._v(" "),s("div",{staticClass:"flex-y-center"},[s("img",{attrs:{src:"https://lbqny.migugu.com/admin/anmo/pc/gzh01.png"}}),e._v(" "),s("i",{staticClass:"iconfont iconshengji"}),e._v(" "),s("img",{attrs:{src:"https://lbqny.migugu.com/admin/anmo/pc/gzh03.png"}})]),e._v(" "),s("div",{staticClass:"c-title text-bold mt-lg pt-lg mb-md"},[e._v("\n          关闭扫码到公众号\n        ")]),e._v(" "),s("div",{staticClass:"flex-y-center"},[s("img",{attrs:{src:"https://lbqny.migugu.com/admin/anmo/pc/gzh01.png"}}),e._v(" "),s("i",{staticClass:"iconfont iconshengji"}),e._v(" "),s("img",{attrs:{src:"https://lbqny.migugu.com/admin/anmo/pc/gzh02.png"}}),e._v(" "),s("i",{staticClass:"iconfont iconshengji"}),e._v(" "),s("img",{attrs:{src:"https://lbqny.migugu.com/admin/anmo/pc/gzh03.png"}})])])])],1)],1)},staticRenderFns:[]};var b=s("C7Lr")(u,_,!1,function(e){s("7cqC")},"data-v-40563f90",null);t.default=b.exports}});