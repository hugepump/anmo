webpackJsonp([121],{"2S8G":function(t,a){},"hHb/":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("3cXf"),n=e.n(s),l=e("lC5x"),i=e.n(l),o=e("J0Oq"),m=e.n(o),r=e("4YfN"),c=e.n(r),_=e("bSIt"),u={data:function(){return{salesman_poster:"https://lbqny.migugu.com/admin/anmo/mine/salesman-share.png",subForm:{salesman_status:1,salesman_check_status:"",salesman_balance:"",salesman_coach_balance:"",salesman_admin_balance:"",salesman_channel_fx_type:1,salesman_poster:[]},subFormRules:{salesman_status:{required:!0,type:"number",message:"请选择",trigger:"blur"},salesman_check_status:{required:!0,type:"number",message:"请选择",trigger:"blur"},salesman_balance:{required:!0,validator:this.$reg.isDotPercent,text:"业务员返佣比例",trigger:"blur"},salesman_coach_balance:{required:!0,validator:this.$reg.isDotPercent,text:this.$t("action.attendantName")+"承担比例",trigger:"blur"},salesman_admin_balance:{required:!0,validator:this.$reg.isDotPercent,text:this.$t("action.attendantName")+"所属"+this.$t("action.agentName")+"承担比例",trigger:"blur"},salesman_channel_fx_type:{required:!0,type:"number",message:"业务员与"+this.$t("action.channelName")+"分佣方式",trigger:"blur"},salesman_poster:{required:!0,type:"array",message:"请选择邀请业务员推广海报背景图",trigger:"blur"}}}},created:function(){this.getFormInfo()},computed:c()({},Object(_.e)({routesItem:function(t){return t.routes}})),methods:{getFormInfo:function(){var t=this;return m()(i.a.mark(function a(){var e,s,n,l;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$api.system.configInfo();case 2:if(e=a.sent,s=e.code,n=e.data,200===s){a.next=7;break}return a.abrupt("return");case 7:for(l in n.salesman_poster=[{url:n.salesman_poster}],t.subForm)t.subForm[l]=n[l];case 9:case"end":return a.stop()}},a,t)}))()},getCover:function(t,a){this.subForm[a]=t},toReset:function(t){this.subForm[t]=[{url:this[t]}],this.submitFormInfo()},submitFormInfo:function(){var t=this,a=!0;if(this.$refs.subForm.validate(function(t){t||(a=!1)}),a){var e=JSON.parse(n()(this.subForm));1*e.salesman_coach_balance+1*e.salesman_admin_balance>100?this.$message.error(this.$t("action.attendantName")+"和"+this.$t("action.attendantName")+"所属"+this.$t("action.agentName")+"承担比例总计不能大于100%"):(e.salesman_poster=e.salesman_poster[0].url,this.$api.system.configUpdate(e).then(function(a){200===a.code&&t.$message.success(t.$t("tips.successSub"))}))}}}},v={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"lb-salesman-set"},[e("top-nav"),t._v(" "),e("div",{staticClass:"page-main"},[e("lb-tips",[t._v("业务员的佣金应该由该笔订单"+t._s("服务"===t.$t("action.attendantName").substring(0,2)?"":"服务")+t._s(t.$t("action.attendantName"))+"和该"+t._s(t.$t("action.attendantName"))+"绑定的上级"+t._s(t.$t("action.agentName"))+"承担\n      "),e("el-popover",{attrs:{placement:"top-start",width:"500",trigger:"hover"}},[e("div",{staticClass:"f-caption c-title",attrs:{slot:""},slot:"default"},[e("div",[t._v("\n            例如：用户A下单实际付款除车费外为100元，业务员B的返佣比例为10%，则业务员B应得提成100*10%=10元\n          ")]),t._v(" "),e("div",{staticClass:"mt-lg"},[t._v("1、承担比例累计等于100%，平台不承担")]),t._v(" "),e("div",{staticClass:"ml-lg mt-sm"},[t._v("\n            例如："+t._s(t.$t("action.attendantName"))+"承担30%，"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"承担70%\n          ")]),t._v(" "),e("div",{staticClass:"ml-lg mt-sm"},[t._v("\n            则："+t._s(t.$t("action.attendantName"))+"应承担10*30%=3元，"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"应承担10*70%=7元\n          ")]),t._v(" "),e("div",{staticClass:"mt-lg"},[t._v("2、承担比例累计小于100%，平台需承担")]),t._v(" "),e("div",{staticClass:"ml-lg mt-sm"},[t._v("\n            平台需承担金额=10*(100-"+t._s(t.$t("action.attendantName"))+"应承担比例\n            - 所属"+t._s(t.$t("action.agentName"))+"应承担比例)%\n          ")]),t._v(" "),e("div",{staticClass:"ml-lg mt-sm"},[t._v("\n            例如："+t._s(t.$t("action.attendantName"))+"承担30%，"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"承担0%\n          ")]),t._v(" "),e("div",{staticClass:"ml-lg mt-sm"},[t._v("\n            则："+t._s(t.$t("action.attendantName"))+"应承担10*30%=3元，平台应承担10*(100-30-0)%=7元\n          ")]),t._v(" "),e("div",{staticClass:"ml-lg mt-lg"},[t._v("\n            例如："+t._s(t.$t("action.attendantName"))+"承担30%，"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"承担50%\n          ")]),t._v(" "),e("div",{staticClass:"ml-lg mt-sm"},[t._v("\n            则："+t._s(t.$t("action.attendantName"))+"应承担10*30%=3元，"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"应承担10*50%=5元，平台应承担10*(100-30-50)%=2元\n          ")]),t._v(" "),e("div",{staticClass:"ml-lg pt-lg c-warning"},[t._v("\n            温馨提示：\n            "),e("div",{staticClass:"mt-sm"},[t._v("\n              1)、若没有所属"+t._s(t.$t("action.agentName"))+"，则计算规则中所属"+t._s(t.$t("action.agentName"))+"应承担的金额应由平台所出\n            ")]),t._v(" "),e("div",{staticClass:"mt-sm"},[t._v("\n              2)、若有所属"+t._s(t.$t("action.agentName"))+"且该"+t._s(t.$t("action.agentName"))+"在本订单中没有获得任何分成，则"+t._s(t.$t("action.agentName"))+"无需承担\n            ")]),t._v(" "),e("div",{staticClass:"mt-sm"},[t._v("\n              3)、若有所属"+t._s(t.$t("action.agentName"))+"且该"+t._s(t.$t("action.agentName"))+"在本订单中所得分成小于应承担金额，则该"+t._s(t.$t("action.agentName"))+"需将所得分成全部给业务员，因此业务员实际所得金额小于应得金额\n            ")])])]),t._v(" "),e("i",{staticClass:"el-icon-question",staticStyle:{color:"#000"},attrs:{slot:"reference"},slot:"reference"})])],1),t._v(" "),e("el-form",{ref:"subForm",staticClass:"config-form",attrs:{model:t.subForm,rules:t.subFormRules,"label-width":"180px"},nativeOn:{submit:function(t){t.preventDefault()}}},[e("el-form-item",{attrs:{label:"启用业务员功能",prop:"salesman_status"}},[e("el-radio-group",{model:{value:t.subForm.salesman_status,callback:function(a){t.$set(t.subForm,"salesman_status",a)},expression:"subForm.salesman_status"}},[e("el-radio",{attrs:{label:1}},[t._v(t._s(t.$t("action.ON")))]),t._v(" "),e("el-radio",{attrs:{label:0}},[t._v(t._s(t.$t("action.OFF")))])],1),t._v(" "),e("lb-tool-tips",[t._v("选择开启，将启用业务员功能 ")])],1),t._v(" "),t.subForm.salesman_status?e("block",[e("el-form-item",{attrs:{label:"业务员申请入口",prop:"salesman_check_status"}},[e("el-radio-group",{model:{value:t.subForm.salesman_check_status,callback:function(a){t.$set(t.subForm,"salesman_check_status",a)},expression:"subForm.salesman_check_status"}},[e("el-radio",{attrs:{label:1}},[t._v(t._s(t.$t("action.ON")))]),t._v(" "),e("el-radio",{attrs:{label:0}},[t._v(t._s(t.$t("action.OFF")))])],1),t._v(" "),e("lb-tool-tips",[t._v("选择开启，手机端有申请业务员入口\n            "),e("div",{staticClass:"mt-sm"},[t._v("\n              选择关闭，手机端无申请业务员入口，只能通过后台添加用户成为业务员\n            ")])])],1),t._v(" "),e("el-form-item",{attrs:{label:"业务员返佣",prop:"salesman_balance"}},[e("el-input",{attrs:{placeholder:"请输入业务员返佣比例"},model:{value:t.subForm.salesman_balance,callback:function(a){t.$set(t.subForm,"salesman_balance",a)},expression:"subForm.salesman_balance"}},[e("template",{slot:"append"},[t._v("%")])],2),t._v(" "),e("lb-tool-tips",[t._v("业务员发展"+t._s(t.$t("action.channelName"))+"，用户通过渠道下单，业务员有佣金，佣金金额=业务员佣金百分比*订单实际支付金额")])],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("action.attendantName")+"承担",prop:"salesman_coach_balance"}},[e("el-input",{attrs:{placeholder:"请输入"+t.$t("action.attendantName")+"承担比例"},model:{value:t.subForm.salesman_coach_balance,callback:function(a){t.$set(t.subForm,"salesman_coach_balance",a)},expression:"subForm.salesman_coach_balance"}},[e("template",{slot:"append"},[t._v("%")])],2),t._v(" "),e("lb-tool-tips",[t._v(t._s(t.$t("action.attendantName"))+"和"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"承担比例总计不能大于100%\n          ")])],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("action.attendantName")+"所属"+t.$t("action.agentName")+"承担",prop:"salesman_admin_balance"}},[e("el-input",{attrs:{placeholder:"请输入"+t.$t("action.attendantName")+"所属"+t.$t("action.agentName")+"承担比例"},model:{value:t.subForm.salesman_admin_balance,callback:function(a){t.$set(t.subForm,"salesman_admin_balance",a)},expression:"subForm.salesman_admin_balance"}},[e("template",{slot:"append"},[t._v("%")])],2),t._v(" "),e("lb-tool-tips",[t._v(t._s(t.$t("action.attendantName"))+"和"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"承担比例总计不能大于100%\n          ")])],1),t._v(" "),t.routesItem.auth.channel?e("el-form-item",{attrs:{label:"业务员与"+t.$t("action.channelName")+"分佣方式",prop:"salesman_channel_fx_type"}},[e("el-radio-group",{model:{value:t.subForm.salesman_channel_fx_type,callback:function(a){t.$set(t.subForm,"salesman_channel_fx_type",a)},expression:"subForm.salesman_channel_fx_type"}},[e("el-radio",{attrs:{label:1}},[t._v("方式一")]),t._v(" "),e("el-radio",{attrs:{label:2}},[t._v("方式二")])],1),t._v(" "),e("lb-tool-tips",[t._v("选择方式一，无任何关系\n            "),e("div",{staticClass:"mt-md"},[t._v("\n              选择方式二，抽成关系，例如：业务员A，A发展的"+t._s(t.$t("action.channelName"))+"B\n            ")]),t._v(" "),e("div",{staticClass:"mt-sm"},[t._v("\n              1）A的提成比例为15%，B的提成比例为5%。则A的实际返佣比例\n              =（15-5）% = 10%\n            ")]),t._v(" "),e("div",{staticClass:"mt-sm"},[t._v("\n              2）当B的提成比例大于等于A的提成比例时，A无提成\n            ")])])],1):t._e(),t._v(" "),e("el-form-item",{attrs:{label:"邀请业务员推广海报背景图",prop:"salesman_poster"}},[e("lb-cover",{attrs:{fileList:t.subForm.salesman_poster},on:{selectedFiles:function(a){return t.getCover(a,"salesman_poster")}}}),t._v(" "),e("lb-tool-tips",[t._v("图片建议尺寸：750 * 1140\n            "),e("div",{staticClass:"mt-sm"},[t._v("\n              由于页面生成的二维码位置是固定的，所以设计海报时注意将中间的二维码位置留出来\n            ")]),t._v(" "),e("div",{staticClass:"mt-sm"},[t._v("\n              海报背景图中不要出现诱导用户分享以及传播外链内容的\n            ")]),t._v(" "),e("div",{staticClass:"mt-sm"},[t._v("\n              包括但不限于：以金钱奖励、实物奖励、虚拟奖品（包括但不限于红包、优惠券、代金券、积分、话费、流量）；声称分享可获得返佣等\n            ")])]),t._v(" "),e("div",[e("lb-button",{attrs:{type:"danger",plain:"",size:"small"},on:{click:function(a){return t.toReset("salesman_poster")}}},[t._v(t._s(t.$t("action.defaultSet")))])],1)],1)],1):t._e(),t._v(" "),e("el-form-item",[e("lb-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:t.submitFormInfo}},[t._v(t._s(t.$t("action.submit")))])],1)],1)],1)],1)},staticRenderFns:[]};var d=e("C7Lr")(u,v,!1,function(t){e("2S8G")},"data-v-4c23f4f4",null);a.default=d.exports}});