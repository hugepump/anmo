webpackJsonp([127],{"+Xwk":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3cXf"),s=a.n(n),c=a("lC5x"),l=a.n(c),o=a("J0Oq"),i=a.n(o),r=a("4YfN"),_=a.n(r),m=a("bSIt"),u={data:function(){var t=this;return{channel_poster:"https://lbqny.migugu.com/admin/anmo/mine/channel-share.png",subForm:{channel_status:1,channel_check_status:0,channel_bind_forever:0,channel_menu_name:"",channel_bind_type:1,user_channel_over_time:"",channel_balance:"",channel_coach_balance:"",channel_admin_balance:"",channel_poster:[]},subFormRules:{channel_status:{required:!0,type:"number",message:"请选择启用"+this.$t("action.channelName")+"功能",trigger:"blur"},channel_check_status:{required:!0,type:"number",message:"请选择"+this.$t("action.channelName")+"审核",trigger:"blur"},channel_menu_name:{required:!0,validator:this.$reg.isNotNull,reg_type:2,text:"菜单自定义名称",trigger:"blur"},channel_bind_type:{required:!0,type:"number",message:"请选择绑定方式",trigger:"blur"},user_channel_over_time:{required:!0,validator:function(e,a,n){t.subForm.channel_bind_forever||a&&/^[1-9]\d*$/.test(a)?n():n(new Error(a?"请输入正确的绑定时效，必须是大于0的整数":"请输入"+e.text))},text:"绑定"+this.$t("action.channelName")+"时效",trigger:["blur","change"]},channel_balance:{required:!0,validator:this.$reg.isDotPercent,text:this.$t("action.channelName")+"返佣比例",trigger:"blur"},channel_coach_balance:{required:!0,validator:this.$reg.isDotPercent,text:this.$t("action.attendantName")+"承担比例",trigger:"blur"},channel_admin_balance:{required:!0,validator:this.$reg.isDotPercent,text:this.$t("action.attendantName")+"所属"+this.$t("action.agentName")+"承担比例",trigger:"blur"},channel_poster:{required:!0,type:"array",message:"请选择邀请"+this.$t("action.channelName")+"推广海报背景图",trigger:"blur"}}}},created:function(){this.getFormInfo()},computed:_()({},Object(m.e)({routesItem:function(t){return t.routes}})),methods:_()({},Object(m.d)(["changeRoutesItem"]),{getFormInfo:function(){var t=this;return i()(l.a.mark(function e(){var a,n,s,c,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.system.configInfo();case 2:if(a=e.sent,n=a.code,s=a.data,200===n){e.next=7;break}return e.abrupt("return");case 7:for(o in s.channel_poster=[{url:s.channel_poster}],c=t.routesItem.auth.channelforeverbind,s.channel_bind_forever=c?1:0,t.subForm)t.subForm[o]=s[o];case 11:case"end":return e.stop()}},e,t)}))()},getCover:function(t,e){this.subForm[e]=t},toReset:function(t){this.subForm[t]=[{url:this[t]}],this.submitFormInfo()},submitFormInfo:function(){var t=this,e=!0;if(this.$refs.subForm.validate(function(t){t||(e=!1)}),e){var a=JSON.parse(s()(this.subForm));1*a.channel_coach_balance+1*a.channel_admin_balance>100?this.$message.error(this.$t("action.attendantName")+"和"+this.$t("action.attendantName")+"所属"+this.$t("action.agentName")+"承担比例总计不能大于100%"):(a.channel_poster=a.channel_poster[0].url,this.$api.system.configUpdate(a).then(function(e){200===e.code&&(t.$message.success(t.$t("tips.successSub")),t.changeRoutesItem({key:"channel_menu_name",val:a.channel_menu_name}))}))}}})},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"lb-channel-set"},[a("top-nav"),t._v(" "),a("div",{staticClass:"page-main"},[a("lb-tips",[t._v(t._s(t.$t("action.channelName"))+"的佣金应该由该笔订单"+t._s("服务"===t.$t("action.attendantName").substring(0,2)?"":"服务")+t._s(t.$t("action.attendantName"))+"和该"+t._s(t.$t("action.attendantName"))+"绑定的上级"+t._s(t.$t("action.agentName"))+"承担\n      "),a("el-popover",{attrs:{placement:"top-start",width:"500",trigger:"hover"}},[a("div",{staticClass:"f-caption c-title",attrs:{slot:""},slot:"default"},[a("div",[t._v("\n            例如：用户A下单实际付款除车费外为100元，"+t._s(t.$t("action.channelName"))+"B的返佣比例为10%，则"+t._s(t.$t("action.channelName"))+"B应得提成100*10%=10元\n          ")]),t._v(" "),a("div",{staticClass:"mt-lg"},[t._v("1、承担比例累计等于100%，平台不承担")]),t._v(" "),a("div",{staticClass:"ml-lg mt-sm"},[t._v("\n            例如："+t._s(t.$t("action.attendantName"))+"承担30%，"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"承担70%\n          ")]),t._v(" "),a("div",{staticClass:"ml-lg mt-sm"},[t._v("\n            则："+t._s(t.$t("action.attendantName"))+"应承担10*30%=3元，"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"应承担10*70%=7元\n          ")]),t._v(" "),a("div",{staticClass:"mt-lg"},[t._v("2、承担比例累计小于100%，平台需承担")]),t._v(" "),a("div",{staticClass:"ml-lg mt-sm"},[t._v("\n            平台需承担金额=10*(100-"+t._s(t.$t("action.attendantName"))+"应承担比例\n            - 所属"+t._s(t.$t("action.agentName"))+"应承担比例)%\n          ")]),t._v(" "),a("div",{staticClass:"ml-lg mt-sm"},[t._v("\n            例如："+t._s(t.$t("action.attendantName"))+"承担30%，"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"承担0%\n          ")]),t._v(" "),a("div",{staticClass:"ml-lg mt-sm"},[t._v("\n            则："+t._s(t.$t("action.attendantName"))+"应承担10*30%=3元，平台应承担10*(100-30-0)%=7元\n          ")]),t._v(" "),a("div",{staticClass:"ml-lg mt-lg"},[t._v("\n            例如："+t._s(t.$t("action.attendantName"))+"承担30%，"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"承担50%\n          ")]),t._v(" "),a("div",{staticClass:"ml-lg mt-sm"},[t._v("\n            则："+t._s(t.$t("action.attendantName"))+"应承担10*30%=3元，"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"应承担10*50%=5元，平台应承担10*(100-30-50)%=2元\n          ")]),t._v(" "),a("div",{staticClass:"ml-lg pt-lg c-warning"},[t._v("\n            温馨提示：\n            "),a("div",{staticClass:"mt-sm"},[t._v("\n              1)、若没有所属"+t._s(t.$t("action.agentName"))+"，则计算规则中所属"+t._s(t.$t("action.agentName"))+"应承担的金额应由平台所出\n            ")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("\n              2)、若有所属"+t._s(t.$t("action.agentName"))+"且该"+t._s(t.$t("action.agentName"))+"在本订单中没有获得任何分成，则"+t._s(t.$t("action.agentName"))+"无需承担\n            ")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("\n              3)、若有所属"+t._s(t.$t("action.agentName"))+"且该"+t._s(t.$t("action.agentName"))+"在本订单中所得分成小于应承担金额，则该"+t._s(t.$t("action.agentName"))+"需将所得分成全部给"+t._s(t.$t("action.channelName"))+"，因此"+t._s(t.$t("action.channelName"))+"实际所得金额小于应得金额\n            ")])])]),t._v(" "),a("i",{staticClass:"el-icon-question",staticStyle:{color:"#000"},attrs:{slot:"reference"},slot:"reference"})])],1),t._v(" "),a("el-form",{ref:"subForm",staticClass:"config-form",attrs:{model:t.subForm,rules:t.subFormRules,"label-width":"180px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{label:"启用"+t.$t("action.channelName")+"功能",prop:"channel_status"}},[a("el-radio-group",{model:{value:t.subForm.channel_status,callback:function(e){t.$set(t.subForm,"channel_status",e)},expression:"subForm.channel_status"}},[a("el-radio",{attrs:{label:1}},[t._v(t._s(t.$t("action.ON")))]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v(t._s(t.$t("action.OFF")))])],1),t._v(" "),a("lb-tool-tips",[t._v("选择开启，将启用"+t._s(t.$t("action.channelName"))+"功能\n        ")])],1),t._v(" "),t.subForm.channel_status?a("block",[a("el-form-item",{attrs:{label:t.$t("action.channelName")+"申请入口",prop:"channel_check_status"}},[a("el-radio-group",{model:{value:t.subForm.channel_check_status,callback:function(e){t.$set(t.subForm,"channel_check_status",e)},expression:"subForm.channel_check_status"}},[a("el-radio",{attrs:{label:1}},[t._v(t._s(t.$t("action.ON")))]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v(t._s(t.$t("action.OFF")))])],1),t._v(" "),a("lb-tool-tips",[t._v("选择开启，手机端有申请"+t._s(t.$t("action.channelName"))+"入口\n            "),a("div",{staticClass:"mt-sm"},[t._v("\n              选择关闭，手机端无申请"+t._s(t.$t("action.channelName"))+"入口，只能通过后台添加用户成为"+t._s(t.$t("action.channelName"))+"\n            ")])])],1),t._v(" "),a("el-form-item",{attrs:{label:"菜单自定义名称",prop:"channel_menu_name"}},[a("el-input",{attrs:{maxlength:"5","show-word-limit":"",placeholder:"请输入菜单自定义名称"},model:{value:t.subForm.channel_menu_name,callback:function(e){t.$set(t.subForm,"channel_menu_name",e)},expression:"subForm.channel_menu_name"}}),t._v(" "),a("lb-tool-tips",[t._v("修改名称之后，手机端、管理后台和"+t._s(t.$t("action.agentName"))+"端后台的“"+t._s(t.$t("action.channelName"))+"”字样都变为新改的文案")])],1),t._v(" "),t.routesItem.auth.channelforeverbind?t._e():a("el-form-item",{attrs:{label:"绑定方式",prop:"channel_bind_type"}},[a("el-radio-group",{model:{value:t.subForm.channel_bind_type,callback:function(e){t.$set(t.subForm,"channel_bind_type",e)},expression:"subForm.channel_bind_type"}},[a("el-radio",{attrs:{label:0}},[t._v("时效期内扫码不换绑")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("时效期内扫码可换绑")])],1),t._v(" "),a("lb-tool-tips",[t._v("时效期内扫码不换绑：在渠道码时效性内，扫其他"+t._s(t.$t("action.channelName"))+"的二维码下单，不换绑新的"+t._s(t.$t("action.channelName"))+"，佣金依然返给之前的"+t._s(t.$t("action.channelName"))+"\n            "),a("div",{staticClass:"mt-sm"},[t._v("\n              时效期内扫码可换绑：在时效期内如果不扫码则返给原"+t._s(t.$t("action.channelName"))+"，扫码后可换绑新的"+t._s(t.$t("action.channelName"))+"，佣金发给新的"+t._s(t.$t("action.channelName"))+"\n            ")])])],1),t._v(" "),a("el-form-item",{attrs:{label:"绑定"+t.$t("action.channelName")+"时效",prop:"user_channel_over_time"}},[t.routesItem.auth.channelforeverbind?a("block",[a("el-radio-group",{model:{value:t.subForm.channel_bind_forever,callback:function(e){t.$set(t.subForm,"channel_bind_forever",e)},expression:"subForm.channel_bind_forever"}},[a("el-radio",{attrs:{label:1}},[t._v("永久绑定")])],1),t._v(" "),a("lb-tool-tips",[t._v("\n              永久绑定：当用户扫描"+t._s(t.$t("action.channelName"))+"二维码后将与该"+t._s(t.$t("action.channelName"))+"永久绑定关系，该用户以后下单，该"+t._s(t.$t("action.channelName"))+"都有提成\n              ")])],1):t._e(),t._v(" "),t.routesItem.auth.channelforeverbind?t._e():a("block",[a("div",[a("el-input",{attrs:{placeholder:"请输入绑定"+t.$t("action.channelName")+"时效"},model:{value:t.subForm.user_channel_over_time,callback:function(e){t.$set(t.subForm,"user_channel_over_time",e)},expression:"subForm.user_channel_over_time"}},[a("template",{slot:"append"},[t._v("小时")])],2),t._v(" "),t.routesItem.auth.channelforeverbind?t._e():a("lb-tool-tips",[t._v("当用户扫描"+t._s(t.$t("action.channelName"))+"二维码后将与该"+t._s(t.$t("action.channelName"))+"绑定关系，在此时效内下单，该"+t._s(t.$t("action.channelName"))+"均享受佣金提成\n              ")])],1)])],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("action.channelName")+"返佣",prop:"channel_balance"}},[a("el-input",{attrs:{placeholder:"请输入"+t.$t("action.channelName")+"返佣比例"},model:{value:t.subForm.channel_balance,callback:function(e){t.$set(t.subForm,"channel_balance",e)},expression:"subForm.channel_balance"}},[a("template",{slot:"append"},[t._v("%")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("action.attendantName")+"承担",prop:"channel_coach_balance"}},[a("el-input",{attrs:{placeholder:"请输入"+t.$t("action.attendantName")+"承担比例"},model:{value:t.subForm.channel_coach_balance,callback:function(e){t.$set(t.subForm,"channel_coach_balance",e)},expression:"subForm.channel_coach_balance"}},[a("template",{slot:"append"},[t._v("%")])],2),t._v(" "),a("lb-tool-tips",[t._v(t._s(t.$t("action.attendantName"))+"和"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"承担比例总计不能大于100%\n          ")])],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("action.attendantName")+"所属"+t.$t("action.agentName")+"承担",prop:"channel_admin_balance"}},[a("el-input",{attrs:{placeholder:"请输入"+t.$t("action.attendantName")+"所属"+t.$t("action.agentName")+"承担比例"},model:{value:t.subForm.channel_admin_balance,callback:function(e){t.$set(t.subForm,"channel_admin_balance",e)},expression:"subForm.channel_admin_balance"}},[a("template",{slot:"append"},[t._v("%")])],2),t._v(" "),a("lb-tool-tips",[t._v(t._s(t.$t("action.attendantName"))+"和"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"承担比例总计不能大于100%\n          ")])],1),t._v(" "),a("el-form-item",{attrs:{label:"邀请"+t.$t("action.channelName")+"推广海报背景图",prop:"channel_poster"}},[a("lb-cover",{attrs:{fileList:t.subForm.channel_poster},on:{selectedFiles:function(e){return t.getCover(e,"channel_poster")}}}),t._v(" "),a("lb-tool-tips",[t._v("图片建议尺寸：750 * 1140\n            "),a("div",{staticClass:"mt-sm"},[t._v("\n              由于页面生成的二维码位置是固定的，所以设计海报时注意将中间的二维码位置留出来\n            ")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("\n              海报背景图中不要出现诱导用户分享以及传播外链内容的\n            ")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("\n              包括但不限于：以金钱奖励、实物奖励、虚拟奖品（包括但不限于红包、优惠券、代金券、积分、话费、流量）；声称分享可获得返佣等\n            ")])]),t._v(" "),a("div",[a("lb-button",{attrs:{type:"danger",plain:"",size:"small"},on:{click:function(e){return t.toReset("channel_poster")}}},[t._v(t._s(t.$t("action.defaultSet")))])],1)],1)],1):t._e(),t._v(" "),a("el-form-item",[a("lb-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:t.submitFormInfo}},[t._v(t._s(t.$t("action.submit")))])],1)],1)],1)],1)},staticRenderFns:[]};var v=a("C7Lr")(u,h,!1,function(t){a("TPAS")},"data-v-47fe5921",null);e.default=v.exports},TPAS:function(t,e){}});