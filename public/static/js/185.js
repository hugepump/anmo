webpackJsonp([185],{NOL4:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("lC5x"),a=r.n(s),i=r("J0Oq"),n=r.n(i),o={data:function(){return{fileName:"",subForm:{mch_id:"",pay_key:"",cert_path:"",key_path:""},subFormRules:{mch_id:{required:!0,type:"string",message:"请输入商户号",trigger:"blur"},pay_key:[{required:!0,type:"string",message:"请输入支付秘钥",trigger:"blur"},{validator:function(e,t,r){/^[0-9a-zA-Z]*$/g.test(t)?r():r(new Error("请输入字母数字类型"))},trigger:"blur"}],cert_path:{required:!0,type:"string",message:"请上传证书",trigger:"change"},key_path:{required:!0,type:"string",message:"请上传证书",trigger:"change"}}}},created:function(){this.getFormInfo()},methods:{getFormInfo:function(){var e=this;return n()(a.a.mark(function t(){var r,s,i,n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.system.payConfigInfo();case 2:if(r=t.sent,s=r.code,i=r.data,200===s){t.next=7;break}return t.abrupt("return");case 7:for(n in e.subForm)e.subForm[n]=i[n];case 8:case"end":return t.stop()}},t,e)}))()},getFile:function(e,t){var r=e.length-1;this.subForm[t]=e[r].url},toResetFile:function(e){this.subForm[e]=""},submitFormInfo:function(){var e=this,t=!0;this.$refs.subForm.validate(function(e){e||(t=!1)}),t&&this.$api.system.payConfigUpdate(this.subForm).then(function(t){200===t.code&&e.$message.success(e.$t("tips.successSub"))})}},watch:{"subForm.cert_path":function(e,t){e&&!t&&this.$refs.subForm.clearValidate("cert_path")},"subForm.key_path":function(e,t){e&&!t&&this.$refs.subForm.clearValidate("key_path")}},filters:{handleFileName:function(e){var t="请上传文件";return e&&(t=e.substring(e.lastIndexOf("/")+1)),t}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"lb-system-payment-wechat"},[r("top-nav"),e._v(" "),r("div",{staticClass:"page-main"},[r("el-form",{ref:"subForm",attrs:{model:e.subForm,rules:e.subFormRules,"label-width":"160px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"商户号",prop:"mch_id"}},[r("el-input",{attrs:{placeholder:"请输入商户号"},model:{value:e.subForm.mch_id,callback:function(t){e.$set(e.subForm,"mch_id",t)},expression:"subForm.mch_id"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"支付秘钥",prop:"pay_key"}},[r("el-input",{attrs:{placeholder:"请输入支付秘钥"},model:{value:e.subForm.pay_key,callback:function(t){e.$set(e.subForm,"pay_key",t)},expression:"subForm.pay_key"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"cert_path",prop:"cert_path"}},[r("div",{staticClass:"lb-file-input flex-between"},[r("div",{class:[{"c-title":e.subForm.cert_path}]},[e._v("\n            "+e._s(e._f("handleFileName")(e.subForm.cert_path))+"\n          ")]),e._v(" "),r("div",{staticClass:"flex-center"},[e.subForm.cert_path?r("i",{staticClass:"c-warning iconfont icon-guanbi-fill pl-sm pr-sm",on:{click:function(t){return e.toResetFile("cert_path")}}}):e._e(),e._v(" "),r("lb-cover",{attrs:{type:"button",fileType:"cert",fileSize:1},on:{selectedFiles:function(t){return e.getFile(t,"cert_path")}}})],1)])]),e._v(" "),r("el-form-item",{attrs:{label:"key_path",prop:"key_path"}},[r("div",{staticClass:"lb-file-input flex-between"},[r("div",{class:[{"c-title":e.subForm.key_path}]},[e._v("\n            "+e._s(e._f("handleFileName")(e.subForm.key_path))+"\n          ")]),e._v(" "),r("div",{staticClass:"flex-center"},[e.subForm.key_path?r("i",{staticClass:"c-warning iconfont icon-guanbi-fill pl-sm pr-sm",on:{click:function(t){return e.toResetFile("key_path")}}}):e._e(),e._v(" "),r("lb-cover",{attrs:{type:"button",fileType:"cert",fileSize:1},on:{selectedFiles:function(t){return e.getFile(t,"key_path")}}})],1)])]),e._v(" "),r("el-form-item",[r("lb-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:e.submitFormInfo}},[e._v(e._s(e.$t("action.submit")))])],1)],1)],1)],1)},staticRenderFns:[]};var c=r("C7Lr")(o,l,!1,function(e){r("w0/s")},"data-v-12ea3f50",null);t.default=c.exports},"w0/s":function(e,t){}});