webpackJsonp([159],{"/gLB":function(t,a){},"0lkj":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("3cXf"),s=e.n(n),c=e("lC5x"),o=e.n(c),l=e("J0Oq"),i=e.n(l),r=e("4YfN"),u=e.n(r),_=e("bSIt"),m={data:function(){var t=this;return{checkList:{balance:[],discount:[]},authList:{balance:[{title:"返现金",key:"balance_cash"},{title:"返积分",key:"balance_integral"}],discount:[{title:"返现金",key:"balance_discount_cash"},{title:"返积分",key:"balance_discount_integral"}]},subForm:{recharge_status:1,balance_cash:1,balance_integral:1,balance_balance:"",comm_coach_balance:"",balance_discount_status:1,balance_discount_cash:1,balance_discount_integral:1,balance_discount_balance:"",balance_discount_coach_balance:"",balance_discount_admin_balance:""},subFormRules:{recharge_status:{required:!0,type:"number",message:"请选择是否开启余额储值充值功能",trigger:"blur"},checkBalance:{required:!0,validator:function(a,e,n){var s=t.subForm,c=s.balance_cash,o=void 0===c?0:c,l=s.balance_integral;o||void 0!==l&&l?n():n(new Error("请选择返佣形式"))},trigger:["blur","change"]},balance_balance:{required:!0,validator:this.$reg.isDotPercent,text:"返佣比例",trigger:["blur","change"]},comm_coach_balance:{required:!0,validator:this.$reg.isDotPercent,text:"储值扣款比例",trigger:["blur","change"]},balance_discount_status:{required:!0,type:"number",message:"请选择是否开启储值折扣卡充值功能",trigger:"blur"},checkDiscount:{required:!0,validator:function(a,e,n){var s=t.subForm,c=s.balance_discount_cash,o=void 0===c?0:c,l=s.balance_discount_integral;o||void 0!==l&&l?n():n(new Error("请选择返佣形式"))},trigger:["blur","change"]},balance_discount_balance:{required:!0,validator:this.$reg.isDotPercent,text:"返佣比例",trigger:["blur","change"]},coach_admin_balance:{required:!0,validator:function(a,e,n){var s=t.subForm,c=s.balance_discount_coach_balance,o=s.balance_discount_admin_balance,l=/^(([0-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/;""===c||c&&(!l.test(c)||1*c>100)?n(new Error(""===c?"请输入"+t.$t("action.attendantName")+"承担的比例":l.test(c)?t.$t("action.attendantName")+"承担的比例不能大于100%":"请输入正确的"+t.$t("action.attendantName")+"承担的比例，最多保留2位小数")):""===o||o&&(!l.test(o)||1*o>100)?n(new Error(""===o?"请输入"+t.$t("action.attendantName")+"所属"+t.$t("action.agentName")+"承担的比例":l.test(o)?t.$t("action.attendantName")+"所属"+t.$t("action.agentName")+"承担的比例不能大于100%":"请输入正确的"+t.$t("action.attendantName")+"所属"+t.$t("action.agentName")+"承担的比例，最多保留2位小数")):c&&o&&1*c+1*o>100?n(new Error(t.$t("action.attendantName")+"与"+t.$t("action.attendantName")+"所属"+t.$t("action.agentName")+"承担的比例总计不能大于100%")):n()},trigger:["blur","change"]}}}},created:function(){this.getFormInfo()},computed:u()({},Object(_.e)({routesItem:function(t){return t.routes}})),methods:{getFormInfo:function(){var t=this;return i()(o.a.mark(function a(){var e,n,s,c,l,i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$api.system.configInfoSchedule();case 2:if(e=a.sent,n=e.code,s=e.data,200===n){a.next=7;break}return a.abrupt("return");case 7:for(c in t.subForm)t.subForm[c]=s[c];for(i in l=function(a){var e=[];t.authList[a].map(function(t){1===s[t.key]&&e.push(t.title)}),t.checkList[a]=e},t.authList)l(i);case 10:case"end":return a.stop()}},a,t)}))()},changeCheckBox:function(t,a){var e=this;this.authList[a].map(function(a){e.subForm[a.key]=t.includes(a.title)?1:0})},submitFormInfo:function(){var t=this;return i()(o.a.mark(function a(){var e,n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e=!0,t.$refs.subForm.validate(function(t){t||(e=!1)}),e){a.next=4;break}return a.abrupt("return");case 4:return n=JSON.parse(s()(t.subForm)),a.next=7,t.$api.system.configUpdateSchedule(n);case 7:t.$message.success(t.$t("tips.successSub"));case 8:case"end":return a.stop()}},a,t)}))()}}},b={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"lb-finance-stored-set"},[e("top-nav"),t._v(" "),e("div",{staticClass:"page-main"},[e("el-form",{ref:"subForm",attrs:{model:t.subForm,rules:t.subFormRules,"label-width":"180px"},nativeOn:{submit:function(t){t.preventDefault()}}},[e("lb-classify-title",{attrs:{title:"余额储值充送"}}),t._v(" "),e("el-form-item",{attrs:{label:"余额储值充值功能",prop:"recharge_status"}},[e("el-radio-group",{model:{value:t.subForm.recharge_status,callback:function(a){t.$set(t.subForm,"recharge_status",a)},expression:"subForm.recharge_status"}},[e("el-radio",{attrs:{label:1}},[t._v(t._s(t.$t("action.ON")))]),t._v(" "),e("el-radio",{attrs:{label:0}},[t._v(t._s(t.$t("action.OFF")))])],1),t._v(" "),e("lb-tool-tips",[t._v("选择关闭，手机用户端将不会展示余额储值充值入口、用户下单时也无余额支付方式\n        ")])],1),t._v(" "),e("el-form-item",{attrs:{label:"返佣形式",prop:"checkBalance"}},[e("el-checkbox-group",{on:{change:function(a){return t.changeCheckBox(a,"balance")}},model:{value:t.checkList.balance,callback:function(a){t.$set(t.checkList,"balance",a)},expression:"checkList.balance"}},[t._l(t.authList.balance,function(a,n){return e("div",{key:n,style:{display:"inline-block",marginLeft:0===n?0:"15px"}},[e("el-checkbox",{attrs:{label:a.title}}),t._v(" "),a.tips?e("lb-tool-tips",[t._v(t._s(a.tips))]):t._e()],1)}),t._v(" "),e("lb-tool-tips",[t._v("勾选返现金，客户充值将会返佣金到"+t._s(t.$t("action.attendantName"))+"账户，"+t._s(t.$t("action.attendantName"))+"可提现\n            "),e("div",{staticClass:"mt-sm"},[t._v("\n              勾选返积分，客户充值将会返积分给"+t._s(t.$t("action.attendantName"))+"，用于"+t._s(t.$t("action.attendantName"))+"等级考核\n            ")]),t._v(" "),e("div",{staticClass:"mt-md"},[t._v("\n              若两者都勾选，则会同时返现金和积分给"+t._s(t.$t("action.attendantName"))+"\n            ")])])],2)],1),t._v(" "),1===t.subForm.balance_cash?e("el-form-item",{attrs:{label:"返佣比例",prop:"balance_balance"}},[e("el-input",{attrs:{placeholder:"请输入返佣比例"},model:{value:t.subForm.balance_balance,callback:function(a){t.$set(t.subForm,"balance_balance",a)},expression:"subForm.balance_balance"}},[e("template",{slot:"append"},[t._v("%")])],2),t._v(" "),e("lb-tool-tips",[t._v("返佣现金的比例按照储值实际支付金额的百分比返佣\n        ")])],1):t._e(),t._v(" "),e("el-form-item",{attrs:{label:"余额储值扣款比例",prop:"comm_coach_balance"}},[e("el-input",{attrs:{placeholder:"请输入储值扣款比例"},model:{value:t.subForm.comm_coach_balance,callback:function(a){t.$set(t.subForm,"comm_coach_balance",a)},expression:"subForm.comm_coach_balance"}},[e("template",{slot:"append"},[t._v("%")])],2),t._v(" "),e("lb-tool-tips",[t._v("设置了扣款比例后，用户使用余额支付时，会从"+t._s(t.$t("action.attendantName"))+"提成里扣除相应的费用\n        ")])],1),t._v(" "),t.routesItem.auth.balancediscount?e("div",[e("div",{staticClass:"space-lg"}),t._v(" "),e("lb-classify-title",{attrs:{title:"储值折扣卡"}}),t._v(" "),e("el-form-item",{attrs:{label:"储值折扣卡充值功能",prop:"balance_discount_status"}},[e("el-radio-group",{model:{value:t.subForm.balance_discount_status,callback:function(a){t.$set(t.subForm,"balance_discount_status",a)},expression:"subForm.balance_discount_status"}},[e("el-radio",{attrs:{label:1}},[t._v(t._s(t.$t("action.ON")))]),t._v(" "),e("el-radio",{attrs:{label:0}},[t._v(t._s(t.$t("action.OFF")))])],1),t._v(" "),e("lb-tool-tips",[t._v("选择关闭，手机用户端将不会展示储值折扣卡充值入口、用户下单时也无储值折扣卡支付方式\n          ")])],1),t._v(" "),e("el-form-item",{attrs:{label:"返佣形式",prop:"checkDiscount"}},[e("el-checkbox-group",{on:{change:function(a){return t.changeCheckBox(a,"discount")}},model:{value:t.checkList.discount,callback:function(a){t.$set(t.checkList,"discount",a)},expression:"checkList.discount"}},[t._l(t.authList.discount,function(a,n){return e("div",{key:n,style:{display:"inline-block",marginLeft:0===n?0:"15px"}},[e("el-checkbox",{attrs:{label:a.title}}),t._v(" "),a.tips?e("lb-tool-tips",[t._v(t._s(a.tips))]):t._e()],1)}),t._v(" "),e("lb-tool-tips",[t._v("勾选返现金，客户购买储值折扣卡将会返佣金到"+t._s(t.$t("action.attendantName"))+"账户，"+t._s(t.$t("action.attendantName"))+"可提现\n              "),e("div",{staticClass:"mt-sm"},[t._v("\n                勾选返积分，客户购买储值折扣卡将会返积分给"+t._s(t.$t("action.attendantName"))+"，用于"+t._s(t.$t("action.attendantName"))+"等级考核\n              ")]),t._v(" "),e("div",{staticClass:"mt-md"},[t._v("\n                若两者都勾选，则会同时返现金和积分给"+t._s(t.$t("action.attendantName"))+"\n              ")])])],2)],1),t._v(" "),1===t.subForm.balance_discount_cash?e("el-form-item",{attrs:{label:"返佣比例",prop:"balance_discount_balance"}},[e("el-input",{attrs:{placeholder:"请输入返佣比例"},model:{value:t.subForm.balance_discount_balance,callback:function(a){t.$set(t.subForm,"balance_discount_balance",a)},expression:"subForm.balance_discount_balance"}},[e("template",{slot:"append"},[t._v("%")])],2),t._v(" "),e("lb-tool-tips",[t._v("返佣现金的比例按照储值实际支付金额的百分比返佣\n          ")])],1):t._e(),t._v(" "),e("el-form-item",{attrs:{label:"储值折扣卡扣款承担比例",prop:"coach_admin_balance"}},[e("div",[t._v("\n            "+t._s(t.$t("action.attendantName"))+"承担\n            "),e("el-input",{staticClass:"mini",attrs:{placeholder:"请输入百分比"},model:{value:t.subForm.balance_discount_coach_balance,callback:function(a){t.$set(t.subForm,"balance_discount_coach_balance",a)},expression:"subForm.balance_discount_coach_balance"}}),t._v("\n            %\n            "),e("div",{staticClass:"mt-md"},[t._v("\n              "+t._s(t.$t("action.attendantName"))+"所属上级"+t._s(t.$t("action.agentName"))+"承担\n              "),e("el-input",{staticClass:"mini",attrs:{placeholder:"请输入百分比"},model:{value:t.subForm.balance_discount_admin_balance,callback:function(a){t.$set(t.subForm,"balance_discount_admin_balance",a)},expression:"subForm.balance_discount_admin_balance"}}),t._v("\n              %"),e("lb-tool-tips",[t._v("设置了扣款比例后，用户使用储值折扣卡时，会有运营成本承担，运营成本=储值卡消费金额÷折扣-储值卡消费金额\n\n                "),e("div",{staticClass:"mt-sm"},[t._v("\n                  例如：100元项目，无车费，折扣9.5折，折扣后95元，运营成本5元\n                  "),e("div",{staticClass:"mt-sm",staticStyle:{"margin-left":"36px"}},[t._v("\n                    平台提成5%，"+t._s(t.$t("action.attendantName"))+"提成70%，"+t._s(t.$t("action.agentName"))+"提成10%\n                    "),t.routesItem.auth.reseller||t.routesItem.auth.channel||t.routesItem.auth.salesman?e("span",[t._v("，"+t._s(t.routesItem.auth.reseller?""+t.$t("action.resellerName"):"")+"\n                      "+t._s(t.routesItem.auth.reseller&&t.routesItem.auth.channel?"、":"")+"\n                      "+t._s(t.routesItem.auth.channel?""+t.$t("action.channelName"):"")+"\n                      "+t._s(t.routesItem.auth.channel&&t.routesItem.auth.salesman?"、":"")+t._s(t.routesItem.auth.salesman?"业务员":"")+"提成分别为5%")]):t._e(),t._v(" "),e("div",{staticClass:"mt-sm mb-sm"},[t._v("\n                      如果设置"+t._s(t.$t("action.attendantName"))+"和"+t._s(t.$t("action.agentName"))+"分别分摊50%，则"+t._s(t.$t("action.attendantName"))+"和"+t._s(t.$t("action.agentName"))+"一人承担2.5元，"+t._s(t.$t("action.attendantName"))+"最终获得佣金=100*70%-2.5=67.5元，"+t._s(t.$t("action.agentName"))+"最终获得佣金=100*10%-2.5=7.5元\n                    ")]),t._v("\n                    平台"+t._s(t.routesItem.auth.reseller?"、"+t.$t("action.resellerName"):"")+t._s(t.routesItem.auth.channel?"、 "+t.$t("action.channelName"):"")+t._s(t.routesItem.auth.salesman?"、业务员":"")+"分别获得100*5%=5元\n                  ")])]),t._v(" "),e("div",{staticClass:"mt-md"},[t._v("\n                  "+t._s(t.$t("action.attendantName"))+"和"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"承担的比例总计不能大于100%，小于100%的，默认平台承担\n                ")])])],1)],1)])],1):t._e(),t._v(" "),e("el-form-item",[e("lb-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:t.submitFormInfo}},[t._v(t._s(t.$t("action.submit")))])],1)],1)],1)],1)},staticRenderFns:[]};var d=e("C7Lr")(m,b,!1,function(t){e("/gLB")},"data-v-2de787ee",null);a.default=d.exports}});