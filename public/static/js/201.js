webpackJsonp([201],{"1sgx":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("3cXf"),n=a.n(r),o=a("lC5x"),s=a.n(o),i=a("rVsN"),_=a.n(i),c=a("KH7x"),m=a.n(c),l=a("J0Oq"),b=a.n(l),u=a("4YfN"),p=a.n(u),v=a("bSIt"),d={data:function(){return{broker_poster:"https://lbqny.migugu.com/admin/anmo/mine/inv_coach.png",subForm:{broker_status:1,broker_apply_port:"",broker_menu_name:"",coach_agent_balance:"",broker_cash_type:0,partner_coach_balance:"",partner_admin_balance:"",broker_poster:[]},subFormRules:{broker_status:{required:!0,type:"number",message:"请选择",trigger:"blur"},broker_apply_port:{required:!0,type:"number",message:"请选择",trigger:"blur"},broker_menu_name:{required:!0,validator:this.$reg.isNotNull,reg_type:2,text:"菜单自定义名称",trigger:"blur"},broker_cash_type:{required:!0,type:"number",message:"请选择",trigger:"blur"},coach_agent_balance:{required:!0,validator:this.$reg.isDotPercent,text:this.$t("action.brokerName")+"固定返佣比例",trigger:"blur"},partner_coach_balance:{required:!0,validator:this.$reg.isDotPercent,text:this.$t("action.attendantName")+"承担比例",trigger:"blur"},partner_admin_balance:{required:!0,validator:this.$reg.isDotPercent,text:this.$t("action.attendantName")+"所属"+this.$t("action.agentName")+"承担比例",trigger:"blur"},broker_poster:{required:!0,type:"array",message:"请选择邀请"+this.$t("action.attendantName")+"推广海报背景图",trigger:"blur"}}}},created:function(){this.getFormInfo()},methods:p()({},Object(v.d)(["changeRoutesItem"]),{getFormInfo:function(){var t=this;return b()(s.a.mark(function e(){var a,r,n,o,i,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.all([t.$api.coachbroker.configInfo(),t.$api.system.configInfo()]);case 2:for(c in a=e.sent,r=m()(a,2),n=r[0],o=r[1],(i=n.data).broker_status=o.data.broker_status,i.broker_menu_name=o.data.broker_menu_name,i.broker_poster=[{url:i.broker_poster}],t.subForm)t.subForm[c]=i[c];case 11:case"end":return e.stop()}},e,t)}))()},getCover:function(t,e){this.subForm[e]=t},toReset:function(t){this.subForm[t]=[{url:this[t]}],this.submitFormInfo()},submitFormInfo:function(){var t=this;return b()(s.a.mark(function e(){var a,r,o,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!0,t.$refs.subForm.validate(function(t){t||(a=!1)}),a){e.next=4;break}return e.abrupt("return");case 4:if(!(1*(r=JSON.parse(n()(t.subForm))).partner_coach_balance+1*r.partner_admin_balance>100)){e.next=8;break}return t.$message.error(t.$t("action.attendantName")+"和"+t.$t("action.attendantName")+"所属"+t.$t("action.agentName")+"承担比例总计不能大于100%"),e.abrupt("return");case 8:return r.broker_poster=r.broker_poster[0].url,o=r.broker_status,i=r.broker_menu_name,delete r.broker_status,delete r.broker_menu_name,e.next=14,_.a.all([t.$api.coachbroker.configUpdate(r),t.$api.system.configUpdate({broker_status:o,broker_menu_name:i})]);case 14:t.$message.success(t.$t("tips.successSub")),t.changeRoutesItem({key:"broker_menu_name",val:i});case 16:case"end":return e.stop()}},e,t)}))()}})},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"lb-coachbroker-set"},[a("top-nav"),t._v(" "),a("div",{staticClass:"page-main"},[a("el-row",{staticClass:"page-top-operate"},[a("lb-button",{directives:[{name:"show",rawName:"v-show",value:1===t.subForm.broker_cash_type&&(t.$route.meta.pagePermission[0].auth.includes("edit")&&t.$route.meta.pagePermission[0].auth.length>1||!t.$route.meta.pagePermission[0].auth.includes("edit")&&t.$route.meta.pagePermission[0].auth.length>0),expression:"\n          subForm.broker_cash_type === 1 &&\n          (($route.meta.pagePermission[0].auth.includes('edit') &&\n            $route.meta.pagePermission[0].auth.length > 1) ||\n            (!$route.meta.pagePermission[0].auth.includes('edit') &&\n              $route.meta.pagePermission[0].auth.length > 0))\n        "}],attrs:{size:"medium",type:"primary",icon:"el-icon-setting"},on:{click:function(e){return t.$router.push("/promotion/coachbroker/level")}}},[t._v(t._s(t.$t("menu.CoachbrokerLevel")))])],1),t._v(" "),a("lb-tips",[t._v(t._s(t.$t("action.brokerName"))+"的佣金应该由该笔订单"+t._s("服务"===t.$t("action.attendantName").substring(0,2)?"":"服务")+t._s(t.$t("action.attendantName"))+"和该"+t._s(t.$t("action.attendantName"))+"绑定的上级"+t._s(t.$t("action.agentName"))+"承担\n      "),a("el-popover",{attrs:{placement:"top-start",width:"500",trigger:"hover"}},[a("div",{staticClass:"f-caption c-title",attrs:{slot:""},slot:"default"},[a("div",[t._v("\n            例如：用户A下单实际付款除车费外为100元，"+t._s(t.$t("action.brokerName"))+"B的返佣比例为10%，则"+t._s(t.$t("action.brokerName"))+"B应得提成100*10%=10元\n          ")]),t._v(" "),a("div",{staticClass:"mt-lg"},[t._v("1、承担比例累计等于100%，平台不承担")]),t._v(" "),a("div",{staticClass:"ml-lg mt-sm"},[t._v("\n            例如："+t._s(t.$t("action.attendantName"))+"承担30%，"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"承担70%\n          ")]),t._v(" "),a("div",{staticClass:"ml-lg mt-sm"},[t._v("\n            则："+t._s(t.$t("action.attendantName"))+"应承担10*30%=3元，"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"应承担10*70%=7元\n          ")]),t._v(" "),a("div",{staticClass:"mt-lg"},[t._v("2、承担比例累计小于100%，平台需承担")]),t._v(" "),a("div",{staticClass:"ml-lg mt-sm"},[t._v("\n            平台需承担金额=10*(100-"+t._s(t.$t("action.attendantName"))+"应承担比例\n            - 所属"+t._s(t.$t("action.agentName"))+"应承担比例)%\n          ")]),t._v(" "),a("div",{staticClass:"ml-lg mt-sm"},[t._v("\n            例如："+t._s(t.$t("action.attendantName"))+"承担30%，"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"承担0%\n          ")]),t._v(" "),a("div",{staticClass:"ml-lg mt-sm"},[t._v("\n            则："+t._s(t.$t("action.attendantName"))+"应承担10*30%=3元，平台应承担10*(100-30-0)%=7元\n          ")]),t._v(" "),a("div",{staticClass:"ml-lg mt-lg"},[t._v("\n            例如："+t._s(t.$t("action.attendantName"))+"承担30%，"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"承担50%\n          ")]),t._v(" "),a("div",{staticClass:"ml-lg mt-sm"},[t._v("\n            则："+t._s(t.$t("action.attendantName"))+"应承担10*30%=3元，"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"应承担10*50%=5元，平台应承担10*(100-30-50)%=2元\n          ")]),t._v(" "),a("div",{staticClass:"ml-lg pt-lg c-warning"},[t._v("\n            温馨提示：\n            "),a("div",{staticClass:"mt-sm"},[t._v("\n              1)、若没有所属"+t._s(t.$t("action.agentName"))+"，则计算规则中所属"+t._s(t.$t("action.agentName"))+"应承担的金额应由平台所出\n            ")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("\n              2)、若有所属"+t._s(t.$t("action.agentName"))+"且该"+t._s(t.$t("action.agentName"))+"在本订单中没有获得任何分成，则"+t._s(t.$t("action.agentName"))+"无需承担\n            ")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("\n              3)、若有所属"+t._s(t.$t("action.agentName"))+"且该"+t._s(t.$t("action.agentName"))+"在本订单中所得分成小于应承担金额，则该"+t._s(t.$t("action.agentName"))+"需将所得分成全部给"+t._s(t.$t("action.brokerName"))+"，因此"+t._s(t.$t("action.brokerName"))+"实际所得金额小于应得金额\n            ")])])]),t._v(" "),a("i",{staticClass:"el-icon-question",staticStyle:{color:"#000"},attrs:{slot:"reference"},slot:"reference"})])],1),t._v(" "),t.$route.meta.pagePermission[0].auth.includes("edit")?a("el-form",{ref:"subForm",staticClass:"config-form",attrs:{model:t.subForm,rules:t.subFormRules,"label-width":"160px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{label:"启用"+t.$t("action.brokerName")+"功能",prop:"broker_status"}},[a("el-radio-group",{model:{value:t.subForm.broker_status,callback:function(e){t.$set(t.subForm,"broker_status",e)},expression:"subForm.broker_status"}},[a("el-radio",{attrs:{label:1}},[t._v(t._s(t.$t("action.ON")))]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v(t._s(t.$t("action.OFF")))])],1),t._v(" "),a("lb-tool-tips",[t._v("选择开启，将启用"+t._s(t.$t("action.brokerName"))+"功能\n        ")])],1),t._v(" "),t.subForm.broker_status?a("block",[a("el-form-item",{attrs:{label:t.$t("action.brokerName")+"申请入口",prop:"broker_apply_port"}},[a("el-radio-group",{model:{value:t.subForm.broker_apply_port,callback:function(e){t.$set(t.subForm,"broker_apply_port",e)},expression:"subForm.broker_apply_port"}},[a("el-radio",{attrs:{label:1}},[t._v(t._s(t.$t("action.ON")))]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v(t._s(t.$t("action.OFF")))])],1),t._v(" "),a("lb-tool-tips",[t._v("选择开启，手机端有申请"+t._s(t.$t("action.brokerName"))+"入口\n            "),a("div",{staticClass:"mt-sm"},[t._v("\n              选择关闭，手机端无申请"+t._s(t.$t("action.brokerName"))+"入口，只能通过后台添加用户成为"+t._s(t.$t("action.brokerName"))+"\n            ")])])],1),t._v(" "),a("el-form-item",{attrs:{label:"菜单自定义名称",prop:"broker_menu_name"}},[a("el-input",{attrs:{maxlength:"5","show-word-limit":"",placeholder:"请输入菜单自定义名称"},model:{value:t.subForm.broker_menu_name,callback:function(e){t.$set(t.subForm,"broker_menu_name",e)},expression:"subForm.broker_menu_name"}}),t._v(" "),a("lb-tool-tips",[t._v("修改名称之后，手机端、管理后台和"+t._s(t.$t("action.agentName"))+"端后台的“"+t._s(t.$t("action.brokerName"))+"”字样都变为新改的文案")])],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("action.brokerName")+"返佣",prop:"broker_cash_type"}},[a("el-radio-group",{model:{value:t.subForm.broker_cash_type,callback:function(e){t.$set(t.subForm,"broker_cash_type",e)},expression:"subForm.broker_cash_type"}},[a("el-radio",{attrs:{label:0}},[t._v("固定返佣")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("浮动比例提成")])],1),t._v(" "),1===t.subForm.broker_cash_type?a("div",{staticClass:"f-caption c-warning",staticStyle:{"line-height":"1.2"}},[t._v("\n            请保存设置后，前往"+t._s(t.$t("action.brokerName"))+"等级页面并添加浮动条件\n          ")]):t._e()],1),t._v(" "),0===t.subForm.broker_cash_type?a("el-form-item",{attrs:{label:"固定返佣比例",prop:"coach_agent_balance"}},[a("el-input",{attrs:{placeholder:"请输入"+t.$t("action.brokerName")+"固定返佣比例"},model:{value:t.subForm.coach_agent_balance,callback:function(e){t.$set(t.subForm,"coach_agent_balance",e)},expression:"subForm.coach_agent_balance"}},[a("template",{slot:"append"},[t._v("%")])],2),t._v(" "),a("lb-tool-tips",[t._v(t._s(t.$t("action.brokerName"))+"邀请用户成为"+t._s(t.$t("action.attendantName"))+"，"+t._s(t.$t("action.attendantName"))+"产生订单后获得的每笔订单佣金")])],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:t.$t("action.attendantName")+"承担",prop:"partner_coach_balance"}},[a("el-input",{attrs:{placeholder:"请输入"+t.$t("action.attendantName")+"承担比例"},model:{value:t.subForm.partner_coach_balance,callback:function(e){t.$set(t.subForm,"partner_coach_balance",e)},expression:"subForm.partner_coach_balance"}},[a("template",{slot:"append"},[t._v("%")])],2),t._v(" "),a("lb-tool-tips",[t._v(t._s(t.$t("action.attendantName"))+"和"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"承担比例总计不能大于100%\n          ")])],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("action.attendantName")+"所属"+t.$t("action.agentName")+"承担",prop:"partner_admin_balance"}},[a("el-input",{attrs:{placeholder:"请输入"+t.$t("action.attendantName")+"所属"+t.$t("action.agentName")+"承担比例"},model:{value:t.subForm.partner_admin_balance,callback:function(e){t.$set(t.subForm,"partner_admin_balance",e)},expression:"subForm.partner_admin_balance"}},[a("template",{slot:"append"},[t._v("%")])],2),t._v(" "),a("lb-tool-tips",[t._v(t._s(t.$t("action.attendantName"))+"和"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"承担比例总计不能大于100%\n          ")])],1),t._v(" "),a("el-form-item",{attrs:{label:"邀请"+t.$t("action.attendantName")+"推广海报背景图",prop:"broker_poster"}},[a("lb-cover",{attrs:{fileList:t.subForm.broker_poster},on:{selectedFiles:function(e){return t.getCover(e,"broker_poster")}}}),t._v(" "),a("lb-tool-tips",[t._v("图片建议尺寸：710 * 1138\n            "),a("div",{staticClass:"mt-sm"},[t._v("\n              由于页面生成的二维码位置是固定的，所以设计海报时注意将中间的二维码位置留出来\n            ")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("\n              海报背景图中不要出现诱导用户分享以及传播外链内容的\n            ")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("\n              包括但不限于：以金钱奖励、实物奖励、虚拟奖品（包括但不限于红包、优惠券、代金券、积分、话费、流量）；声称分享可获得返佣等\n            ")])]),t._v(" "),a("div",[a("lb-button",{attrs:{type:"danger",plain:"",size:"small"},on:{click:function(e){return t.toReset("broker_poster")}}},[t._v(t._s(t.$t("action.defaultSet")))])],1)],1)],1):t._e(),t._v(" "),a("el-form-item",[a("lb-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:t.submitFormInfo}},[t._v(t._s(t.$t("action.submit")))])],1)],1):a("el-form",{ref:"subForm",staticClass:"config-form",attrs:{model:t.subForm,rules:t.subFormRules,"label-width":"180px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{label:"启用"+t.$t("action.brokerName")+"功能：",prop:"broker_status"}},[t._v("\n        "+t._s(1===t.subForm.broker_status?"开启":"关闭")+"\n        "),a("lb-tool-tips",[t._v("选择开启，将启用"+t._s(t.$t("action.brokerName"))+"功能")])],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("action.brokerName")+"申请入口：",prop:"broker_apply_port"}},[t._v("\n        "+t._s(1===t.subForm.broker_apply_port?"开启":"关闭")+"\n        "),a("lb-tool-tips",[t._v("开启之后，手机端有申请"+t._s(t.$t("action.brokerName"))+"入口，关闭之后，手机端无申请入口，只能通过后台添加用户成为"+t._s(t.$t("action.brokerName")))])],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("action.brokerName")+"返佣：",prop:"broker_cash_type"}},[t._v("\n        "+t._s(1===t.subForm.broker_cash_type?"浮动比例提成":"固定返佣")+"\n        "),1===t.subForm.broker_cash_type?a("div",{staticClass:"f-caption c-warning",staticStyle:{"line-height":"1.2"}},[t._v("\n          选择浮动比例提成，需前往"+t._s(t.$t("action.brokerName"))+"等级页面并添加浮动条件\n        ")]):t._e()]),t._v(" "),0===t.subForm.broker_cash_type?a("el-form-item",{attrs:{label:"固定返佣比例：",prop:"coach_agent_balance"}},[t._v("\n        "+t._s(t.subForm.coach_agent_balance)+"%\n        "),a("lb-tool-tips",[t._v(t._s(t.$t("action.brokerName"))+"邀请用户成为"+t._s(t.$t("action.attendantName"))+"，"+t._s(t.$t("action.attendantName"))+"产生订单后获得的每笔订单佣金")])],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:t.$t("action.attendantName")+"承担：",prop:"partner_coach_balance"}},[t._v("\n        "+t._s(t.subForm.partner_coach_balance)+"%\n        "),a("lb-tool-tips",[t._v(t._s(t.$t("action.attendantName"))+"和"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"承担比例总计不能大于100%\n        ")])],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("action.attendantName")+"所属"+t.$t("action.agentName")+"承担：",prop:"partner_admin_balance"}},[t._v("\n        "+t._s(t.subForm.partner_admin_balance)+"%\n        "),a("lb-tool-tips",[t._v(t._s(t.$t("action.attendantName"))+"和"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"承担比例总计不能大于100%\n        ")])],1),t._v(" "),a("el-form-item",{attrs:{label:"邀请"+t.$t("action.attendantName")+"推广海报背景图：",prop:"broker_poster"}},[a("lb-image",{staticStyle:{width:"60px",height:"60px"},attrs:{src:t.subForm.broker_poster[0].url,isLook:!0,title:"邀请技师推广海报背景图",width:"450px"}})],1)],1)],1)],1)},staticRenderFns:[]};var g=a("C7Lr")(d,$,!1,function(t){a("sU7s")},"data-v-00fcf73e",null);e.default=g.exports},sU7s:function(t,e){}});