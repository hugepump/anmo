webpackJsonp([79],{T43p:function(t,e){},euEM:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r("3cXf"),s=r.n(i),o=r("lC5x"),a=r.n(o),n=r("J0Oq"),l=r.n(n),u={data:function(){return{navTitle:"",loading:!0,subForm:{id:"",title:"",show_title:"",rights_icon:[],rights_text:"",top:0,is_admin:0},subFormRules:{title:{required:!0,validator:this.$reg.isNotNull,reg_type:2,text:"权益名称",trigger:"blur"},show_title:{required:!0,validator:this.$reg.isNotNull,reg_type:2,text:"展示名称",trigger:"blur"},rights_icon:{required:!0,type:"array",message:"请上传图片",trigger:"change"},rights_text:{required:!0,validator:this.$reg.isNotNull,reg_type:2,text:"权益说明",trigger:"blur"},top:{required:!0,type:"number",message:"请输入排序值",trigger:"blur"}}}},created:function(){var t=this;return l()(a.a.mark(function e(){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.$route.query.id,t.navTitle=t.$t(r?"menu.CustomMemberRightsEdit":"menu.CustomMemberRightsAdd"),t.subForm.id=r,!r){e.next=6;break}return e.next=6,t.getDetail();case 6:t.loading=!1;case 7:case"end":return e.stop()}},e,t)}))()},methods:{getDetail:function(){var t=this;return l()(a.a.mark(function e(){var r,i,s,o,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.subForm.id,e.next=3,t.$api.member.rightsInfo({id:r});case 3:if(i=e.sent,s=i.code,o=i.data,200===s){e.next=8;break}return e.abrupt("return");case 8:for(n in o.rights_text=null===o.rights_text?"":o.rights_text,t.subForm)t.subForm[n]=o[n];t.subForm.rights_icon=[{url:o.rights_icon}];case 11:case"end":return e.stop()}},e,t)}))()},getCover:function(t){this.subForm.rights_icon=t},submitFormInfo:function(t){var e=this,r=!0;if(this.$refs[t].validate(function(t){t||(r=!1)}),r){var i=JSON.parse(s()(this.subForm)),o=i.id?"rightsUpdate":"rightsAdd";i.rights_icon=i.rights_icon[0].url,delete i.is_admin,this.$api.member[o](i).then(function(t){200===t.code&&(e.$message.success(e.$t(i.id?"tips.successRev":"tips.successSave")),e.$router.back(-1))})}}}},c={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"lb-custom-member-rights-edit"},[r("top-nav",{attrs:{title:t.navTitle,isBack:!0}}),t._v(" "),r("div",{staticClass:"page-main"},[r("el-form",{ref:"subForm",staticClass:"dialog-form c-title",attrs:{model:t.subForm,rules:t.subFormRules,"label-width":"140px"},nativeOn:{submit:function(t){t.preventDefault()}}},[r("el-form-item",{attrs:{label:"权益名称",prop:"title"}},[r("el-input",{attrs:{type:"text",maxlength:"10","show-word-limit":"",placeholder:"请输入权益名称",disabled:t.subForm.is_admin},model:{value:t.subForm.title,callback:function(e){t.$set(t.subForm,"title",e)},expression:"subForm.title"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"展示名称",prop:"show_title"}},[r("el-input",{attrs:{type:"text",maxlength:"8","show-word-limit":"",placeholder:"请输入展示名称"},model:{value:t.subForm.show_title,callback:function(e){t.$set(t.subForm,"show_title",e)},expression:"subForm.show_title"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"权益图标",prop:"rights_icon"}},[r("lb-cover",{attrs:{fileList:t.subForm.rights_icon},on:{selectedFiles:t.getCover}}),t._v(" "),r("lb-tool-tips",[t._v("图片建议尺寸：120 * 120")])],1),t._v(" "),r("el-form-item",{attrs:{label:"权益说明",prop:"rights_text"}},[r("el-input",{attrs:{type:"textarea",rows:10,maxlength:"1000","show-word-limit":"",resize:"none",placeholder:"请输入权益说明"},model:{value:t.subForm.rights_text,callback:function(e){t.$set(t.subForm,"rights_text",e)},expression:"subForm.rights_text"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"服务方式",prop:"type"}},[r("el-input",{attrs:{type:"text",value:1===t.subForm.type?"线下核销":"系统核销",disabled:!0}})],1),t._v(" "),r("el-form-item",{attrs:{label:"排序值",prop:"top"}},[r("el-input-number",{staticClass:"lb-input-number",attrs:{controls:!1,precision:0,min:0,placeholder:"请输入排序值"},model:{value:t.subForm.top,callback:function(e){t.$set(t.subForm,"top",e)},expression:"subForm.top"}}),t._v(" "),r("lb-tool-tips",[t._v("值越大, 排序越靠前")])],1),t._v(" "),r("el-form-item",[r("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:function(e){return t.submitFormInfo("subForm")}}},[t._v(t._s(t.$t("action.submit")))]),t._v(" "),r("lb-button",{on:{click:function(e){return t.$router.back(-1)}}},[t._v(t._s(t.$t("action.back")))])],1)],1)],1)],1)},staticRenderFns:[]};var m=r("C7Lr")(u,c,!1,function(t){r("T43p")},"data-v-7d36cab1",null);e.default=m.exports}});