webpackJsonp([181],{"C9+3":function(t,e){},DFBP:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3cXf"),o=a.n(n),s=a("lC5x"),r=a.n(s),i=a("J0Oq"),c=a.n(i),_={data:function(){return{subForm:{coupon_bear_type:1,coupon_bear_coach:"",coupon_bear_admin:"",agent_coupon_location:0,coupon_get_type:0},subFormRules:{coupon_bear_type:{required:!0,type:"number",message:"请选择",trigger:"blur"},coupon_bear_coach:{required:!0,validator:this.$reg.isDotPercent,text:this.$t("action.attendantName")+"承担比例",trigger:"blur"},coupon_bear_admin:{required:!0,validator:this.$reg.isDotPercent,text:this.$t("action.attendantName")+"所属"+this.$t("action.agentName")+"承担比例",trigger:"blur"},agent_coupon_location:{required:!0,type:"number",message:"请选择",trigger:"change"},coupon_get_type:{required:!0,type:"number",message:"请选择",trigger:"change"}}}},created:function(){this.getFormInfo()},methods:{getFormInfo:function(){var t=this;return c()(r.a.mark(function e(){var a,n,o,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.system.configInfo();case 2:if(a=e.sent,n=a.code,o=a.data,200===n){e.next=7;break}return e.abrupt("return");case 7:for(s in t.subForm)t.subForm[s]=o[s];case 8:case"end":return e.stop()}},e,t)}))()},submitFormInfo:function(){var t=this,e=!0;if(this.$refs.subForm.validate(function(t){t||(e=!1)}),e){var a=JSON.parse(o()(this.subForm));1*a.coupon_bear_coach+1*a.coupon_bear_admin>100?this.$message.error(this.$t("action.attendantName")+"和"+this.$t("action.attendantName")+"所属"+this.$t("action.agentName")+"承担比例总计不能大于100%"):this.$api.system.configUpdate(a).then(function(e){200===e.code&&t.$message.success(t.$t("tips.successSub"))})}}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"lb-market-coupon-set"},[a("top-nav"),t._v(" "),a("div",{staticClass:"page-main"},[a("el-form",{ref:"subForm",staticClass:"submit-form",attrs:{model:t.subForm,rules:t.subFormRules,"label-width":"160px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{label:"卡券抵扣方式",prop:"coupon_bear_type"}},[a("el-radio-group",{model:{value:t.subForm.coupon_bear_type,callback:function(e){t.$set(t.subForm,"coupon_bear_type",e)},expression:"subForm.coupon_bear_type"}},[a("el-radio",{attrs:{label:1}},[t._v("全员分摊")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("接单"+t._s(t.$t("action.attendantName"))+"和对应上级分摊")])],1),t._v(" "),a("lb-tool-tips",[t._v("全员分摊：卡券的运营成本由订单相关的全部人员承担，所有人的提成都是减去优惠金额后，再乘以的对应角色的提成比例。\n          "),a("div",{staticClass:"mt-md"},[t._v("\n            接单"+t._s(t.$t("action.attendantName"))+"和对应上级分摊：卡券的运营成本由接单"+t._s(t.$t("action.attendantName"))+"和对应上级来分摊\n          ")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("\n            例如：原价为200元的服务，20元的优惠券，如果"+t._s(t.$t("action.attendantName"))+"提成比例为50%，"+t._s(t.$t("action.agentName"))+"提成为20%，平台为30%，"+t._s(t.$t("action.attendantName"))+"承担0%，"+t._s(t.$t("action.agentName"))+"承担卡券优惠100%\n          ")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("\n            "+t._s(t.$t("action.attendantName"))+"提成：200*50%=100元\n          ")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("\n            "+t._s(t.$t("action.agentName"))+"提成：200*20%-20*100%=40-20=20元\n          ")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("平台利润：60元")])]),t._v(" "),2===t.subForm.coupon_bear_type?a("div",{staticClass:"c-tips"},[t._v("\n          当"+t._s(t.$t("action.attendantName"))+"承担比例和"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"承担比例小于100%时，剩余部分由平台承担\n        ")]):t._e()],1),t._v(" "),2===t.subForm.coupon_bear_type?a("block",[a("el-form-item",{attrs:{label:t.$t("action.attendantName")+"承担",prop:"coupon_bear_coach"}},[a("el-input",{attrs:{placeholder:"请输入"+t.$t("action.attendantName")+"承担比例"},model:{value:t.subForm.coupon_bear_coach,callback:function(e){t.$set(t.subForm,"coupon_bear_coach",e)},expression:"subForm.coupon_bear_coach"}},[a("template",{slot:"append"},[t._v("%")])],2),t._v(" "),a("lb-tool-tips",[t._v(t._s(t.$t("action.attendantName"))+"和"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"承担比例总计不能大于100%\n          ")])],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("action.attendantName")+"所属"+t.$t("action.agentName")+"承担",prop:"coupon_bear_admin"}},[a("el-input",{attrs:{placeholder:"请输入"+t.$t("action.attendantName")+"所属"+t.$t("action.agentName")+"承担比例"},model:{value:t.subForm.coupon_bear_admin,callback:function(e){t.$set(t.subForm,"coupon_bear_admin",e)},expression:"subForm.coupon_bear_admin"}},[a("template",{slot:"append"},[t._v("%")])],2),t._v(" "),a("lb-tool-tips",[t._v(t._s(t.$t("action.attendantName"))+"和"+t._s(t.$t("action.attendantName"))+"所属"+t._s(t.$t("action.agentName"))+"承担比例总计不能大于100%\n          ")])],1)],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"卡券发放方式",prop:"agent_coupon_location"}},[a("el-radio-group",{model:{value:t.subForm.agent_coupon_location,callback:function(e){t.$set(t.subForm,"agent_coupon_location",e)},expression:"subForm.agent_coupon_location"}},[a("el-radio",{attrs:{label:1}},[t._v("区域发放")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("全平台发放")])],1),t._v(" "),a("lb-tool-tips",[t._v("选择区域发放，"+t._s(t.$t("action.agentName"))+"发放的卡券只会显示在对应区域，该功能会消耗定位请求次数，影响性能\n          "),a("div",{staticClass:"mt-sm"},[t._v("\n            选择全平台发放，"+t._s(t.$t("action.agentName"))+"发放的卡券，全国用户都可以查看领取，不会过度使用定位请求接口次数\n          ")])])],1),t._v(" "),a("el-form-item",{attrs:{label:"用户领取卡券方式",prop:"coupon_get_type"}},[a("el-radio-group",{model:{value:t.subForm.coupon_get_type,callback:function(e){t.$set(t.subForm,"coupon_get_type",e)},expression:"subForm.coupon_get_type"}},[a("el-radio",{attrs:{label:0}},[t._v("手动领取")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("自动到卡包")])],1),t._v(" "),a("lb-tool-tips",[t._v("领取方式的切换只针对卡券派发方式为“用户领取”的类型\n          "),a("div",{staticClass:"mt-sm"},[t._v("\n            选择手动领取，用户授权登录后，若有可领取的卡券，将在首页弹出领取弹窗，用户需要点击领取，卡券才能到用户卡包里\n          ")]),t._v(" "),a("div",{staticClass:"mt-sm"},[t._v("\n            选择自动到卡包，用户授权登录后，若有可领取的卡券，卡券自动到用户卡包，将在首页弹出“卡券已到卡包，前去查看”提醒\n          ")])])],1),t._v(" "),a("el-form-item",[a("lb-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:t.submitFormInfo}},[t._v(t._s(t.$t("action.submit")))])],1)],1)],1)],1)},staticRenderFns:[]};var u=a("C7Lr")(_,m,!1,function(t){a("C9+3")},"data-v-17e4e99f",null);e.default=u.exports}});