webpackJsonp([98],{"TX+L":function(e,r){},oRGl:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("3cXf"),o=t.n(i),l=t("lC5x"),n=t.n(l),m=t("J0Oq"),s=t.n(m),a={data:function(){var e=this,r=function(r,t,i){var o=e.subForm[r.key],l=e.subForm,n=l.reminder_status,m=void 0===n?0:n,s=l.reminder_type,a=l.reminder_public,d=void 0===a?0:a;o=o?o.replace(/(^\s*)|(\s*$)/g,""):"",1!==m||(1!==s||("reminder_phone"!==r.key||0!==d)&&"reminder_phone"===r.key)&&1===s||o?i():i(new Error("请输入"+r.text))};return{subForm:{reminder_status:0,reminder_type:1,reminder_public:0,reminder_tmpl_id:"",order_end_tmpl_id:"",help_tmpl_id:"",reminder_phone:"",reminder_text:"",order_end_tmpl_text:"",help_tmpl_text:"",winnerlook_phone:"",moor_reminder_phone:"",reminder_timing:""},subFormRules:{reminder_status:{required:!0,type:"number",message:"请选择是否开启来电通知",trigger:"blur"},reminder_type:{required:!0,type:"number",message:"请选择语音通知运营商",trigger:"blur"},reminder_public:{required:!0,type:"number",message:"请选择语音通知模式",trigger:"blur"},reminder_tmpl_id:{required:!0,validator:r,key:"reminder_tmpl_id",text:"订单语音通知模板id",trigger:"blur"},reminder_phone:{required:!0,validator:r,key:"reminder_phone",text:"语音通知电话",trigger:"blur"},reminder_text:{required:!0,validator:r,key:"reminder_text",text:"订单语音通知内容",trigger:"blur"},moor_reminder_phone:{required:!0,validator:r,key:"moor_reminder_phone",text:"语音通知电话",trigger:"blur"},winnerlook_phone:{required:!0,validator:r,key:"winnerlook_phone",text:"语音通知电话",trigger:"blur"},reminder_timing:{required:!0,validator:function(r,t,i){1!==e.subForm.reminder_status||/^\+?[0-9]*$/.test(t)?i():i(new Error("请输入语音通知定时任务分钟数"))},trigger:"blur"}}}},created:function(){var e=this;return s()(n.a.mark(function r(){return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.getDetail();case 2:case"end":return r.stop()}},r,e)}))()},methods:{getDetail:function(){var e=this;return s()(n.a.mark(function r(){var t,i,o,l;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$api.system.reminderConfigInfo();case 2:if(t=r.sent,i=t.code,o=t.data,200===i){r.next=7;break}return r.abrupt("return");case 7:for(l in e.subForm)e.subForm[l]=o[l];case 8:case"end":return r.stop()}},r,e)}))()},submitFormInfo:function(e){var r=this,t=!0;if(this.$refs[e].validate(function(e){e||(t=!1)}),t){var i=JSON.parse(o()(this.subForm));this.$api.system.reminderConfigUpdate(i).then(function(e){200===e.code&&r.$message.success(r.$t("tips.successSub"))})}}}},d={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"lb-system-reminder"},[t("top-nav"),e._v(" "),t("div",{staticClass:"page-main"},[t("lb-tips",[t("p",{staticClass:"c-warning"},[e._v("\n        温馨提示：运营商规定，针对同一个“资质+用途“下的主叫进行流控限制，1次/分钟、5次/小时、20次/24小时（流控规则计时是从第一次正常外呼开始计时的）\n      ")]),e._v(" "),t("p",{staticClass:"c-link mt-sm"},[e._v("若被流控，则更改为短信通知")])]),e._v(" "),t("el-form",{ref:"subForm",attrs:{model:e.subForm,rules:e.subFormRules,"label-width":"160px"},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"是否开启来电通知",prop:"reminder_status"}},[t("el-radio-group",{model:{value:e.subForm.reminder_status,callback:function(r){e.$set(e.subForm,"reminder_status",r)},expression:"subForm.reminder_status"}},[t("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("action.ON")))]),e._v(" "),t("el-radio",{attrs:{label:0}},[e._v(e._s(e.$t("action.OFF")))])],1),e._v(" "),t("lb-tool-tips",[e._v("开启后，必须配置语音通知模板id, 用户下单时会电话通知"+e._s(e.$t("action.attendantName")))])],1),e._v(" "),1===e.subForm.reminder_status?t("block",[t("el-form-item",{attrs:{label:"语音通知运营商",prop:"reminder_type"}},[t("el-radio-group",{model:{value:e.subForm.reminder_type,callback:function(r){e.$set(e.subForm,"reminder_type",r)},expression:"subForm.reminder_type"}},[t("el-radio",{attrs:{label:1}},[e._v("阿里云")]),e._v(" "),t("el-radio",{attrs:{label:2}},[e._v("容联七陌")]),e._v(" "),t("el-radio",{attrs:{label:3}},[e._v("云信")])],1)],1),e._v(" "),1===e.subForm.reminder_type?t("block",[t("el-form-item",{attrs:{label:"语音通知模式",prop:"reminder_public"}},[t("el-radio-group",{model:{value:e.subForm.reminder_public,callback:function(r){e.$set(e.subForm,"reminder_public",r)},expression:"subForm.reminder_public"}},[t("el-radio",{attrs:{label:0}},[e._v("专属模式")]),e._v(" "),t("el-radio",{attrs:{label:1}},[e._v("公共模式")])],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"订单语音通知模板id",prop:"reminder_tmpl_id"}},[t("el-input",{attrs:{placeholder:"请输入订单语音通知模板id"},model:{value:e.subForm.reminder_tmpl_id,callback:function(r){e.$set(e.subForm,"reminder_tmpl_id",r)},expression:"subForm.reminder_tmpl_id"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"到钟语音通知模板id",prop:"order_end_tmpl_id"}},[t("el-input",{attrs:{placeholder:"请输入到钟语音通知模板id"},model:{value:e.subForm.order_end_tmpl_id,callback:function(r){e.$set(e.subForm,"order_end_tmpl_id",r)},expression:"subForm.order_end_tmpl_id"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"求救语音通知模板id",prop:"help_tmpl_id"}},[t("el-input",{attrs:{placeholder:"请输入求救语音通知模板id"},model:{value:e.subForm.help_tmpl_id,callback:function(r){e.$set(e.subForm,"help_tmpl_id",r)},expression:"subForm.help_tmpl_id"}})],1),e._v(" "),0===e.subForm.reminder_public?t("el-form-item",{attrs:{label:"语音通知电话",prop:"reminder_phone"}},[t("el-input",{attrs:{placeholder:"请输入语音通知电话"},model:{value:e.subForm.reminder_phone,callback:function(r){e.$set(e.subForm,"reminder_phone",r)},expression:"subForm.reminder_phone"}})],1):e._e()],1):e._e(),e._v(" "),2===e.subForm.reminder_type?t("block",[t("el-form-item",{attrs:{label:"订单语音通知内容",prop:"reminder_text"}},[t("el-input",{attrs:{placeholder:"请输入订单语音通知内容"},model:{value:e.subForm.reminder_text,callback:function(r){e.$set(e.subForm,"reminder_text",r)},expression:"subForm.reminder_text"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"到钟语音通知内容",prop:"order_end_tmpl_text"}},[t("el-input",{attrs:{placeholder:"请输入到钟语音通知内容"},model:{value:e.subForm.order_end_tmpl_text,callback:function(r){e.$set(e.subForm,"order_end_tmpl_text",r)},expression:"subForm.order_end_tmpl_text"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"求救语音通知内容",prop:"help_tmpl_text"}},[t("el-input",{attrs:{placeholder:"请输入求救语音通知内容"},model:{value:e.subForm.help_tmpl_text,callback:function(r){e.$set(e.subForm,"help_tmpl_text",r)},expression:"subForm.help_tmpl_text"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"语音通知电话",prop:"moor_reminder_phone"}},[t("el-input",{attrs:{placeholder:"请输入语音通知电话"},model:{value:e.subForm.moor_reminder_phone,callback:function(r){e.$set(e.subForm,"moor_reminder_phone",r)},expression:"subForm.moor_reminder_phone"}})],1)],1):e._e(),e._v(" "),3===e.subForm.reminder_type?t("block",[t("el-form-item",{attrs:{label:"订单语音通知模板id",prop:"reminder_tmpl_id"}},[t("el-input",{attrs:{placeholder:"请输入订单语音通知模板id"},model:{value:e.subForm.reminder_tmpl_id,callback:function(r){e.$set(e.subForm,"reminder_tmpl_id",r)},expression:"subForm.reminder_tmpl_id"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"到钟语音通知模板id",prop:"order_end_tmpl_id"}},[t("el-input",{attrs:{placeholder:"请输入到钟语音通知模板id"},model:{value:e.subForm.order_end_tmpl_id,callback:function(r){e.$set(e.subForm,"order_end_tmpl_id",r)},expression:"subForm.order_end_tmpl_id"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"求救语音通知模板id",prop:"help_tmpl_id"}},[t("el-input",{attrs:{placeholder:"请输入求救语音通知模板id"},model:{value:e.subForm.help_tmpl_id,callback:function(r){e.$set(e.subForm,"help_tmpl_id",r)},expression:"subForm.help_tmpl_id"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"语音通知电话",prop:"winnerlook_phone"}},[t("el-input",{attrs:{placeholder:"请输入语音通知电话"},model:{value:e.subForm.winnerlook_phone,callback:function(r){e.$set(e.subForm,"winnerlook_phone",r)},expression:"subForm.winnerlook_phone"}})],1)],1):e._e(),e._v(" "),t("el-form-item",{attrs:{label:"语音通知定时任务",prop:"reminder_timing"}},[t("el-input",{attrs:{placeholder:"请输入语音通知定时任务分钟数"},model:{value:e.subForm.reminder_timing,callback:function(r){e.$set(e.subForm,"reminder_timing",r)},expression:"subForm.reminder_timing"}},[t("template",{slot:"append"},[e._v("分钟")])],2),e._v(" "),t("lb-tool-tips",[e._v("填写0就是没有定时任务，仅下单的时候通知一次")])],1)],1):e._e(),e._v(" "),t("el-form-item",[t("lb-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:function(r){return e.submitFormInfo("subForm")}}},[e._v(e._s(e.$t("action.submit")))])],1)],1)],1)],1)},staticRenderFns:[]};var _=t("C7Lr")(a,d,!1,function(e){t("TX+L")},"data-v-5b950c2e",null);r.default=_.exports}});