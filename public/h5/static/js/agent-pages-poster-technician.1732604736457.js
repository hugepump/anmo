(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["agent-pages-poster-technician"],{"3ad8":function(t,e,n){"use strict";var i=n("94e3"),a=n.n(i);a.a},"5cdd":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var i={lPainter:n("9ca4").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"pt-md",style:{background:t.pageColor}},[n("v-uni-view",{staticClass:"hideCanvasView"},[n("l-painter",{ref:"painter",staticClass:"hideCanvas",attrs:{useCORS:!0}})],1),t.src?[n("v-uni-image",{staticClass:"code-img ml-md",attrs:{src:t.src},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewImage.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"space-max-footer"}),n("fix-bottom-button",{attrs:{text:[{text:t.confirmText,type:"confirm"}],bgColor:"#fff",classType:2},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.toPreviewSave.apply(void 0,arguments)}}})]:t._e()],2)},r=[]},"5eb2":function(t,e,n){"use strict";n.r(e);var i=n("d574"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"78cb":function(t,e,n){"use strict";n.r(e);var i=n("5cdd"),a=n("5eb2");for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("3ad8");var o=n("828b"),s=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,"185193d9",null,!1,i["a"],void 0);e["default"]=s.exports},"94e3":function(t,e,n){var i=n("a0ac");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("967d").default;a("fc3b0be4",i,!0,{sourceMap:!1,shadowMode:!1})},a0ac:function(t,e,n){var i=n("c86c");e=i(!1),e.push([t.i,".code-img[data-v-185193d9]{width:%?710?%;height:%?1278?%}",""]),t.exports=e},d574:function(t,e,n){"use strict";n("6a54");var i=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("5de6")),r=i(n("9b1b")),o=i(n("2634")),s=i(n("2fdc")),c=n("8f59"),u={components:{},props:{},data:function(){return{options:{},confirmText:"长按上图保存图片",src:"",admin_id:0,check_admin:{id:0,agent_name:"平台"}}},computed:(0,c.mapState)({configInfo:function(t){return t.config.configInfo},mineInfo:function(t){return t.user.mineInfo}}),onLoad:function(t){var e=this;return(0,s.default)((0,o.default)().mark((function n(){var i,a;return(0,o.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.options=t,e.$util.showLoading(),n.next=4,e.getConfigInfo();case 4:e.$util.setNavigationBarColor({bg:e.primaryColor}),i="邀请绑定"+e.$t("action.attendantName"),uni.setNavigationBarTitle({title:i}),a=e,setTimeout((function(){a.renderToCanvas()}),1e3),e.$jweixin.hideOptionMenu();case 10:case"end":return n.stop()}}),n)})))()},methods:(0,r.default)((0,r.default)({},(0,c.mapActions)(["getConfigInfo"])),{},{initRefresh:function(){this.src="",this.$util.showLoading(),this.renderToCanvas(!0)},renderToCanvas:function(){var t=arguments,e=this;return(0,s.default)((0,o.default)().mark((function n(){var i,a,r,s,c,u,f,d,p;return(0,o.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.length>0&&void 0!==t[0]&&t[0],i=e,a=i.options.type,void 0===a?0:a,n.next=5,e.$api.agent.adminCoachQr();case 5:r=n.sent,s=e.configInfo.bind_technician_img,c=void 0===s?"":s,u=c||"https://lbqny.migugu.com/admin/anmo/mine/inv_coach.png",f=e.$util.getPage(-1).detail.agent_name,d=e.userInfo.avatarUrl,f=f.length>15?f.substring(0,15)+"...":f,"0rpx",p={css:{width:"710rpx",height:"1278rpx"},views:[{type:"image",src:u,css:{width:"710rpx",height:"1138rpx",objectFit:"cover",top:"0rpx",left:"0rpx",position:"absolute"}},{type:"view",css:{background:"#fff",width:"710rpx",height:"140rpx",bottom:"0rpx",left:"0rpx",position:"absolute"},views:[{type:"image",src:d,css:{position:"absolute",width:"94rpx",height:"94rpx",objectFit:"cover",borderRadius:"50rpx",bottom:"23rpx",left:"20rpx"}},{type:"text",text:f,css:{position:"absolute",bottom:"72rpx",left:"130rpx",width:"600rpx",fontSize:"32rpx",fontWeight:"300",color:"#0C0C0C"}},{type:"text",text:"邀请您成为"+e.$t("action.attendantName")+" 快快扫码加盟我们吧!",css:{position:"absolute",bottom:"28rpx",left:"130rpx",width:"600rpx",fontSize:"26rpx",color:"#999999"}}]},{type:"image",src:r,css:{position:"absolute",width:"314rpx",height:"314rpx",top:"588rpx",left:"198rpx",background:"#ffffff",borderRadius:"0rpx"}}]},e.$refs.painter.render(p),e.$refs.painter.canvasToTempFilePathSync({fileType:"jpg",quality:1,success:function(t){i.$util.hideAll(),e.src=t.tempFilePath}});case 15:case"end":return n.stop()}}),n)})))()},previewImage:function(){var t=this.src;this.$util.previewImage({current:t,urls:[t]})},saveImage:function(){var t=this;return(0,s.default)((0,o.default)().mark((function e(){var n,i,r,s;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$util.checkAuth({type:"writePhotosAlbum"});case 2:return n=t.src,e.next=5,uni.saveImageToPhotosAlbum({filePath:n});case 5:if(i=e.sent,r=(0,a.default)(i,2),s=r[0],r[1],!s){e.next=11;break}return e.abrupt("return");case 11:uni.showToast({icon:"none",title:"保存成功"});case 12:case"end":return e.stop()}}),e)})))()},toPreviewSave:function(){this.toConfirmPreviewSave()},toConfirmPreviewSave:function(){this.previewImage()}})};e.default=u}}]);