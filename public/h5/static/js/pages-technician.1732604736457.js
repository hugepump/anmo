(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-technician"],{2435:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"custom-tabbar fix flex-center fill-base b-1px-t"},e._l(e.configInfo.tabBar,(function(t,n){return i("v-uni-view",{key:n,staticClass:"flex-center flex-column mt-sm",style:{width:100/e.configInfo.tabBar.length+"%",color:t.default_img.includes("https://")?"#252324":e.cur==t.id?e.primaryColor:t.selected_img==t.default_img?"#BCCAD9":"#666"},on:{click:function(i){i.stopPropagation(),arguments[0]=i=e.$handleEvent(i),e.changeTab(t)}}},[t.default_img.includes("https://")?i("v-uni-image",{staticClass:"item-img",attrs:{src:e.cur==t.id?t.selected_img:t.default_img}}):i("i",{staticClass:"iconfont",class:e.cur==t.id?t.selected_img:t.default_img}),i("v-uni-view",{staticClass:"text",class:[{"text-bold":e.cur==t.id&&t.default_img.includes("https://")}]},[e._v(e._s(t.name))])],1)})),1)},a=[]},"24e5":function(e,t,i){"use strict";var n=i("71c8"),a=i.n(n);a.a},"334a":function(e,t,i){"use strict";i.r(t);var n=i("2435"),a=i("e724");for(var c in a)["default"].indexOf(c)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(c);i("24e5");var o=i("828b"),r=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"25101552",null,!1,n["a"],void 0);t["default"]=r.exports},"35a0":function(e,t,i){"use strict";i.r(t);var n=i("bc4c"),a=i("fd38");for(var c in a)["default"].indexOf(c)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(c);i("f1cc");var o=i("828b"),r=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"35c08e08",null,!1,n["a"],void 0);t["default"]=r.exports},"3bc3":function(e,t,i){var n=i("c86c");t=n(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.cate-filter-list .filter-item[data-v-35c08e08]{width:25%;height:%?90?%}.cate-filter-list .filter-item .cate-img[data-v-35c08e08]{width:%?170?%;height:%?78?%;top:0;z-index:0}.cate-filter-list .filter-item .cate-text[data-v-35c08e08]{top:%?8?%;height:%?42?%;color:#abadac}.search-popup[data-v-35c08e08]{width:calc(100% - %?164?%);height:100vh}.search-popup .service-cate-scroll[data-v-35c08e08]{width:100%;max-height:35%;overflow:auto}.search-popup .list-item[data-v-35c08e08]{min-width:%?160?%;height:%?70?%;background:#f5f5f5}.search-popup .list-item .icon-guanbi-fill.abs[data-v-35c08e08]{top:%?-15?%;right:0;font-size:%?50?%}.search-popup .list-item[data-v-35c08e08]:nth-child(3n){margin-right:0}.search-popup .search-btn[data-v-35c08e08]{width:%?230?%;height:%?80?%;border:%?1?% solid #c7c7c7;-webkit-transform:rotate(1turn);transform:rotate(1turn)}',""]),e.exports=t},"4a17":function(e,t,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i("2634")),c=n(i("2fdc"));i("64aa");var o=i("8f59"),r={components:{},props:{height:{type:Number,default:function(){return 0}}},data:function(){return{city:"",detail:{}}},mounted:function(){this.initIndex()},computed:(0,o.mapState)({}),methods:{initIndex:function(){var e=this;return(0,c.default)((0,a.default)().mark((function t(){var i,n,c,o,r,s,l,u,f,d;return(0,a.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.location,i.lat,i.lng,n=i.address,c=void 0===n?"":n,/.+?(省|市|自治区|自治州|县|区)/g,o="",!c||"暂未解析到位置信息"==c){t.next=9;break}return t.next=6,e.$util.getCityAddr(c);case 6:r=t.sent,s=r.city,o=s;case 9:if(o){t.next=15;break}return t.next=12,e.$util.getMapAddr(e.location);case 12:l=t.sent,u=l.city,f=void 0===u?"":u,o=f;case 15:if(!o){t.next=24;break}return e.city=o,t.next=19,e.$api.technician.expectationCityCheck({city:o});case 19:d=t.sent,d.id=1,e.detail=d,t.next=25;break;case 24:e.detail={id:1};case 25:case"end":return t.stop()}}),t)})))()},toOpenCity:function(){var e=this;return(0,c.default)((0,a.default)().mark((function t(){var i,n;return(0,a.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.city,t.next=3,e.$api.technician.expectationCity({city:i});case 3:n=e.detail.num,e.detail.num=n+1,e.$util.showToast({title:"投票成功"});case 6:case"end":return t.stop()}}),t)})))()}}};t.default=r},7029:function(e,t,i){var n=i("3bc3");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("967d").default;a("5443d481",n,!0,{sourceMap:!1,shadowMode:!1})},"71c8":function(e,t,i){var n=i("b542");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("967d").default;a("49682afc",n,!0,{sourceMap:!1,shadowMode:!1})},"7c7f":function(e,t,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i("9b1b")),c=n(i("2634")),o=n(i("2fdc"));i("64aa"),i("5c47"),i("8f71"),i("bf0f");var r=i("8f59"),s={components:{},props:{cur:{type:Number,default:function(){return 0}}},data:function(){return{}},computed:(0,r.mapState)({configInfo:function(e){return e.config.configInfo},userPageType:function(e){return e.user.userPageType},activeIndex:function(e){return e.order.activeIndex}}),mounted:function(){var e=this;return(0,o.default)((0,c.default)().mark((function t(){var i,n,a;return(0,c.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=e,n=uni.getSystemInfoSync().windowHeight,a=i.configInfo.navBarHeight,setTimeout((function(){var t=uni.createSelectorQuery().in(i);t.select(".custom-tabbar").boundingClientRect((function(t){var c=n-t.height-a,o=i.$util.deepCopy(e.configInfo);o.curSysHeight=c,o.tabbarHeight=t.height,i.updateConfigItem({key:"configInfo",val:o})})).exec()}),500);case 4:case"end":return t.stop()}}),t)})))()},methods:(0,a.default)((0,a.default)((0,a.default)({},(0,r.mapActions)(["getConfigInfo"])),(0,r.mapMutations)(["updateConfigItem"])),{},{changeTab:function(e){var t=this;return(0,o.default)((0,c.default)().mark((function i(){var n,a,o,r,s,l,u,f,d,p;return(0,c.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.id){i.next=5;break}return i.next=3,t.getConfigInfo();case 3:n=t.configInfo.tabBar.filter((function(t){return t.name==e.name})),e=n[0];case 5:if(a=e,o=a.id,r=t.activeIndex,s=t.cur,l=t.userPageType,u={1:"/pages/service",2:"/pages/technician",3:"/pages/dynamic",4:"/pages/order?tab=".concat(r),5:"/pages/mine?type=".concat(l),6:"/pages/shopstore",7:"/pages/map"},o!=s){i.next=10;break}return i.abrupt("return");case 10:if(f=getCurrentPages(),d=f[f.length-1].loading,p=void 0!==d&&d,5==o||!p){i.next=14;break}return i.abrupt("return");case 14:t.$util.goUrl({url:u[o],openType:"reLaunch"});case 15:case"end":return i.stop()}}),i)})))()}})};t.default=s},"97ae":function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.detail.id?i("v-uni-view",{staticClass:"longbingbing-open-city-item"},[e.city?e._e():i("v-uni-view",{staticStyle:{height:"18vh"}}),i("v-uni-view",{staticClass:"flex-center flex-column mt-lg"},[i("v-uni-image",{staticClass:"no-city-img",attrs:{src:"https://lbqny.migugu.com/admin/anmo/technician/no_city_data.png"}}),i("v-uni-view",{staticClass:"f-desc",staticStyle:{color:"#777"}},[e._v(e._s("当前城市暂未开放"+e.$t("action.attendantName")+"上线~"))])],1),e.city?i("v-uni-view",{staticClass:"city-box ml-lg mr-lg"},[i("v-uni-view",{staticClass:"rel"},[i("v-uni-view",{staticClass:"flex-center"},[i("v-uni-image",{staticClass:"open-city-nav",attrs:{src:"https://lbqny.migugu.com/admin/anmo/technician/open_city_nav.png"}})],1),i("v-uni-view",{staticClass:"open-title abs"},[i("v-uni-view",{staticClass:"flex-center f-title text-bold"},[e._v("开通您城市的业务")])],1)],1),i("span",{staticClass:"f-paragraph",staticStyle:{color:"#777"}},[e._v("若您希望您所在城市尽快开通, 请为当前城市开通投上您宝贵的一票"),i("span",{staticClass:"ml-sm",staticStyle:{color:"#F8958C"}},[e._v("*\n\t\t\t\t每人仅1次机会")])]),i("v-uni-view",{staticClass:"flex-center flex-column",staticStyle:{"margin-top":"66rpx"}},[i("v-uni-view",{staticClass:"user-num"},[e._v(e._s(e.detail.num||0))]),i("v-uni-view",{staticClass:"f-desc"},[e._v("已投票人数")]),i("v-uni-view",{staticClass:"flex-y-baseline f-paragraph c-title mt-md"},[i("i",{staticClass:"iconfont iconjuli1"}),e._v(e._s(e.city))])],1),i("v-uni-view",{staticClass:"flex-center",staticStyle:{"margin-top":"69rpx"}},[i("auth",{staticStyle:{width:"284rpx"},attrs:{needAuth:e.userInfo&&(!e.userInfo.phone||!e.userInfo.nickName),must:!0,type:e.userInfo.phone?"userInfo":"phone"},on:{go:function(t){arguments[0]=t=e.$handleEvent(t),e.toOpenCity.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"city-btn flex-center f-sm-title c-base"},[e._v("期待开通")])],1),e.detail.is_admin?e._e():i("v-uni-view",{staticClass:"city-btn agent flex-center f-sm-title c-base ml-md",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.$util.goUrl({url:"/agent/pages/apply"})}}},[e._v("直接做代理")])],1)],1):e._e(),i("v-uni-view",{staticClass:"space-lg"})],1):e._e()},a=[]},a53d:function(e,t,i){"use strict";i.r(t);var n=i("97ae"),a=i("efd4");for(var c in a)["default"].indexOf(c)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(c);i("a6ea");var o=i("828b"),r=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"6db28b12",null,!1,n["a"],void 0);t["default"]=r.exports},a6ea:function(e,t,i){"use strict";var n=i("ef93"),a=i.n(n);a.a},b542:function(e,t,i){var n=i("c86c");t=n(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.custom-tabbar[data-v-25101552]{height:%?98?%;bottom:0;height:calc(%?98?% + env(safe-area-inset-bottom) / 2);padding-bottom:calc(env(safe-area-inset-bottom) / 2)}.custom-tabbar .item-img[data-v-25101552]{width:%?40?%;height:%?40?%}.custom-tabbar .iconfont[data-v-25101552]{font-size:%?40?%}.custom-tabbar .text[data-v-25101552]{font-size:%?22?%;margin-top:%?5?%;height:%?32?%}',""]),e.exports=t},bc4c:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"pages-technician",style:{background:e.pageColor}},[i("fixed",{attrs:{initHeight:e.configInfo,page:"pages/technician"},on:{height:function(t){arguments[0]=t=e.$handleEvent(t),e.initFixHeight.apply(void 0,arguments)}}},[3!==e.configInfo.coach_format?[i("uni-nav-bar",{attrs:{fixed:!1,shadow:!1,statusBar:!0,onlyLeft:!0,color:"#fff",backgroundColor:e.primaryColor}},[i("v-uni-view",{staticClass:"map-info flex-y-center",attrs:{slot:"left"},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.$util.goUrl({url:"/user/pages/choose/index"})}},slot:"left"},[i("v-uni-view",{staticClass:"flex-y-center c-base"},[i("i",{staticClass:"iconfont iconjuli mr-sm"}),i("v-uni-view",{staticClass:"map-text max-400 ellipsis"},[e.configInfo.user_update_location?[e._v(e._s(e._f("handleAddrText")(e.location)))]:[e._v(e._s(e._f("handleCityText")(e.city_info)))]],2),i("i",{staticClass:"iconfont icon-down"})],1)],1)],1)]:void 0,i("v-uni-view",{staticClass:"fix-info rel",class:[{"fill-base":!e.param.city_id}],style:{background:e.pageColor,height:2==e.configInfo.coach_format&&e.configInfo.coach_filter_show&&1==e.configInfo.coach_career_show?"344rpx":2!=e.configInfo.coach_format||e.configInfo.coach_filter_show||1!=e.configInfo.coach_career_show?e.configInfo.coach_filter_show?2==e.configInfo.coach_format?"234rpx":3==e.configInfo.coach_format?"324rpx":"334rpx":2==e.configInfo.coach_format?"148rpx":3==e.configInfo.coach_format?"324rpx":"248rpx":"258rpx"}},[3!=e.configInfo.coach_format?i("v-uni-view",{staticClass:"space-top abs",style:{background:e.primaryColor}}):e._e(),i("v-uni-view",{staticClass:"abs",staticStyle:{width:"100%",top:"0"}},[i("v-uni-view",{staticClass:"search-info fill-base pt-lg pl-lg pr-lg",class:[{"pb-md":1==e.configInfo.coach_format},{"pb-sm":3==e.configInfo.coach_format}],style:{borderRadius:3==e.configInfo.coach_format?"0rpx":""}},[3==e.configInfo.coach_format?i("v-uni-view",{staticClass:"map-info flex-y-center pb-lg",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.$util.goUrl({url:"/user/pages/choose/index"})}}},[i("v-uni-view",{staticClass:"flex-y-center"},[i("i",{staticClass:"iconfont iconjuli mr-sm",style:{color:e.primaryColor}}),i("v-uni-view",{staticClass:"map-text ellipsis",staticStyle:{"max-width":"600rpx"}},[e.configInfo.user_update_location?[e._v(e._s(e._f("handleAddrText")(e.location)))]:[e._v(e._s(e._f("handleCityText")(e.city_info)))]],2),i("i",{staticClass:"iconfont icon-down"})],1)],1):e._e(),i("v-uni-view",{staticClass:"flex-1",class:[{"pb-md":2!=e.configInfo.coach_format},{"pb-lg":2==e.configInfo.coach_format}]},[i("search",{attrs:{type:"input",keyword:e.param.coach_name,padding:0,radius:30,height:"70rpx",backgroundColor:"#F0F0F0",placeholder:"请输入"+e.$t("action.attendantName")+"姓名"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.toSearch.apply(void 0,arguments)}}})],1),1==e.configInfo.coach_format?[i("tab",{attrs:{list:e.tabList,activeIndex:1*e.activeIndex,activeColor:e.primaryColor,width:"25%",height:"90rpx",fontSize:"28rpx"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.handerTabChange(t,"activeIndex")}}})]:e._e(),2==e.configInfo.coach_format&&1==e.configInfo.coach_career_show?i("v-uni-view",{staticStyle:{height:"110rpx"}},[i("tab",{attrs:{list:e.careerList,activeIndex:1*e.careerIndex,activeColor:e.primaryColor,width:"25%",height:"66rpx",lineClass:"mini",fontSize:"28rpx"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.handerTabChange(t,"careerIndex")}}})],1):e._e(),3==e.configInfo.coach_format?i("v-uni-view",{staticClass:"cate-filter-list flex-warp"},[i("v-uni-view",{staticClass:"filter-item flex-center rel",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toChangeItem("type",0,2)}}},[i("v-uni-image",{staticClass:"cate-img abs",class:[{grayscale:e.param.type||e.check.recommend||e.check.free_fare}],attrs:{src:"https://lbqny.migugu.com/admin/anmo/menu2/all.png"}}),i("v-uni-view",{staticClass:"cate-text flex-center f-desc text-bold rel",style:{color:e.param.type||e.check.recommend||e.check.free_fare?"":"#44A860"}},[e._v("全部")])],1),i("v-uni-view",{staticClass:"filter-item flex-center rel",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toChangeItem("type",1,2)}}},[i("v-uni-image",{staticClass:"cate-img abs",class:[{grayscale:!e.param.type}],attrs:{src:"https://lbqny.migugu.com/admin/anmo/menu2/fuwu.png"}}),i("v-uni-view",{staticClass:"cate-text flex-center f-desc text-bold rel",style:{color:1===e.param.type?"#44A860":""}},[e._v(e._s(e.configInfo.btn_config[0].text))])],1),e.configInfo.plugAuth.recommend?i("v-uni-view",{staticClass:"filter-item flex-center rel",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toChangeItem("recommend",1,2)}}},[i("v-uni-image",{staticClass:"cate-img abs",class:[{grayscale:!e.check.recommend}],attrs:{src:"https://lbqny.migugu.com/admin/anmo/menu2/recommend.png"}}),i("v-uni-view",{staticClass:"cate-text flex-center f-desc text-bold rel",style:{color:e.check.recommend?"#44A860":""}},[e._v(e._s(1==e.app_model_type?"热门":"推荐"))])],1):e._e(),e.configInfo.free_fare_select?i("v-uni-view",{staticClass:"filter-item flex-center rel",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toChangeItem("free_fare",1,2)}}},[i("v-uni-image",{staticClass:"cate-img abs",class:[{grayscale:!e.check.free_fare}],attrs:{src:"https://lbqny.migugu.com/admin/anmo/menu2/car-fee.png"}}),i("v-uni-view",{staticClass:"cate-text flex-center f-desc text-bold rel",style:{color:e.check.free_fare?"#44A860":""}},[e._v("免出行")])],1):e._e()],1):e._e()],2),1==e.configInfo.coach_filter_show?i("v-uni-view",{staticClass:"search-cate-list flex-warp mt-md ml-md mr-md pb-md"},[e.configInfo.plugAuth.recommend?i("v-uni-view",{staticClass:"item-child flex-center f-desc radius-16 mr-lg",style:{background:e.check.recommend?e.primaryColor:"",color:e.check.recommend?"#fff":""},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toChangeItem("recommend",0==e.check.recommend?1:0,1)}}},[i("v-uni-view",{staticClass:"ellipsis"},[e._v(e._s(1==e.app_model_type?"热门":"推荐")+e._s(e.$t("action.attendantName")))])],1):e._e(),e.configInfo.free_fare_select?i("v-uni-view",{staticClass:"item-child flex-center f-desc radius-16 mr-lg",style:{background:e.check.free_fare?e.primaryColor:"",color:e.check.free_fare?"#fff":""},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toChangeItem("free_fare",0==e.check.free_fare?1:0,1)}}},[i("v-uni-view",{staticClass:"ellipsis"},[e._v("免出行费")])],1):e._e(),e._l(e.serviceCateList,(function(t,n){return i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.configInfo.free_fare_select&&e.configInfo.plugAuth.recommend&&n<1||(!e.configInfo.free_fare_select||!e.configInfo.plugAuth.recommend)&&n<2||!e.configInfo.free_fare_select&&!e.configInfo.plugAuth.recommend&&n<3,expression:"((configInfo.free_fare_select && configInfo.plugAuth.recommend && index < 1) || ((!configInfo.free_fare_select || !configInfo.plugAuth.recommend) && index < 2) || (!configInfo.free_fare_select && !configInfo.plugAuth.recommend && index < 3))"}],key:n,staticClass:"item-child flex-center f-desc radius-16 mr-lg",style:{background:e.check.cate_id==t.id?e.primaryColor:"",color:e.check.cate_id==t.id?"#fff":""},on:{click:function(i){i.stopPropagation(),arguments[0]=i=e.$handleEvent(i),e.toChangeItem("cate_id",t.id,1)}}},[i("v-uni-view",{staticClass:"ellipsis"},[e._v(e._s(t.title))])],1)})),i("v-uni-view",{staticClass:"item-child flex-center f-desc radius-16",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toPopup("search_item","open")}}},[e._v("更多筛选")])],2):e._e(),2==e.configInfo.coach_filter_show?i("v-uni-view",{staticClass:"search-cate-list-2 flex-between mt-md ml-md mr-md pb-md"},[i("v-uni-picker",{attrs:{value:e.sortIndex,range:e.sortList,"range-key":"title"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.sortChange(t)}}},[i("v-uni-view",{staticClass:"item-child flex-center f-desc radius-16",style:{background:e.check.recommend?e.primaryColor:"",color:e.check.recommend?"#fff":""}},[i("v-uni-view",{},[e._v(e._s(e.sortList[e.sortIndex].title))]),i("v-uni-view",{staticClass:"flex-center item-child-icon",style:{background:e.check.recommend?"transparent":"#f2f2f2"}},[i("i",{staticClass:"iconfont iconxiangxiazhankai",staticStyle:{"font-size":"9px","margin-top":"1px"}})])],1)],1),i("v-uni-view",{staticClass:"item-child flex-center f-desc radius-16 rel",style:{border:0==e.check.sex?"1px solid "+e.primaryColor:"",color:0==e.check.sex?e.primaryColor:"",background:0==e.check.sex?"#fff":""},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toChangeItem("sex",0==e.check.sex?-1:0,1)}}},[i("v-uni-view",{staticClass:"ellipsis rel",staticStyle:{"z-index":"9"}},[e._v("男生")]),i("v-uni-view",{staticClass:"abs item-child-bg",style:{background:0==e.check.sex?e.primaryColor:""}})],1),i("v-uni-view",{staticClass:"item-child flex-center f-desc radius-16",style:{border:1==e.check.sex?"1px solid "+e.primaryColor:"",color:1==e.check.sex?e.primaryColor:"",background:1==e.check.sex?"#fff":""},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toChangeItem("sex",1==e.check.sex?-1:1,1)}}},[i("v-uni-view",{staticClass:"ellipsis",staticStyle:{"z-index":"9"}},[e._v("女生")]),i("v-uni-view",{staticClass:"abs item-child-bg",style:{background:1==e.check.sex?e.primaryColor:""}})],1),i("v-uni-view",{staticClass:"item-child flex-center f-desc radius-16",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toPopup("search_item","open")}}},[i("i",{staticClass:"iconfont iconshaixuan",staticStyle:{"font-size":"12px"}}),i("v-uni-text",{staticStyle:{"margin-left":"3px"}},[e._v("筛选")])],1)],1):e._e()],1)],1)],2),e.userInfo&&"测试用户 console"==e.userInfo.nickName?i("v-uni-view",{staticClass:"f-caption",staticStyle:{"word-break":"break-all"}},[e._v(e._s(JSON.stringify(e.city_info))+"----"+e._s(JSON.stringify(e.param))+"----"+e._s(JSON.stringify(e.location))+"----"+e._s(e.list.total)+"--"+e._s(e.pageActive))]):e._e(),e.list.data&&e.list.data.length>0?i("v-uni-view",{staticClass:"ml-md mr-md",class:[{"flex-warp":2==e.configInfo.coach_list_format||1==e.configInfo.play_list_format&&2==e.careerList[e.careerIndex].type&&1==e.configInfo.coach_career_show||2==e.configInfo.plugAuth.industrytype}]},e._l(e.list.data,(function(t,n){return i("v-uni-view",{key:n,class:[{"mt-md":2!=e.configInfo.plugAuth.industrytype&&[1,3,4].includes(e.configInfo.coach_list_format)&&(2!=e.careerList[e.careerIndex].type||!e.configInfo.coach_career_show)&&0!=n||(2==e.configInfo.coach_list_format||1==e.configInfo.play_list_format&&2==e.careerList[e.careerIndex].type&&1==e.configInfo.coach_career_show||2===e.configInfo.plugAuth.industrytype)&&n>1},{"mr-md":(2==e.configInfo.coach_list_format||1==e.configInfo.play_list_format&&2==e.careerList[e.careerIndex].type&&1==e.configInfo.coach_career_show||2===e.configInfo.plugAuth.industrytype)&&n%2==0}]},[i("longbingbing-technician-list-item",{attrs:{type:2==e.configInfo.coach_format&&1==e.configInfo.coach_career_show?e.careerList[e.careerIndex].type:0,info:t},on:{comment:function(t){arguments[0]=t=e.$handleEvent(t),e.toShowPopup(n,"message")},collect:function(t){arguments[0]=t=e.$handleEvent(t),e.toCollect(n)},order:function(t){arguments[0]=t=e.$handleEvent(t),e.toShowPopup(n,"technician")}}})],1)})),1):e._e(),e.loading?i("load-more",{attrs:{noMore:e.list.current_page>=e.list.last_page&&e.list.data.length>0&&e.location.lng,loading:e.loading}}):e._e(),!e.loading&&e.list.data.length<=0&&1==e.list.current_page?[e.location.lat&&e.location.lng&&e.param.city_id?i("abnor",{attrs:{image:"https://lbqny.migugu.com/admin/public/no-user.png",percent:"calc("+e.sysheight+"px - 260px - calc(30rpx + env(safe-area-inset-bottom) / 2) - calc(98rpx + env(safe-area-inset-bottom) / 2))",tip:[{text:"暂无"+(e.check.recommend&&e.check.free_fare?1==e.app_model_type?"热门的免出行费":"推荐的免出行费":e.check.recommend?1==e.app_model_type?"热门":"推荐":e.check.free_fare?"免出行费":"")+"人员数据",color:0}]}}):e._e(),e.location.lat||e.location.lng?e._e():[i("abnor",{attrs:{type:"NOT_LOCATION",percent:"calc("+e.sysheight+"px - 260px - calc(30rpx + env(safe-area-inset-bottom) / 2) - calc(98rpx + env(safe-area-inset-bottom) / 2))",title:"暂无人员数据",image:"https://lbqny.migugu.com/admin/public/no-user.png"}})]]:e._e(),!e.loading&&e.list.data.length<=0&&1==e.list.current_page&&(!e.city_info||e.city_info&&!e.city_info.id&&!e.city_info.title)&&e.cityList.length>0&&e.location.lat&&e.location.lng?i("v-uni-view",{staticClass:"fill-base fix",style:{top:e.popupHeight+"px",bottom:e.configInfo.tabbarHeight+"px"}},[i("longbingbing-open-city-item",{ref:"open_city_item",attrs:{height:e.popupHeight}})],1):e._e(),i("v-uni-view",{staticClass:"space-footer"}),i("longbingbing-technician-list-popup",{ref:"technician_list_popup"}),i("uni-popup",{ref:"choose_city_item",attrs:{type:"top",custom:!0,zIndex:999}},[i("v-uni-view",{style:{height:e.configInfo.navBarHeight+8+"px"}}),i("v-uni-view",{staticClass:"choose-city-popup rel"},[i("v-uni-image",{staticClass:"city-img",attrs:{src:"https://lbqny.migugu.com/admin/anmo/technician/no_city.png"}}),i("v-uni-view",{staticClass:"text f-paragraph c-base abs"},[e._v("很抱歉,该城市未开通, 点击左上角切换其他城市下单服务")]),i("v-uni-view",{staticClass:"flex-between"},[i("v-uni-view"),i("v-uni-view",{staticClass:"item-btn flex-center f-paragraph c-title text-bold radius",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.$refs.choose_city_item.close()}}},[e._v("知道了")])],1)],1)],1),i("uni-popup",{ref:"search_item",attrs:{type:"top",left:"164rpx",custom:!0,zIndex:999},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.toChangePopupShow.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"search-popup"},[i("v-uni-view",{style:{height:e.configInfo.navBarHeight+"px"}}),i("v-uni-view",{staticClass:"fill-base pd-lg",style:{height:"calc(100% - "+e.configInfo.navBarHeight+"px)"}},[e.isCareer?[i("v-uni-view",{staticClass:"flex-warp"},e._l(e.careerList,(function(t,n){return i("v-uni-view",{key:n,staticClass:"list-item flex-center mt-md mr-md f-paragraph c-paragraph radius pl-sm pr-sm",style:{background:e.checkCareerIndex==n?e.primaryColor:"",color:e.checkCareerIndex==n?"#fff":""},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toChangeCareer(n)}}},[e._v(e._s(t.title))])})),1)]:[2!==e.configInfo.coach_filter_show?[i("v-uni-view",{staticClass:"f-desc c-title text-bold"},[e._v(e._s(e.$t("action.attendantName"))+"性别")]),i("v-uni-view",{staticClass:"flex-warp"},e._l(e.sexList,(function(t,n){return i("v-uni-view",{key:n,staticClass:"list-item flex-center mt-md mr-md f-paragraph c-paragraph radius",style:{background:e.check.sex==t.id?e.primaryColor:"",color:e.check.sex==t.id?"#fff":""},on:{click:function(i){i.stopPropagation(),arguments[0]=i=e.$handleEvent(i),e.toChangeItem("sex",t.id)}}},[e._v(e._s(t.title))])})),1)]:e._e(),e.serviceCateList&&e.serviceCateList.length>0?[i("v-uni-view",{staticClass:"f-desc c-title text-bold pt-lg mt-md"},[e._v("服务分类")]),i("v-uni-view",{staticClass:"service-cate-scroll"},[i("v-uni-scroll-view",{attrs:{"scroll-y":!0}},[i("v-uni-view",{staticClass:"flex-warp"},e._l(e.serviceCateList,(function(t,n){return i("v-uni-view",{key:n,staticClass:"list-item flex-center mt-md mr-md f-paragraph c-paragraph radius",style:{background:e.check.cate_id==t.id?e.primaryColor:"",color:e.check.cate_id==t.id?"#fff":""},on:{click:function(i){i.stopPropagation(),arguments[0]=i=e.$handleEvent(i),e.toChangeItem("cate_id",t.id)}}},[e._v(e._s(t.title))])})),1)],1)],1)]:e._e(),e.configInfo.plugAuth.store?[i("v-uni-view",{staticClass:"f-desc c-title text-bold pt-lg mt-md"},[e._v("服务类型")]),i("v-uni-view",{staticClass:"flex-warp"},e._l(e.serviceTypeList,(function(t,n){return i("v-uni-view",{key:n,staticClass:"list-item flex-center mt-md mr-md f-paragraph c-paragraph radius",style:{background:e.check.service_type==t.id?e.primaryColor:"",color:e.check.service_type==t.id?"#fff":""},on:{click:function(i){i.stopPropagation(),arguments[0]=i=e.$handleEvent(i),e.toChangeItem("service_type",t.id)}}},[e._v(e._s(t.title))])})),1),i("v-uni-view",{staticClass:"f-desc c-title text-bold pt-lg mt-md"},[e._v("个性筛选")]),i("v-uni-input",{staticClass:"list-item text-center mt-md f-paragraph c-paragraph radius",staticStyle:{width:"100%"},attrs:{type:"text",placeholder:"请输入店铺名称","adjust-position":!1},model:{value:e.check.store_name,callback:function(t){e.$set(e.check,"store_name",t)},expression:"check.store_name"}}),e._e()]:e._e()],i("v-uni-view",{staticStyle:{height:"60rpx"}}),i("v-uni-view",{staticClass:"flex-center"},[i("v-uni-view",{staticClass:"search-btn flex-center f-mini-title c-title radius",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toReset.apply(void 0,arguments)}}},[e._v("重置")]),i("v-uni-view",{staticClass:"search-btn flex-center ml-lg f-mini-title c-base radius",style:{background:e.primaryColor,borderColor:e.primaryColor},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toConfirm.apply(void 0,arguments)}}},[e._v("确定")])],1)],2)],1)],1),i("v-uni-view",{style:{height:e.configInfo.tabbarHeight+"px"}}),i("longbingbing-tabbar",{attrs:{cur:2}}),i("longbingbing-change-user-type")],2)},a=[]},e259:function(e,t,i){var n=i("c86c");t=n(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.longbingbing-open-city-item[data-v-6db28b12]{width:100%;height:100%;overflow:auto}.longbingbing-open-city-item .no-city-img[data-v-6db28b12]{width:%?348?%;height:%?234?%}.longbingbing-open-city-item .city-box[data-v-6db28b12]{width:%?690?%;height:%?650?%;padding:0 %?48?%;margin-top:%?90?%;background:linear-gradient(180deg,#fff8d7,#fff);box-shadow:%?0?% %?20?% %?50?% %?0?% rgba(211,218,213,.46);border-radius:%?32?%}.longbingbing-open-city-item .city-box .open-city-nav[data-v-6db28b12]{width:%?522?%;height:%?110?%}.longbingbing-open-city-item .city-box .open-title[data-v-6db28b12]{top:0;width:100%;color:#765518}.longbingbing-open-city-item .city-box .open-title .f-title[data-v-6db28b12]{height:%?82?%}.longbingbing-open-city-item .city-box .user-num[data-v-6db28b12]{font-size:%?70?%;color:#44a860;line-height:%?76?%}.longbingbing-open-city-item .city-box .f-desc[data-v-6db28b12]{color:#44a860}.longbingbing-open-city-item .city-box .iconjuli1[data-v-6db28b12]{font-size:%?28?%;margin-right:%?5?%}.longbingbing-open-city-item .city-box .city-btn[data-v-6db28b12]{width:%?284?%;height:%?100?%;background:#f68510;box-shadow:%?0?% %?20?% %?50?% %?0?% rgba(211,218,213,.46);border-radius:%?50?%}.longbingbing-open-city-item .city-box .city-btn.agent[data-v-6db28b12]{background:#44a860;box-shadow:%?0?% %?20?% %?50?% %?0?% rgba(211,218,213,.46)}',""]),e.exports=t},e6eb:function(e,t,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("bf0f"),i("18f7"),i("de6c"),i("bd06"),i("c223"),i("4100");var a=n(i("39d8")),c=n(i("9b1b")),o=n(i("2634")),r=n(i("2fdc")),s=i("8f59"),l=n(i("c57d")),u=n(i("334a")),f=n(i("4c72")),d=n(i("9cb1")),p=n(i("a53d")),h={components:{longbingbingTabbar:u.default,longbingbingTechnicianListItem:f.default,longbingbingTechnicianListPopup:d.default,longbingbingOpenCityItem:p.default},data:function(){return{isLoad:!1,options:{},navTitle:"",popupHeight:"",maxHeight:"37vh",loading:!0,lockTap:!1,appMethod:"",isCareer:!1}},computed:(0,s.mapState)({pageActive:function(e){return e.technician.pageActive},haveOperItem:function(e){return e.technician.haveOperItem},cityList:function(e){return e.technician.cityList},activeIndex:function(e){return e.technician.activeIndex},tabList:function(e){return e.technician.tabList},sexList:function(e){return e.technician.sexList},serviceCateList:function(e){return e.technician.serviceCateList},serviceTypeList:function(e){return e.technician.serviceTypeList},check:function(e){return e.technician.check},param:function(e){return e.technician.param},list:function(e){return e.technician.list},configInfo:function(e){return e.config.configInfo},sysheight:function(e){return e.config.sysheight},loginType:function(e){return e.user.loginType},isGzhLogin:function(e){return e.user.isGzhLogin},haveShieldOper:function(e){return e.user.haveShieldOper},sortList:function(e){return e.technician.sortList},sortIndex:function(e){return e.technician.sortIndex},careerIndex:function(e){return e.technician.careerIndex},careerList:function(e){return e.technician.careerList},checkCareerIndex:function(e){return e.technician.checkCareerIndex}}),onLoad:function(e){var t=this;return(0,r.default)((0,o.default)().mark((function i(){var n,a,c,r,s,l,u,f,d;return(0,o.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(console.log("====onLoad technician"),n=e.pid,a=void 0===n?0:n,e.pid=1*a,t.options=e,c=t.list.data,r=void 0===c?[]:c,s=0==r.length||!t.param.city_id,l=t.configInfo.realtime_location,u=void 0===l?0:l,f=t.pageActive,d=t.changeAddr,!f||u||d||a||s){i.next=14;break}return t.isLoad=!0,t.loading=!1,t.$util.hideAll(),t.initNavTitle(),i.abrupt("return");case 14:return i.next=16,t.initIndex();case 16:t.initNavTitle();case 17:case"end":return i.stop()}}),i)})))()},onShow:function(){var e=this;return(0,r.default)((0,o.default)().mark((function t(){var i,n,a,c,r,s,l;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.initNavTitle(e.appShare?0:1),!e.location.lat&&e.locaRefuse&&e.toResetUtilLoca(),i=e.userCoachStatus,n=i.status,a=void 0===n?0:n,c=i.coach_position,r=void 0===c?0:c,s=e.configInfo.realtime_location,l=void 0===s?0:s,2==e.haveShieldOper||e.haveOperItem?(e.initIndex(),e.updateUserItem({key:"haveShieldOper",val:0}),e.updateTechnicianItem({key:"haveOperItem",val:!1})):e.pageActive&&!l&&r&&2==a&&e.$util.getCoachUtilLoca();case 5:case"end":return t.stop()}}),t)})))()},onPullDownRefresh:function(){uni.showNavigationBarLoading(),this.configInfo.realtime_location&&this.updateUserItem({key:"changeAddr",val:!1}),this.initRefresh(),uni.stopPullDownRefresh()},onReachBottom:function(){this.list.current_page>=this.list.last_page||this.loading||(this.loading=!0,this.getList(this.param.page+1))},onShareAppMessage:function(e){var t=this.userInfo.id,i=void 0===t?0:t,n="/pages/technician?pid=".concat(i);return this.$util.log(n),{title:"",imageUrl:"",path:n}},watch:{locaRefuse:function(e,t){e||this.toResetUtilLoca()}},methods:(0,c.default)((0,c.default)((0,c.default)({},(0,s.mapActions)(["getConfigInfo","getUserInfo","getServiceCate","getCityList","getServiceCoachList","addScanRecord","updateScanRecord","getIndustryType"])),(0,s.mapMutations)(["updateUserItem","updateServiceItem","updateTechnicianItem","updateMapItem","updateDynamicItem","updateShopstoreItem"])),{},{initIndex:function(){var e=arguments,t=this;return(0,r.default)((0,o.default)().mark((function i(){var n,a,c,r,s,l;return(0,o.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=e.length>0&&void 0!==e[0]&&e[0],a=t.options.pid,c=void 0===a?0:a,r=t.scanRecordId,r=t.$util.getQueryString("code"),c&&!r&&t.addScanRecord({type:2,qr_id:c,is_qr:0}),s=t.userInfo.id,l=void 0===s?0:s,!c||r||l){i.next=9;break}return i.next=9,t.getUserInfo();case 9:if(!c||r||t.userInfo.id){i.next=11;break}return i.abrupt("return");case 11:if(t.configInfo.id&&!n){i.next=14;break}return i.next=14,t.getConfigInfo();case 14:return i.next=16,Promise.all([t.getIndustryType(),t.getServiceCate()]);case 16:t.updateTechnicianItem({key:"pageActive",val:!0}),t.isNotLoca();case 18:case"end":return i.stop()}}),i)})))()},initRefresh:function(){var e=this;return(0,r.default)((0,o.default)().mark((function t(){return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.param.page=1,t.next=3,e.initIndex(!0);case 3:case"end":return t.stop()}}),t)})))()},initNavTitle:function(){var e=arguments,t=this;return(0,r.default)((0,o.default)().mark((function i(){var n,a,c,r;return(0,o.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:n=e.length>0&&void 0!==e[0]?e[0]:0,a=t.configInfo.tabBar,a&&a.length>0&&(c=a.findIndex((function(e){return 2==e.id})),r=a[c].name,t.navTitle=r,uni.setNavigationBarTitle({title:r}),t.scanRecordId&&t.updateScanRecord(),n||(t.$jweixin.initJssdk((function(){t.toAppShare()})),t.updateUserItem({key:"appShare",val:!1})));case 3:case"end":return i.stop()}}),i)})))()},toResetUtilLoca:function(){return(0,r.default)((0,o.default)().mark((function e(){return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},toConfirmAppCheckAuth:function(){var e=this.appMethod;this[e]()},toOpenLocation:function(){var e=this;return(0,r.default)((0,o.default)().mark((function t(){return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.toConfirmOpenLoca();case 1:case"end":return t.stop()}}),t)})))()},toConfirmOpenLoca:function(){var e=this;return(0,r.default)((0,o.default)().mark((function t(){return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.initIndex();case 1:case"end":return t.stop()}}),t)})))()},toAppShare:function(){var e=this.userInfo.id,t=void 0===e?0:e,i=this.navTitle;1==i.split("列表").length&&(i+="列表");var n=l.default.siteroot,a=n.split("/index.php")[0],c="".concat(a,"/h5/#/pages/technician?pid=").concat(t),o=this.configInfo.app_logo,r=o||"";this.$jweixin.showOptionMenu(),this.$jweixin.shareAppMessage(i,"",c,r),this.$jweixin.shareTimelineMessage(i,c,r)},initFixHeight:function(e){this.popupHeight=e},sortChange:function(e){var t=e.target.value;this.updateTechnicianItem({key:"sortIndex",val:t}),this.getList(1)},toSearch:function(e){var t=this.$util.deepCopy(this.param);t.coach_name=e,this.updateTechnicianItem({key:"param",val:t}),this.getList(1)},toChooseLocation:function(){var e=arguments,t=this;return(0,r.default)((0,o.default)().mark((function i(){var n;return(0,o.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:0,t.updateUserItem({key:"changeAddr",val:!0}),t.$refs.open_city_item&&(t.$refs.open_city_item.city=""),i.next=5,t.getList(1,1==n);case 5:case"end":return i.stop()}}),i)})))()},isNotLoca:function(){var e=this;return(0,r.default)((0,o.default)().mark((function t(){var i,n,a,c,r,s,l,u,f;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.location,e.locaRefuse,n=e.changeAddr,a=e.configInfo.realtime_location,c=void 0===a?0:a,r=e.userCoachStatus,s=r.status,l=void 0===s?0:s,u=r.coach_position,f=void 0===u?0:u,f&&2==l&&i.lat&&"暂未获取到位置信息"!=i.address&&!c&&e.updateUserItem({key:"isChangeCoachLoca",val:!0}),!(!i.lat||i.lat&&"暂未获取到位置信息"==i.address||c&&!n)){t.next=7;break}return t.next=7,e.$util.getUtilLocation();case 7:e.initUtilLocaData();case 8:case"end":return t.stop()}}),t)})))()},getUtilLocation:function(){var e=this;return(0,r.default)((0,o.default)().mark((function t(){return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$util.getUtilLocation();case 2:e.initUtilLocaData();case 3:case"end":return t.stop()}}),t)})))()},initUtilLocaData:function(){var e=this;return(0,r.default)((0,o.default)().mark((function t(){var i,n,a,c,r,s,l,u,f,d,p,h,g,v,m,_,x,y,b;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.param.city_id,n=void 0===i?0:i,a=e.city_info.id,c=void 0===a?0:a,r=e.$util.deepCopy(e.param),r.city_id=n||c,e.updateTechnicianItem({key:"param",val:r}),t.next=7,e.getList(1,!e.param.city_id||!e.changeAddr);case 7:s=e.location,l=s.lat,u=void 0===l?0:l,f=s.lng,d=void 0===f?0:f,p=s.is_util_loca,h=void 0===p?0:p,g=s.isIp,v=void 0===g||g,m=e.configInfo.realtime_location,_=void 0===m?0:m,x=e.changeAddr,y=e.param.city_id,b=void 0===y?0:y,u&&d&&b&&(h||_&&!x)&&e.$util.getMapInfo(v,!0,{},x);case 12:case"end":return t.stop()}}),t)})))()},handerTabChange:function(e,t){this.updateTechnicianItem({key:[t],val:e}),"careerIndex"==t&&this.updateTechnicianItem({key:"checkCareerIndex",val:e}),uni.pageScrollTo({scrollTop:0}),this.list.data=[],this.getList(1)},getList:function(){var e=arguments,t=this;return(0,r.default)((0,o.default)().mark((function i(){var n,a,c,r,s,l,u,f,d,p,h,g,v,m,_,x,y,b,w,C,I,k,$,L,T,S,A,P,O,E,U;return(0,o.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=e.length>0&&void 0!==e[0]?e[0]:0,a=e.length>1&&void 0!==e[1]&&e[1],n&&(c=t.$util.deepCopy(t.param),c.page=n,t.updateTechnicianItem({key:"param",val:c})),t.loading=!0,r=t.location,s=r.lat,l=void 0===s?0:s,u=r.lng,f=void 0===u?0:u,d=r.is_util_loca,p=void 0===d?0:d,h=r.isIp,g=void 0===h||h,!a&&0!=t.cityList.length){i.next=8;break}return i.next=8,t.getCityList({lat:l,lng:f,change:a?1:t.param.city_id?0:1});case 8:if(v=t.configInfo.realtime_location,m=void 0===v?0:v,_=t.changeAddr,t.list,x=t.activeIndex,y=t.tabList,b=t.cityList,w=t.careerIndex,C=t.careerList,I=t.sortList,k=t.sortIndex,$=t.$util.deepCopy(t.param),L=b.findIndex((function(e){return e.id==$.city_id})),console.log(L,"===cityIndex"),-1!=L){i.next=21;break}return l&&f&&(p||m&&!_)&&t.$util.getMapInfo(g,!0,{},_,!0),t.$refs.open_city_item&&t.$refs.open_city_item.initIndex(),t.loading=!1,t.$util.hideAll(),t.updateTechnicianItem({key:"list",val:{data:[],last_page:1,current_page:1}}),i.abrupt("return");case 21:return T=t.configInfo,S=T.coach_format,A=void 0===S?1:S,P=T.coach_filter_show,O=void 0===P?0:P,E=T.coach_career_show,U=void 0===E?0:E,T.plugAuth,$=Object.assign({},$,t.check,{lat:l,lng:f}),1==A&&($.type=y[x].id),2==A&&1==U&&($.industry_type=C[w].id),2==O&&($.sort=I[k].id),O?(-1===$.sex&&delete $.sex,0===$.recommend&&delete $.recommend,0===$.cate_id&&delete $.cate_id,0===$.service_type&&delete $.service_type):(delete $.sex,delete $.cate_id,delete $.service_type,delete $.store_name,2===A&&(delete $.recommend,delete $.free_fare)),i.next=29,t.getServiceCoachList($);case 29:t.loading=!1,t.$util.hideAll();case 31:case"end":return i.stop()}}),i)})))()},toChangeCareer:function(e){this.updateTechnicianItem({key:"checkCareerIndex",val:e})},toChangeItem:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if("type"==e)this.updateTechnicianItem({key:"param",val:Object.assign({},this.param,{type:t})}),2==i&&this.updateTechnicianItem({key:"check",val:Object.assign({},this.check,{recommend:0,free_fare:0})});else{"cate_id"===e&&this.check[e]==t&&(t=0);var n=Object.assign({},this.check,(0,a.default)({},e,t));2==i&&(this.updateTechnicianItem({key:"param",val:Object.assign({},this.param,{type:0})}),"recommend"===e&&(n.free_fare=0),"free_fare"===e&&(n.recommend=0)),this.updateTechnicianItem({key:"check",val:n})}i&&this.toConfirm(0)},toPopup:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.isCareer=i,this.$refs[e][t](),this.popupTap="open"===t},toChangePopupShow:function(e){var t=e.show;t||this.updateTechnicianItem({key:"check",val:this.$util.pick(this.param,["sex","cate_id","recommend","service_type","store_name","free_fare"])})},toReset:function(){if(this.isCareer)this.updateTechnicianItem({key:"checkCareerIndex",val:0}),this.updateTechnicianItem({key:"careerIndex",val:0});else{var e=-1;if(2==this.configInfo.coach_filter_show){var t=this.$util.deepCopy(this.check);e=t.sex}this.updateTechnicianItem({key:"check",val:{sex:e,cate_id:0,recommend:0,free_fare:0,service_type:0,store_name:""}})}this.toConfirm()},toConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isCareer&&this.updateTechnicianItem({key:"careerIndex",val:this.checkCareerIndex});var t=Object.assign({},this.param,this.check);this.updateTechnicianItem({key:"param",val:t}),uni.pageScrollTo({scrollTop:0}),this.getList(1),e&&(this.maxHeight="37vh",this.$refs.search_item.close(),this.popupTap=!1)},toShowPopup:function(e,t){var i=this;return(0,r.default)((0,o.default)().mark((function n(){return(0,o.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:i.$refs.technician_list_popup.toShowPopup(i.list.data[e],t);case 1:case"end":return n.stop()}}),n)})))()},toCollect:function(e){var t=this;return(0,r.default)((0,o.default)().mark((function i(){var n,a,c,r,s;return(0,o.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=t.list.data[e],a=n.id,c=n.is_collect,r=n.collect_num,s=c?"delCollect":"addCollect",i.next=4,t.$api.mine[s]({coach_id:a});case 4:t.$util.showToast({title:c?"取消成功":"收藏成功"}),t.list.data[e].is_collect=1==c?0:1,t.list.data[e].collect_num=1==c?r-1:r+1;case 7:case"end":return i.stop()}}),i)})))()}}),filters:{handleAddrText:function(e){var t="定位中...";if(e&&e.lat){var i=e.address,n=void 0===i?"":i,a=e.address_info,c=void 0===a?"":a;if(n||c){if(!c){var o=n.split(" ");c=o[o.length-1]}t=c}}return t},handleCityText:function(e){var t="未知城市";return e&&e.title&&(t=e.title),t}}};t.default=h},e724:function(e,t,i){"use strict";i.r(t);var n=i("7c7f"),a=i.n(n);for(var c in n)["default"].indexOf(c)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(c);t["default"]=a.a},ef93:function(e,t,i){var n=i("e259");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("967d").default;a("7c07c43c",n,!0,{sourceMap:!1,shadowMode:!1})},efd4:function(e,t,i){"use strict";i.r(t);var n=i("4a17"),a=i.n(n);for(var c in n)["default"].indexOf(c)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(c);t["default"]=a.a},f1cc:function(e,t,i){"use strict";var n=i("7029"),a=i.n(n);a.a},fd38:function(e,t,i){"use strict";i.r(t);var n=i("e6eb"),a=i.n(n);for(var c in n)["default"].indexOf(c)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(c);t["default"]=a.a}}]);