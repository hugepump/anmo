(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user-pages-salesman-channel"],{1435:function(t,e,a){"use strict";a.r(e);var n=a("1d09"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},"1d09":function(t,e,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("c223"),a("5c47"),a("0506");var i=n(a("2634")),s=n(a("2fdc")),l=n(a("9b1b")),c=a("8f59"),o={components:{},data:function(){return{isLoad:!1,options:{},param:{page:1},list:{data:[]},loading:!0,lockTap:!1,popupInfo:{},balance:""}},computed:(0,c.mapState)({}),onLoad:function(t){this.options=t,uni.setNavigationBarTitle({title:"我的"+this.$t("action.channelName")}),this.initIndex()},onPullDownRefresh:function(){uni.showNavigationBarLoading(),this.initRefresh(),uni.stopPullDownRefresh()},onReachBottom:function(){this.list.current_page>=this.list.last_page||this.loading||(this.param.page=this.param.page+1,this.loading=!0,this.getList())},methods:(0,l.default)((0,l.default)({},(0,c.mapMutations)(["updateUserItem","updateOrderItem"])),{},{initIndex:function(){var t=arguments,e=this;return(0,s.default)((0,i.default)().mark((function a(){var n;return(0,i.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t.length>0&&void 0!==t[0]&&t[0],e.$util.setNavigationBarColor({bg:e.primaryColor}),a.next=4,e.getList();case 4:e.isLoad=!0,n||e.$jweixin.hideOptionMenu();case 6:case"end":return a.stop()}}),a)})))()},initRefresh:function(){this.param.page=1,this.initIndex(!0)},getList:function(){var t=this;return(0,s.default)((0,i.default)().mark((function e(){var a,n,s;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.list,n=t.param,e.next=3,t.$api.salesman.salesmanChannelCash(n);case 3:s=e.sent,1==t.param.page||(s.data=a.data.concat(s.data)),t.list=s,t.loading=!1,t.$util.hideAll();case 7:case"end":return e.stop()}}),e)})))()},toChangeItem:function(t,e){var a=this.list.data[t],n=a.id,i=a.user_name,s=a.avatarUrl,l=a.balance;s=s||"https://lbqny.migugu.com/admin/farm/default-user.png",this.balance=l,this.popupInfo={id:n,name:"".concat(this.$t("action.channelName"),"：").concat(i),image:s,index:t,refs_key:e},this.$refs[e].open()},confirmChangeItem:function(){var t=this;return(0,s.default)((0,i.default)().mark((function e(){var a,n,s,l,c,o,r,u,d,p,f;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.popupInfo,n=a.id,a.index,s=a.refs_key,l=t.balance,c=t.$util.getPage(-1).detail.balance,o=void 0===c?0:c,r=/^(([0-9][0-9]*)|(([0]\.\d{1,2}|[1-9][0-9]*\.\d{1,2})))$/,"balance_item"!=s||""!=l&&r.test(1*l)&&!(1*l>1*o)){e.next=7;break}return t.$util.showToast({title:"请输入提成比例，支持2位小数，最大不超过".concat(o,"%")}),e.abrupt("return");case 7:return u={unfriend_item:["unfriendChannel","解除成功",{channel_id:n}],balance_item:["setSalesmanBalance","设置成功",{channel_id:n,balance:l}]},d=u[s][0],p=u[s][1],f=u[s][2],e.next=13,t.$api.salesman[d](f);case 13:t.$util.showToast({title:p}),t.initRefresh(),t.$refs[s].close();case 16:case"end":return e.stop()}}),e)})))()}})};e.default=o},"21fc":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isLoad?a("v-uni-view",{staticClass:"user-salesman-channel",staticStyle:{"padding-top":"1rpx"},style:{background:t.pageColor}},[t._l(t.list.data,(function(e,n){return a("v-uni-view",{key:n,staticClass:"list-item fill-base mt-md ml-md mr-md pd-lg radius-16"},[a("v-uni-view",{staticClass:"flex-warp pb-lg b-1px-b"},[a("v-uni-image",{staticClass:"cover radius",attrs:{src:e.avatarUrl||"https://lbqny.migugu.com/admin/farm/default-user.png"}}),a("v-uni-view",{staticClass:"flex-1",staticStyle:{"margin-left":"24rpx"}},[a("v-uni-view",{staticClass:"f-mini-title c-title text-bold ellipsis",staticStyle:{"max-width":"490rpx"}},[t._v(t._s(e.user_name))]),a("v-uni-view",{staticClass:"flex-between mt-sm"},[a("v-uni-view",{staticClass:"f-desc c-paragraph"},[t._v("累计项目金额")]),a("v-uni-view",{staticClass:"f-title c-warning text-bold"},[t._v("¥"+t._s(e.order_price))])],1),a("v-uni-view",{staticClass:"flex-between mt-sm"},[a("v-uni-view",{staticClass:"f-desc c-paragraph"},[t._v("累计"+t._s(t.$t("action.materialText")))]),a("v-uni-view",{staticClass:"f-title c-title text-bold"},[t._v("¥"+t._s(e.material_price))])],1)],1)],1),a("v-uni-view",{staticClass:"flex-between pt-lg"},[a("v-uni-view",{staticClass:"f-desc c-paragraph"},[a("v-uni-view",{staticClass:"flex-y-center"},[t._v("累计佣金："),a("v-uni-view",{staticClass:"f-caption c-title text-bold"},[t._v("¥"+t._s(e.salesman_cash))])],1),a("v-uni-view",{staticClass:"flex-y-center mt-sm"},[t._v("佣金比例："),a("v-uni-view",{staticClass:"f-caption c-title text-bold"},[t._v(t._s(e.balance)+"%")])],1)],1),a("v-uni-view",{staticClass:"flex-warp f-caption"},[a("v-uni-view",{staticClass:"flex-center flex-column",staticStyle:{color:"#FF361B"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toChangeItem(n,"unfriend_item")}}},[a("i",{staticClass:"iconfont iconjiechuguanxi1"}),t._v("解除关系")]),2==t.list.salesman_channel_fx_type?a("v-uni-view",{staticClass:"flex-center flex-column",staticStyle:{"margin-left":"50rpx"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toChangeItem(n,"balance_item")}}},[a("i",{staticClass:"iconfont iconbianji1"}),t._v("编辑")]):t._e()],1)],1)],1)})),t.loading?a("load-more",{attrs:{noMore:t.list.current_page>=t.list.last_page&&t.list.data.length>0,loading:t.loading}}):t._e(),!t.loading&&t.list.data.length<=0&&1==t.list.current_page?a("abnor",{attrs:{isCenter:!0,type:"USER"}}):t._e(),a("v-uni-view",{staticClass:"space-footer"}),a("common-popup",{ref:"unfriend_item",attrs:{type:"UNFRIEND_CHANNEL",info:t.popupInfo},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmChangeItem.apply(void 0,arguments)}}}),a("uni-popup",{ref:"balance_item",attrs:{type:"center",custom:!0}},[a("v-uni-view",{staticClass:"common-popup-content fill-base pd-lg radius-34"},[a("v-uni-view",{staticClass:"title"},[t._v("设置提成比例")]),a("v-uni-view",{staticClass:"space-md"}),a("v-uni-view",{staticClass:"flex-warp mt-md c-title",staticStyle:{width:"100%"}},[t._v(t._s(t.popupInfo.name))]),a("v-uni-input",{staticClass:"item-input f-mini-title mt-lg pl-lg pr-lg c-title",attrs:{type:"digit",placeholder:"请输入提成比例"},model:{value:t.balance,callback:function(e){t.balance=e},expression:"balance"}}),a("v-uni-view",{staticClass:"button"},[a("v-uni-view",{staticClass:"item-child",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.$refs.balance_item.close()}}},[t._v("取消")]),a("v-uni-view",{staticClass:"item-child c-base",style:{background:t.primaryColor,color:"#fff"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.confirmChangeItem.apply(void 0,arguments)}}},[t._v("确定")])],1)],1)],1)],2):t._e()},i=[]},"469a":function(t,e,a){var n=a("5900");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("967d").default;i("0c2b4f0c",n,!0,{sourceMap:!1,shadowMode:!1})},5900:function(t,e,a){var n=a("c86c");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.user-salesman-channel .list-item[data-v-5ba649dc]{box-shadow:0 2 16px 2px rgba(153,165,156,.05)}.user-salesman-channel .list-item .cover[data-v-5ba649dc]{width:%?132?%;height:%?132?%}.user-salesman-channel .list-item .iconfont[data-v-5ba649dc]{font-size:%?40?%;margin-bottom:%?5?%}.user-salesman-channel .common-popup-content .item-input[data-v-5ba649dc]{width:%?450?%;height:%?78?%;border-radius:%?10?%;border:%?1?% solid #eee}',""]),t.exports=e},"98dd":function(t,e,a){"use strict";var n=a("469a"),i=a.n(n);i.a},be74:function(t,e,a){"use strict";a.r(e);var n=a("21fc"),i=a("1435");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);a("98dd");var l=a("828b"),c=Object(l["a"])(i["default"],n["b"],n["c"],!1,null,"5ba649dc",null,!1,n["a"],void 0);e["default"]=c.exports}}]);