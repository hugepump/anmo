(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["agent-pages-order-change"],{"0458":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.order-pages .iconshaixuanxia-1[data-v-dae0492e]{font-size:%?20?%;-webkit-transform:scale(.6);transform:scale(.6)}.order-pages .popup-transfer-type[data-v-dae0492e]{width:100%;height:%?234?%}.order-pages .list-item .icon-xuanze[data-v-dae0492e],\n.order-pages .list-item .icon-radio-fill[data-v-dae0492e]{font-size:%?38?%;color:#bec3ce}.order-pages .list-item .avatar[data-v-dae0492e]{width:%?124?%;height:%?124?%}.order-pages .list-item .can-service-btn[data-v-dae0492e]{height:%?32?%;padding:0 %?6?% 0 %?6?%}.order-pages .list-item .can-service-btn .bg[data-v-dae0492e]{opacity:.1;border-radius:%?5?%;top:0;left:0;right:0;bottom:0;z-index:1}.order-pages .item-input[data-v-dae0492e]{height:%?110?%;background:#f9faf9}.order-pages .item-textarea[data-v-dae0492e]{width:%?630?%;height:%?300?%;background:#f9faf9}.order-pages .icongengduo[data-v-dae0492e]{color:#5a677e;font-size:%?20?%}',""]),t.exports=e},5721:function(t,e,a){"use strict";a.r(e);var i=a("c896"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"6dfc":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isLoad?a("v-uni-view",{staticClass:"order-pages",style:{background:t.pageColor}},[a("fixed",{attrs:{initHeight:t.transferForm.coach_type},on:{height:function(e){arguments[0]=e=t.$handleEvent(e),t.initFixHeight.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"fill-base pd-lg"},[a("v-uni-view",{staticClass:"flex-between"},[a("v-uni-view",{staticClass:"flex-y-center c-title",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.$refs.tips_item.open()}}},[a("v-uni-view",{staticClass:"f-title text-bold"},[t._v("转派订单")]),a("i",{staticClass:"iconfont iconwentifankui3 ml-sm"})],1),a("v-uni-view",{staticClass:"flex-center"},t._l(t.tabList,(function(e,i){return a("v-uni-view",{key:i,staticClass:"flex-center service-type-item c-caption",class:[{"ml-lg":0!=i}],style:{background:t.transferForm.coach_type==e.id?t.primaryColor:"",color:t.transferForm.coach_type==e.id?"#fff":""},on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.toChangeItem("coach_type",e.id)}}},[t._v(t._s(e.title))])})),1)],1),1==t.transferForm.coach_type?a("v-uni-view",{staticClass:"fill-base flex-center mt-lg pt-lg b-1px-t"},[a("v-uni-view",{staticClass:"flex-1"},[a("search",{attrs:{type:"input",padding:0,radius:30,height:"70rpx",placeholder:t.placeholder},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.toSearch.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"flex-y-center pl-lg",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.$refs.show_transfer_item.open()}}},[t._v("筛选"),a("i",{staticClass:"iconfont iconshaixuanxia-1 c-caption"})])],1):t._e()],1)],1),1==t.transferForm.coach_type?[t._l(t.list.data,(function(e,i){return a("v-uni-view",{key:i,staticClass:"list-item fill-base pt-lg pb-lg pl-md pr-lg flex-warp mt-md ml-md mr-md radius-16",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toChangeItem("coach_id",i)}}},[a("v-uni-view",{staticClass:"flex-center mr-md",staticStyle:{height:"124rpx"}},[a("i",{staticClass:"iconfont",class:[{"icon-xuanze":t.transferForm.coach_id!=e.id},{"icon-radio-fill":t.transferForm.coach_id==e.id}],style:{color:t.transferForm.coach_id==e.id?t.primaryColor:""}})]),a("v-uni-view",{staticClass:"flex-1 flex-warp"},[a("v-uni-image",{staticClass:"avatar radius",attrs:{mode:"aspectFill",src:e.work_img}}),a("v-uni-view",{staticClass:"flex-1 ml-md"},[a("v-uni-view",{staticClass:"flex-between"},[a("v-uni-view",{staticClass:"f-title c-title text-bold max-200 ellipsis"},[t._v(t._s(e.coach_name))]),a("v-uni-view",{staticClass:"can-service-btn flex-center f-icontext rel",style:{color:t.primaryColor}},[a("v-uni-view",{staticClass:"bg abs",style:{background:t.primaryColor}}),t._v("最早可约："+t._s(e.near_time))],1)],1),a("v-uni-view",{staticClass:"f-desc",staticStyle:{color:"#4D4D4D"}},[t._v("所属代理商："+t._s(e.admin_id?e.admin_info.username:"平台")),e.admin_id?[t._v("（"+t._s(t.cityType[e.admin_info.city_type])+"代理）")]:t._e()],2),a("v-uni-view",{staticClass:"f-caption c-caption mt-sm"},[t._v("电话："+t._s(e.mobile))]),a("v-uni-view",{staticClass:"flex-between mt-md"},[a("v-uni-view",{staticClass:"f-paragraph",staticStyle:{color:"#F1381F"}},[t._v("¥"+t._s(e.price||0))]),a("v-uni-view",{staticClass:"flex-y-center f-caption c-caption "},[a("i",{staticClass:"iconfont iconjuli1"}),t._v(t._s(e.distance))])],1)],1)],1)],1)})),t.loading?a("load-more",{attrs:{noMore:t.list.current_page>=t.list.last_page&&t.list.data.length>0,loading:t.loading}}):t._e(),!t.loading&&t.list.data.length<=0&&1==t.list.current_page?a("abnor"):t._e()]:t._e(),2==t.transferForm.coach_type?[a("v-uni-view",{staticClass:"pd-lg f-mini-title c-title fill-base b-1px-t"},[a("v-uni-view",{staticClass:"text-bold flex-y-center pb-lg"},[a("i",{staticClass:"iconfont icon-required c-warning"}),t._v(t._s(t.$t("action.attendantName"))+"姓名")]),a("v-uni-input",{staticClass:"item-input pl-lg pr-lg radius-16",attrs:{type:"text",maxlength:"15",placeholder:t.rule[0].errorMsg,"placeholder-class":"color:#C7C7C7"},model:{value:t.transferForm.coach_name,callback:function(e){t.$set(t.transferForm,"coach_name",e)},expression:"transferForm.coach_name"}}),a("v-uni-view",{staticClass:"text-bold flex-y-center pt-lg pb-lg"},[a("i",{staticClass:"iconfont icon-required c-warning"}),t._v("联系电话")]),a("v-uni-input",{staticClass:"item-input pl-lg pr-lg radius-16",attrs:{type:"text",maxlength:"11",placeholder:t.rule[1].errorMsg,"placeholder-class":"color:#C7C7C7"},model:{value:t.transferForm.mobile,callback:function(e){t.$set(t.transferForm,"mobile",e)},expression:"transferForm.mobile"}}),a("v-uni-view",{staticClass:"text-bold pt-lg pb-lg"},[t._v("转派备注")]),a("v-uni-textarea",{staticClass:"item-textarea pd-lg radius-16",attrs:{"placeholder-class":"color:#C7C7C7",maxlength:"400",placeholder:"若订单有其他特殊情况可单独备注在此处"},model:{value:t.transferForm.text,callback:function(e){t.$set(t.transferForm,"text",e)},expression:"transferForm.text"}}),a("v-uni-view",{staticClass:"flex-between pt-lg pb-lg",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toChooseAgent.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"text-bold"},[t._v("关联代理商")]),a("v-uni-view",{staticClass:"flex-y-center",class:[{"c-caption":!t.transferForm.admin_id}]},[a("v-uni-view",{staticClass:"max-400 ellipsis"},[t._v(t._s(t._f("handleAdminName")(t.transferForm.admin_id,t.base_agent)))]),a("i",{staticClass:"iconfont icongengduo"})],1)],1)],1),a("v-uni-view",{staticClass:"flex-center f-caption c-caption pt-lg"},[t._v("不关联代理商则默认是平台的"+t._s(t.$t("action.attendantName")))])]:t._e(),a("v-uni-view",{staticClass:"space-max-footer"}),a("fix-bottom-button",{attrs:{text:[{text:"确定",type:"confirm"}],bgColor:"#fff"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.toConfirm.apply(void 0,arguments)}}}),a("uni-popup",{ref:"tips_item",attrs:{type:"center",custom:!0}},[a("v-uni-view",{staticClass:"common-popup-content fill-base pd-lg radius-34"},[a("v-uni-view",{staticClass:"title"},[t._v("温馨提示")]),a("v-uni-view",{staticClass:"f-desc c-title mt-lg"},[a("v-uni-view",{staticClass:"mt-sm flex-1"},[t._v("1、本单用户实际支付服务项目费用"),a("span",{staticClass:"c-warning"},[t._v("¥"+t._s(t.init_service_price))]),t._v("，因平台/代理商可在服务管理里面为每位"+t._s(t.$t("action.attendantName"))+"设置不同的服务价格，因此存在服务项目费用有偏差，转派订单前需联系"+t._s(t.$t("action.attendantName"))+"说明此单实际服务项目费用情况")]),a("v-uni-view",{staticClass:"mt-sm flex-1"},[t._v("2、转派给线下"+t._s(t.$t("action.attendantName"))+"的服务提成按照系统内最低比例核算，加钟订单遵循加钟比例设置提现")])],1),a("v-uni-view",{staticClass:"button"},[a("v-uni-view",{staticClass:"item-child",style:{background:t.primaryColor,color:"#fff"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.$refs.tips_item.close()}}},[t._v("知道了")])],1)],1)],1),a("uni-popup",{ref:"show_transfer_item",attrs:{type:"top",top:t.popupHeight+"px",custom:!0}},[a("v-uni-view",{staticClass:"popup-transfer-type pd-lg fill-base"},t._l(t.transfreTypeList,(function(e,i){return a("v-uni-view",{key:i,staticClass:"f-paragraph mb-lg",class:[{"mt-lg":0==i}],style:{color:t.param.type==e.id?t.primaryColor:""},on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.toChangeItem("type",e.id)}}},[t._v(t._s(e.title))])})),1)],1),a("uni-popup",{ref:"choose_item",attrs:{type:"bottom",custom:!0}},[a("v-uni-view",{staticClass:"common-popup-content fill-base",staticStyle:{width:"100%","border-radius":"34rpx 34rpx 0 0"},on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e)}}},[a("v-uni-view",{staticClass:"flex-center f-title c-title text-bold pb-lg"},[t._v("选择代理商")]),a("v-uni-scroll-view",{staticStyle:{width:"100%","max-height":"50vh"},attrs:{"scroll-y":!0}},t._l(t.base_agent,(function(e,i){return a("v-uni-view",{key:i,staticClass:"flex-center pt-sm pb-sm",style:{color:t.chooseInd==i?t.primaryColor:""},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toChangeItem("chooseInd",i)}}},[a("v-uni-view",{staticClass:"f-title flex-1 pr-lg"},[t._v(t._s(e.agent_name))]),a("i",{staticClass:"iconfont c-caption",class:[{"icon-xuanze":t.chooseInd!=i},{"icon-radio-fill":t.chooseInd==i}],staticStyle:{"font-size":"40rpx"},style:{color:t.chooseInd==i?t.primaryColor:""}})],1)})),1),a("v-uni-view",{staticClass:"button"},[a("v-uni-view",{staticClass:"item-child",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.$refs.choose_item.close()}}},[t._v("取消")]),a("v-uni-view",{staticClass:"item-child",style:{background:t.primaryColor,color:"#fff"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toConfirmCheck.apply(void 0,arguments)}}},[t._v("确定")])],1),a("v-uni-view",{staticClass:"space-safe"})],1)],1)],2):t._e()},n=[]},"7cde":function(t,e,a){"use strict";var i=a("f1bd"),n=a.n(i);n.a},c896:function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("bf0f"),a("18f7"),a("de6c"),a("aa9c"),a("4626"),a("c223"),a("bd06"),a("fd3c"),a("8f71");var n=i(a("2634")),s=i(a("2fdc")),o=i(a("9b1b")),r=a("8f59"),c={components:{},data:function(){return{isLoad:!1,options:{},placeholder:"请输入"+this.$t("action.attendantName")+"姓名",tabList:[],transfreTypeList:[{id:1,title:"距离最近"},{id:2,title:"最早可预约"}],cityType:["","城市","区县","省"],param:{page:1,coach_name:"",type:1},list:{data:[]},loading:!0,index:-1,lockTap:!1,popupHeight:"",popupInfo:{},base_agent:[],chooseInd:-1,init_service_price:"",transferForm:{order_id:"",coach_type:1,coach_id:"",coach_name:"",near_time:"",mobile:"",text:"",admin_id:""},rule:[{name:"coach_name",checkType:"isNotNull",errorMsg:"请输入线下"+this.$t("action.attendantName")+"姓名",regType:2},{name:"mobile",checkType:"isMobile",errorMsg:"请输入联系电话"}]}},computed:(0,r.mapState)({configInfo:function(t){return t.config.configInfo}}),onLoad:function(t){var e=t.id,a=t.agent,i=void 0===a?0:a;t.agent=1*i,this.options=t,this.transferForm.order_id=e,this.initIndex()},onPullDownRefresh:function(){uni.showNavigationBarLoading(),this.initRefresh(),uni.stopPullDownRefresh()},onReachBottom:function(){this.list.current_page>=this.list.last_page||this.loading||(this.param.page=this.param.page+1,this.loading=!0,this.getList())},methods:(0,o.default)((0,o.default)((0,o.default)({},(0,r.mapActions)(["getConfigInfo"])),(0,r.mapMutations)(["updateTechnicianItem"])),{},{initIndex:function(){var t=arguments,e=this;return(0,s.default)((0,n.default)().mark((function a(){var i;return(0,n.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=t.length>0&&void 0!==t[0]&&t[0],e.configInfo.id&&!i){a.next=4;break}return a.next=4,e.getConfigInfo();case 4:return a.next=6,Promise.all([e.getBaseInfo(),e.getDetail(),e.getList()]);case 6:e.isLoad=!0,e.$util.setNavigationBarColor({bg:e.primaryColor}),i||e.$jweixin.hideOptionMenu();case 9:case"end":return a.stop()}}),a)})))()},initRefresh:function(){this.param.page=1,this.initIndex(!0)},getBaseInfo:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a,i,s;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.options.agent,i=void 0===a?0:a,s=i?"agent":"admin",e.next=4,t.$api[s].adminSelect({agent_coach_auth:1});case 4:t.base_agent=e.sent;case 5:case"end":return e.stop()}}),e)})))()},getDetail:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a,i,s,o,r,c,l,d,u,p,f,v,h;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.options,i=a.id,s=a.agent,o=s?"agent":"admin",e.next=4,t.$api[o].orderInfo({id:i});case 4:r=e.sent,c=r.true_service_price,l=r.pay_type,d=r.admin_id,void 0===d?0:d,u=r.order_auth,p=void 0===u?0:u,f=r.delegated_coach,v=void 0===f?0:f,h=[{id:1,title:"更换"+t.$t("action.attendantName")}],v&&h.push({id:2,title:"委派"+t.$t("action.attendantName")}),t.tabList=h,t.init_service_price=c,[2,3,4,5,6,8].includes(l)&&p||(t.$util.showToast({title:"当前订单不支持转单哦"}),t.updateTechnicianItem({key:"haveOperItem",val:!0}),setTimeout((function(){t.$util.back(),t.$util.getPage(-1).detail&&t.$util.getPage(-2).initRefresh(),t.$util.goUrl({url:1,openType:"navigateBack"})}),2e3));case 18:case"end":return e.stop()}}),e)})))()},toSearch:function(t){this.param.page=1,this.param.coach_name=t,this.transferForm.coach_id="",this.getList()},getList:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a,i,s,o,r,c,l,d;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.list,i=t.param,s=t.options,o=s.id,r=s.agent,c=void 0===r?0:r,i.order_id=o,l=c?"agent":"admin",e.next=6,t.$api[l].orderChangeCoachList(i);case 6:d=e.sent,1==t.param.page||(d.data=a.data.concat(d.data)),t.list=d,t.loading=!1,t.$util.hideAll();case 10:case"end":return e.stop()}}),e)})))()},initFixHeight:function(t){this.popupHeight=t},toChangeItem:function(t,e){switch(t){case"type":this.transferForm.coach_id="",this.param[t]=e,this.param.page=1,this.getList(),this.$refs.show_transfer_item.close();break;case"coach_type":var a=Object.assign({},this.transferForm,{coach_type:e,coach_id:"",coach_name:"",near_time:"",mobile:"",text:"",admin_id:""});this.transferForm=a;break;case"coach_id":var i=this.list.data[e],n=i.id,s=i.near_time;this.transferForm[t]=n,this.transferForm.near_time=s;break;case"chooseInd":this[t]=e;break}},toChooseAgent:function(){var t=this.transferForm.admin_id,e=void 0===t?0:t,a=this.base_agent.findIndex((function(t){return t.id==e}));this.chooseInd=a,this.$refs.choose_item.open()},toConfirmCheck:function(){var t=this.base_agent[this.chooseInd].id;this.transferForm.admin_id=t,this.$refs.choose_item.close()},validate:function(t){var e=new this.$util.Validate;this.rule.map((function(a){var i=a.name;e.add(t[i],a)}));var a=e.start();return a},toConfirm:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a,i,s,o,r,c,l,d;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.$util.deepCopy(t.transferForm),i=a.coach_type,s=void 0===i?1:i,o=a.coach_id,r=void 0===o?0:o,1!==s){e.next=12;break}if(r){e.next=6;break}return t.$util.showToast({title:"请选择"+t.$t("action.attendantName")}),e.abrupt("return");case 6:delete a.coach_name,delete a.mobile,delete a.text,delete a.admin_id,e.next=18;break;case 12:if(a.coach_id=0,c=t.validate(a),!c){e.next=17;break}return t.$util.showToast({title:c}),e.abrupt("return");case 17:delete a.near_time;case 18:if(delete a.coach_type,a.text=a.text?a.text.substring(0,400):"",!t.lockTap){e.next=22;break}return e.abrupt("return");case 22:return t.lockTap=!0,l=t.options.agent,d=l?"agent":"admin",e.prev=25,e.next=28,t.$api[d].orderChangeCoach(a);case 28:t.$util.showToast({title:"操作成功"}),t.$util.hideAll(),t.updateTechnicianItem({key:"haveOperItem",val:!0}),t.lockTap=!1,t.$util.back(),t.$util.goUrl({url:1,openType:"navigateBack"}),e.next=40;break;case 36:return e.prev=36,e.t0=e["catch"](25),setTimeout((function(){t.lockTap=!1,t.$util.hideAll()}),2e3),e.abrupt("return");case 40:case"end":return e.stop()}}),e,null,[[25,36]])})))()},goDetail:function(t){var e=this.list.data[t].id,a=this.options.agent,i="/agent/pages/order/detail?id=".concat(e,"&agent=").concat(a);this.$util.goUrl({url:i})}}),filters:{handleAdminName:function(t,e){var a="请选择代理商";if(t){var i=e.filter((function(e){return e.id==t}));a=i[0].agent_name}return a}}};e.default=c},e30e:function(t,e,a){"use strict";a.r(e);var i=a("6dfc"),n=a("5721");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("7cde");var o=a("828b"),r=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"dae0492e",null,!1,i["a"],void 0);e["default"]=r.exports},f1bd:function(t,e,a){var i=a("0458");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("2309b668",i,!0,{sourceMap:!1,shadowMode:!1})}}]);