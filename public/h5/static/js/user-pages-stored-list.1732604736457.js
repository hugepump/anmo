(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user-pages-stored-list"],{"09ac":function(t,e,i){var a=i("c86c");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.user-stored-list .stored-bg[data-v-0f4fb86e]{width:100%;height:%?163?%;border-radius:0 0 %?20?% %?20?%;top:0}.user-stored-list .record-info .money[data-v-0f4fb86e]{font-size:%?44?%}.user-stored-list .record-info .record-list .list-item[data-v-0f4fb86e]{width:33.33%}.user-stored-list .store-list .list-item[data-v-0f4fb86e]{width:%?305?%}.user-stored-list .pay-item .item-icon[data-v-0f4fb86e]{width:%?70?%;height:%?70?%;border-radius:%?35?%}.user-stored-list .pay-item .item-icon .iconfont[data-v-0f4fb86e]{font-size:%?44?%}.user-stored-list .pay-item .item-icon.wechat[data-v-0f4fb86e]{background:#e7f9ee}.user-stored-list .pay-item .item-icon.wechat .iconfont[data-v-0f4fb86e]{background-image:linear-gradient(180deg,#90ee90,#32cd32 100%,#19c865 0)}.user-stored-list .pay-item .item-icon.alipay[data-v-0f4fb86e]{background:#e9f5fe}.user-stored-list .pay-item .item-icon.alipay .iconfont[data-v-0f4fb86e]{background-image:linear-gradient(180deg,#46bcff,#2587ff 100%,#1976ff 0)}.user-stored-list .pay-item .item-title[data-v-0f4fb86e]{color:#2e3541}.user-stored-list .pay-btn[data-v-0f4fb86e]{width:%?283?%;height:%?90?%}.user-stored-list .popup-share .list-item[data-v-0f4fb86e]{width:50%}.user-stored-list .popup-share .list-item .item-image[data-v-0f4fb86e]{width:%?66?%;height:%?66?%}',""]),t.exports=e},"2f15":function(t,e,i){"use strict";var a=i("bf2d"),n=i.n(a);n.a},"4d39":function(t,e,i){"use strict";i.r(e);var a=i("f2f7"),n=i("996f");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("2f15");var o=i("828b"),c=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"0f4fb86e",null,!1,a["a"],void 0);e["default"]=c.exports},"996f":function(t,e,i){"use strict";i.r(e);var a=i("f06f"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},bf2d:function(t,e,i){var a=i("09ac");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("967d").default;n("6e0e2cbc",a,!0,{sourceMap:!1,shadowMode:!1})},f06f:function(t,e,i){"use strict";i("6a54");var a=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("c223"),i("bf0f"),i("18f7"),i("de6c"),i("aa9c"),i("d4b5");var n=a(i("9b1b")),s=a(i("2634")),o=a(i("2fdc")),c=i("8f59"),r=a(i("c57d")),l={components:{},data:function(){return{options:{},color:"#ffffff",payList:[{id:1,icon:"icon-weixin",title:"微信支付"}],payInd:0,chooseInd:0,qr_code:"",imageUrl:"https://lbqny.migugu.com/admin/anmo/mine/balance-wechat-share.png",coach_info:{},param:{page:1,limit:10},list:{data:[]},loading:!0,lockTap:!1,shareInd:0}},computed:(0,c.mapState)({configInfo:function(t){return t.config.configInfo},mineInfo:function(t){return t.user.mineInfo},isGzhLogin:function(t){return t.user.isGzhLogin}}),onLoad:function(t){var e=this;return(0,o.default)((0,s.default)().mark((function i(){var a,n,o,c,r;return(0,s.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.$util.showLoading(),a=t.id,void 0===a?0:a,n=t.pid,o=void 0===n?0:n,c=t.coach_id,r=void 0===c?0:c,t.pid=1*o,t.coach_id=1*r,e.options=t,i.next=7,e.initIndex();case 7:e.scanRecordId&&e.updateScanRecord();case 8:case"end":return i.stop()}}),i)})))()},onPullDownRefresh:function(){uni.showNavigationBarLoading(),this.initRefresh(),uni.stopPullDownRefresh()},onReachBottom:function(){this.list.current_page>=this.list.last_page||this.loading||(this.param.page=this.param.page+1,this.loading=!0,this.getList())},onShareAppMessage:function(t){if("button"===t.from){var e=this.imageUrl,i=this.list.data[0],a=i.id,n=i.title,s=this.userInfo.id,o=void 0===s?0:s,c=this.mineInfo.coach_id,r="/user/pages/stored/list?id=".concat(a,"&pid=").concat(o,"&coach_id=").concat(c);return this.$util.log(r),this.$refs.show_share_item.close(),{title:n,imageUrl:e,path:r}}},methods:(0,n.default)((0,n.default)((0,n.default)({},(0,c.mapActions)(["getConfigInfo","getUserInfo","getMineInfo","addScanRecord","updateScanRecord"])),(0,c.mapMutations)(["updateOrderItem","updateUserItem"])),{},{initIndex:function(){var t=arguments,e=this;return(0,o.default)((0,s.default)().mark((function i(){var a,n,o,c,r,l,u,d,f,p,v;return(0,s.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a=t.length>0&&void 0!==t[0]&&t[0],n=e.options,o=n.pid,c=void 0===o?0:o,r=n.coach_id,l=void 0===r?0:r,u=e.scanRecordId,u=e.$util.getQueryString("code"),l&&!u&&e.addScanRecord({type:7,qr_id:l,is_qr:c?0:1}),!c||l||u||e.addScanRecord({type:2,qr_id:c,is_qr:0}),d=e.userInfo.id,f=void 0===d?0:d,!(!e.configInfo.id||a||c&&u&&!f)){i.next=10;break}return i.next=10,e.getConfigInfo();case 10:if(!c||u||f){i.next=13;break}return i.next=13,e.getUserInfo();case 13:if(!c||u||e.userInfo.id){i.next=15;break}return i.abrupt("return");case 15:return i.next=17,Promise.all([e.getMineInfo(),e.getList()]);case 17:p=e.configInfo.alipay_status,v=void 0===p?0:p,v&&1==e.payList.length&&e.payList.push({id:3,icon:"icon-alipay-fill",title:"支付宝支付"}),e.$util.setNavigationBarColor({bg:e.primaryColor}),e.$jweixin.initJssdk((function(){e.toAppShare()}));case 21:case"end":return i.stop()}}),i)})))()},initRefresh:function(){this.chooseInd=0,this.param.page=1,this.initIndex(!0)},getList:function(){var t=this;return(0,o.default)((0,s.default)().mark((function e(){var i,a,n,o,c,r,l;return(0,s.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.list,a=t.param,n=t.options.coach_id,o=void 0===n?0:n,a.coach_id=o,e.next=5,t.$api.mine.cardList(a);case 5:c=e.sent,o&&(r=c.coach_name,l=void 0===r?"":r,t.coach_info={id:o,coach_name:l}),1==t.param.page||(c.data=i.data.concat(c.data)),t.list=c,t.loading=!1,t.$util.hideAll(),0==t.list.data.length&&(t.chooseInd=-1);case 11:case"end":return e.stop()}}),e)})))()},toChangeItem:function(t,e){this[t]=e,this.lockTap=!1},toPay:function(){var t=this;return(0,o.default)((0,s.default)().mark((function e(){var i,a,n,o,c,r,l,u,d,f,p,v;return(0,s.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.chooseInd,a=t.payInd,n=t.list.data[i],o=n.id,n.true_price,c=t.coach_info.id,r=void 0===c?0:c,l=t.payList[a].id,u={card_id:o,coach_id:r,pay_model:l},3!=l){e.next=12;break}return d=t.autograph,f="?autograph=".concat(d,"&id=").concat(o,"&coach=").concat(r,"&aliptype=2"),t.updateOrderItem({key:"alipayOrderParams",val:{order_id:"",page_url:"/user/pages/stored/list?paysuc=1",alipay_params:f}}),t.$util.goUrl({url:"/user/pages/alipay-result".concat(f)}),setTimeout((function(){t.getMineInfo(),t.$util.back()}),3e3),e.abrupt("return");case 12:if(!t.lockTap){e.next=14;break}return e.abrupt("return");case 14:return t.lockTap=!0,t.$util.showLoading(),e.prev=16,e.next=19,t.$api.mine.payBalanceOrder(u);case 19:if(p=e.sent,v=p.pay_list,t.$util.hideAll(),!v){e.next=37;break}return 3==l&&(v={orderInfo:v,provider:"alipay"}),e.prev=24,e.next=27,t.$util.pay(v);case 27:return t.$util.showToast({title:"支付成功"}),e.next=30,t.getMineInfo();case 30:setTimeout((function(){t.lockTap=!1,t.$util.back()}),1e3),e.next=37;break;case 33:return e.prev=33,e.t0=e["catch"](24),t.lockTap=!1,e.abrupt("return");case 37:e.next=42;break;case 39:e.prev=39,e.t1=e["catch"](16),setTimeout((function(){t.lockTap=!1,t.$util.hideAll()}),1e3);case 42:case"end":return e.stop()}}),e,null,[[16,39],[24,33]])})))()},toShare:function(t){var e=this;return(0,o.default)((0,s.default)().mark((function i(){var a;return(0,s.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.shareInd=t,e.qr_code){i.next=8;break}return e.$util.showLoading(),i.next=5,e.$api.mine.coachBalanceQr();case 5:a=i.sent,e.$util.hideAll(),e.qr_code=a;case 8:e.$util.goUrl({url:"/user/pages/stored/poster"});case 9:case"end":return i.stop()}}),i)})))()},toPoster:function(){this.$refs.show_share_item.close(),this.$util.goUrl({url:"/user/pages/stored/poster"})},toAppShare:function(){var t=this.shareInd,e=void 0===t?0:t,i=this.imageUrl,a=this.userInfo.id,n=void 0===a?0:a,s=this.mineInfo.coach_id,o=void 0===s?0:s,c=this.list.data[e],l=c.id,u=c.title,d="邀请您充值有优惠～",f=r.default.siteroot,p=f.split("/index.php")[0],v="".concat(p,"/h5/#/user/pages/stored/list?id=").concat(l,"&coach_id=").concat(o,"&pid=").concat(n);this.$jweixin.showOptionMenu(),this.$jweixin.shareAppMessage(u,d,v,i),this.$jweixin.shareTimelineMessage(u,v,i)},toTransImg:function(t){var e=this,i=this.$util.DateToUnix(this.$util.formatTime(new Date,"YY-M-D h:m:s"));uni.downloadFile({url:t.imageUrl,success:function(a){plus.zip.compressImage({src:a.tempFilePath,dst:"_doc/".concat(i,".jpg"),format:"jpg"},(function(a){plus.zip.compressImage({src:a.target,dst:"_doc/".concat(i,"-img.jpg"),quality:50},(function(i){t.imageUrl=i.target||"/static/img/logo.png",e.sharePage(t)}),(function(i){t.imageUrl="/static/img/logo.png",e.sharePage(t)}))}))}})},sharePage:function(t){this.$util.hideAll();var e=t.scene,i=t.href,a=t.title,n=t.summary,s=t.imageUrl;uni.share({provider:"weixin",scene:e,type:0,href:i,title:a,summary:n,imageUrl:s,success:function(t){console.log("success:"+JSON.stringify(t))},fail:function(t){console.log("fail:"+JSON.stringify(t))}})}})};e.default=l},f2f7:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"user-stored-list",style:{background:t.pageColor}},[t.options.pid||t.options.paysuc?i("v-uni-view",{staticClass:"abs",class:[{"back-user-ios none":t.configInfo.isIos},{"back-user-android none":!t.configInfo.isIos}],staticStyle:{"z-index":"1"},style:{background:"rgba(255,255,255,0.5)",color:t.primaryColor},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$util.goUrl({url:"/pages/service",openType:"reLaunch"})}}},[i("v-uni-view",{staticClass:"iconshouye iconfont"}),i("v-uni-view",{staticClass:"back-user_text"},[t._v("回到首页")])],1):t._e(),i("v-uni-view",{staticClass:"stored-bg c-base abs",style:{background:t.primaryColor}}),i("v-uni-view",{staticClass:"space-lg"}),i("v-uni-view",{staticClass:"record-info fill-base ml-md mr-md radius-32 rel"},[i("v-uni-view",{staticClass:"flex-center flex-column pd-lg"},[i("v-uni-view",{staticClass:"money"},[t._v(t._s(t.mineInfo.balance||0))]),i("v-uni-view",{staticClass:"f-caption c-caption mt-sm mb-sm"},[t._v("当前余额(元)")])],1),i("v-uni-view",{staticClass:"record-list flex-x-center pb-lg f-paragraph c-title"},[t.configInfo.plugAuth.reseller?i("v-uni-view",{staticClass:"list-item flex-center",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.$util.goUrl({url:"/user/pages/stored/commission"})}}},[t._v("我的收益")]):t._e(),i("v-uni-view",{staticClass:"list-item flex-center",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.$util.goUrl({url:"/user/pages/stored/record"})}}},[t._v("充值记录")]),i("v-uni-view",{staticClass:"list-item flex-center",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.$util.goUrl({url:"/user/pages/stored/consume"})}}},[t._v("消费明细")])],1)],1),i("v-uni-view",{staticClass:"fill-base mt-md ml-md mr-md pd-lg radius-24"},[i("v-uni-view",{staticClass:"store-list flex-warp"},t._l(t.list.data,(function(e,a){return i("v-uni-view",{key:a,staticClass:"list-item mb-md pd-lg fill-base radius-16",class:[{"mr-md":a%2==0}],style:{background:a==t.chooseInd?t.primaryColor:"#F7F8FA"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toChangeItem("chooseInd",a)}}},[i("v-uni-view",{staticClass:"ellipsis",class:[{"c-title":a!=t.chooseInd},{"c-base":a==t.chooseInd}],staticStyle:{"font-size":"50rpx"}},[t._v("¥"+t._s(e.price))]),i("v-uni-view",{staticClass:"f-caption ellipsis",style:{color:a==t.chooseInd?"rgba(255,255,255,0.5)":"#8D9092"}},[t._v(t._s(e.title))]),2===t.mineInfo.coach_status?i("v-uni-view",{staticClass:"f-caption mt-sm",style:{color:a==t.chooseInd?"#FAFF5B":t.primaryColor},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toShare(a)}}},[t._v("邀请充值")]):t._e()],1)})),1),t.list.data.length>0?[i("v-uni-view",{staticClass:"flex-between mt-md mb-md",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),!t.options.coach_id&&t.$util.goUrl({url:"/user/pages/stored/choose-technician"})}}},[i("v-uni-view",{staticClass:"f-title text-bold"},[t._v("选择为"+t._s(t.$t("action.attendantName"))+"充值")]),i("v-uni-view",{staticClass:"flex-y-center f-title"},[i("v-uni-view",{staticClass:"max-200 ellipsis",style:{color:t.coach_info.id?"":"#4A4A4A"}},[t._v(t._s(t.coach_info.id?t.coach_info.coach_name:"去选择"))]),t.options.coach_id?t._e():i("i",{staticClass:"iconfont icon-right"})],1)],1),t._l(t.payList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"flex-between mt-lg",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toChangeItem("payInd",a)}}},[i("v-uni-view",{staticClass:"pay-item flex-y-center"},[i("v-uni-view",{staticClass:"item-icon flex-center mr-md",class:[{wechat:1==e.id},{alipay:3==e.id}]},[i("i",{staticClass:"iconfont icon-font-color",class:[e.icon]})]),i("v-uni-view",{staticClass:"flex-y-baseline item-title"},[t._v(t._s(e.title))])],1),i("i",{staticClass:"pay-icon iconfont c-caption",class:[{"icon-xuanze":t.payInd!=a},{"icon-radio-fill":t.payInd==a}],style:{color:t.payInd==a?t.primaryColor:"#BEC3CE"}})],1)}))]:t._e(),i("v-uni-view",{staticClass:"f-caption c-caption",class:[{"mt-md pt-lg":t.list.data.length>0}]},[i("v-uni-view",[t._v("1.充值的本金和赠送金额均不可提现、转移、转赠")]),i("v-uni-view",{staticClass:"mt-sm"},[t._v("2.使用范围：本平台所有项目皆可购买，以及交通费支付")])],1)],2),i("v-uni-view",{staticClass:"space-max-footer"}),t.list.data.length>0?i("fixed",{attrs:{position:"bottom"}},[i("v-uni-view",{staticClass:"pd-lg fill-base"},[i("v-uni-view",{staticClass:"flex-between"},[i("v-uni-view",{staticClass:"flex-y-center f-paragraph c-caption"},[t._v("充值金额："),i("v-uni-view",{staticClass:"c-warning"},[t._v(t._s(t.list.data[t.chooseInd].price)+"元")])],1),i("v-uni-view",{staticClass:"pay-btn flex-center f-title c-base radius",style:{background:t.primaryColor},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toPay.apply(void 0,arguments)}}},[t._v("充值")])],1),i("v-uni-view",{staticClass:"space-safe"})],1)],1):t._e(),i("uni-popup",{ref:"show_share_item",attrs:{type:"bottom",zIndex:"1000"}},[i("v-uni-view",{staticClass:"popup-share pd-lg f-desc c-desc fill-base"},[i("v-uni-view",{staticClass:"flex-center"},[i("v-uni-view",{staticClass:"list-item flex-center flex-column",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toAppShare.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"item-image",attrs:{mode:"aspectFill",src:"https://lbqny.migugu.com/admin/anmo/coupon/wechat.png"}}),i("v-uni-view",{staticStyle:{"font-size":"26rpx",color:"#666"}},[t._v("分享给好友")])],1),i("v-uni-view",{staticClass:"list-item flex-center flex-column",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toPoster.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"item-image",attrs:{mode:"aspectFill",src:"https://lbqny.migugu.com/admin/anmo/coupon/picture.png"}}),i("v-uni-view",[t._v("生成海报码")])],1)],1),i("v-uni-view",{staticClass:"space-footer"})],1)],1)],1)},n=[]}}]);