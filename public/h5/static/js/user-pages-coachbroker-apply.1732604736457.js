(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user-pages-coachbroker-apply"],{"0ab4":function(t,e,r){"use strict";r("6a54");var a=r("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r("fd3c");var n=a(r("9b1b")),i=a(r("2634")),u=a(r("2fdc")),s=r("8f59"),o={components:{},data:function(){return{isLoad:!1,options:{},tipArr:{1:[{text:"您已经成功提交申请",color:0},{text:"审核将在3个工作日内出结果，请耐心等待",color:0}],2:[{text:"恭喜您，审核通过！",color:0},{text:"您已具备经纪人资格，快去分享体验吧~",color:0}],3:[{text:"请联系平台管理人员询问原因",color:0}],4:[{text:"请联系平台管理人员询问失败原因",color:0}]},buttonArr:{1:[{text:"个人中心",type:"cancel"}],2:[{text:"去分享",type:"confirm"}],3:[{text:"个人中心",type:"cancel"}],4:[{text:"再次申请",type:"confirm"},{text:"个人中心",type:"cancel"}]},title:{"-1":"申请经纪人",1:"等待审核",2:"",3:"取消授权",4:"申请失败"},image:{1:"https://lbqny.migugu.com/admin/public/apply_wait.png",2:"https://lbqny.migugu.com/admin/public/apply_suc.png",3:"https://lbqny.migugu.com/admin/public/apply_fail.png",4:"https://lbqny.migugu.com/admin/public/apply_fail.png"},broker_status:-1,form:{id:0,user_name:"",true_user_name:"",mobile:"",text:""},rule:[{name:"user_name",checkType:"isNotNull",errorMsg:"请输入您的姓名",regType:2},{name:"true_user_name",checkType:"isNotNull",errorMsg:"请输入您的真实姓名",regType:2},{name:"mobile",checkType:"isMobile",errorMsg:"请输入常用手机号码"}],lockTap:!1}},computed:(0,s.mapState)({configInfo:function(t){return t.config.configInfo}}),onLoad:function(t){var e=this;return(0,u.default)((0,i.default)().mark((function r(){return(0,i.default)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.$util.showLoading(),e.options=t,r.next=4,e.initIndex();case 4:e.isLoad=!0,e.$jweixin.hideOptionMenu();case 6:case"end":return r.stop()}}),r)})))()},methods:(0,n.default)((0,n.default)((0,n.default)({},(0,s.mapActions)(["getConfigInfo","getUserInfo"])),(0,s.mapMutations)(["updateUserItem"])),{},{initIndex:function(){var t=arguments,e=this;return(0,u.default)((0,i.default)().mark((function r(){var a,n,u,s,o;return(0,i.default)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.length>0&&void 0!==t[0]&&t[0],r.next=3,e.getConfigInfo();case 3:return r.next=5,e.$api.coachbroker.brokerInfo();case 5:if(a=r.sent,e.$util.setNavigationBarColor({bg:e.primaryColor}),a&&(!a||a.id)){r.next=10;break}return e.$util.hideAll(),r.abrupt("return");case 10:for(n in e.form)e.form[n]=a[n];u=a.status,s=a.sh_text,o=4==u?-1:u,e.broker_status=o,4==o&&s&&(e.tipArr[4][0].text=s),e.$util.hideAll();case 16:case"end":return r.stop()}}),r)})))()},initRefresh:function(){this.initIndex(!0)},confirm:function(){var t=this;return(0,u.default)((0,i.default)().mark((function e(){var r;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.broker_status,4!=r){e.next=5;break}return t.broker_status=-1,uni.setNavigationBarTitle({title:"申请经纪人"}),e.abrupt("return");case 5:t.$util.goUrl({url:"/user/pages/coachbroker/income",openType:"reLaunch"});case 6:case"end":return e.stop()}}),e)})))()},validate:function(t){var e=new this.$util.Validate;this.rule.map((function(r){var a=r.name;e.add(t[a],r)}));var r=e.start();return r},submit:function(){var t=this;return(0,u.default)((0,i.default)().mark((function e(){var r,a;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.$util.deepCopy(t.form),a=t.validate(r),!a){e.next=5;break}return t.$util.showToast({title:a}),e.abrupt("return");case 5:if(!t.lockTap){e.next=7;break}return e.abrupt("return");case 7:return t.lockTap=!0,t.$util.showLoading(),r.text=r.text.length>300?r.text.substring(0,300):r.text,e.prev=10,e.next=13,t.$api.coachbroker.applyBroker(r);case 13:t.$util.hideAll(),t.$util.showToast({title:"提交成功"}),setTimeout((function(){getCurrentPages().length>1&&t.$util.back(),t.$util.goUrl({url:"/user/pages/apply-result?type=5",openType:"redirectTo"})}),1e3),e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](10),setTimeout((function(){t.lockTap=!1,t.$util.hideAll()}),2e3);case 21:case"end":return e.stop()}}),e,null,[[10,18]])})))()}})};e.default=o},"6e11":function(t,e,r){"use strict";r.r(e);var a=r("0ab4"),n=r.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){r.d(e,t,(function(){return a[t]}))}(i);e["default"]=n.a},"8f4a":function(t,e,r){"use strict";r.r(e);var a=r("d49a"),n=r("6e11");for(var i in n)["default"].indexOf(i)<0&&function(t){r.d(e,t,(function(){return n[t]}))}(i);var u=r("828b"),s=Object(u["a"])(n["default"],a["b"],a["c"],!1,null,"200f5e0d",null,!1,a["a"],void 0);e["default"]=s.exports},d49a:function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return n})),r.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.isLoad?r("v-uni-view",{staticClass:"apply-pages",style:{background:-1!=t.broker_status?"":t.pageColor}},[-1!=t.broker_status?r("v-uni-view",{staticClass:"page-height"},[r("abnor",{attrs:{percent:"150%",title:t.title[t.broker_status],tip:t.tipArr[t.broker_status],button:t.buttonArr[t.broker_status],image:t.image[t.broker_status],tipMax:4==t.broker_status?"690rpx":""},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)},cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.$util.goUrl({url:"/pages/mine",openType:"reLaunch"})}}})],1):[r("v-uni-view",{staticClass:"apply-form pt-md"},[r("v-uni-view",{staticClass:"fill-base radius-16"},[r("v-uni-view",{staticClass:"flex-between pl-lg pr-lg b-1px-b"},[r("v-uni-view",{staticClass:"item-text"},[t._v("您的姓名")]),r("v-uni-input",{staticClass:"item-input flex-1",attrs:{type:"text",maxlength:"20",placeholder:t.rule[0].errorMsg},model:{value:t.form.user_name,callback:function(e){t.$set(t.form,"user_name",e)},expression:"form.user_name"}})],1),r("v-uni-view",{staticClass:"flex-between pl-lg pr-lg b-1px-b"},[r("v-uni-view",{staticClass:"item-text"},[t._v("真实姓名")]),r("v-uni-input",{staticClass:"item-input flex-1",attrs:{type:"text",maxlength:"10",placeholder:t.rule[1].errorMsg},model:{value:t.form.true_user_name,callback:function(e){t.$set(t.form,"true_user_name",e)},expression:"form.true_user_name"}})],1),r("v-uni-view",{staticClass:"flex-between pl-lg pr-lg b-1px-b"},[r("v-uni-view",{staticClass:"item-text"},[t._v("手机号码")]),r("v-uni-input",{staticClass:"item-input flex-1",attrs:{type:"text",maxlength:"11",placeholder:t.rule[2].errorMsg},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1)],1),r("v-uni-view",{staticClass:"fill-base mt-md radius-16"},[r("v-uni-view",{staticClass:"flex-between pl-lg pr-lg"},[r("v-uni-view",{staticClass:"item-text"},[t._v("备注信息")]),r("v-uni-input",{staticClass:"item-input flex-1",attrs:{disabled:!0,type:"text"}})],1),r("v-uni-textarea",{staticClass:"item-textarea pd-lg",attrs:{maxlength:"300",placeholder:"输入备注信息"},model:{value:t.form.text,callback:function(e){t.$set(t.form,"text",e)},expression:"form.text"}}),r("v-uni-view",{staticClass:"text-right pb-lg pr-lg"},[t._v(t._s(t.form.text.length>300?300:t.form.text.length)+"/300")])],1)],1),r("v-uni-view",{staticClass:"space-max-footer"}),r("fix-bottom-button",{attrs:{text:[{text:"确定申请",type:"confirm",isAuth:!0}],bgColor:"#fff"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}})]],2):t._e()},n=[]}}]);