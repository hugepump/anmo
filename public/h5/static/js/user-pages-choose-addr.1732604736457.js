(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user-pages-choose-addr"],{"03a4":function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return i})),e.d(a,"a",(function(){}));var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"user-pages-choose-addr"},[e("fixed",[e("v-uni-view",{staticClass:"fill-base"},[e("v-uni-view",{staticClass:"fill-base pd-lg rel",staticStyle:{"border-radius":"40rpx 40rpx 0 0"}},[e("search",{attrs:{type:"input",padding:0,confirmSearch:!0,radius:30,keyword:t.param.keyword,isDel:!0,height:"70rpx",placeholder:"请搜索城市/区/县/地点"},on:{input:function(a){arguments[0]=a=t.$handleEvent(a),t.toInput.apply(void 0,arguments)},confirm:function(a){arguments[0]=a=t.$handleEvent(a),t.toSearch.apply(void 0,arguments)}}})],1)],1)],1),e("v-uni-view",{staticClass:"space-lg",style:{background:t.pageColor}}),t._l(t.list.data,(function(a,n){return e("v-uni-view",{key:n,staticClass:"list-item flex-warp ml-lg mr-lg b-1px-b",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.toSelectAddr(n)}}},[e("i",{staticClass:"iconfont iconsousuodizhi"}),e("v-uni-view",{staticClass:"flex-1 ml-md f-desc",staticStyle:{color:"#8A8A8A"}},[e("v-uni-view",{staticClass:"f-paragraph c-title text-bold",staticStyle:{height:"46rpx"}},t._l(a.title_arr,(function(a,n){return e("span",{key:n,style:{color:"#"==a?t.primaryColor:""}},[t._v(t._s("#"==a?t.list.keyword:a))])})),0),e("v-uni-view",{staticClass:"flex-between"},[e("v-uni-view",{staticClass:"pr-lg"},t._l(a.address_arr,(function(a,n){return e("span",{key:n,style:{color:"#"==a?t.primaryColor:""}},[t._v(t._s("#"==a?t.list.keyword:a))])})),0),e("v-uni-view",[t._v(t._s(t._f("handleFormatNum")(a._distance)))])],1)],1)],1)})),t.loading?e("load-more",{attrs:{noMore:t.list.current_page>=t.list.last_page&&t.list.data.length>0,loading:t.loading}}):t._e(),!t.loading&&t.list.data.length<=0&&1==t.list.current_page?e("abnor",{attrs:{percent:"calc(100vh - 160rpx)",tip:[{text:"暂无数据，请输入地址后搜索~",color:0}]}}):t._e(),t.list.data.length>0?e("v-uni-view",{staticClass:"space-footer"}):t._e()],2)},i=[]},"1d04":function(t,a,e){"use strict";e.r(a);var n=e("dccd"),i=e.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(r);a["default"]=i.a},"82d9":function(t,a,e){"use strict";e.r(a);var n=e("03a4"),i=e("1d04");for(var r in i)["default"].indexOf(r)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(r);e("e04c");var s=e("828b"),o=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"73dab9c4",null,!1,n["a"],void 0);a["default"]=o.exports},"921a":function(t,a,e){var n=e("bcba");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=e("967d").default;i("fd99d5c8",n,!0,{sourceMap:!1,shadowMode:!1})},bcba:function(t,a,e){var n=e("c86c");a=n(!1),a.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-73dab9c4]{background:#fff}body.?%PAGE?%[data-v-73dab9c4]{background:#fff}.user-pages-choose-addr .choose-bg[data-v-73dab9c4]{width:100%;height:%?265?%;top:0;left:0}.user-pages-choose-addr .list-item[data-v-73dab9c4]{padding:%?37?% 0}.user-pages-choose-addr .list-item .iconsousuodizhi[data-v-73dab9c4]{font-size:%?46?%}',""]),t.exports=a},dccd:function(t,a,e){"use strict";e("6a54");var n=e("f5bd").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,e("c223"),e("fd3c"),e("5c47"),e("dfcf"),e("a1c1"),e("4626");var i=n(e("9b1b")),r=n(e("2634")),s=n(e("2fdc")),o=e("8f59"),c={data:function(){return{isLoad:!1,options:{},param:{page:1,keyword:""},list:{data:[],current_page:1,last_page:1},loading:!1}},computed:(0,o.mapState)({configInfo:function(t){return t.config.configInfo},technicianParam:function(t){return t.technician.param}}),onLoad:function(t){var a=this;return(0,s.default)((0,r.default)().mark((function e(){var n,i;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.type,i=void 0===n?0:n,t.type=1*i,a.options=t,a.$util.setNavigationBarColor({bg:a.primaryColor,color:"#000000"}),uni.setNavigationBarTitle({title:"搜索地址"}),a.$jweixin.hideOptionMenu();case 6:case"end":return e.stop()}}),e)})))()},onReachBottom:function(){console.log(this.list),this.list.current_page>=this.list.last_page||this.loading||(this.param.page=this.param.page+1,console.log(this.param.page),this.loading=!0,this.getList())},methods:(0,i.default)((0,i.default)({},(0,o.mapMutations)(["updateUserItem","updateServiceItem","updateTechnicianItem","updateMapItem","updateShopstoreItem","updateDynamicItem"])),{},{toInput:function(t){this.param.keyword=t},toSearch:function(t){this.param.keyword=t,t?(this.param.page=1,this.getList()):this.$util.showToast({title:"请输入地址后再搜索哦"})},getList:function(){var t=this;return(0,s.default)((0,r.default)().mark((function a(){var e,n,i,s,o,c,d,l,u,p,f,h;return(0,r.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=t.list,n=t.param,i=t.location,s=i.lat,o=i.lng,n.boundary="nearby(".concat(s,",").concat(o,",1000)"),a.next=5,t.$api.base.nearbyLocation(n);case 5:c=a.sent,d=JSON.parse(c),l=d.status,u=d.count,p=d.data,u=u||0,f=n.keyword,p.map((function(t){t.title_arr=t.title.replace(f,"".concat(f,"#").concat(f)).split(f),t.address_arr=t.address.replace(f,"".concat(f,"#").concat(f)).split(f)})),h={data:p,keyword:f,current_page:n.page,last_page:Math.ceil(u/20)},0==l&&(1==t.param.page||(h.data=e.data.concat(h.data)),t.list=h),t.loading=!1,t.$util.hideAll();case 14:case"end":return a.stop()}}),a)})))()},toSelectAddr:function(t){var a=this;return(0,s.default)((0,r.default)().mark((function e(){var n,i,s,o,c,d,l,u,p,f,h;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=a.list.data[t],i=n.title,s=n.address,o=n.location,c=n.ad_info,d=Object.assign({},a.technicianParam,{city_id:0}),a.updateTechnicianItem({key:"param",val:d}),l=Object.assign({},o,c,{address:"".concat(s," ").concat(i)}),a.updateUserItem({key:"location",val:l}),u=getCurrentPages(),p=u.length,f="",p>2&&(f=u[u.length-3].route),h=["updateServiceItem","updateMapItem","updateShopstoreItem","updateDynamicItem"],h.map((function(t){a[t]({key:"pageActive",val:!1})})),["pages/technician","user/pages/choose-technician"].includes(f)?(a.$util.getPage(-2).toChooseLocation(1),a.$util.goUrl({url:2,openType:"navigateBack"})):(a.updateUserItem({key:"city_info",val:Object.assign({},a.city_info,{id:0})}),a.updateUserItem({key:"changeAddr",val:!0}),a.$util.goUrl({url:["/pages/technician","/user/pages/choose-technician"][a.options.type],openType:"reLaunch"}));case 12:case"end":return e.stop()}}),e)})))()}}),filters:{handleFormatNum:function(t){var a="";if(t<100)a="<100m";else if(t>999){var e=(t/1e3).toFixed(2);a="".concat(e,"km")}else a="".concat(t,"m");return a}}};a.default=c},e04c:function(t,a,e){"use strict";var n=e("921a"),i=e.n(n);i.a}}]);