(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user-pages-choose-index"],{"1c6a":function(t,e,i){var a=i("f1ad");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("967d").default;n("1ffc19aa",a,!0,{sourceMap:!1,shadowMode:!1})},ab0b:function(t,e,i){"use strict";var a=i("1c6a"),n=i.n(a);n.a},c62c:function(t,e,i){"use strict";i("6a54");var a=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("fd3c"),i("4626");var n=a(i("9b1b")),s=a(i("2634")),o=a(i("2fdc")),r=i("8f59"),c={data:function(){return{isLoad:!1,options:{},address_list:[],city_list:[],have_more:0,prePage:""}},computed:(0,r.mapState)({configInfo:function(t){return t.config.configInfo},technicianParam:function(t){return t.technician.param}}),onLoad:function(t){var e=this;return(0,o.default)((0,s.default)().mark((function i(){var a,n;return(0,s.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:a=t.type,n=void 0===a?0:a,t.type=n,e.options=t,e.$util.setNavigationBarColor({bg:e.primaryColor,color:"#000000"}),uni.setNavigationBarTitle({title:"选择服务地址"}),e.$jweixin.hideOptionMenu();case 6:case"end":return i.stop()}}),i)})))()},onShow:function(){this.initIndex()},methods:(0,n.default)((0,n.default)((0,n.default)({},(0,r.mapActions)(["getConfigInfo","getCityList"])),(0,r.mapMutations)(["updateUserItem","updateServiceItem","updateTechnicianItem","updateMapItem","updateShopstoreItem","updateDynamicItem"])),{},{initIndex:function(){var t=this;return(0,o.default)((0,s.default)().mark((function e(){var i,a,n,o,r,c,l,d,u,p,f,v,h,g,m,y,x;return(0,s.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("",i=t.$util.getQueryString("code"),a=t.userInfo.id,n=void 0===a?0:a,!i||n){e.next=6;break}return e.next=6,t.getConfigInfo();case 6:if(o=t.location,r=o.lat,c=o.lng,l=o.address,d=void 0===l?"":l,u=o.address_info,p=void 0===u?"":u,!r||!c||d||p){e.next=12;break}return e.next=10,t.$util.getMapInfo(!1,!0,{},!0,!0);case 10:return e.next=12,t.getCityList({lat:r,lng:c,change:1});case 12:return e.next=14,t.$api.base.cityData();case 14:f=e.sent,v=f.address,h=f.city_list,g=f.have_more,h.map((function(t){t.address=t.title})),t.address_list=v,t.city_list=h,t.have_more=g,t.isLoad=!0,m=getCurrentPages(),y=m.length,y>1&&(x=m[y-2].route,t.prePage=x);case 26:case"end":return e.stop()}}),e)})))()},initRefresh:function(){this.initIndex()},toResetLoca:function(t){var e=this;return(0,o.default)((0,s.default)().mark((function i(){var a,n,o,r,c,l,d,u,p,f,v,h;return(0,s.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a=e.location,n=void 0===a?{}:a,o=e.city_info,r=void 0===o?{}:o,t||!n||!r||n.id!=r.id||n.address!=r.title){i.next=4;break}return e.toChooseLoca(e.city_info),i.abrupt("return");case 4:if(!t){i.next=25;break}if(!e.auth_location){i.next=10;break}return i.next=8,e.$util.getUtilLocation();case 8:i.next=19;break;case 10:return i.next=12,e.$util.getCoachUtilLoca(!1);case 12:if(c=i.sent,l=c,d=l.lat,u=void 0===d?0:d,p=l.lng,f=void 0===p?0:p,u||f){i.next=18;break}return i.next=17,e.$util.getAddressByIp();case 17:c=i.sent;case 18:e.updateUserItem({key:"location",val:c});case 19:e.$util.getMapInfo(!1,!0,{},!0,!0),e.$util.showToast({title:"刷新成功"}),v=["updateServiceItem","updateMapItem","updateShopstoreItem","updateDynamicItem"],v.map((function(t){e[t]({key:"pageActive",val:!1})})),h=Object.assign({},e.technicianParam,{city_id:0}),e.updateTechnicianItem({key:"param",val:h});case 25:setTimeout((function(){["pages/technician","user/pages/choose-technician"].includes(e.prePage)?(e.$util.getPage(-1).getList(1,!0),e.$util.goUrl({url:1,openType:"navigateBack"})):(t&&e.updateUserItem({key:"city_info",val:Object.assign({},e.city_info,{id:0})}),e.$util.goUrl({url:["/pages/technician","/user/pages/choose-technician"][e.options.type],openType:"reLaunch"}))}),t?1e3:0);case 26:case"end":return i.stop()}}),i)})))()},toSelectAddr:function(t){var e=this;return(0,o.default)((0,s.default)().mark((function i(){var a,n;return(0,s.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:a=e.$util.pick(e.address_list[t],["lat","lng","address","address_info"]),n=Object.assign({},e.technicianParam,{city_id:0}),e.updateTechnicianItem({key:"param",val:n}),e.toChooseLoca(a,1);case 4:case"end":return i.stop()}}),i)})))()},toSelectCity:function(t){var e=this.city_list[t],i=e.id;this.updateUserItem({key:"city_info",val:e});var a=Object.assign({},this.technicianParam,{city_id:i});this.updateTechnicianItem({key:"param",val:a}),this.toChooseLoca(e)},toChooseLoca:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.updateUserItem({key:"location",val:t});var a=["updateServiceItem","updateMapItem","updateShopstoreItem","updateDynamicItem"];a.map((function(t){e[t]({key:"pageActive",val:!1})})),["pages/technician","user/pages/choose-technician"].includes(this.prePage)?(this.$util.getPage(-1).toChooseLocation(i),this.$util.goUrl({url:1,openType:"navigateBack"})):(i&&this.updateUserItem({key:"city_info",val:Object.assign({},this.city_info,{id:0})}),this.updateUserItem({key:"changeAddr",val:!0}),this.$util.goUrl({url:["/pages/technician","/user/pages/choose-technician"][this.options.type],openType:"reLaunch"}))}}),filters:{handleAddrText:function(t){var e="定位中...";if(t&&t.lat){var i=t.address,a=void 0===i?"":i,n=t.address_info,s=void 0===n?"":n;if(a||s){if(!s){var o=a.split(" ");s=o[o.length-1]}e=s}}return e},handleCityText:function(t){var e="未知城市";return t&&t.title&&(e=t.title),e}}};e.default=c},dbe7:function(t,e,i){"use strict";i.r(e);var a=i("c62c"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},e26a:function(t,e,i){"use strict";i.r(e);var a=i("fb07"),n=i("dbe7");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("ab0b");var o=i("828b"),r=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"0043f259",null,!1,a["a"],void 0);e["default"]=r.exports},f1ad:function(t,e,i){var a=i("c86c");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.user-pages-choose-index .choose-bg[data-v-0043f259]{width:100%;height:%?265?%;top:0;left:0}.user-pages-choose-index .icon-right[data-v-0043f259]{font-size:%?20?%}.user-pages-choose-index .default-btn[data-v-0043f259]{width:%?68?%;height:%?44?%;border-radius:%?8?%;border:%?1?% solid #fff}.user-pages-choose-index .default-btn.abs[data-v-0043f259]{top:0;left:0;width:100%;height:100%;opacity:.1}.user-pages-choose-index .default-btn.md[data-v-0043f259]{width:%?280?%;height:%?76?%;border-radius:%?10?%}.user-pages-choose-index .list-item[data-v-0043f259]{min-width:%?135?%;height:%?72?%;padding:0 %?15?%;background:#f5f5f5;border-radius:%?36?%}',""]),t.exports=e},fb07:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isLoad?i("v-uni-view",{staticClass:"user-pages-choose-index",style:{background:t.pageColor}},[i("fixed",[i("v-uni-view",{staticClass:"fill-base"},[i("v-uni-view",{staticClass:"flex-between fill-base pd-lg rel",staticStyle:{"border-radius":"40rpx 40rpx 0 0"}},[i("v-uni-view",{staticClass:"flex-y-center",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.$util.goUrl({url:"/user/pages/choose/city?type="+t.options.type,openType:"redirectTo"})}}},[i("v-uni-view",{staticClass:"ellipsis",staticStyle:{"max-width":"130rpx"}},[t._v(t._s(t._f("handleCityText")(t.city_info)))]),i("i",{staticClass:"iconfont icon-down",staticStyle:{transform:"scale(0.5)"}})],1),i("v-uni-view",{staticClass:"flex-1 ml-md",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.$util.goUrl({url:"/user/pages/choose/addr?type="+t.options.type})}}},[i("search",{attrs:{type:"input",padding:0,textAlign:"left",confirmSearch:!0,radius:30,height:"70rpx",placeholder:"请搜索城市/区/县/地点"}})],1)],1)],1)],1),i("v-uni-view",{staticClass:"fill-base mt-md ml-md mr-md radius-16",staticStyle:{padding:"28rpx 30rpx"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toResetLoca(0)}}},[i("v-uni-view",{staticClass:"flex-between"},[i("v-uni-view",{staticClass:"flex-y-center f-desc c-paragraph"},[i("i",{staticClass:"iconfont icondingwei1 mr-sm",staticStyle:{"font-size":"40rpx"},style:{color:t.primaryColor}}),i("v-uni-view",{staticClass:"text-bold"},[t._v("当前选择")])],1),i("v-uni-view",{staticClass:"flex-y-center f-caption",style:{color:t.primaryColor},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toResetLoca(1)}}},[i("i",{staticClass:"iconfont iconqiehuandaodingwei",staticStyle:{"margin-right":"6rpx"}}),i("v-uni-view",{staticClass:"text-bold"},[t._v("刷新定位")])],1)],1),i("v-uni-view",{staticClass:"f-paragraph c-black text-bold mt-md"},[t._v(t._s(t._f("handleAddrText")(t.location)))])],1),i("v-uni-view",{staticClass:"fill-base mt-md ml-md mr-md pl-lg pr-lg radius-16"},[i("v-uni-view",{staticClass:"flex-between f-desc c-paragraph",staticStyle:{padding:"40rpx 0"}},[i("v-uni-view",[t._v("常用服务地址")]),i("v-uni-view",{staticClass:"flex-y-center",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.$util.toCheckLogin({url:"/user/pages/address/list?check=2&type="+t.options.type,openType:"redirectTo"})}}},[t._v(t._s(!t.userInfo||t.userInfo&&!t.userInfo.nickName?"立即登录":t.address_list&&t.address_list.length>0?"查看全部":"添加地址")),i("i",{staticClass:"iconfont icon-right text-bold"})])],1),t._l(t.address_list,(function(e,a){return i("v-uni-view",{key:a,staticClass:"f-paragraph b-1px-t",staticStyle:{padding:"34rpx 0"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toSelectAddr(a)}}},[i("v-uni-view",{staticClass:"c-black text-bold"},[t._v(t._s(e.address+" "+e.address_info))]),i("v-uni-view",{staticClass:"flex-y-center mt-sm",staticStyle:{color:"#090909"}},[t._v(t._s(e.user_name)),i("v-uni-view",{staticClass:"ml-md"},[t._v(t._s(e.mobile))]),1==e.status?i("v-uni-view",{staticClass:"default-btn flex-center f-caption ml-md rel",style:{borderColor:t.primaryColor,color:t.primaryColor}},[i("v-uni-view",{staticClass:"default-btn abs",style:{background:t.primaryColor}}),t._v("默认")],1):t._e()],1)],1)}))],2),i("v-uni-view",{staticClass:"fill-base mt-md ml-md mr-md pl-lg pr-lg radius-16"},[i("v-uni-view",{staticClass:"f-desc c-paragraph",staticStyle:{padding:"40rpx 0"}},[t._v("热门城市")]),t.city_list&&0==t.city_list.length?i("v-uni-view",{staticClass:"flex-1 f-desc c-warning pb-md"},[t._v("后台设置推荐城市即可展示热门城市")]):t._e(),i("v-uni-view",{staticClass:"flex-warp",staticStyle:{"padding-bottom":"15rpx"}},[t._l(t.city_list,(function(e,a){return i("v-uni-view",{key:a,staticClass:"list-item flex-center f-desc c-paragraph mr-md mb-md",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toSelectCity(a)}}},[t._v(t._s(e.title))])})),t.have_more?i("v-uni-view",{staticClass:"list-item flex-y-center f-desc c-base mb-md",style:{background:t.primaryColor},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.$util.goUrl({url:"/user/pages/choose/city?type="+t.options.type,openType:"redirectTo"})}}},[t._v("全部城市"),i("i",{staticClass:"iconfont icon-right text-bold"})]):t._e()],2)],1),i("v-uni-view",{staticClass:"space-footer"})],1):t._e()},n=[]}}]);