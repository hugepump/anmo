(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shopstore-pages-detail"],{"1ff3":function(t,i,e){var n=e("c86c");i=n(!1),i.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.shopstore-detail .cover-img[data-v-2cf62ce7]{width:%?750?%;height:%?417?%}.shopstore-detail .iconyingyezhizhao[data-v-2cf62ce7],\n.shopstore-detail .iconyingyeshijian[data-v-2cf62ce7],\n.shopstore-detail .icondizhi1[data-v-2cf62ce7]{color:#a2a2a2}.shopstore-detail .recommend-technician[data-v-2cf62ce7]{white-space:nowrap;width:%?690?%}.shopstore-detail .recommend-technician .recommend-item[data-v-2cf62ce7]{width:%?133?%;margin-left:%?30?%;display:inline-block}.shopstore-detail .recommend-technician .recommend-item .cover[data-v-2cf62ce7]{width:%?133?%;height:%?133?%}.shopstore-detail .recommend-technician .recommend-item .ellipsis[data-v-2cf62ce7]{max-width:%?133?%}.shopstore-detail .recommend-technician .recommend-item[data-v-2cf62ce7]:nth-child(1){margin-left:0}.shopstore-detail .comment-item .avatar[data-v-2cf62ce7]{width:%?52?%;height:%?52?%;background:#f4f6f8}.shopstore-detail .comment-item .iconpingfen1[data-v-2cf62ce7]{font-size:%?28?%;margin-right:%?5?%;font-size:%?28?%}',""]),t.exports=i},"5a561":function(t,i,e){var n=e("1ff3");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=e("967d").default;a("7f778ab8",n,!0,{sourceMap:!1,shadowMode:!1})},a0b1:function(t,i,e){"use strict";var n=e("5a561"),a=e.n(n);a.a},b713:function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){}));var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.detail.info&&t.detail.info.id?e("v-uni-view",{staticClass:"shopstore-detail order-pages rel",style:{background:t.pageColor}},[t.options.pid?e("v-uni-view",{staticClass:"abs",class:[{"back-user-ios":t.configInfo.isIos},{"back-user-android":!t.configInfo.isIos}],staticStyle:{"margin-top":"25rpx","z-index":"1"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.$util.goUrl({url:"/pages/service",openType:"reLaunch"})}}},[e("v-uni-view",{staticClass:"iconshouye iconfont"}),e("v-uni-view",{staticClass:"back-user_text"},[t._v("回到首页")])],1):t._e(),e("v-uni-image",{staticClass:"cover-img",attrs:{mode:"aspectFill",src:t.detail.info.cover},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.previewImage({current:t.detail.info.cover,urls:[t.detail.info.cover]})}}}),e("v-uni-view",{staticClass:"pd-lg fill-base"},[e("v-uni-view",{staticClass:"f-md-title c-black text-bold"},[t._v(t._s(t.detail.info.title||"-"))]),e("v-uni-view",{staticClass:"flex-between pt-lg pb-lg b-1px-b",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.$util.goUrl({url:"/shopstore/pages/store-info?id="+t.options.id})}}},[e("v-uni-view",{staticClass:"flex-y-center",staticStyle:{color:"#303030"}},[e("i",{staticClass:"iconfont iconyingyezhizhao mr-sm"}),t._v("营业执照："),e("v-uni-view",{staticClass:"max-450 ellipsis"},[t._v(t._s(t.detail.info.attestation))])],1),e("i",{staticClass:"iconfont icon-right",staticStyle:{"font-size":"20rpx"}})],1),e("v-uni-view",{staticClass:"pt-lg pb-lg"},[e("v-uni-view",{staticClass:"flex-y-center",staticStyle:{color:"#303030"}},[e("i",{staticClass:"iconfont iconyingyeshijian mr-sm"}),t._v("营业时间："),e("v-uni-view",{staticClass:"max-450 ellipsis"},[t._v(t._s(t.detail.info.start_time&&t.detail.info.end_time?t.detail.info.start_time+" - "+t.detail.info.end_time:"暂未设置"))])],1)],1),e("v-uni-view",{staticClass:"store-info flex-between pb-sm"},[e("v-uni-view",{staticClass:"flex-y-center",staticStyle:{color:"#303030"}},[e("i",{staticClass:"iconfont icondizhi1 mr-sm"}),e("v-uni-view",{staticClass:"c-title flex-1 mr-md"},[e("span",[t._v(t._s(t.detail.info.address||"暂未设置门店地址"))]),t.detail.info.address?e("span",{staticClass:"copy-btn span radius-5 f-icontext ml-sm",style:{color:t.primaryColor,borderColor:t.primaryColor},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.toCopy(t.detail.info.address)}}},[t._v("复制")]):t._e()])],1),e("v-uni-view",{staticClass:"flex-center"},[e("v-uni-view",{staticClass:"item-icon rel flex-center radius-16",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.$util.goUrl({url:t.detail.info.phone,openType:"call"})}}},[e("v-uni-view",{staticClass:"item-icon radius-16 abs",style:{background:t.primaryColor}}),e("i",{staticClass:"iconfont icondadianhua_1",style:{color:t.primaryColor}})],1),t.detail.info.address?e("v-uni-view",{staticClass:"item-icon rel flex-center radius-16 ml-md",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.toMap.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"item-icon radius-16 abs",style:{background:t.primaryColor}}),e("i",{staticClass:"iconfont icondizhi_1",style:{color:t.primaryColor}})],1):t._e()],1)],1)],1),e("v-uni-view",{staticClass:"pt-lg"},[e("v-uni-view",{staticClass:"flex-between pl-lg pr-md ",class:[{"pb-lg":t.detail.service_list.length>0}],on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.$util.goUrl({url:"/shopstore/pages/service?id="+t.options.id})}}},[e("v-uni-view",{staticClass:"f-paragraph c-black text-bold"},[t._v(t._s(1==t.app_model_type?"热门项目":"推荐项目"))]),e("v-uni-view",{staticClass:"flex-y-center f-caption c-caption"},[t._v("查看更多"),e("i",{staticClass:"iconfont icongengduo",staticStyle:{"font-size":"24rpx"}})])],1),e("v-uni-view",{class:[{"flex-warp ml-md":3===t.configInfo.service_list_type},{"pl-md pr-md":[1,2].includes(t.configInfo.service_list_type)}]},t._l(t.detail.service_list,(function(i,n){return e("v-uni-view",{key:n,class:[{"pl-md pr-md radius-16":4===t.configInfo.service_list_type},{"pl-lg pr-lg radius-16 pt-lg pb-lg":[1,2].includes(t.configInfo.service_list_type)},{"fill-base":![3,4].includes(t.configInfo.service_list_type)},{"mr-md":3===t.configInfo.service_list_type&&n%2==0},{"mt-md":3===t.configInfo.service_list_type&&n>1||3!==t.configInfo.service_list_type&&n>0}]},[e("longbingbing-service-list-item",{attrs:{info:i,o:{type:t.configInfo.service_list_type},store_id:t.options.id,maxWidth:"450rpx"}})],1)})),1),0==t.detail.service_list.length?e("abnor",{attrs:{percent:"70%"}}):t._e()],1),e("v-uni-view",{staticClass:"pt-lg pb-lg"},[e("v-uni-view",{staticClass:"flex-between pl-lg pr-md",class:[{"pb-lg":t.detail.coach_list.length>0}],on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.$util.goUrl({url:"/shopstore/pages/technician?id="+t.options.id})}}},[e("v-uni-view",{staticClass:"f-paragraph c-black text-bold"},[t._v(t._s(t.$t("action.attendantName"))+"展示")]),e("v-uni-view",{staticClass:"flex-y-center f-caption c-caption"},[t._v("查看更多"),e("i",{staticClass:"iconfont icongengduo",staticStyle:{"font-size":"24rpx"}})])],1),t.detail.coach_list.length>0?e("v-uni-view",{staticClass:"pl-lg pr-md fill-base pt-lg pb-lg"},[e("v-uni-scroll-view",{staticClass:"recommend-technician",attrs:{"scroll-x":!0}},t._l(t.detail.coach_list,(function(i,n){return e("v-uni-view",{key:n,staticClass:"recommend-item",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.toTechnician(n)}}},[e("v-uni-view",{staticClass:"cover radius"},[e("v-uni-view",{staticClass:"h5-image cover radius",style:{backgroundImage:"url('"+i.work_img+"')"}})],1),e("v-uni-view",{staticClass:"flex-center f-desc c-title mt-md"},[e("v-uni-view",{staticClass:"ellipsis"},[t._v(t._s(i.coach_name))])],1)],1)})),1)],1):t._e(),0==t.detail.coach_list.length?e("abnor",{attrs:{percent:"70%"}}):t._e()],1),1!=t.app_model_type?e("v-uni-view",{staticClass:"fill-base pl-lg pr-lg"},[t._l(t.list.data,(function(i,n){return e("v-uni-view",{key:n,staticClass:"comment-item flex-warp pt-lg",class:[{"b-1px-t":0!=n}]},[e("v-uni-image",{staticClass:"avatar radius",attrs:{mode:"aspectFill",src:i.avatarUrl}}),e("v-uni-view",{staticClass:"flex-1 ml-md pb-lg"},[e("v-uni-view",{staticClass:"flex-between",staticStyle:{height:"52rpx"}},[e("v-uni-view",{staticClass:"flex-y-center"},[e("v-uni-view",{staticClass:"f-paragraph c-title mr-md max-200 ellipsis"},[t._v(t._s(i.nickName))]),e("v-uni-view",{staticClass:"flex-warp"},t._l(5,(function(t,n){return e("i",{key:n,staticClass:"iconfont iconpingfen1 icon-font-color",style:{backgroundImage:n<i.star?"-webkit-linear-gradient(270deg, #FAD961 0%, #F76B1C 100%)":"-webkit-linear-gradient(270deg, #f4f6f8 0%, #ccc 100%)"}})})),0)],1),e("v-uni-view",{staticClass:"f-icontext c-caption"},[t._v(t._s(i.create_time))])],1),e("v-uni-view",{staticClass:"flex-warp mt-sm"},t._l(i.lable_text,(function(i,n){return e("v-uni-view",{key:n,staticClass:"pt-sm pb-sm pl-md pr-md mt-sm mr-sm radius fill-body f-caption c-desc"},[t._v(t._s(i))])})),1),e("v-uni-view",{staticClass:"f-caption c-caption mt-md"},[e("v-uni-text",{staticStyle:{"word-break":"break-all"},attrs:{decode:"emsp"}},[t._v(t._s(i.text))])],1)],1)],1)})),t.loading?e("load-more",{attrs:{noMore:t.list.current_page>=t.list.last_page&&t.list.data.length>0,loading:t.loading}}):t._e(),!t.loading&&t.list.data.length<=0&&1==t.list.current_page?e("abnor",{attrs:{percent:"70%",tip:[{text:"暂无评价数据"}]}}):t._e()],2):t._e(),e("v-uni-view",{staticClass:"space-footer"})],1):t._e()},a=[]},bf06:function(t,i,e){"use strict";e.r(i);var n=e("e7a7"),a=e.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(s);i["default"]=a.a},e7a7:function(t,i,e){"use strict";e("6a54");var n=e("f5bd").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("c223"),e("bf0f"),e("18f7"),e("de6c"),e("d4b5");var a=n(e("9b1b")),s=n(e("2634")),o=n(e("2fdc")),c=e("8f59"),l=n(e("c57d")),r=n(e("7879")),d={components:{longbingbingServiceListItem:r.default},data:function(){return{options:{},detail:{},param:{page:1},list:{data:[]},loading:!0}},computed:(0,c.mapState)({configInfo:function(t){return t.config.configInfo}}),onLoad:function(t){var i=this;return(0,o.default)((0,s.default)().mark((function e(){var n,a;return(0,s.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.pid,a=void 0===n?0:n,t.pid=1*a,i.options=t,e.next=5,i.initIndex();case 5:i.scanRecordId&&i.updateScanRecord();case 6:case"end":return e.stop()}}),e)})))()},destroyed:function(){this.updateUserItem({key:"appShare",val:!0})},onPullDownRefresh:function(){uni.showNavigationBarLoading(),this.initRefresh(),uni.stopPullDownRefresh()},onReachBottom:function(){this.list.current_page>=this.list.last_page||this.loading||(this.param.page=this.param.page+1,this.loading=!0,this.getList())},onShareAppMessage:function(t){var i=this.userInfo.id,e=void 0===i?0:i,n=this.detail.info,a=n.id,s=n.title,o=n.cover,c="/shopstore/pages/detail?pid=".concat(e,"&id=").concat(a);return this.$util.log(c),{title:s,imageUrl:o,path:c}},methods:(0,a.default)((0,a.default)((0,a.default)({},(0,c.mapActions)(["getConfigInfo","getUserInfo","addScanRecord","updateScanRecord"])),(0,c.mapMutations)(["updateTechnicianItem","updateUserItem"])),{},{initIndex:function(){var t=arguments,i=this;return(0,o.default)((0,s.default)().mark((function e(){var n,a,o,c,l,r;return(0,s.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.length>0&&void 0!==t[0]&&t[0],a=i.options.pid,o=void 0===a?0:a,c=i.scanRecordId,c=i.$util.getQueryString("code"),o&&!c&&i.addScanRecord({type:2,qr_id:o,is_qr:0}),l=i.userInfo.id,r=void 0===l?0:l,!(!i.configInfo.id||n||o&&c&&!r)){e.next=9;break}return e.next=9,i.getConfigInfo();case 9:if(!o||c||r){e.next=12;break}return e.next=12,i.getUserInfo();case 12:if(!o||c||i.userInfo.id){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,Promise.all([i.getDetail(),i.getList()]);case 16:i.$util.setNavigationBarColor({bg:i.primaryColor}),i.$jweixin.initJssdk((function(){i.toAppShare()}));case 18:case"end":return e.stop()}}),e)})))()},initRefresh:function(){this.param.page=1,this.initIndex(!0)},toAppShare:function(){var t=this.userInfo.id,i=void 0===t?0:t,e=this.detail.info,n=e.id,a=e.title,s=e.cover,o=l.default.siteroot,c=o.split("/index.php")[0],r="".concat(c,"/h5/#/shopstore/pages/detail?id=").concat(n,"&pid=").concat(i);this.$jweixin.showOptionMenu(),this.$jweixin.shareAppMessage(a,"",r,s),this.$jweixin.shareTimelineMessage(a,r,s)},toTransImg:function(t){var i=this,e=this.$util.DateToUnix(this.$util.formatTime(new Date,"YY-M-D h:m:s"));uni.downloadFile({url:t.imageUrl,success:function(n){plus.zip.compressImage({src:n.tempFilePath,dst:"_doc/".concat(e,".jpg"),format:"jpg"},(function(n){plus.zip.compressImage({src:n.target,dst:"_doc/".concat(e,"-img.jpg"),quality:50},(function(e){t.imageUrl=e.target||"/static/img/logo.png",i.sharePage(t)}),(function(e){t.imageUrl="/static/img/logo.png",i.sharePage(t)}))}))}})},sharePage:function(t){this.$util.hideAll();var i=t.href,e=t.title,n=t.summary,a=t.imageUrl;uni.share({provider:"weixin",scene:"WXSceneSession",type:0,href:i,title:e,summary:n,imageUrl:a,success:function(t){console.log("success:"+JSON.stringify(t))},fail:function(t){console.log("fail:"+JSON.stringify(t))}})},getDetail:function(){var t=this;return(0,o.default)((0,s.default)().mark((function i(){var e,n;return(0,s.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e=t.options.id,i.next=3,t.$api.shopstore.storeInfo({id:e});case 3:n=i.sent,t.detail=n,t.$util.hideAll();case 6:case"end":return i.stop()}}),i)})))()},getList:function(){var t=this;return(0,o.default)((0,s.default)().mark((function i(){var e,n,a,o;return(0,s.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e=t.list,n=t.param,a=t.options.id,n.id=a,i.next=5,t.$api.shopstore.commentList(n);case 5:o=i.sent,1==t.param.page||(o.data=e.data.concat(o.data)),t.list=o,t.loading=!1,t.$util.hideAll();case 9:case"end":return i.stop()}}),i)})))()},previewImage:function(t,i){this.$util.previewImage({current:t,urls:i})},toMap:function(){var t=this;return(0,o.default)((0,s.default)().mark((function i(){var e,n,a,o;return(0,s.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e=t.detail.info,n=e.address,a=e.lat,o=e.lng,i.next=3,t.$util.checkAuth({type:"userLocation"});case 3:return i.next=5,uni.getLocation({type:"gcj02"});case 5:return i.next=7,uni.openLocation({latitude:1*a,longitude:1*o,name:n,scale:28});case 7:case"end":return i.stop()}}),i)})))()},toTechnician:function(t){var i=this.detail.coach_list[t],e=i.id;i.city_id,i.coach_name;this.$util.goUrl({url:"/user/pages/technician-info?id=".concat(e)})},toCopy:function(t){this.$util.goUrl({url:t,openType:"copy"})}})};i.default=d},efda:function(t,i,e){"use strict";e.r(i);var n=e("b713"),a=e("bf06");for(var s in a)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(s);e("a0b1");var o=e("828b"),c=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"2cf62ce7",null,!1,n["a"],void 0);i["default"]=c.exports}}]);