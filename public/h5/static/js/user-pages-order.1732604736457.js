(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user-pages-order"],{"03ab":function(e,t,i){var a=i("a879");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=i("967d").default;r("41ecc4b2",a,!0,{sourceMap:!1,shadowMode:!1})},"1ddf":function(e,t,i){"use strict";i("6a54");var a=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(i("5de6")),n=a(i("9b1b")),s=a(i("2634")),o=a(i("2fdc"));i("fd3c"),i("aa9c"),i("bf0f"),i("18f7"),i("de6c"),i("bd06"),i("dd2b"),i("4626"),i("5ac7"),i("c223");var c=i("8f59"),l=a(i("ca81")),d=a(i("0812")),u={components:{parser:d.default},data:function(){return{options:{},isLoad:!1,isNoPay:!0,no_pay_order:[],orderRules:{},no_data_msg:"",serviceTypeList:[],serviceTypeInd:0,carTypeList:[{id:1,title:"出租车"},{id:0,title:"公交/地铁"}],carTypeInd:0,payList:[{id:1,icon:"iconweixinzhifu1",title:"微信支付"},{id:2,icon:"iconqianbao c-balance",title:"账户余额",is_disabled:!1}],payInd:0,balanceInd:1,balance:0,tabList:[],activeIndex:0,timeList:[],send_info:{},orderInfo:{coupon_id:0,address_info:{id:0}},form:{user_name:"",user_phone:"",text:""},rule:[{name:"user_name",checkType:"isNotNull",errorMsg:"请输入您的姓名",regType:2},{name:"user_phone",checkType:"isMobile",errorMsg:"请输入手机号"}],isAgree:!1,lockTap:!1,isBus:0}},computed:(0,c.mapState)({configInfo:function(e){return e.config.configInfo},mineInfo:function(e){return e.user.mineInfo}}),watch:{"send_info.time":function(e){var t=this.send_info.time_str;this.getIsBusCall(t),this.initRefresh()},"orderInfo.order_goods":function(e){var t=e&&e.length>0?e.map((function(e){var t=e.id,i=e.title,a=e.cover,r=e.price;return{goods_id:t,goods_name:i,goods_cover:a,goods_price:r}})):[];this.no_pay_order=t}},onLoad:function(e){var t=this;return(0,o.default)((0,s.default)().mark((function i(){var a,r,n,o;return(0,s.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.options=e,t.$util.showLoading(),a=t.configInfo.plugAuth.store,r=void 0!==a&&a,t.no_data_msg=r?"该".concat(t.$t("action.attendantName"),"不支持到店服务或服务已下架~"):"服务已下架~",i.next=6,t.initIndex();case 6:n=t.send_info.time,o=void 0===n?0:n,o||t.getIsBusCall(""),t.$jweixin.hideOptionMenu();case 9:case"end":return i.stop()}}),i)})))()},destroyed:function(){var e=this.isNoPay,t=this.no_pay_order,i=this.configInfo.plugAuth.orderradar,a=void 0!==i&&i;if(a&&e&&t.length>0){var r=this.options.id,n=void 0===r?0:r,s={coach_id:n,order_goods:t};this.$api.order.noPayRecordAdd(s),this.updateOrderItem({key:"noPayRecord",val:s})}},methods:(0,n.default)((0,n.default)((0,n.default)({},(0,c.mapActions)(["getConfigInfo","getMineInfo"])),(0,c.mapMutations)(["updateUserItem","updateOrderItem"])),{},{initIndex:function(){var e=arguments,t=this;return(0,o.default)((0,s.default)().mark((function i(){var a,n,o,c,l,d,u,p,f,v,_,m,g,h,x,y,b,w,C,I,k,T,$,L,P,E,A,S,R,M,z,O,N,U,j;return(0,s.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.length>0&&void 0!==e[0]&&e[0],a=t.options,n=a.id,o=a.ser_id,c=void 0===o?0:o,l=t.orderInfo,d=l.coupon_id,u=l.address_info,p=u.id,i.next=6,t.$api.order.getServiceType({coach_id:n});case 6:if(f=i.sent,v=f.is_door,_=f.is_store,m=[],v&&m.push({id:0,title:"上门服务"}),_&&m.push({id:1,title:"到店服务"}),t.serviceTypeList=m,t.$util.setNavigationBarColor({bg:t.primaryColor}),0!=m.length){i.next=19;break}return t.$util.hideAll(),t.isLoad=!0,t.orderInfo.order_goods=[],i.abrupt("return");case 19:return g=t.carTypeList[t.carTypeInd].id,h=t.serviceTypeList[t.serviceTypeInd].id,x=void 0===h?0:h,y=t.send_info.time_str,b=void 0===y?"":y,i.next=24,Promise.all([t.$api.order.payOrderInfo({is_store:x,service_id:c,coach_id:n,car_type:g,coupon_id:d,address_id:p,start_time:b}),t.$api.base.payOrderInfoConfig()]);case 24:w=i.sent,C=(0,r.default)(w,2),I=C[0],k=C[1],t.$util.hideAll(),t.orderRules=k,I.address_info=I.address_info.id?I.address_info:{},t.orderInfo=I,T=I.alipay_status,$=void 0===T?0:T,L=I.near_time,P=void 0===L?{str:"",text:""}:L,E=I.user_cash,$&&(A=t.payList.findIndex((function(e){return 3==e.id})),-1===A&&(t.payList.splice(1,0,{id:3,icon:"icon-alipay c-alipay",title:"支付宝支付"}),t.balanceInd=2)),S=P.text,R=void 0===S?"":S,M=P.str,z=void 0===M?"":M,O=t.send_info.time,N=void 0===O?0:O,!N&&R&&z&&(U=t.$util.formatTime(1e3*z,"M-D"),t.send_info={time:R,time_str:z,dat_text:U}),j=t.balanceInd,t.payList[j].is_disabled=1*E<1*I.pay_price,t.balance=E,t.isLoad=!0;case 41:case"end":return i.stop()}}),i)})))()},initRefresh:function(){this.initIndex(!0)},linkpress:function(e){},getIsBusCall:function(e){var t=this;return(0,o.default)((0,s.default)().mark((function i(){var a,r,n,o,c;return(0,s.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a=t.serviceTypeList,r=t.serviceTypeInd,0!=a.length){i.next=3;break}return i.abrupt("return");case 3:if(n=a[r].id,o=void 0===n?0:n,!o){i.next=8;break}i.t0=1,i.next=11;break;case 8:return i.next=10,t.$api.order.getIsBus({start_time:e});case 10:i.t0=i.sent;case 11:if(c=i.t0,t.isBus=c,0!=c){i.next=17;break}return t.carTypeInd=0,i.next=17,t.initRefresh();case 17:case"end":return i.stop()}}),i)})))()},toChangeItem:function(e){var t=arguments,i=this;return(0,o.default)((0,s.default)().mark((function a(){var r,n,o;return(0,s.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=t.length>1&&void 0!==t[1]?t[1]:1,n=i.orderInfo.address_info,a.t0=r,a.next=1===a.t0?5:2===a.t0?12:3===a.t0?18:23;break;case 5:if(1!=e||n.id&&i.send_info.time){a.next=8;break}return i.$util.showToast({title:n.id?"请选择预约时间":"请选择地址"}),a.abrupt("return");case 8:return i.carTypeInd=e,a.next=11,i.initRefresh();case 11:return a.abrupt("break",23);case 12:if(o=i.balanceInd,e!=o||!i.payList[o].is_disabled){a.next=16;break}return i.$util.showToast({title:"账户余额不足"}),a.abrupt("return");case 16:return i.payInd=e,a.abrupt("break",23);case 18:return i.serviceTypeInd=e,i.carTypeInd=1==e?1:0,a.next=22,i.initRefresh();case 22:return a.abrupt("break",23);case 23:case"end":return a.stop()}}),a)})))()},changeNum:function(e,t){var i=this;return(0,o.default)((0,s.default)().mark((function a(){var r,n,o,c,l,d,u,p,f,v,_;return(0,s.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=i.orderInfo.order_goods[t],n=r.id,o=r.service_id,c=r.member_info,l=c.can_buy,d=c.title,l||!(e>0)){a.next=6;break}return u=d?d.includes("会员")?d:"".concat(d,"会员"):"会员",i.$util.showToast({title:"您还不是".concat(u)}),a.abrupt("return");case 6:if(p=0,i.orderInfo.order_goods.map((function(e){p+=e.num})),!(1===p&&e<0)){a.next=11;break}return i.$util.showToast({title:"至少保留一个服务哦"}),a.abrupt("return");case 11:if(f=i.options.id,!i.lockTap){a.next=14;break}return a.abrupt("return");case 14:return i.lockTap=!0,v=e>0?"addCar":"delCar",_=e>0?{service_id:o,coach_id:f,num:1}:{id:n,num:1},a.prev=17,a.next=20,i.$api.order[v](_);case 20:return a.sent,a.next=23,i.initRefresh();case 23:i.lockTap=!1,a.next=29;break;case 26:a.prev=26,a.t0=a["catch"](17),i.lockTap=!1;case 29:case"end":return a.stop()}}),a,null,[[17,26]])})))()},toShowTime:function(){var e=this;return(0,o.default)((0,s.default)().mark((function t(){return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getStoreDay();case 2:e.$refs.show_time_item.open();case 3:case"end":return t.stop()}}),t)})))()},getStoreDay:function(){var e=this;return(0,o.default)((0,s.default)().mark((function t(){var i,a,r;return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.order.dayText();case 2:return i=t.sent,i.map((function(e){e.title="".concat(e.dat_text," ").concat(e.week)})),e.tabList=i,a=e.send_info.dat_text,r=void 0===a?"":a,r&&(e.activeIndex=e.tabList.findIndex((function(e){return e.dat_text==r}))),t.next=9,e.getStoreTime();case 9:e.loading=!1,e.$util.hideAll();case 11:case"end":return t.stop()}}),t)})))()},getStoreTime:function(){var e=this;return(0,o.default)((0,s.default)().mark((function t(){var i,a,r,n,o,c;return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.options.id,a=e.activeIndex,!(a<0)){t.next=4;break}return t.abrupt("return");case 4:return r=e.tabList[a].dat_str,n=e.serviceTypeList[e.serviceTypeInd].id,o=void 0===n?0:n,c=e.orderInfo.time_long,t.next=9,e.$api.order.timeText({is_store:o,coach_id:i,time_long:c,day:r});case 9:e.timeList=t.sent,e.loading=!1,e.$util.hideAll();case 12:case"end":return t.stop()}}),t)})))()},handerTabChange:function(e){this.activeIndex=e,this.getStoreTime()},toChooseTime:function(e){var t=this.tabList,i=this.activeIndex,a=this.timeList[e];1==a.status&&(a.time="".concat(t[i].dat_text," ").concat(t[i].week," ").concat(a.time_text),this.send_info=a,this.$refs.show_time_item.close())},checkInput:function(e,t){var i=this,a=this.$util.formatMoney(e.detail.value);this.$nextTick((function(){i.form[t]=a}))},toMap:function(){var e=this;return(0,o.default)((0,s.default)().mark((function t(){var i,a,r,n;return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.orderInfo.store_info,a=i.address,r=i.lat,n=i.lng,a){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.$util.checkAuth({type:"userLocation"});case 5:return t.next=7,uni.getLocation({type:"gcj02"});case 7:return t.next=9,uni.openLocation({latitude:1*r,longitude:1*n,name:a,scale:28});case 9:case"end":return t.stop()}}),t)})))()},validate:function(e){var t=new this.$util.Validate;this.rule.map((function(i){var a=i.name;t.add(e[a],i)}));var i=t.start();return i},toConfirmOrder:function(){this.$refs.order_rules_item.close(),this.isAgree=!0,this.toPay()},toPay:function(){var e=this;return(0,o.default)((0,s.default)().mark((function t(){var i,a,r,n,o,c,l,d,u,p,f,v,_,m,g,h,x,y,b,w,C,I,k,T,$,L,P,E,A;return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.$util.deepCopy(e.form),a=e.serviceTypeList[e.serviceTypeInd].id,r=void 0===a?0:a,!r){t.next=9;break}if(n=e.validate(i),!n){t.next=7;break}return e.$util.showToast({title:n}),t.abrupt("return");case 7:t.next=11;break;case 9:delete i.user_name,delete i.user_phone;case 11:if(o=e.orderInfo,c=o.coupon_id,l=void 0===c?0:c,d=o.address_info,u=void 0===d?{}:d,p=o.user_cash,f=o.pay_price,v=void 0===f?0:f,_=u.id,r||_){t.next=16;break}return e.$util.showToast({title:"请选择地址"}),t.abrupt("return");case 16:if(m=e.carTypeList,g=e.carTypeInd,h=e.payList,x=e.payInd,y=e.send_info,y.time){t.next=20;break}return e.$util.showToast({title:"请选择预约时间"}),t.abrupt("return");case 20:if(b=e.orderRules.order_rules_status,1!=b||e.isAgree){t.next=24;break}return e.$refs.order_rules_item.open(),t.abrupt("return");case 24:if(2!=b||e.isAgree){t.next=27;break}return e.$util.showToast({title:"请先阅读并同意平台《下单须知》"}),t.abrupt("return");case 27:if(w=m[g].id,C=h[x].id,!(2==C&&1*p<1*v)){t.next=32;break}return e.$util.showToast({title:"账户余额不足"}),t.abrupt("return");case 32:if(I=e.options.id,k=y.time_str,i=Object.assign({},i,{coach_id:I,coupon_id:l,address_id:_,is_store:r,car_type:w,pay_model:C,start_time:k}),!e.lockTap){t.next=37;break}return t.abrupt("return");case 37:return e.lockTap=!0,e.$util.showLoading(),t.prev=39,t.next=42,e.$api.order.payOrder(i);case 42:if(T=t.sent,$=T.pay_list,L=T.order_id,P=void 0===L?0:L,e.isNoPay=!1,e.$util.hideAll(),!$){t.next=69;break}if(3==C&&($={orderInfo:$,provider:"alipay"}),3!=C){t.next=57;break}return E=e.autograph,A="?autograph=".concat(E,"&id=").concat(P),$=Object.assign({},$,{order_id:P,page_url:"/pages/order?tab=2",alipay_params:A}),e.updateOrderItem({key:"alipayOrderParams",val:$}),e.$util.goUrl({url:"/user/pages/alipay-result".concat(A),openType:"redirectTo"}),t.abrupt("return");case 57:return t.prev=57,t.next=60,e.$util.pay($);case 60:e.$util.showToast({title:"支付成功"}),setTimeout((function(){e.lockTap=!1,e.$util.goUrl({url:"/pages/order?tab=2",openType:"reLaunch"})}),1e3),t.next=68;break;case 64:t.prev=64,t.t0=t["catch"](57),e.$util.showToast({title:"支付失败"}),setTimeout((function(){e.lockTap=!1,e.$util.goUrl({url:"/pages/order?tab=1",openType:"reLaunch"})}),1e3);case 68:return t.abrupt("return");case 69:e.$util.showToast({title:"支付成功"}),setTimeout((function(){e.lockTap=!1,e.$util.goUrl({url:"/pages/order?tab=2",openType:"reLaunch"})}),1e3),t.next=76;break;case 73:t.prev=73,t.t1=t["catch"](39),setTimeout((function(){e.lockTap=!1,e.$util.hideAll()}),2e3);case 76:case"end":return t.stop()}}),t,null,[[39,73],[57,64]])})))()},toCopy:function(e){this.$util.goUrl({url:e,openType:"copy"})}}),filters:{handlePriceTime:function(e){var t="无夜间时间段",i=e.car_price_start,a=e.car_price_end;if(i&&a&&i!==a){if("00:00"!==i||"24:00"!==a){var r=l.default.formatTime(new Date,"YY-M-D"),n="00:00"===i?"23:59":i,s="24:00"===a?"00:01":a,o=l.default.DateToUnix("".concat(r," ").concat(n)),c=l.default.DateToUnix("".concat(r," ").concat(s));"00:00"!==i&&(o-=60),"24:00"!==a&&(c+=60);var d="00:00"!==i&&"24:00"!==a?" 次日":"";t="".concat(l.default.formatTime(1e3*c,"h:m")," - ").concat(d).concat(l.default.formatTime(1e3*o,"h:m"))}"00:00"===i&&"23:59"===a&&(t="23:59 - 00:00")}return t}}};t.default=u},4717:function(e,t,i){"use strict";i.r(t);var a=i("b518"),r=i("b3bc");for(var n in r)["default"].indexOf(n)<0&&function(e){i.d(t,e,(function(){return r[e]}))}(n);i("c995");var s=i("828b"),o=Object(s["a"])(r["default"],a["b"],a["c"],!1,null,"0389222e",null,!1,a["a"],void 0);t["default"]=o.exports},a879:function(e,t,i){var a=i("c86c");t=a(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.order-pages .item-text[data-v-0389222e]{width:%?200?%;height:%?30?%;line-height:%?30?%;font-size:%?30?%;color:#1f1f1f}.order-pages .item-input[data-v-0389222e]{min-height:%?30?%;line-height:%?30?%;padding:%?25?% 0;font-size:%?26?%;color:#a9a9a9}.order-pages .item-input.text[data-v-0389222e]{padding:%?30?% 0}.order-pages .list-item .item-img[data-v-0389222e]{width:%?140?%;height:%?140?%}.order-pages .list-item .ellipsis[data-v-0389222e]{max-width:%?466?%}.order-pages .list-item .item-tag[data-v-0389222e]{width:%?100?%;height:%?36?%;margin-top:%?-18?%}.order-pages .list-item .iconyduixingxingshixin[data-v-0389222e]{font-size:%?28?%}.order-pages .list-item .item-btn[data-v-0389222e]{width:%?129?%;height:%?54?%}.order-pages .pay-info[data-v-0389222e]{height:%?110?%;bottom:0;height:calc(%?110?% + env(safe-area-inset-bottom) / 2);padding-bottom:calc(env(safe-area-inset-bottom) / 2)}.order-pages .pay-info .pay-btn[data-v-0389222e]{width:%?182?%;height:%?74?%}.order-pages .popup-rule[data-v-0389222e]{width:%?680?%;height:auto}.order-pages .popup-rule .rule-text[data-v-0389222e]{min-height:%?300?%;max-height:60vh}.order-pages .popup-rule .iconfont[data-v-0389222e]{font-size:%?60?%}.order-pages .popup-rule .button[data-v-0389222e]{display:flex;align-items:center;justify-content:center;margin-top:%?50?%}.order-pages .popup-rule .button .item-child[data-v-0389222e]{width:%?240?%;height:%?90?%;color:#666;background:#eee;border-radius:%?45?%;margin:0 %?20?%;display:flex;align-items:center;justify-content:center}.order-pages .popup-time .time-list[data-v-0389222e]{width:calc(100% - %?20?%);max-height:70vh;padding:%?30?% %?10?%}.order-pages .popup-time .time-list .time-item[data-v-0389222e]{width:%?162?%;height:%?110?%;color:#c7c7c7;background:#e5e5e5;border-radius:%?16?%;border:1px solid #e5e5e5;margin:%?10?%}.order-pages .popup-time .time-list .can-choose[data-v-0389222e]{color:#5a677e;background:#fff}.order-pages .popup-time .time-list .cur-check[data-v-0389222e]{color:#fff}.order-pages .popup-order-text .icon-add[data-v-0389222e]{top:%?40?%;right:%?30?%}.order-pages .popup-order-text .order-text[data-v-0389222e]{width:100%;background:#f6f6f6}.order-pages .popup-order-text .order-text .textarea[data-v-0389222e]{width:100%;height:%?360?%}.order-pages .popup-order-text .item-btn[data-v-0389222e]{width:%?600?%;height:%?80?%;margin:%?20?% auto}',""]),e.exports=t},b3bc:function(e,t,i){"use strict";i.r(t);var a=i("1ddf"),r=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(n);t["default"]=r.a},b518:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){}));var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isLoad?i("v-uni-view",{staticClass:"order-pages",style:{background:e.pageColor}},[i("v-uni-view",{staticClass:"space-md"}),e.serviceTypeList&&e.serviceTypeList.length>1?i("v-uni-view",{staticClass:"ml-lg mr-lg fill-base radius-16"},[i("v-uni-view",{staticClass:"flex-between pd-lg"},[i("v-uni-view",{staticClass:"f-title c-title text-bold"},[e._v("服务方式")]),i("v-uni-view",{staticClass:"flex-center"},e._l(e.serviceTypeList,(function(t,a){return i("v-uni-view",{key:a,staticClass:"flex-center service-type-item c-caption",class:[{"ml-lg":0!=a}],style:{background:e.serviceTypeInd==a?e.primaryColor:"",color:e.serviceTypeInd==a?"#fff":""},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toChangeItem(a,3)}}},[e._v(e._s(t.title))])})),1)],1)],1):e._e(),e.orderInfo.order_goods&&e.orderInfo.order_goods.length>0?i("v-uni-view",[1===e.serviceTypeList[e.serviceTypeInd].id?[i("v-uni-view",{staticClass:"store-info ml-lg mr-lg pd-lg  fill-base radius-16",class:[{"mt-md":e.serviceTypeList&&e.serviceTypeList.length>1}]},[i("v-uni-view",{staticClass:"f-mini-title c-title text-bold pb-md"},[e._v(e._s(e.orderInfo.store_info.title))]),i("v-uni-view",{staticClass:"flex-between"},[i("v-uni-view",{staticClass:"flex-y-center",staticStyle:{color:"#303030"}},[i("i",{staticClass:"iconfont icondizhi1 mr-sm"}),i("v-uni-view",{staticClass:"c-title flex-1 mr-md"},[i("span",[e._v(e._s(e.orderInfo.store_info.address||"暂未设置门店地址"))]),e.orderInfo.store_info.address?i("span",{staticClass:"copy-btn span radius-5 f-icontext ml-sm",style:{color:e.primaryColor,borderColor:e.primaryColor},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toCopy(e.orderInfo.store_info.address)}}},[e._v("复制")]):e._e()])],1),i("v-uni-view",{staticClass:"flex-center"},[e.orderInfo.store_info.phone?i("v-uni-view",{staticClass:"item-icon rel flex-center radius-16",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.$util.goUrl({url:e.orderInfo.store_info.phone,openType:"call"})}}},[i("v-uni-view",{staticClass:"item-icon radius-16 abs",style:{background:e.primaryColor}}),i("i",{staticClass:"iconfont icondadianhua_1",style:{color:e.primaryColor}})],1):e._e(),e.orderInfo.store_info.address?i("v-uni-view",{staticClass:"item-icon rel flex-center radius-16 ml-md",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toMap.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"item-icon radius-16 abs",style:{background:e.primaryColor}}),i("i",{staticClass:"iconfont icondizhi_1",style:{color:e.primaryColor}})],1):e._e()],1)],1)],1),i("v-uni-view",{staticClass:"mt-md ml-lg mr-lg pl-lg pr-lg fill-base radius-16"},[i("v-uni-view",{staticClass:"flex-between b-1px-b"},[i("v-uni-view",{staticClass:"item-text flex-y-center"},[i("i",{staticClass:"iconfont icon-required c-warning"}),e._v("姓名")]),i("v-uni-input",{staticClass:"item-input flex-1",attrs:{type:"text",maxlength:"20",placeholder:e.rule[0].errorMsg},model:{value:e.form.user_name,callback:function(t){e.$set(e.form,"user_name",t)},expression:"form.user_name"}})],1),i("v-uni-view",{staticClass:"flex-between"},[i("v-uni-view",{staticClass:"item-text flex-y-center"},[i("i",{staticClass:"iconfont icon-required c-warning"}),e._v("手机号")]),i("v-uni-input",{staticClass:"item-input flex-1",attrs:{type:"text",placeholder:e.rule[1].errorMsg},model:{value:e.form.user_phone,callback:function(t){e.$set(e.form,"user_phone",t)},expression:"form.user_phone"}})],1)],1)]:e._e(),0===e.serviceTypeList[e.serviceTypeInd].id?i("v-uni-view",{staticClass:"address-info flex-center ml-lg mr-lg pd-lg fill-base radius-16",class:[{"mt-md":e.serviceTypeList&&e.serviceTypeList.length>1}],on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.$util.goUrl({url:"/user/pages/address/list?check=1"})}}},[i("v-uni-view",{staticClass:"address-icon flex-center c-base radius",style:{background:"linear-gradient(to right, "+e.subColor+", "+e.primaryColor+")"}},[i("i",{staticClass:"iconfont iconjuli"})]),i("v-uni-view",{staticClass:"flex-1 flex-between ml-md"},[i("v-uni-view",{staticClass:"max-500"},[e.orderInfo.address_info.id?[i("v-uni-view",{staticClass:"flex-y-baseline username c-title text-bold"},[e._v(e._s(e.orderInfo.address_info.user_name)),i("v-uni-view",{staticClass:"f-sm-title",staticStyle:{"margin-left":"15rpx"},style:{color:e.primaryColor}},[e._v(e._s(e.orderInfo.address_info.mobile))])],1),i("v-uni-view",{staticClass:"f-desc c-title ellipsis"},[e._v(e._s(e.orderInfo.address_info.address+" "+e.orderInfo.address_info.address_info))])]:[i("v-uni-view",{staticClass:"username c-title text-bold"},[e._v("请选择地址")])]],2),i("i",{staticClass:"iconfont icon-right"})],1)],1):e._e(),i("v-uni-view",{staticClass:"mt-md ml-lg mr-lg pl-lg pr-lg fill-base radius-16"},[i("v-uni-view",{staticClass:"flex-between pt-lg pb-lg",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toShowTime.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"f-title c-title text-bold"},[e._v("服务时间")]),i("v-uni-view",{staticClass:"flex-y-center f-paragraph c-caption ml-sm"},[i("v-uni-view",{staticClass:"c-caption mr-sm"},[e._v(e._s(e.send_info.time||"请选择预约时间"))]),i("i",{staticClass:"iconfont icon-right"})],1)],1),0===e.serviceTypeList[e.serviceTypeInd].id?i("v-uni-view",{staticClass:"flex-between pt-lg pb-lg b-1px-t"},[i("v-uni-view",{staticClass:"f-title c-title text-bold"},[e._v("出行方式")]),i("v-uni-view",{staticClass:"flex-center"},e._l(e.carTypeList,(function(t,a){return i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:0!=t.id||1==e.isBus,expression:"item.id == 0 ? isBus == 1 : true"}],key:a,staticClass:"flex-y-center",class:[{"ml-lg":0!=a}],style:{color:e.carTypeInd==a?e.primaryColor:""},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toChangeItem(a)}}},[i("i",{staticClass:"iconfont icon-xuanze mr-sm",class:[{"icon-radio-fill":e.carTypeInd==a}]}),e._v(e._s(t.title))])})),1)],1):e._e()],1),i("v-uni-view",{staticClass:"mt-md ml-lg mr-lg  fill-base radius-16"},e._l(e.orderInfo.order_goods,(function(t,a){return i("v-uni-view",{key:a,staticClass:"list-item flex-warp pd-lg",class:[{"b-1px-t":0!=a}]},[i("v-uni-view",{staticClass:"item-img radius-16"},[i("v-uni-view",{staticClass:"h5-image item-img radius-16",style:{backgroundImage:"url('"+t.cover+"')"}})],1),i("v-uni-view",{staticClass:"flex-1 ml-md"},[i("v-uni-view",{staticClass:"f-title c-title text-bold ellipsis"},[e._v(e._s(t.title))]),i("v-uni-view",{staticClass:"flex-center"},[i("v-uni-view",{staticClass:"flex-1 flex-y-center f-desc c-caption"},[i("v-uni-view",{staticClass:"f-title c-warning mr-sm"},[e._v("¥"+e._s(t.price))]),e._v("/ "+e._s(t.time_long)+"分钟")],1),t.member_info&&t.member_info.title?i("v-uni-view",{staticClass:"member-canbuy-level"},[i("v-uni-view",{staticClass:"text flex-center"},[e._v(e._s(t.member_info.title)+"专享")])],1):e._e()],1),i("v-uni-view",{staticClass:"flex-between"},[i("v-uni-view",{staticClass:"f-caption c-caption mt-sm mb-sm ellipsis",staticStyle:{"max-width":"300rpx"}},[e._v(e._s("服务"===e.$t("action.attendantName").substring(0,2)?"":"服务")+e._s(e.$t("action.attendantName"))+"："+e._s(e.orderInfo.coach_info?e.orderInfo.coach_info.coach_name:"-"))]),i("v-uni-view",{staticClass:"flex-warp"},[i("v-uni-button",{staticClass:"reduce",style:{borderColor:e.primaryColor,color:e.primaryColor},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.changeNum(-1,a)}}},[i("i",{staticClass:"iconfont icon-jian-bold"})]),i("v-uni-button",{staticClass:"addreduce clear-btn"},[e._v(e._s(t.num||0))]),i("v-uni-button",{staticClass:"add",style:{background:e.primaryColor,borderColor:e.primaryColor},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.changeNum(1,a)}}},[i("i",{staticClass:"iconfont icon-jia-bold"})])],1)],1)],1)],1)})),1),i("v-uni-view",{staticClass:"mt-md ml-lg mr-lg pl-lg pr-lg fill-base radius-16"},[i("v-uni-view",{staticClass:"flex-between pt-lg pb-lg",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.$util.goUrl({url:"/user/pages/coupon/use"})}}},[i("v-uni-view",{staticClass:"f-title c-title text-bold"},[e._v("卡券优惠")]),i("v-uni-view",{staticClass:"flex-y-center f-paragraph c-caption ml-sm"},[i("v-uni-view",{staticClass:"c-warning mr-sm"},[e._v(e._s(e.orderInfo.coupon_id?"-¥"+e.orderInfo.discount:e.orderInfo.canUseCoupon+"张可用"))]),i("i",{staticClass:"iconfont icon-right"})],1)],1),0===e.serviceTypeList[e.serviceTypeInd].id&&1===e.carTypeList[e.carTypeInd].id?[i("v-uni-view",{staticClass:"flex-between pt-lg pb-lg b-1px-t"},[i("v-uni-view",{staticClass:"f-title c-title text-bold"},[e._v("往返车费")]),i("v-uni-view",{staticClass:"flex-warp f-paragraph c-caption c-warning"},[e._v("¥"+e._s(e.orderInfo.free_fare?0:e.orderInfo.car_price)),e.orderInfo.free_fare?i("v-uni-view",{staticClass:"c-caption text-delete ml-md"},[e._v("¥"+e._s(e.orderInfo.car_price))]):e._e()],1)],1),i("v-uni-view",{staticClass:"pb-lg f-caption c-caption"},[e._v("全程共"+e._s(e.orderInfo.distance)+"，出租出行收取来回车费，"+e._s(1==e.orderInfo.car_config.day_type?"日间":"夜间")+e._s(1==e.orderInfo.car_config.day_type?e.orderInfo.car_config.start_distance:e.orderInfo.car_config.start_distance_night)+"公里内，起步"+e._s(1==e.orderInfo.car_config.day_type?e.orderInfo.car_config.start_price:e.orderInfo.car_config.start_price_night)+"元"+e._s(e.orderInfo.free_fare?"，"+e.$t("action.attendantName")+"免出行费":"")+"。"),i("span",{style:{color:e.primaryColor},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.$refs.show_car_fee_rules.open()}}},[e._v("查看计费规则")])])]:e._e()],2),i("v-uni-view",{staticClass:"mt-md ml-lg mr-lg pd-lg fill-base radius-16"},[i("v-uni-view",{staticClass:"flex-between"},[i("v-uni-view",{staticClass:"f-title c-title text-bold"},[e._v("订单备注")]),i("v-uni-view",{staticClass:"flex-y-center",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.$refs.order_text_item.open()}}},[i("v-uni-view",{staticClass:"flex-1 max-400 ellipsis f-paragraph text-right",style:{color:e.form.text?"#333":"#CECECE"}},[e._v(e._s(e.form.text||"选填,不超过100字"))]),i("i",{staticClass:"iconfont icon-right",staticStyle:{"font-size":"28rpx",color:"#C7C7CD"}})],1)],1)],1),i("v-uni-view",{staticClass:"mt-md ml-lg mr-lg fill-base radius-16"},e._l(e.payList,(function(t,a){return i("v-uni-view",{key:a,staticClass:"flex-between pt-lg pb-lg ml-lg mr-lg",class:[{"b-1px-t":0!=a}],on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toChangeItem(a,2)}}},[i("v-uni-view",{staticClass:"flex-y-center f-title c-title"},[i("i",{staticClass:"iconfont mr-md",class:t.icon,style:{color:1==t.id?e.primaryColor:"",fontSize:"50rpx"}}),e._v(e._s(t.title)),2==t.id?i("v-uni-view",{staticClass:"f-paragraph c-caption ml-md"},[e._v("余额"+e._s(e.balance||0)+"元")]):e._e()],1),i("v-uni-view",{staticClass:"flex-y-center c-caption",style:{color:e.payInd==a?e.primaryColor:""}},[i("i",{staticClass:"pay-icon iconfont icon-xuanze mr-sm",class:[{"icon-radio-fill":e.payInd==a}]})])],1)})),1),2==e.orderRules.order_rules_status?i("v-uni-view",{staticClass:"mt-md ml-lg mr-lg pd-lg fill-base f-paragraph c-title radius-16",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.isAgree=!e.isAgree}}},[i("v-uni-view",{staticClass:"flex-y-center",staticStyle:{height:"40rpx"}},[i("i",{staticClass:"iconfont mr-sm",class:e.isAgree?"icon-xuanze-fill":"icon-xuanze",staticStyle:{"font-size":"32rpx"},style:{color:e.isAgree?e.primaryColor:""}}),e._v("我已阅读并同意平台"),i("v-uni-view",{style:{color:e.primaryColor},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.$refs.order_rules_item.open()}}},[e._v("《下单须知》")])],1)],1):e._e(),i("v-uni-view",{staticClass:"space-max-footer"}),i("v-uni-view",{staticClass:"pay-info fix flex-between text-right pl-lg pr-lg fill-base"},[i("v-uni-view",{staticClass:"flex-y-center f-paragraph c-title text-bold ml-sm mr-lg"},[e._v("合计："),i("v-uni-view",{staticClass:"flex-y-baseline f-title c-warning"},[e._v("¥"+e._s(e.orderInfo.pay_price))])],1),i("auth",{staticStyle:{width:"182rpx"},attrs:{needAuth:e.userInfo&&(!e.userInfo.phone||!e.userInfo.nickName),must:!0,type:e.userInfo.phone?"userInfo":"phone"},on:{go:function(t){arguments[0]=t=e.$handleEvent(t),e.toPay.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"pay-btn flex-center f-paragraph c-base radius",style:{background:e.primaryColor}},[e._v("立即支付")])],1)],1)],2):i("abnor",{attrs:{tip:[{text:e.no_data_msg,color:0}],button:[{text:"去看看其他服务",type:"confirm"}],btnSize:""},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.$util.goUrl({url:"/pages/service",openType:"reLaunch"})}}}),i("uni-popup",{ref:"order_rules_item",attrs:{type:"center"}},[e.orderRules&&e.orderRules.order_rules_status?i("v-uni-view",{staticClass:"popup-rule",on:{touchmove:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=e.$handleEvent(t)}}},[i("v-uni-view",{staticClass:"fill-base pd-lg radius-26"},[i("v-uni-view",{staticClass:"f-sm-title c-title text-bold flex-center pt-md pb-lg"},[e._v("下单须知")]),i("v-uni-scroll-view",{staticStyle:{width:"100%","min-height":"15vh","max-height":"50vh"},attrs:{"scroll-y":!0}},[i("parser",{attrs:{html:e.orderRules.order_rules,"show-with-animation":!0,"lazy-load":!0},on:{linkpress:function(t){arguments[0]=t=e.$handleEvent(t),e.linkpress.apply(void 0,arguments)}}},[e._v("加载中...")])],1),1==e.orderRules.order_rules_status?i("v-uni-view",{staticClass:"button"},[i("v-uni-view",{staticClass:"item-child",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.$refs.order_rules_item.close()}}},[e._v("取消")]),i("v-uni-view",{staticClass:"item-child",style:{background:e.primaryColor,color:"#fff"},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toConfirmOrder.apply(void 0,arguments)}}},[e._v("我已知晓")])],1):e._e()],1),2==e.orderRules.order_rules_status?i("v-uni-view",{staticClass:"flex-center pd-lg",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.$refs.order_rules_item.close()}}},[i("i",{staticClass:"iconfont icon-close c-base"})]):e._e()],1):e._e()],1),i("uni-popup",{ref:"show_car_fee_rules",attrs:{type:"center",maskClick:!1}},[e.orderInfo&&e.orderInfo.car_config?i("v-uni-view",{staticClass:"popup-rule"},[i("v-uni-view",{staticClass:"fill-base pd-lg radius-26"},[i("v-uni-view",{staticClass:"f-sm-title c-title text-bold flex-center pt-md pb-lg"},[e._v("车费计算规则")]),i("v-uni-scroll-view",{staticClass:"rule-text",attrs:{"scroll-y":!0},on:{touchmove:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=e.$handleEvent(t)}}},[i("span",{staticClass:"c-title text-bold"},[e._v("日间车费")]),e._v("（"+e._s(e.orderInfo.car_config.car_price_start)+"-"+e._s(e.orderInfo.car_config.car_price_end)+"）："+e._s(e.orderInfo.car_config.start_distance)+"公里内，起步"+e._s(e.orderInfo.car_config.start_price)+"元。"),1===e.orderInfo.car_config.cash_type?i("span",[e._v("里程计价"+e._s(e.orderInfo.car_config.distance_price)+"元/公里。")]):e._e(),2===e.orderInfo.car_config.cash_type?i("span",e._l(e.orderInfo.car_config.cash_setting_day,(function(t,a){return i("span",{key:a},[e._v(e._s(0==a?e.orderInfo.car_config.start_distance:e.orderInfo.car_config.cash_setting_day[a-1].km)+"-"+e._s(t.km)+"公里，里程计价"+e._s(t.cash)+"元/公里。")])})),0):e._e(),"00:00"!=e.orderInfo.car_config.car_price_start||"24:00"!=e.orderInfo.car_config.car_price_end?i("div",{staticClass:"mt-md"},[i("span",{staticClass:"c-title text-bold"},[e._v("夜间车费")]),e._v("（"+e._s(e._f("handlePriceTime")(e.orderInfo.car_config))+"）："+e._s(e.orderInfo.car_config.start_distance_night)+"公里内，起步"+e._s(e.orderInfo.car_config.start_price_night)+"元。"),1===e.orderInfo.car_config.cash_type_night?i("span",[e._v("里程计价"+e._s(e.orderInfo.car_config.distance_price_night)+"元/公里。")]):e._e(),2===e.orderInfo.car_config.cash_type_night?i("span",e._l(e.orderInfo.car_config.cash_setting_night,(function(t,a){return i("span",{key:a},[e._v(e._s(0==a?e.orderInfo.car_config.start_distance_night:e.orderInfo.car_config.cash_setting_night[a-1].km)+"-"+e._s(t.km)+"公里，里程计价"+e._s(t.cash)+"元/公里。")])})),0):e._e()]):e._e()])],1),i("v-uni-view",{staticClass:"flex-center pd-lg",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.$refs.show_car_fee_rules.close()}}},[i("i",{staticClass:"iconfont icon-close c-base"})])],1):e._e()],1),i("uni-popup",{ref:"show_time_item",attrs:{type:"bottom"}},[i("v-uni-view",{staticClass:"popup-time fill-base"},[i("tab",{attrs:{list:e.tabList,activeIndex:1*e.activeIndex,activeColor:e.primaryColor,height:"100rpx"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.handerTabChange.apply(void 0,arguments)}}}),i("v-uni-scroll-view",{staticClass:"time-list",attrs:{"scroll-y":!0},on:{touchmove:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=e.$handleEvent(t)}}},[i("v-uni-view",{staticClass:"flex-warp"},e._l(e.timeList,(function(t,a){return i("v-uni-view",{key:a,staticClass:"time-item flex-center flex-column",class:[{"can-choose":t.status&&e.send_info.time_str!=t.time_str},{"cur-check":e.send_info.time_str==t.time_str}],style:{background:e.send_info.time_str==t.time_str?e.primaryColor:""},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toChooseTime(a)}}},[i("v-uni-view",{staticClass:"f-title"},[e._v(e._s(t.time_text))]),i("v-uni-view",{staticClass:"f-caption"},[e._v(e._s(t.status?"可预约":"不可预约"))])],1)})),1)],1),i("v-uni-view",{staticClass:"space-safe"})],1)],1),i("uni-popup",{ref:"order_text_item",attrs:{type:"bottom"}},[i("v-uni-view",{staticClass:"popup-order-text pd-lg f-paragraph c-desc fill-base radius-top-40"},[i("i",{staticClass:"iconfont icon-add c-title rotate-45 abs",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.$refs.order_text_item.close()}}}),i("v-uni-view",{staticClass:"flex-center f-sm-title c-title text-bold",staticStyle:{margin:"10rpx 0 40rpx 0"}},[e._v("订单备注")]),i("v-uni-view",{staticClass:"order-text f-caption c-caption mt-sm pd-lg radius-20"},[i("v-uni-textarea",{staticClass:"textarea f-title c-title",attrs:{maxlength:"100","placeholder-class":"f-title c-caption",placeholder:"请输入订单备注内容"},model:{value:e.form.text,callback:function(t){e.$set(e.form,"text",t)},expression:"form.text"}}),i("v-uni-view",{staticClass:"flex-between pb-sm"},[i("v-uni-view"),i("v-uni-view",[e._v(e._s(e.form.text.length>100?100:e.form.text.length)+"/100")])],1)],1),i("v-uni-view",{staticStyle:{height:"40rpx"}}),i("v-uni-view",{staticClass:"item-btn flex-center f-title c-base radius",style:{background:e.primaryColor},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.$refs.order_text_item.close()}}},[e._v("确定")]),i("v-uni-view",{staticClass:"space-safe"})],1)],1)],1):e._e()},r=[]},c995:function(e,t,i){"use strict";var a=i("03ab"),r=i.n(a);r.a}}]);