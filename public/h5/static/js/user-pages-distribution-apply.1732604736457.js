(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user-pages-distribution-apply"],{1424:function(e,t,i){var a=i("c86c");t=a(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.item-input[data-v-509e7538]{width:%?650?%;height:%?110?%;background:#f7f8fa}.item-textarea[data-v-509e7538]{width:%?690?%;height:%?360?%;background:#f7f8fa}.item-textarea .textarea[data-v-509e7538]{width:100%;height:%?270?%}.tips-info[data-v-509e7538]{width:%?690?%;background:#fef5f3}.pay-item .item-icon[data-v-509e7538]{width:%?70?%;height:%?70?%;border-radius:%?35?%}.pay-item .item-icon .iconfont[data-v-509e7538]{font-size:%?44?%}.pay-item .item-icon.wechat[data-v-509e7538]{background:#e7f9ee}.pay-item .item-icon.wechat .iconfont[data-v-509e7538]{background-image:linear-gradient(180deg,#90ee90,#32cd32 100%,#19c865 0)}.pay-item .item-icon.alipay[data-v-509e7538]{background:#e9f5fe}.pay-item .item-icon.alipay .iconfont[data-v-509e7538]{background-image:linear-gradient(180deg,#46bcff,#2587ff 100%,#1976ff 0)}.pay-item .item-title[data-v-509e7538]{color:#2e3541}',""]),e.exports=t},"81d8":function(e,t,i){"use strict";i("6a54");var a=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("aa9c"),i("bf0f"),i("18f7"),i("de6c"),i("fd3c"),i("c223");var n=a(i("5de6")),r=a(i("9b1b")),l=a(i("2634")),o=a(i("2fdc")),s=i("8f59"),c={components:{},data:function(){return{isLoad:!1,options:{},tipArr:{1:[{text:"您已经成功提交申请",color:0},{text:"审核将在3个工作日内出结果，请耐心等待",color:0}],2:[{text:"恭喜您，审核通过！",color:0},{text:"您已具备分销员资格，快去分享体验吧~",color:0}],3:[{text:"请联系平台管理人员询问原因",color:0}],4:[{text:"请联系平台管理人员询问失败原因",color:0}]},buttonArr:{1:[{text:"个人中心",type:"cancel"}],2:[{text:"去分享",type:"confirm"}],3:[{text:"个人中心",type:"cancel"}],4:[{text:"再次申请",type:"confirm"},{text:"个人中心",type:"cancel"}]},title:{"-1":"申请分销员",1:"等待审核",2:"",3:"取消授权",4:"申请失败"},image:{1:"https://lbqny.migugu.com/admin/public/apply_wait.png",2:"https://lbqny.migugu.com/admin/public/apply_suc.png",3:"https://lbqny.migugu.com/admin/public/apply_fail.png",4:"https://lbqny.migugu.com/admin/public/apply_fail.png"},fx_status:-1,chooseList:[{id:1,key:"reseller_threshold",title:"一级分销员"},{id:2,key:"level_reseller_threshold",title:"二级分销员"}],chooseInd:0,payList:[{id:1,icon:"icon-weixin",title:"微信支付"}],payInd:0,detail:{},form:{id:0,level_reseller_id:0,user_name:"",true_user_name:"",mobile:"",text:"",pay_reseller_type:1,pay_model:1},rule:[{name:"user_name",checkType:"isNotNull",errorMsg:"请输入您的姓名",regType:2},{name:"true_user_name",checkType:"isNotNull",errorMsg:"请输入您的真实姓名",regType:2},{name:"mobile",checkType:"isMobile",errorMsg:"请输入常用手机号码"}],lockTap:!1}},computed:(0,s.mapState)({configInfo:function(e){return e.config.configInfo}}),onLoad:function(e){var t=this;return(0,o.default)((0,l.default)().mark((function i(){var a,n,r,o,s,c;return(0,l.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.$util.showLoading(),a=e.level_reseller_id,n=void 0===a?0:a,r=e.admin_id,o=void 0===r?0:r,e.level_reseller_id=1*n,e.admin_id=1*o,t.options=e,t.form.level_reseller_id=n,t.form.admin_id=o,i.next=9,t.initIndex();case 9:s=t.title,c=t.fx_status,uni.setNavigationBarTitle({title:s[c]}),t.scanRecordId&&t.updateScanRecord(),t.isLoad=!0,t.$jweixin.hideOptionMenu();case 14:case"end":return i.stop()}}),i)})))()},methods:(0,r.default)((0,r.default)((0,r.default)({},(0,s.mapActions)(["getConfigInfo","getUserInfo","getMineInfo","addScanRecord","updateScanRecord"])),(0,s.mapMutations)(["updateUserItem","updateOrderItem"])),{},{initIndex:function(){var e=arguments,t=this;return(0,o.default)((0,l.default)().mark((function i(){var a,r,o,s,c,u,d,p,f,m,v,g,h,_,y,x,b;return(0,l.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.length>0&&void 0!==e[0]&&e[0],a=t.options,r=a.level_reseller_id,o=void 0===r?0:r,s=a.admin_id,c=void 0===s?0:s,t.scanRecordId,u=t.$util.getQueryString("code"),o&&!u&&t.addScanRecord({type:10,qr_id:o}),!c||o||u||t.addScanRecord({type:11,qr_id:c}),i.next=8,t.getConfigInfo();case 8:return d=t.configInfo.alipay_status,p=void 0===d?0:d,p&&1==t.payList.length&&t.payList.push({id:3,icon:"icon-alipay-fill",title:"支付宝支付"}),i.next=12,Promise.all([t.$api.mine.getPayResellerData(),t.$api.mine.resellerInfo()]);case 12:if(f=i.sent,m=(0,n.default)(f,2),v=m[0],g=m[1],t.detail=v,t.$util.setNavigationBarColor({bg:t.primaryColor}),g&&(!g||g.id)){i.next=21;break}return t.$util.hideAll(),i.abrupt("return");case 21:for(_ in g.level_reseller_id=g.pid,o&&(g.level_reseller_id=o),c&&(g.admin_id=c),h=t.configInfo.plugAuth.payreseller,h&&!g.pay_model&&(g.pay_model=1,g.pay_reseller_type=1),t.form)t.form[_]=g[_];y=g.status,x=g.sh_text,b=o||c||4!=y?y:-1,t.fx_status=b,4==b&&x&&(t.tipArr[4][0].text=x),t.$util.hideAll();case 32:case"end":return i.stop()}}),i)})))()},initRefresh:function(){this.initIndex(!0)},confirm:function(){var e=this;return(0,o.default)((0,l.default)().mark((function t(){var i;return(0,l.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.fx_status,4!=i){t.next=5;break}return e.fx_status=-1,uni.setNavigationBarTitle({title:"申请分销员"}),t.abrupt("return");case 5:e.$util.goUrl({url:"/user/pages/distribution/income",openType:"reLaunch"});case 6:case"end":return t.stop()}}),t)})))()},toChangeItem:function(e,t,i,a){this[e]=t,this.form[i]=a,this.lockTap=!1},validate:function(e){var t=new this.$util.Validate;this.rule.map((function(i){var a=i.name;t.add(e[a],i)}));var i=t.start();return i},submit:function(){var e=this;return(0,o.default)((0,l.default)().mark((function t(){var i,a,n,r,o,s,c,u,d;return(0,l.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.$util.deepCopy(e.form),a=e.validate(i),!a){t.next=5;break}return e.$util.showToast({title:a}),t.abrupt("return");case 5:if(!e.lockTap){t.next=7;break}return t.abrupt("return");case 7:if(e.lockTap=!0,e.$util.showLoading(),i.text=i.text.length>300?i.text.substring(0,300):i.text,n=e.configInfo.plugAuth.payreseller,n||(delete i.pay_reseller_type,delete i.pay_model),!n){t.next=50;break}return r=i.pay_model,t.prev=14,t.next=17,e.$api.mine.applyReseller(i);case 17:if(o=t.sent,s=o.order_id,c=o.pay_list,e.$util.hideAll(),!c){t.next=41;break}if(3==r&&(c={orderInfo:c,provider:"alipay"}),3!=r){t.next=30;break}return u=e.autograph,d="?autograph=".concat(u,"&id=").concat(s,"&aliptype=3"),c=Object.assign({},c,{order_id:s,page_url:"is_fx",alipay_params:d}),e.updateOrderItem({key:"alipayOrderParams",val:c}),e.$util.goUrl({url:"/user/pages/alipay-result".concat(d),openType:"redirectTo"}),t.abrupt("return");case 30:return t.prev=30,t.next=33,e.$util.pay(c);case 33:e.$util.showToast({title:"支付成功"}),setTimeout((function(){e.getMineInfo(),e.lockTap=!1,e.$util.goUrl({url:"/user/pages/distribution/pay-suc",openType:"redirectTo"})}),1e3),t.next=41;break;case 37:return t.prev=37,t.t0=t["catch"](30),e.lockTap=!1,t.abrupt("return");case 41:e.$util.showToast({title:"支付成功"}),setTimeout((function(){e.getMineInfo(),e.lockTap=!1,e.$util.goUrl({url:"/user/pages/distribution/pay-suc",openType:"redirectTo"})}),1e3),t.next=48;break;case 45:t.prev=45,t.t1=t["catch"](14),setTimeout((function(){e.lockTap=!1,e.$util.hideAll()}),1e3);case 48:t.next=61;break;case 50:return t.prev=50,t.next=53,e.$api.mine.applyReseller(i);case 53:e.$util.hideAll(),e.$util.showToast({title:"提交成功"}),setTimeout((function(){getCurrentPages().length>1&&e.$util.back(),e.$util.goUrl({url:"/user/pages/apply-result?type=2",openType:"redirectTo"})}),1e3),t.next=61;break;case 58:t.prev=58,t.t2=t["catch"](50),setTimeout((function(){e.lockTap=!1,e.$util.hideAll()}),2e3);case 61:case"end":return t.stop()}}),t,null,[[14,45],[30,37],[50,58]])})))()}})};t.default=c},d56b:function(e,t,i){"use strict";i.r(t);var a=i("fefb"),n=i("d954");for(var r in n)["default"].indexOf(r)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(r);i("e379");var l=i("828b"),o=Object(l["a"])(n["default"],a["b"],a["c"],!1,null,"509e7538",null,!1,a["a"],void 0);t["default"]=o.exports},d954:function(e,t,i){"use strict";i.r(t);var a=i("81d8"),n=i.n(a);for(var r in a)["default"].indexOf(r)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(r);t["default"]=n.a},e379:function(e,t,i){"use strict";var a=i("fcab"),n=i.n(a);n.a},fcab:function(e,t,i){var a=i("1424");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("967d").default;n("2b2ac534",a,!0,{sourceMap:!1,shadowMode:!1})},fefb:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){}));var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isLoad?i("v-uni-view",{staticClass:"apply-pages",style:{background:(e.options.level_reseller_id||e.options.admin_id)&&-1!=e.fx_status||!e.options.level_reseller_id&&!e.options.admin_id&&[1,2,3].includes(e.fx_status)?"":e.pageColor}},[(e.options.level_reseller_id||e.options.admin_id)&&-1!=e.fx_status||!e.options.level_reseller_id&&!e.options.admin_id&&[1,2,3].includes(e.fx_status)?i("v-uni-view",{staticClass:"page-height"},[i("abnor",{attrs:{percent:"150%",title:e.title[e.fx_status],tip:e.tipArr[e.fx_status],button:e.buttonArr[e.fx_status],image:e.image[e.fx_status],tipMax:4==e.fx_status?"690rpx":""},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.confirm.apply(void 0,arguments)},cancel:function(t){arguments[0]=t=e.$handleEvent(t),e.$util.goUrl({url:"/pages/mine",openType:"reLaunch"})}}})],1):i("v-uni-view",[i("v-uni-view",{staticClass:"fill-base pd-lg"},[i("v-uni-view",{staticClass:"f-mini-title c-title text-bold"},[e._v("填写分销资格申请表单")]),i("v-uni-view",{staticClass:"f-mini-title c-title text-bold mt-lg pt-sm"},[e._v("您的姓名")]),i("v-uni-input",{staticClass:"item-input radius-16 mt-lg pl-md pr-md",attrs:{type:"text",maxlength:"20","placeholder-style":"color:#B5B9C0",placeholder:e.rule[0].errorMsg},model:{value:e.form.user_name,callback:function(t){e.$set(e.form,"user_name",t)},expression:"form.user_name"}}),i("v-uni-view",{staticClass:"f-mini-title c-title text-bold mt-lg pt-sm"},[e._v("真实姓名")]),i("v-uni-input",{staticClass:"item-input radius-16 mt-lg pl-md pr-md",attrs:{type:"text",maxlength:"10","placeholder-style":"color:#B5B9C0",placeholder:e.rule[1].errorMsg},model:{value:e.form.true_user_name,callback:function(t){e.$set(e.form,"true_user_name",t)},expression:"form.true_user_name"}}),i("v-uni-view",{staticClass:"f-mini-title c-title text-bold mt-lg pt-sm"},[e._v("手机号码")]),i("v-uni-input",{staticClass:"item-input radius-16 mt-lg pl-md pr-md",attrs:{type:"text",maxlength:"11","placeholder-style":"color:#B5B9C0",placeholder:e.rule[2].errorMsg},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}}),i("v-uni-view",{staticClass:"f-mini-title c-title text-bold mt-lg pt-sm"},[e._v("备注信息")]),i("v-uni-view",{staticClass:"item-textarea pd-lg radius-16 mt-lg"},[i("v-uni-textarea",{staticClass:"textarea",attrs:{maxlength:"300",placeholder:"输入备注信息","placeholder-style":"color:#B5B9C0"},model:{value:e.form.text,callback:function(t){e.$set(e.form,"text",t)},expression:"form.text"}}),i("v-uni-view",{staticClass:"text-right f-paragraph",staticStyle:{color:"#5A677E"}},[e._v(e._s(e.form.text.length>300?300:e.form.text.length)+"/300")])],1),e.configInfo.plugAuth.payreseller?[i("v-uni-view",{staticClass:"f-mini-title c-title text-bold mt-lg pt-sm"},[e._v("选择级别")]),e._l(e.chooseList,(function(t,a){return i("v-uni-view",{key:a,staticClass:"flex-between mt-lg",on:{click:function(i){i.stopPropagation(),arguments[0]=i=e.$handleEvent(i),e.toChangeItem("chooseInd",a,"pay_reseller_type",t.id)}}},[i("v-uni-view",{staticClass:"flex-y-center"},[e._v(e._s(t.title)),i("v-uni-view",{staticClass:"text-bold ml-sm",staticStyle:{color:"#F1381F"}},[e._v("¥"+e._s(e.detail[t.key]))])],1),i("i",{staticClass:"pay-icon iconfont c-caption",class:[{"icon-xuanze":e.chooseInd!=a},{"icon-radio-fill":e.chooseInd==a}],style:{color:e.chooseInd==a?e.primaryColor:"#BEC3CE"}})],1)})),i("v-uni-view",{staticClass:"tips-info flex-center pd-lg mt-lg f-desc radius-16",staticStyle:{color:"#F96246"}},[i("i",{staticClass:"iconfont icontixingshixin mr-sm"}),e._v("成为分销员可以邀请用户下单，也可以邀请用户成为分销员")]),e._l(e.payList,(function(t,a){return i("v-uni-view",{key:a,staticClass:"flex-between mt-lg",on:{click:function(i){i.stopPropagation(),arguments[0]=i=e.$handleEvent(i),e.toChangeItem("payInd",a,"pay_model",t.id)}}},[i("v-uni-view",{staticClass:"pay-item flex-y-center"},[i("v-uni-view",{staticClass:"item-icon flex-center mr-md",class:[{wechat:1==t.id},{alipay:3==t.id}]},[i("i",{staticClass:"iconfont icon-font-color",class:[t.icon]})]),i("v-uni-view",{staticClass:"flex-y-baseline item-title"},[e._v(e._s(t.title))])],1),i("i",{staticClass:"pay-icon iconfont c-caption",class:[{"icon-xuanze":e.payInd!=a},{"icon-radio-fill":e.payInd==a}],style:{color:e.payInd==a?e.primaryColor:"#BEC3CE"}})],1)}))]:e._e()],2),i("v-uni-view",{staticClass:"space-max-footer"}),i("fix-bottom-button",{attrs:{text:[{text:"确定申请",type:"confirm",isAuth:!0}],bgColor:"#fff"},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}})],1)],1):e._e()},n=[]}}]);