(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user-pages-coupon-poster"],{"010b":function(t,e,r){"use strict";r("6a54");var a=r("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(r("5de6")),i=a(r("9b1b")),o=a(r("2634")),s=a(r("2fdc")),u=r("8f59"),c={components:{},props:{},data:function(){return{confirmText:"长按上图保存图片",options:"",src:""}},computed:(0,u.mapState)({configInfo:function(t){return t.config.configInfo}}),onLoad:function(t){var e=this;return(0,s.default)((0,o.default)().mark((function r(){var a;return(0,o.default)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.options=t,e.$util.setNavigationBarColor({bg:e.primaryColor}),e.widget=e.$refs.canvas,e.$util.showLoading(),e.$util.setNavigationBarColor({bg:e.primaryColor}),a=e,setTimeout((function(){a.canvase()}),1e3);case 7:case"end":return r.stop()}}),r)})))()},methods:(0,i.default)((0,i.default)({},(0,u.mapActions)(["user/report"])),{},{canvase:function(){var t=this;return(0,s.default)((0,o.default)().mark((function e(){var r,a,n,i,s,u,c,f,p,l;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t,a=t.userInfo,n=a.nickName,i=a.avatarUrl,s=t.$util.getPage(-1),s.qr_code,u=s.detail,c=u.share_img,n=n.substring(0,10),f=12*n.length+33,p=t.configInfo.app_name,l={css:{width:"652rpx",height:"966rpx",background:"#fff",borderRadius:"20rpx"},views:[{type:"image",src:c,css:{width:"652rpx",height:"652rpx",objectFit:"cover",position:"absolute",top:"0rpx",left:"0rpx",borderRadius:"20rpx 20rpx 0 0"}},{type:"text",text:n,css:{width:f,borderRadius:"27rpx",position:"absolute",top:"30rpx",left:"67rpx",fontSize:"26rpx",background:"#555",color:"#fff",textAlign:"center",padding:"7rpx 5rpx 12rpx 30rpx"}},{type:"image",src:i,css:{position:"absolute",width:"64rpx",height:"64rpx",objectFit:"cover",top:"23rpx",left:"33rpx",borderRadius:"32rpx",border:"3rpx solid #fff"}},{type:"text",text:p,css:{position:"absolute",bottom:"176rpx",left:"50rpx",fontSize:"28rpx",color:"#333",textAlign:"left"}},{type:"text",text:"微信扫一扫立即使用",css:{position:"absolute",bottom:"122rpx",left:"50rpx",fontSize:"28rpx",color:"#333",textAlign:"left"}},{type:"image",src:cover,css:{width:"242rpx",height:"242rpx",position:"absolute",bottom:"40rpx",right:"45rpx",borderRadius:"121rpx"}}]},t.$refs.painter.render(l),t.$refs.painter.canvasToTempFilePathSync({fileType:"jpg",quality:1,success:function(e){r.$util.hideAll(),t.src=e.tempFilePath}});case 10:case"end":return e.stop()}}),e)})))()},extraImage:function(){var t=this;return(0,s.default)((0,o.default)().mark((function e(){var r;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.widget.canvasToTempFilePath(),r.then((function(e){t.src=e.tempFilePath}));case 2:case"end":return e.stop()}}),e)})))()},previewImage:function(){var t=this.src;this.$util.previewImage({current:t,urls:[t]})},saveImage:function(){var t=this;return(0,s.default)((0,o.default)().mark((function e(){var r,a,i,s;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$util.checkAuth({type:"writePhotosAlbum"});case 2:return r=t.src,e.next=5,uni.saveImageToPhotosAlbum({filePath:r});case 5:if(a=e.sent,i=(0,n.default)(a,2),s=i[0],i[1],!s){e.next=11;break}return e.abrupt("return");case 11:uni.showToast({icon:"none",title:"保存成功"});case 12:case"end":return e.stop()}}),e)})))()},toPreviewSave:function(){this.toConfirmPreviewSave()},toConfirmPreviewSave:function(){this.previewImage()}})};e.default=c},2192:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return a}));var a={lPainter:r("9ca4").default},n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",{style:{background:t.pageColor}},[r("v-uni-view",{staticClass:"hideCanvasView"},[r("l-painter",{ref:"painter",staticClass:"hideCanvas",attrs:{useCORS:!0}})],1),t.src?[r("v-uni-image",{staticClass:"code-img",attrs:{src:t.src},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewImage.apply(void 0,arguments)}}}),r("v-uni-view",{staticClass:"save-btn flex-center f-title c-base radius",style:{background:t.primaryColor},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toPreviewSave.apply(void 0,arguments)}}},[t._v(t._s(t.confirmText))]),r("v-uni-view",{staticClass:"space-safe"})]:t._e()],2)},i=[]},"2e75":function(t,e,r){"use strict";var a=r("31a1"),n=r.n(a);n.a},"31a1":function(t,e,r){var a=r("fe0d");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=r("967d").default;n("70ac17fb",a,!0,{sourceMap:!1,shadowMode:!1})},c7a1:function(t,e,r){"use strict";r.r(e);var a=r("010b"),n=r.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){r.d(e,t,(function(){return a[t]}))}(i);e["default"]=n.a},f01a:function(t,e,r){"use strict";r.r(e);var a=r("2192"),n=r("c7a1");for(var i in n)["default"].indexOf(i)<0&&function(t){r.d(e,t,(function(){return n[t]}))}(i);r("2e75");var o=r("828b"),s=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"30f97a66",null,!1,a["a"],void 0);e["default"]=s.exports},fe0d:function(t,e,r){var a=r("c86c");e=a(!1),e.push([t.i,".code-img[data-v-30f97a66]{width:%?652?%;height:%?966?%;margin:%?20?% auto;border-radius:%?20?%}.save-btn[data-v-30f97a66]{width:%?490?%;height:%?80?%;margin:%?68?% auto}",""]),t.exports=e}}]);