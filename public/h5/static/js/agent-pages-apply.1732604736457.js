(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["agent-pages-apply"],{"0037":function(t,e,i){"use strict";i.r(e);var n=i("c865"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},b0ef:function(t,e,i){"use strict";i.r(e);var n=i("cd44"),a=i("0037");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("bf8c");var r=i("828b"),s=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"ae7edea6",null,!1,n["a"],void 0);e["default"]=s.exports},bf8c:function(t,e,i){"use strict";var n=i("daef"),a=i.n(n);a.a},c865:function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("5c47"),i("0506"),i("fd3c");var a=n(i("9b1b")),o=n(i("2634")),r=n(i("2fdc")),s=i("8f59"),l={components:{},data:function(){return{isLoad:!1,options:{},authTime:0,timer:null,is_send:!0,cityList:[{id:3,title:"省"},{id:1,title:"城市"},{id:2,title:"区县"}],is_admin:!1,check_admin:{},form:{admin_pid:0,user_name:"",city_type:3,phone:"",short_code:"",id_card:"",city:""},rule:[{name:"user_name",checkType:"isNotNull",errorMsg:"请输入您的姓名",regType:2},{name:"phone",checkType:"isMobile",errorMsg:"请输入手机号"},{name:"id_card",checkType:"isIdCard",errorMsg:"请输入您的身份证号码"},{name:"city",checkType:"isNotNull",errorMsg:"请输入您想代理的区域"}],lockTap:!1}},computed:(0,s.mapState)({configInfo:function(t){return t.config.configInfo},mineInfo:function(t){return t.user.mineInfo}}),onLoad:function(t){var e=this;return(0,r.default)((0,o.default)().mark((function i(){var n,a;return(0,o.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=t.admin_id,a=void 0===n?0:n,t.admin_id=1*a,e.options=t,e.$util.showLoading(),i.next=6,e.initIndex();case 6:e.scanRecordId&&e.updateScanRecord(),e.$jweixin.hideOptionMenu();case 8:case"end":return i.stop()}}),i)})))()},methods:(0,a.default)((0,a.default)((0,a.default)({},(0,s.mapActions)(["getConfigInfo","getUserInfo","getMineInfo","addScanRecord","updateScanRecord"])),(0,s.mapMutations)(["updateUserItem"])),{},{initIndex:function(){var t=arguments,e=this;return(0,r.default)((0,o.default)().mark((function i(){var n,a,r,s,l,c,u,d,p,f;return(0,o.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.length>0&&void 0!==t[0]&&t[0],n=e.options.admin_id,a=void 0===n?0:n,e.scanRecordId,r=e.$util.getQueryString("code"),a&&!r&&e.addScanRecord({type:12,qr_id:a}),i.next=7,e.getConfigInfo();case 7:return i.next=9,e.$api.agent.adminAuth({admin_id:a});case 9:s=i.sent,l=s.top_name,c=void 0===l?"":l,u=s.is_admin,d=void 0===u?0:u,p=s.phone,f=void 0===p?"":p,e.is_admin=d,e.form.phone=f,e.check_admin={id:a,agent_name:c},e.is_send=!f,uni.setNavigationBarTitle({title:d?"":"招商加盟"}),e.$util.setNavigationBarColor({bg:e.primaryColor}),e.$util.hideAll(),e.isLoad=!0;case 19:case"end":return i.stop()}}),i)})))()},initRefresh:function(){this.initIndex(!0)},toResetPhone:function(){this.form.phone="",this.is_send=!0},toSend:function(){var t=this;return(0,r.default)((0,o.default)().mark((function e(){var i,n,a,r;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.authTime,!i){e.next=3;break}return e.abrupt("return");case 3:if(n=t.form.phone,a=void 0===n?"":n,null!=a&&/^(1[0-9]{10})$/.test(a)){e.next=7;break}return t.$util.showToast({title:null==a?"请输入手机号":"".concat(a," 手机号无效")}),e.abrupt("return");case 7:if(!t.lockTap){e.next=9;break}return e.abrupt("return");case 9:return t.lockTap=!0,t.$util.showLoading(),e.prev=11,e.next=14,t.$api.user.sendShortMsg({phone:a});case 14:t.$util.hideAll(),t.lockTap=!1,t.form.short_code="",r=60,t.timer=setInterval((function(){0!==r?(r--,t.authTime=r):clearInterval(t.timer)}),1e3),e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](11),setTimeout((function(){t.lockTap=!1,t.$util.hideAll()}),2e3);case 24:case"end":return e.stop()}}),e,null,[[11,21]])})))()},validate:function(t){var e=this.app_model_type,i=new this.$util.Validate;this.rule.map((function(n){var a=n.name;("id_card"!=a||1==e||t.id_card)&&i.add(t[a],n)}));var n=i.start();return n},submit:function(){var t=this;return(0,r.default)((0,o.default)().mark((function e(){var i,n,a,r,s,l;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.$util.deepCopy(t.form),n=t.validate(i),!n){e.next=5;break}return t.$util.showToast({title:n}),e.abrupt("return");case 5:if(a=t.configInfo.short_code_status,r=t.is_send,!a||!r||null!=i.short_code&&6==i.short_code.length){e.next=10;break}return t.$util.showToast({title:"请输入6位数短信验证码"}),e.abrupt("return");case 10:if(a&&r||delete i.short_code,s=t.check_admin.id,l=void 0===s?0:s,i.admin_pid=l,!t.lockTap){e.next=15;break}return e.abrupt("return");case 15:return t.lockTap=!0,t.$util.showLoading(),e.prev=17,e.next=20,t.$api.agent.agentApply(i);case 20:t.$util.hideAll(),t.$util.showToast({title:"提交成功，即将跳转个人中心"}),t.timer&&clearInterval(t.timer),setTimeout((function(){getCurrentPages().length>1&&t.$util.back(),t.$util.goUrl({url:"/pages/mine",openType:"reLaunch"})}),2e3),e.next=29;break;case 26:e.prev=26,e.t0=e["catch"](17),setTimeout((function(){t.lockTap=!1,t.$util.hideAll()}),2e3);case 29:case"end":return e.stop()}}),e,null,[[17,26]])})))()}})};e.default=l},cd44:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isLoad?i("v-uni-view",{staticClass:"apply-pages"},[t.is_admin?i("v-uni-view",{staticClass:"page-height"},[i("abnor",{attrs:{percent:"150%",title:"您已经是代理商了",tip:[{text:"快去管理订单吧",color:0}],button:[{text:"去管理",type:"confirm"}],image:"https://lbqny.migugu.com/admin/public/apply_suc.png"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.$util.goUrl({url:"/agent/pages/index?agent=1",openType:"reLaunch"})}}})],1):[i("v-uni-view",{staticClass:"apply-info-box rel",style:{background:t.primaryColor}},[i("v-uni-image",{staticClass:"bg-1 abs",attrs:{src:"https://lbqny.migugu.com/admin/anmo/apply/bg-4.png"}}),i("v-uni-image",{staticClass:"bg-2 abs",attrs:{src:"https://lbqny.migugu.com/admin/anmo/apply/bg-3.png"}}),i("v-uni-image",{staticClass:"join-us abs",attrs:{src:"https://lbqny.migugu.com/admin/anmo/apply/join-us-1.png"}}),i("v-uni-view",{staticClass:"join-us pd-lg abs",staticStyle:{"z-index":"3"}},[i("v-uni-view",{staticStyle:{height:"90rpx"}}),i("v-uni-view",{staticClass:"flex-y-center f-mini-title c-title text-bold"},[i("i",{staticClass:"iconfont icon-required c-warning"}),t._v("您的姓名")]),i("v-uni-input",{staticClass:"item-input fill-base f-mini-title c-title mt-sm pl-lg pr-lg radius-10",style:{borderColor:t.primaryColor},attrs:{type:"text",maxlength:"20","placeholder-class":"c-caption",placeholder:t.rule[0].errorMsg},model:{value:t.form.user_name,callback:function(e){t.$set(t.form,"user_name",e)},expression:"form.user_name"}}),i("v-uni-view",{staticClass:"flex-y-center mt-sm f-mini-title c-title text-bold"},[i("i",{staticClass:"iconfont icon-required c-warning"}),t._v("代理类型")]),i("v-uni-view",{staticClass:"flex-y-center mt-sm"},t._l(t.cityList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"flex-y-center f-mini-title c-title",class:[{"mr-lg pr-lg":2!=n}],style:{color:t.form.city_type==e.id?t.primaryColor:""},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.form.city_type=e.id}}},[i("i",{staticClass:"iconfont mr-sm",class:[{"icon-xuanze":t.form.city_type!=e.id},{"icon-radio-fill":t.form.city_type==e.id}]}),t._v(t._s(e.title)+"代理")])})),1),i("v-uni-view",{staticClass:"flex-y-center mt-sm f-mini-title c-title text-bold"},[i("i",{staticClass:"iconfont icon-required c-warning"}),t._v("手机号")]),i("v-uni-view",{staticClass:"item-input fill-base f-mini-title c-title mt-sm pl-lg pr-lg radius-10",staticStyle:{height:"auto","min-height":"82rpx"},style:{borderColor:t.primaryColor}},[i("v-uni-view",{staticClass:"flex-between"},[i("v-uni-input",{attrs:{disabled:!t.is_send,type:"text",maxlength:"11","placeholder-class":"c-caption",placeholder:t.rule[1].errorMsg},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}}),i("v-uni-view",[t.is_send?t._e():i("v-uni-view",{staticClass:"f-caption",style:{color:t.primaryColor},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toResetPhone.apply(void 0,arguments)}}},[t._v("更换手机号")])],1)],1),t.configInfo.short_code_status&&t.is_send?i("v-uni-view",{staticClass:"flex-between"},[i("v-uni-input",{style:{borderColor:t.primaryColor},attrs:{type:"text",maxlength:"6","placeholder-class":"c-caption",placeholder:"请输入验证码"},model:{value:t.form.short_code,callback:function(e){t.$set(t.form,"short_code",e)},expression:"form.short_code"}}),i("v-uni-view",{staticClass:"f-caption",style:{color:t.primaryColor},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toSend.apply(void 0,arguments)}}},[t._v(t._s(t.authTime>0?"重新获取("+t.authTime+"s)":"获取验证码"))])],1):t._e()],1),i("v-uni-view",{staticClass:"flex-y-center mt-sm f-mini-title c-title text-bold"},[1==t.app_model_type?i("i",{staticClass:"iconfont icon-required c-warning"}):t._e(),t._v("身份证号")]),i("v-uni-input",{staticClass:"item-input fill-base f-mini-title c-title mt-sm pl-lg pr-lg radius-10",style:{borderColor:t.primaryColor},attrs:{type:"text",maxlength:"20","placeholder-class":"c-caption",placeholder:t.rule[2].errorMsg},model:{value:t.form.id_card,callback:function(e){t.$set(t.form,"id_card",e)},expression:"form.id_card"}}),i("v-uni-view",{staticClass:"flex-y-center mt-sm f-mini-title c-title text-bold"},[i("i",{staticClass:"iconfont icon-required c-warning"}),t._v("申请加入的区域")]),i("v-uni-input",{staticClass:"item-input fill-base f-mini-title c-title mt-sm pl-lg pr-lg radius-10",style:{borderColor:t.primaryColor},attrs:{type:"text",maxlength:"50","placeholder-class":"c-caption",placeholder:t.rule[3].errorMsg},model:{value:t.form.city,callback:function(e){t.$set(t.form,"city",e)},expression:"form.city"}}),i("v-uni-view",{staticClass:"flex-y-center mt-sm f-mini-title c-title text-bold"},[t._v("推荐人")]),i("v-uni-view",{staticClass:"item-input flex-between fill-base f-mini-title c-title mt-sm pl-lg pr-md radius-10",staticStyle:{height:"82rpx"},style:{borderColor:t.primaryColor},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),!t.options.admin_id&&t.$util.goUrl({url:"/user/pages/coachbroker/agent?type=agent"})}}},[i("v-uni-view",{staticClass:"ellipsis",style:{color:t.check_admin.agent_name?"":"#999"}},[t._v(t._s(t.check_admin.agent_name||"请选择推荐人"))]),t.options.admin_id?t._e():i("i",{staticClass:"iconfont",class:[{icongengduo:!t.check_admin.agent_name},{"icon-jia-bold rotate-45":t.check_admin.agent_name}],style:{color:t.primaryColor,fontSize:t.check_admin.agent_name?"28rpx":"26rpx"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.check_admin={}}}})],1)],1),i("v-uni-image",{staticClass:"submit abs",attrs:{src:"https://lbqny.migugu.com/admin/anmo/apply/submit-1.png"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}})],1)]],2):t._e()},a=[]},daef:function(t,e,i){var n=i("df10");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("618f0b30",n,!0,{sourceMap:!1,shadowMode:!1})},df10:function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.apply-info-box[data-v-ae7edea6]{width:100%;height:%?1762?%}.apply-info-box .bg-1[data-v-ae7edea6]{width:%?750?%;height:%?1762?%;top:0;left:0;z-index:1}.apply-info-box .bg-2[data-v-ae7edea6]{width:%?750?%;height:%?575?%;top:0;left:0;z-index:3}.apply-info-box .join-us[data-v-ae7edea6]{width:%?671?%;height:%?1050?%;top:%?482?%;left:%?44?%;z-index:2}.apply-info-box .join-us .icon-required[data-v-ae7edea6]{font-size:%?28?%}.apply-info-box .join-us .item-input[data-v-ae7edea6]{height:%?74?%;border:%?4?% solid #069f5e}.apply-info-box .join-us .item-input .flex-between[data-v-ae7edea6]{height:%?74?%}.apply-info-box .join-us .item-input.text[data-v-ae7edea6]{height:%?82?%}.apply-info-box .submit[data-v-ae7edea6]{width:%?662?%;height:%?93?%;top:%?1580?%;left:%?47?%;z-index:2}',""]),t.exports=e}}]);